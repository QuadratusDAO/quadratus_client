var vg=Object.defineProperty;var _g=(t,e,r)=>e in t?vg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var N=(t,e,r)=>(_g(t,typeof e!="symbol"?e+"":e,r),r);import{g as pu,B as ue,a as pn,C as ch,b as qe,s as ma,c as Ke,d as Eg,v as dc,t as Sg,f as Ag,e as Oi,p as Rt,r as Na,i as xn,m as Tg,h as Ze,j as fh,k as qr,l as ea,n as Rg,o as Ku,u as uh,q as Pg,w as ad,x as Fr,y as kg,z as Da,A as lh,D as Mg,E as Cg,P as od,T as Ig,S as Bg}from"./index-DXOABXeB.js";function Ug(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}const La=()=>{throw new Error("Unimplemented")};globalThis.crypto??(globalThis.crypto={});var rh;(rh=globalThis.crypto).subtle??(rh.subtle={});var nh;(nh=globalThis.crypto.subtle).generateKey??(nh.generateKey=La);var ih;(ih=globalThis.crypto.subtle).importKey??(ih.importKey=La);var sh;(sh=globalThis.crypto.subtle).exportKey??(sh.exportKey=La);var ah;(ah=globalThis.crypto.subtle).digest??(ah.digest=La);var oh;(oh=globalThis.crypto.subtle).sign??(oh.sign=La);function dh(t,e){return function(){return t.apply(e,arguments)}}const{toString:Og}=Object.prototype,{getPrototypeOf:zu}=Object,hc=(t=>e=>{const r=Og.call(e);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),zn=t=>(t=t.toLowerCase(),e=>hc(e)===t),pc=t=>e=>typeof e===t,{isArray:Ls}=Array,wa=pc("undefined");function Ng(t){return t!==null&&!wa(t)&&t.constructor!==null&&!wa(t.constructor)&&fn(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const hh=zn("ArrayBuffer");function Dg(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&hh(t.buffer),e}const Lg=pc("string"),fn=pc("function"),ph=pc("number"),xc=t=>t!==null&&typeof t=="object",$g=t=>t===!0||t===!1,So=t=>{if(hc(t)!=="object")return!1;const e=zu(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},qg=zn("Date"),Fg=zn("File"),Hg=zn("Blob"),Kg=zn("FileList"),zg=t=>xc(t)&&fn(t.pipe),jg=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||fn(t.append)&&((e=hc(t))==="formdata"||e==="object"&&fn(t.toString)&&t.toString()==="[object FormData]"))},Gg=zn("URLSearchParams"),Wg=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function $a(t,e,{allOwnKeys:r=!1}={}){if(t===null||typeof t>"u")return;let n,i;if(typeof t!="object"&&(t=[t]),Ls(t))for(n=0,i=t.length;n<i;n++)e.call(null,t[n],n,t);else{const s=r?Object.getOwnPropertyNames(t):Object.keys(t),a=s.length;let o;for(n=0;n<a;n++)o=s[n],e.call(null,t[o],o,t)}}function xh(t,e){e=e.toLowerCase();const r=Object.keys(t);let n=r.length,i;for(;n-- >0;)if(i=r[n],e===i.toLowerCase())return i;return null}const yh=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:pu,gh=t=>!wa(t)&&t!==yh;function xu(){const{caseless:t}=gh(this)&&this||{},e={},r=(n,i)=>{const s=t&&xh(e,i)||i;So(e[s])&&So(n)?e[s]=xu(e[s],n):So(n)?e[s]=xu({},n):Ls(n)?e[s]=n.slice():e[s]=n};for(let n=0,i=arguments.length;n<i;n++)arguments[n]&&$a(arguments[n],r);return e}const Vg=(t,e,r,{allOwnKeys:n}={})=>($a(e,(i,s)=>{r&&fn(i)?t[s]=dh(i,r):t[s]=i},{allOwnKeys:n}),t),Jg=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),Yg=(t,e,r,n)=>{t.prototype=Object.create(e.prototype,n),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),r&&Object.assign(t.prototype,r)},Xg=(t,e,r,n)=>{let i,s,a;const o={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),s=i.length;s-- >0;)a=i[s],(!n||n(a,t,e))&&!o[a]&&(e[a]=t[a],o[a]=!0);t=r!==!1&&zu(t)}while(t&&(!r||r(t,e))&&t!==Object.prototype);return e},Zg=(t,e,r)=>{t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=e.length;const n=t.indexOf(e,r);return n!==-1&&n===r},Qg=t=>{if(!t)return null;if(Ls(t))return t;let e=t.length;if(!ph(e))return null;const r=new Array(e);for(;e-- >0;)r[e]=t[e];return r},eb=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&zu(Uint8Array)),tb=(t,e)=>{const n=(t&&t[Symbol.iterator]).call(t);let i;for(;(i=n.next())&&!i.done;){const s=i.value;e.call(t,s[0],s[1])}},rb=(t,e)=>{let r;const n=[];for(;(r=t.exec(e))!==null;)n.push(r);return n},nb=zn("HTMLFormElement"),ib=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,i){return n.toUpperCase()+i}),cd=(({hasOwnProperty:t})=>(e,r)=>t.call(e,r))(Object.prototype),sb=zn("RegExp"),bh=(t,e)=>{const r=Object.getOwnPropertyDescriptors(t),n={};$a(r,(i,s)=>{let a;(a=e(i,s,t))!==!1&&(n[s]=a||i)}),Object.defineProperties(t,n)},ab=t=>{bh(t,(e,r)=>{if(fn(t)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=t[r];if(fn(n)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},ob=(t,e)=>{const r={},n=i=>{i.forEach(s=>{r[s]=!0})};return Ls(t)?n(t):n(String(t).split(e)),r},cb=()=>{},fb=(t,e)=>(t=+t,Number.isFinite(t)?t:e),vf="abcdefghijklmnopqrstuvwxyz",fd="0123456789",mh={DIGIT:fd,ALPHA:vf,ALPHA_DIGIT:vf+vf.toUpperCase()+fd},ub=(t=16,e=mh.ALPHA_DIGIT)=>{let r="";const{length:n}=e;for(;t--;)r+=e[Math.random()*n|0];return r};function lb(t){return!!(t&&fn(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const db=t=>{const e=new Array(10),r=(n,i)=>{if(xc(n)){if(e.indexOf(n)>=0)return;if(!("toJSON"in n)){e[i]=n;const s=Ls(n)?[]:{};return $a(n,(a,o)=>{const c=r(a,i+1);!wa(c)&&(s[o]=c)}),e[i]=void 0,s}}return n};return r(t,0)},hb=zn("AsyncFunction"),pb=t=>t&&(xc(t)||fn(t))&&fn(t.then)&&fn(t.catch),ce={isArray:Ls,isArrayBuffer:hh,isBuffer:Ng,isFormData:jg,isArrayBufferView:Dg,isString:Lg,isNumber:ph,isBoolean:$g,isObject:xc,isPlainObject:So,isUndefined:wa,isDate:qg,isFile:Fg,isBlob:Hg,isRegExp:sb,isFunction:fn,isStream:zg,isURLSearchParams:Gg,isTypedArray:eb,isFileList:Kg,forEach:$a,merge:xu,extend:Vg,trim:Wg,stripBOM:Jg,inherits:Yg,toFlatObject:Xg,kindOf:hc,kindOfTest:zn,endsWith:Zg,toArray:Qg,forEachEntry:tb,matchAll:rb,isHTMLForm:nb,hasOwnProperty:cd,hasOwnProp:cd,reduceDescriptors:bh,freezeMethods:ab,toObjectSet:ob,toCamelCase:ib,noop:cb,toFiniteNumber:fb,findKey:xh,global:yh,isContextDefined:gh,ALPHABET:mh,generateString:ub,isSpecCompliantForm:lb,toJSONObject:db,isAsyncFn:hb,isThenable:pb};function dt(t,e,r,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),r&&(this.config=r),n&&(this.request=n),i&&(this.response=i)}ce.inherits(dt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ce.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const wh=dt.prototype,vh={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{vh[t]={value:t}});Object.defineProperties(dt,vh);Object.defineProperty(wh,"isAxiosError",{value:!0});dt.from=(t,e,r,n,i,s)=>{const a=Object.create(wh);return ce.toFlatObject(t,a,function(c){return c!==Error.prototype},o=>o!=="isAxiosError"),dt.call(a,t.message,e,r,n,i),a.cause=t,a.name=t.name,s&&Object.assign(a,s),a};const xb=null;function yu(t){return ce.isPlainObject(t)||ce.isArray(t)}function _h(t){return ce.endsWith(t,"[]")?t.slice(0,-2):t}function ud(t,e,r){return t?t.concat(e).map(function(i,s){return i=_h(i),!r&&s?"["+i+"]":i}).join(r?".":""):e}function yb(t){return ce.isArray(t)&&!t.some(yu)}const gb=ce.toFlatObject(ce,{},null,function(e){return/^is[A-Z]/.test(e)});function yc(t,e,r){if(!ce.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,r=ce.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(R,E){return!ce.isUndefined(E[R])});const n=r.metaTokens,i=r.visitor||h,s=r.dots,a=r.indexes,c=(r.Blob||typeof Blob<"u"&&Blob)&&ce.isSpecCompliantForm(e);if(!ce.isFunction(i))throw new TypeError("visitor must be a function");function u(M){if(M===null)return"";if(ce.isDate(M))return M.toISOString();if(!c&&ce.isBlob(M))throw new dt("Blob is not supported. Use a Buffer instead.");return ce.isArrayBuffer(M)||ce.isTypedArray(M)?c&&typeof Blob=="function"?new Blob([M]):ue.from(M):M}function h(M,R,E){let L=M;if(M&&!E&&typeof M=="object"){if(ce.endsWith(R,"{}"))R=n?R:R.slice(0,-2),M=JSON.stringify(M);else if(ce.isArray(M)&&yb(M)||(ce.isFileList(M)||ce.endsWith(R,"[]"))&&(L=ce.toArray(M)))return R=_h(R),L.forEach(function(z,D){!(ce.isUndefined(z)||z===null)&&e.append(a===!0?ud([R],D,s):a===null?R:R+"[]",u(z))}),!1}return yu(M)?!0:(e.append(ud(E,R,s),u(M)),!1)}const p=[],m=Object.assign(gb,{defaultVisitor:h,convertValue:u,isVisitable:yu});function P(M,R){if(!ce.isUndefined(M)){if(p.indexOf(M)!==-1)throw Error("Circular reference detected in "+R.join("."));p.push(M),ce.forEach(M,function(L,W){(!(ce.isUndefined(L)||L===null)&&i.call(e,L,ce.isString(W)?W.trim():W,R,m))===!0&&P(L,R?R.concat(W):[W])}),p.pop()}}if(!ce.isObject(t))throw new TypeError("data must be an object");return P(t),e}function ld(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function ju(t,e){this._pairs=[],t&&yc(t,this,e)}const Eh=ju.prototype;Eh.append=function(e,r){this._pairs.push([e,r])};Eh.toString=function(e){const r=e?function(n){return e.call(this,n,ld)}:ld;return this._pairs.map(function(i){return r(i[0])+"="+r(i[1])},"").join("&")};function bb(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Sh(t,e,r){if(!e)return t;const n=r&&r.encode||bb,i=r&&r.serialize;let s;if(i?s=i(e,r):s=ce.isURLSearchParams(e)?e.toString():new ju(e,r).toString(n),s){const a=t.indexOf("#");a!==-1&&(t=t.slice(0,a)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}let dd=class{constructor(){this.handlers=[]}use(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){ce.forEach(this.handlers,function(n){n!==null&&e(n)})}};const Ah={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},mb=typeof URLSearchParams<"u"?URLSearchParams:ju,wb=typeof FormData<"u"?FormData:null,vb=typeof Blob<"u"?Blob:null,_b={isBrowser:!0,classes:{URLSearchParams:mb,FormData:wb,Blob:vb},protocols:["http","https","file","blob","url","data"]},Th=typeof window<"u"&&typeof document<"u",Eb=(t=>Th&&["ReactNative","NativeScript","NS"].indexOf(t)<0)(typeof navigator<"u"&&navigator.product),Sb=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Ab=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Th,hasStandardBrowserEnv:Eb,hasStandardBrowserWebWorkerEnv:Sb},Symbol.toStringTag,{value:"Module"})),$n={...Ab,..._b};function Tb(t,e){return yc(t,new $n.classes.URLSearchParams,Object.assign({visitor:function(r,n,i,s){return $n.isNode&&ce.isBuffer(r)?(this.append(n,r.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function Rb(t){return ce.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function Pb(t){const e={},r=Object.keys(t);let n;const i=r.length;let s;for(n=0;n<i;n++)s=r[n],e[s]=t[s];return e}function Rh(t){function e(r,n,i,s){let a=r[s++];if(a==="__proto__")return!0;const o=Number.isFinite(+a),c=s>=r.length;return a=!a&&ce.isArray(i)?i.length:a,c?(ce.hasOwnProp(i,a)?i[a]=[i[a],n]:i[a]=n,!o):((!i[a]||!ce.isObject(i[a]))&&(i[a]=[]),e(r,n,i[a],s)&&ce.isArray(i[a])&&(i[a]=Pb(i[a])),!o)}if(ce.isFormData(t)&&ce.isFunction(t.entries)){const r={};return ce.forEachEntry(t,(n,i)=>{e(Rb(n),i,r,0)}),r}return null}function kb(t,e,r){if(ce.isString(t))try{return(e||JSON.parse)(t),ce.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}const Gu={transitional:Ah,adapter:["xhr","http"],transformRequest:[function(e,r){const n=r.getContentType()||"",i=n.indexOf("application/json")>-1,s=ce.isObject(e);if(s&&ce.isHTMLForm(e)&&(e=new FormData(e)),ce.isFormData(e))return i?JSON.stringify(Rh(e)):e;if(ce.isArrayBuffer(e)||ce.isBuffer(e)||ce.isStream(e)||ce.isFile(e)||ce.isBlob(e))return e;if(ce.isArrayBufferView(e))return e.buffer;if(ce.isURLSearchParams(e))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let o;if(s){if(n.indexOf("application/x-www-form-urlencoded")>-1)return Tb(e,this.formSerializer).toString();if((o=ce.isFileList(e))||n.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return yc(o?{"files[]":e}:e,c&&new c,this.formSerializer)}}return s||i?(r.setContentType("application/json",!1),kb(e)):e}],transformResponse:[function(e){const r=this.transitional||Gu.transitional,n=r&&r.forcedJSONParsing,i=this.responseType==="json";if(e&&ce.isString(e)&&(n&&!this.responseType||i)){const a=!(r&&r.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(o){if(a)throw o.name==="SyntaxError"?dt.from(o,dt.ERR_BAD_RESPONSE,this,null,this.response):o}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:$n.classes.FormData,Blob:$n.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ce.forEach(["delete","get","head","post","put","patch"],t=>{Gu.headers[t]={}});const Wu=Gu,Mb=ce.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Cb=t=>{const e={};let r,n,i;return t&&t.split(`
`).forEach(function(a){i=a.indexOf(":"),r=a.substring(0,i).trim().toLowerCase(),n=a.substring(i+1).trim(),!(!r||e[r]&&Mb[r])&&(r==="set-cookie"?e[r]?e[r].push(n):e[r]=[n]:e[r]=e[r]?e[r]+", "+n:n)}),e},hd=Symbol("internals");function ta(t){return t&&String(t).trim().toLowerCase()}function Ao(t){return t===!1||t==null?t:ce.isArray(t)?t.map(Ao):String(t)}function Ib(t){const e=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(t);)e[n[1]]=n[2];return e}const Bb=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function _f(t,e,r,n,i){if(ce.isFunction(n))return n.call(this,e,r);if(i&&(e=r),!!ce.isString(e)){if(ce.isString(n))return e.indexOf(n)!==-1;if(ce.isRegExp(n))return n.test(e)}}function Ub(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,r,n)=>r.toUpperCase()+n)}function Ob(t,e){const r=ce.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(t,n+r,{value:function(i,s,a){return this[n].call(this,e,i,s,a)},configurable:!0})})}class gc{constructor(e){e&&this.set(e)}set(e,r,n){const i=this;function s(o,c,u){const h=ta(c);if(!h)throw new Error("header name must be a non-empty string");const p=ce.findKey(i,h);(!p||i[p]===void 0||u===!0||u===void 0&&i[p]!==!1)&&(i[p||c]=Ao(o))}const a=(o,c)=>ce.forEach(o,(u,h)=>s(u,h,c));return ce.isPlainObject(e)||e instanceof this.constructor?a(e,r):ce.isString(e)&&(e=e.trim())&&!Bb(e)?a(Cb(e),r):e!=null&&s(r,e,n),this}get(e,r){if(e=ta(e),e){const n=ce.findKey(this,e);if(n){const i=this[n];if(!r)return i;if(r===!0)return Ib(i);if(ce.isFunction(r))return r.call(this,i,n);if(ce.isRegExp(r))return r.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,r){if(e=ta(e),e){const n=ce.findKey(this,e);return!!(n&&this[n]!==void 0&&(!r||_f(this,this[n],n,r)))}return!1}delete(e,r){const n=this;let i=!1;function s(a){if(a=ta(a),a){const o=ce.findKey(n,a);o&&(!r||_f(n,n[o],o,r))&&(delete n[o],i=!0)}}return ce.isArray(e)?e.forEach(s):s(e),i}clear(e){const r=Object.keys(this);let n=r.length,i=!1;for(;n--;){const s=r[n];(!e||_f(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const r=this,n={};return ce.forEach(this,(i,s)=>{const a=ce.findKey(n,s);if(a){r[a]=Ao(i),delete r[s];return}const o=e?Ub(s):String(s).trim();o!==s&&delete r[s],r[o]=Ao(i),n[o]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const r=Object.create(null);return ce.forEach(this,(n,i)=>{n!=null&&n!==!1&&(r[i]=e&&ce.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,r])=>e+": "+r).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...r){const n=new this(e);return r.forEach(i=>n.set(i)),n}static accessor(e){const n=(this[hd]=this[hd]={accessors:{}}).accessors,i=this.prototype;function s(a){const o=ta(a);n[o]||(Ob(i,a),n[o]=!0)}return ce.isArray(e)?e.forEach(s):s(e),this}}gc.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ce.reduceDescriptors(gc.prototype,({value:t},e)=>{let r=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(n){this[r]=n}}});ce.freezeMethods(gc);const Qn=gc;function Ef(t,e){const r=this||Wu,n=e||r,i=Qn.from(n.headers);let s=n.data;return ce.forEach(t,function(o){s=o.call(r,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function Ph(t){return!!(t&&t.__CANCEL__)}function qa(t,e,r){dt.call(this,t??"canceled",dt.ERR_CANCELED,e,r),this.name="CanceledError"}ce.inherits(qa,dt,{__CANCEL__:!0});function Nb(t,e,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?t(r):e(new dt("Request failed with status code "+r.status,[dt.ERR_BAD_REQUEST,dt.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}const Db=$n.hasStandardBrowserEnv?{write(t,e,r,n,i,s){const a=[t+"="+encodeURIComponent(e)];ce.isNumber(r)&&a.push("expires="+new Date(r).toGMTString()),ce.isString(n)&&a.push("path="+n),ce.isString(i)&&a.push("domain="+i),s===!0&&a.push("secure"),document.cookie=a.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Lb(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function $b(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function kh(t,e){return t&&!Lb(e)?$b(t,e):e}const qb=$n.hasStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");let n;function i(s){let a=s;return e&&(r.setAttribute("href",a),a=r.href),r.setAttribute("href",a),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return n=i(window.location.href),function(a){const o=ce.isString(a)?i(a):a;return o.protocol===n.protocol&&o.host===n.host}}():function(){return function(){return!0}}();function Fb(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function Hb(t,e){t=t||10;const r=new Array(t),n=new Array(t);let i=0,s=0,a;return e=e!==void 0?e:1e3,function(c){const u=Date.now(),h=n[s];a||(a=u),r[i]=c,n[i]=u;let p=s,m=0;for(;p!==i;)m+=r[p++],p=p%t;if(i=(i+1)%t,i===s&&(s=(s+1)%t),u-a<e)return;const P=h&&u-h;return P?Math.round(m*1e3/P):void 0}}function pd(t,e){let r=0;const n=Hb(50,250);return i=>{const s=i.loaded,a=i.lengthComputable?i.total:void 0,o=s-r,c=n(o),u=s<=a;r=s;const h={loaded:s,total:a,progress:a?s/a:void 0,bytes:o,rate:c||void 0,estimated:c&&a&&u?(a-s)/c:void 0,event:i};h[e?"download":"upload"]=!0,t(h)}}const Kb=typeof XMLHttpRequest<"u",zb=Kb&&function(t){return new Promise(function(r,n){let i=t.data;const s=Qn.from(t.headers).normalize();let{responseType:a,withXSRFToken:o}=t,c;function u(){t.cancelToken&&t.cancelToken.unsubscribe(c),t.signal&&t.signal.removeEventListener("abort",c)}let h;if(ce.isFormData(i)){if($n.hasStandardBrowserEnv||$n.hasStandardBrowserWebWorkerEnv)s.setContentType(!1);else if((h=s.getContentType())!==!1){const[R,...E]=h?h.split(";").map(L=>L.trim()).filter(Boolean):[];s.setContentType([R||"multipart/form-data",...E].join("; "))}}let p=new XMLHttpRequest;if(t.auth){const R=t.auth.username||"",E=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";s.set("Authorization","Basic "+btoa(R+":"+E))}const m=kh(t.baseURL,t.url);p.open(t.method.toUpperCase(),Sh(m,t.params,t.paramsSerializer),!0),p.timeout=t.timeout;function P(){if(!p)return;const R=Qn.from("getAllResponseHeaders"in p&&p.getAllResponseHeaders()),L={data:!a||a==="text"||a==="json"?p.responseText:p.response,status:p.status,statusText:p.statusText,headers:R,config:t,request:p};Nb(function(z){r(z),u()},function(z){n(z),u()},L),p=null}if("onloadend"in p?p.onloadend=P:p.onreadystatechange=function(){!p||p.readyState!==4||p.status===0&&!(p.responseURL&&p.responseURL.indexOf("file:")===0)||setTimeout(P)},p.onabort=function(){p&&(n(new dt("Request aborted",dt.ECONNABORTED,t,p)),p=null)},p.onerror=function(){n(new dt("Network Error",dt.ERR_NETWORK,t,p)),p=null},p.ontimeout=function(){let E=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const L=t.transitional||Ah;t.timeoutErrorMessage&&(E=t.timeoutErrorMessage),n(new dt(E,L.clarifyTimeoutError?dt.ETIMEDOUT:dt.ECONNABORTED,t,p)),p=null},$n.hasStandardBrowserEnv&&(o&&ce.isFunction(o)&&(o=o(t)),o||o!==!1&&qb(m))){const R=t.xsrfHeaderName&&t.xsrfCookieName&&Db.read(t.xsrfCookieName);R&&s.set(t.xsrfHeaderName,R)}i===void 0&&s.setContentType(null),"setRequestHeader"in p&&ce.forEach(s.toJSON(),function(E,L){p.setRequestHeader(L,E)}),ce.isUndefined(t.withCredentials)||(p.withCredentials=!!t.withCredentials),a&&a!=="json"&&(p.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&p.addEventListener("progress",pd(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&p.upload&&p.upload.addEventListener("progress",pd(t.onUploadProgress)),(t.cancelToken||t.signal)&&(c=R=>{p&&(n(!R||R.type?new qa(null,t,p):R),p.abort(),p=null)},t.cancelToken&&t.cancelToken.subscribe(c),t.signal&&(t.signal.aborted?c():t.signal.addEventListener("abort",c)));const M=Fb(m);if(M&&$n.protocols.indexOf(M)===-1){n(new dt("Unsupported protocol "+M+":",dt.ERR_BAD_REQUEST,t));return}p.send(i||null)})},gu={http:xb,xhr:zb};ce.forEach(gu,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const xd=t=>`- ${t}`,jb=t=>ce.isFunction(t)||t===null||t===!1,Mh={getAdapter:t=>{t=ce.isArray(t)?t:[t];const{length:e}=t;let r,n;const i={};for(let s=0;s<e;s++){r=t[s];let a;if(n=r,!jb(r)&&(n=gu[(a=String(r)).toLowerCase()],n===void 0))throw new dt(`Unknown adapter '${a}'`);if(n)break;i[a||"#"+s]=n}if(!n){const s=Object.entries(i).map(([o,c])=>`adapter ${o} `+(c===!1?"is not supported by the environment":"is not available in the build"));let a=e?s.length>1?`since :
`+s.map(xd).join(`
`):" "+xd(s[0]):"as no adapter specified";throw new dt("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return n},adapters:gu};function Sf(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new qa(null,t)}function yd(t){return Sf(t),t.headers=Qn.from(t.headers),t.data=Ef.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Mh.getAdapter(t.adapter||Wu.adapter)(t).then(function(n){return Sf(t),n.data=Ef.call(t,t.transformResponse,n),n.headers=Qn.from(n.headers),n},function(n){return Ph(n)||(Sf(t),n&&n.response&&(n.response.data=Ef.call(t,t.transformResponse,n.response),n.response.headers=Qn.from(n.response.headers))),Promise.reject(n)})}const gd=t=>t instanceof Qn?{...t}:t;function Ss(t,e){e=e||{};const r={};function n(u,h,p){return ce.isPlainObject(u)&&ce.isPlainObject(h)?ce.merge.call({caseless:p},u,h):ce.isPlainObject(h)?ce.merge({},h):ce.isArray(h)?h.slice():h}function i(u,h,p){if(ce.isUndefined(h)){if(!ce.isUndefined(u))return n(void 0,u,p)}else return n(u,h,p)}function s(u,h){if(!ce.isUndefined(h))return n(void 0,h)}function a(u,h){if(ce.isUndefined(h)){if(!ce.isUndefined(u))return n(void 0,u)}else return n(void 0,h)}function o(u,h,p){if(p in e)return n(u,h);if(p in t)return n(void 0,u)}const c={url:s,method:s,data:s,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:o,headers:(u,h)=>i(gd(u),gd(h),!0)};return ce.forEach(Object.keys(Object.assign({},t,e)),function(h){const p=c[h]||i,m=p(t[h],e[h],h);ce.isUndefined(m)&&p!==o||(r[h]=m)}),r}const Ch="1.6.8",Vu={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Vu[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});const bd={};Vu.transitional=function(e,r,n){function i(s,a){return"[Axios v"+Ch+"] Transitional option '"+s+"'"+a+(n?". "+n:"")}return(s,a,o)=>{if(e===!1)throw new dt(i(a," has been removed"+(r?" in "+r:"")),dt.ERR_DEPRECATED);return r&&!bd[a]&&(bd[a]=!0,console.warn(i(a," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(s,a,o):!0}};function Gb(t,e,r){if(typeof t!="object")throw new dt("options must be an object",dt.ERR_BAD_OPTION_VALUE);const n=Object.keys(t);let i=n.length;for(;i-- >0;){const s=n[i],a=e[s];if(a){const o=t[s],c=o===void 0||a(o,s,t);if(c!==!0)throw new dt("option "+s+" must be "+c,dt.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new dt("Unknown option "+s,dt.ERR_BAD_OPTION)}}const bu={assertOptions:Gb,validators:Vu},ai=bu.validators;let zo=class{constructor(e){this.defaults=e,this.interceptors={request:new dd,response:new dd}}async request(e,r){try{return await this._request(e,r)}catch(n){if(n instanceof Error){let i;Error.captureStackTrace?Error.captureStackTrace(i={}):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";n.stack?s&&!String(n.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+s):n.stack=s}throw n}}_request(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=Ss(this.defaults,r);const{transitional:n,paramsSerializer:i,headers:s}=r;n!==void 0&&bu.assertOptions(n,{silentJSONParsing:ai.transitional(ai.boolean),forcedJSONParsing:ai.transitional(ai.boolean),clarifyTimeoutError:ai.transitional(ai.boolean)},!1),i!=null&&(ce.isFunction(i)?r.paramsSerializer={serialize:i}:bu.assertOptions(i,{encode:ai.function,serialize:ai.function},!0)),r.method=(r.method||this.defaults.method||"get").toLowerCase();let a=s&&ce.merge(s.common,s[r.method]);s&&ce.forEach(["delete","get","head","post","put","patch","common"],M=>{delete s[M]}),r.headers=Qn.concat(a,s);const o=[];let c=!0;this.interceptors.request.forEach(function(R){typeof R.runWhen=="function"&&R.runWhen(r)===!1||(c=c&&R.synchronous,o.unshift(R.fulfilled,R.rejected))});const u=[];this.interceptors.response.forEach(function(R){u.push(R.fulfilled,R.rejected)});let h,p=0,m;if(!c){const M=[yd.bind(this),void 0];for(M.unshift.apply(M,o),M.push.apply(M,u),m=M.length,h=Promise.resolve(r);p<m;)h=h.then(M[p++],M[p++]);return h}m=o.length;let P=r;for(p=0;p<m;){const M=o[p++],R=o[p++];try{P=M(P)}catch(E){R.call(this,E);break}}try{h=yd.call(this,P)}catch(M){return Promise.reject(M)}for(p=0,m=u.length;p<m;)h=h.then(u[p++],u[p++]);return h}getUri(e){e=Ss(this.defaults,e);const r=kh(e.baseURL,e.url);return Sh(r,e.params,e.paramsSerializer)}};ce.forEach(["delete","get","head","options"],function(e){zo.prototype[e]=function(r,n){return this.request(Ss(n||{},{method:e,url:r,data:(n||{}).data}))}});ce.forEach(["post","put","patch"],function(e){function r(n){return function(s,a,o){return this.request(Ss(o||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:s,data:a}))}}zo.prototype[e]=r(),zo.prototype[e+"Form"]=r(!0)});const To=zo;class Ju{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(s){r=s});const n=this;this.promise.then(i=>{if(!n._listeners)return;let s=n._listeners.length;for(;s-- >0;)n._listeners[s](i);n._listeners=null}),this.promise.then=i=>{let s;const a=new Promise(o=>{n.subscribe(o),s=o}).then(i);return a.cancel=function(){n.unsubscribe(s)},a},e(function(s,a,o){n.reason||(n.reason=new qa(s,a,o),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const r=this._listeners.indexOf(e);r!==-1&&this._listeners.splice(r,1)}static source(){let e;return{token:new Ju(function(i){e=i}),cancel:e}}}const Wb=Ju;function Vb(t){return function(r){return t.apply(null,r)}}function Jb(t){return ce.isObject(t)&&t.isAxiosError===!0}const mu={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(mu).forEach(([t,e])=>{mu[e]=t});const Yb=mu;function Ih(t){const e=new To(t),r=dh(To.prototype.request,e);return ce.extend(r,To.prototype,e,{allOwnKeys:!0}),ce.extend(r,e,null,{allOwnKeys:!0}),r.create=function(i){return Ih(Ss(t,i))},r}const jt=Ih(Wu);jt.Axios=To;jt.CanceledError=qa;jt.CancelToken=Wb;jt.isCancel=Ph;jt.VERSION=Ch;jt.toFormData=yc;jt.AxiosError=dt;jt.Cancel=jt.CanceledError;jt.all=function(e){return Promise.all(e)};jt.spread=Vb;jt.isAxiosError=Jb;jt.mergeConfig=Ss;jt.AxiosHeaders=Qn;jt.formToJSON=t=>Rh(ce.isHTMLForm(t)?new FormData(t):t);jt.getAdapter=Mh.getAdapter;jt.HttpStatusCode=Yb;jt.default=jt;var Bh={};function un(t,e){typeof e=="boolean"&&(e={forever:e}),this._originalTimeouts=JSON.parse(JSON.stringify(t)),this._timeouts=t,this._options=e||{},this._maxRetryTime=e&&e.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}var Xb=un;un.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)};un.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null};un.prototype.retry=function(t){if(this._timeout&&clearTimeout(this._timeout),!t)return!1;var e=new Date().getTime();if(t&&e-this._operationStart>=this._maxRetryTime)return this._errors.push(t),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(t);var r=this._timeouts.shift();if(r===void 0)if(this._cachedTimeouts)this._errors.splice(0,this._errors.length-1),r=this._cachedTimeouts.slice(-1);else return!1;var n=this;return this._timer=setTimeout(function(){n._attempts++,n._operationTimeoutCb&&(n._timeout=setTimeout(function(){n._operationTimeoutCb(n._attempts)},n._operationTimeout),n._options.unref&&n._timeout.unref()),n._fn(n._attempts)},r),this._options.unref&&this._timer.unref(),!0};un.prototype.attempt=function(t,e){this._fn=t,e&&(e.timeout&&(this._operationTimeout=e.timeout),e.cb&&(this._operationTimeoutCb=e.cb));var r=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){r._operationTimeoutCb()},r._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)};un.prototype.try=function(t){console.log("Using RetryOperation.try() is deprecated"),this.attempt(t)};un.prototype.start=function(t){console.log("Using RetryOperation.start() is deprecated"),this.attempt(t)};un.prototype.start=un.prototype.try;un.prototype.errors=function(){return this._errors};un.prototype.attempts=function(){return this._attempts};un.prototype.mainError=function(){if(this._errors.length===0)return null;for(var t={},e=null,r=0,n=0;n<this._errors.length;n++){var i=this._errors[n],s=i.message,a=(t[s]||0)+1;t[s]=a,a>=r&&(e=i,r=a)}return e};(function(t){var e=Xb;t.operation=function(r){var n=t.timeouts(r);return new e(n,{forever:r&&(r.forever||r.retries===1/0),unref:r&&r.unref,maxRetryTime:r&&r.maxRetryTime})},t.timeouts=function(r){if(r instanceof Array)return[].concat(r);var n={retries:10,factor:2,minTimeout:1*1e3,maxTimeout:1/0,randomize:!1};for(var i in r)n[i]=r[i];if(n.minTimeout>n.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var s=[],a=0;a<n.retries;a++)s.push(this.createTimeout(a,n));return r&&r.forever&&!s.length&&s.push(this.createTimeout(a,n)),s.sort(function(o,c){return o-c}),s},t.createTimeout=function(r,n){var i=n.randomize?Math.random()+1:1,s=Math.round(i*Math.max(n.minTimeout,1)*Math.pow(n.factor,r));return s=Math.min(s,n.maxTimeout),s},t.wrap=function(r,n,i){if(n instanceof Array&&(i=n,n=null),!i){i=[];for(var s in r)typeof r[s]=="function"&&i.push(s)}for(var a=0;a<i.length;a++){var o=i[a],c=r[o];r[o]=(function(h){var p=t.operation(n),m=Array.prototype.slice.call(arguments,1),P=m.pop();m.push(function(M){p.retry(M)||(M&&(arguments[0]=p.mainError()),P.apply(this,arguments))}),p.attempt(function(){h.apply(r,m)})}).bind(r,c),r[o].options=n}}})(Bh);var Zb=Bh,Qb=Zb;function e1(t,e){function r(n,i){var s=e||{},a;"randomize"in s||(s.randomize=!0),a=Qb.operation(s);function o(h){i(h||new Error("Aborted"))}function c(h,p){if(h.bail){o(h);return}a.retry(h)?s.onRetry&&s.onRetry(h,p):i(a.mainError())}function u(h){var p;try{p=t(o,h)}catch(m){c(m,h);return}Promise.resolve(p).then(n).catch(function(P){c(P,h)})}a.attempt(u)}return new Promise(r)}var t1=e1;const Ai=pn(t1);function r1(t){class e extends t.arbundles.DataItem{constructor(i,s,a){super((a==null?void 0:a.dataIsRawTransaction)===!0?ue.from(i):s.arbundles.createData(i,s.tokenConfig.getSigner(),{...a,anchor:(a==null?void 0:a.anchor)??ch.randomBytes(32).toString("base64").slice(0,32)}).getRaw());N(this,"Irys");N(this,"signer");this.Irys=s,this.signer=s.tokenConfig.getSigner()}sign(){return super.sign(this.signer)}get size(){return this.getRaw().length}async uploadWithReceipt(i){return(await this.Irys.uploader.uploadTransaction(this,{...i,getReceiptSignature:!0})).data}async upload(i){return(await this.Irys.uploader.uploadTransaction(this,i)).data}async getPrice(){return this.Irys.utils.getPrice(this.Irys.tokenConfig.name,this.size)}async isValid(){return t.arbundles.DataItem.verify(this.getRaw())}}return e}var Uh={exports:{}},Yu={},Xu={};Object.defineProperty(Xu,"__esModule",{value:!0});function n1(t){var e=4,r=t.length,n=r%e;if(!n)return t;var i=r,s=e-n,a=r+s,o=ue.alloc(a);for(o.write(t);s--;)o.write("=",i++);return o.toString()}Xu.default=n1;Object.defineProperty(Yu,"__esModule",{value:!0});var i1=Xu;function Oh(t,e){return e===void 0&&(e="utf8"),ue.isBuffer(t)?wu(t.toString("base64")):wu(ue.from(t,e).toString("base64"))}function s1(t,e){return e===void 0&&(e="utf8"),ue.from(Zu(t),"base64").toString(e)}function Zu(t){return t=t.toString(),i1.default(t).replace(/\-/g,"+").replace(/_/g,"/")}function wu(t){return t.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function a1(t){return ue.from(Zu(t),"base64")}var $s=Oh;$s.encode=Oh;$s.decode=s1;$s.toBase64=Zu;$s.fromBase64=wu;$s.toBuffer=a1;Yu.default=$s;(function(t){t.exports=Yu.default,t.exports.default=t.exports})(Uh);var o1=Uh.exports;const Xe=pn(o1);qe.set({DECIMAL_PLACES:50});const md=t=>new Promise(e=>setTimeout(e,t));class yr{constructor(e,r,n){N(this,"api");N(this,"token");N(this,"tokenConfig");N(this,"arbundles");this.api=e,this.token=r,this.tokenConfig=n,this.arbundles=this.tokenConfig.irys.arbundles}static checkAndThrow(e,r,n){if(e!=null&&e.status&&!(n??[]).includes(e.status)&&e.status!=200)throw new Error(`HTTP Error: ${r}: ${e.status} ${typeof e.data!="string"?e.statusText:e.data}`)}async getNonce(){const e=await this.api.get(`/account/withdrawals/${this.tokenConfig.name}?address=${this.tokenConfig.address}`);return yr.checkAndThrow(e,"Getting withdrawal nonce"),e.data}async getBalance(e){const r=await this.api.get(`/account/balance/${this.tokenConfig.name}?address=${e}`);return yr.checkAndThrow(r,"Getting balance"),new qe(r.data.balance)}async getBundlerAddress(e){const r=await this.api.get("/info");yr.checkAndThrow(r,"Getting Bundler address");const n=r.data.addresses[e];if(!n)throw new Error(`Specified bundler does not support token ${e}`);return n}async getPrice(e,r){const n=await this.api.get(`/price/${e}/${r}`);return yr.checkAndThrow(n,"Getting storage cost"),new qe(n.data)}async estimateFolderPrice(e){Array.isArray(e)&&(e={fileCount:e.length,totalBytes:e.reduce((a,o)=>a+o,0)});const r=e.headerSizeAvg??this.arbundles.createData("",this.tokenConfig.getSigner()).getRaw().length,i=(await this.getPrice(this.tokenConfig.name,r)).multipliedBy(e.fileCount);return(await this.getPrice(this.tokenConfig.name,e.totalBytes)).plus(i).decimalPlaces(0)}toAtomic(e){return new qe(e).multipliedBy(this.tokenConfig.base[1])}fromAtomic(e){return new qe(e).dividedBy(this.tokenConfig.base[1])}async confirmationPoll(e,r=30){if(this.tokenConfig.isSlow)return;r<0&&(r=0);let n,i;const s=async()=>{for(;!i;){if(await this.tokenConfig.getTx(e).then(u=>u==null?void 0:u.confirmed).catch(u=>(n=u,!1)))return!0;await md(1e3)}return!1},a=async()=>(await md(r*1e3),i=!0,"RACE"),o=await Promise.race([a(),s()]);return o==="RACE"?(console.warn(`Tx ${e} didn't finalize after ${r} seconds ${n?` - ${n}`:""}`),n):o}unitConverter(e){return new qe(e).dividedBy(this.tokenConfig.base[1])}async verifyReceipt(e){return yr.verifyReceipt(this.arbundles,e)}static async verifyReceipt(e,r){const{id:n,deadlineHeight:i,timestamp:s,public:a,signature:o,version:c}=r,u=await e.deepHash([e.stringToBuffer("Bundlr"),e.stringToBuffer(c),e.stringToBuffer(n),e.stringToBuffer(i.toString()),e.stringToBuffer(s.toString())]);return await e.getCryptoDriver().verify(a,u,Xe.toBuffer(o))}async getReceipt(e){var o,c,u,h,p,m;const r=`query {
      transactions(ids: ["${e}"]) {
        edges {
          node {
            receipt {
              signature
              timestamp
              version
              deadlineHeight
            }
          }
        }
      }
    }`,n=await Ai(async()=>await this.api.post("/graphql",{query:r},{headers:{"content-type":"application/json"},validateStatus:P=>P===200})),i=(m=(p=(h=(u=(c=(o=n==null?void 0:n.data)==null?void 0:o.data)==null?void 0:c.transactions)==null?void 0:u.edges)==null?void 0:h.at(0))==null?void 0:p.node)==null?void 0:m.receipt;if(!i)throw new Error(`Missing required receipt data from node for tx: ${e}`);const a={public:(await this.api.get("/public")).data,version:i.version,id:e,timestamp:i.timestamp,validatorSignatures:[],signature:i.signature,deadlineHeight:i.deadlineHeight,verify:async()=>!1};return a.verify=async()=>this.verifyReceipt(a),a}}async function c1(t,e,r){const n=t.tokenConfig,{deepHash:i,stringToBuffer:s}=n.irys.arbundles,o={publicKey:await n.getPublicKey(),currency:t.token,amount:new qe(r).toString(),nonce:await t.getNonce(),signature:"",sigType:n.getSigner().signatureType},c=await i([s(o.currency),s(o.amount.toString()),s(o.nonce.toString())]);ue.isBuffer(o.publicKey)||(o.publicKey=ue.from(o.publicKey));const u=await n.sign(c),h=await n.verify(o.publicKey,c,u);o.publicKey=Xe.encode(o.publicKey),o.signature=Xe.encode(ue.from(u));const p=Xe.toBuffer(o.publicKey),m=Xe.toBuffer(o.signature),P=await i([s(o.currency),s(o.amount.toString()),s(o.nonce.toString())]),M=await n.verify(p,P,m),R=n.ownerToAddress(n.name=="arweave"?Xe.decode(o.publicKey):Xe.toBuffer(o.publicKey))===n.address;if(!(h||M||R))throw new Error(`Internal withdrawal validation failed - please report this!
Debug Info:${JSON.stringify(o)}`);const E=await e.post("/account/withdraw",o);if(E.status===202){const L=E.data.tx_id,W=await t.confirmationPoll(L);if(W!==!0)throw new Error(`Unable to confirm withdrawal tx ${L} ${W?W==null?void 0:W.toString():""}`)}else yr.checkAndThrow(E,"Withdrawing balance");return E.data}class f1{constructor({url:e,retryConfig:r,query:n,queryName:i,opts:s}){N(this,"queryVars",{});N(this,"queryFields");N(this,"queryInfo");N(this,"_query");N(this,"url");N(this,"config");N(this,"resultTracker",{numPages:0,numResults:0,done:!1});if(!e)throw new Error("URL is required");if(this.url=new URL(e),this.config={first:!1,userProvided:!1,numPages:1/0,numResults:1e3,retryOpts:{retries:3,maxTimeout:2e3,minTimeout:500,...r}},n===!1)return this;if(!n)throw new Error(`Unable to find query with name ${i}`);if(this.queryInfo={...n},this.queryFields=n.query,i.includes("arweave")&&this.url.host==="node1.bundlr.network"&&(this.url=new URL("https://arweave.net/graphql")),!(s!=null&&s.skipVariableSetters))for(const a of Object.keys(n.vars)){if(this[a])throw new Error(`Field setter ${a} has a key conflict - disable with opts.skipVariableSetters OR change the field name and add to query.remapVars`);this[a]=o=>(this.queryVars[a]=o,this)}return this}buildQuery(){var c,u;if(this.config.userProvided)return this;const e=h=>JSON.stringify(h,(p,m)=>{if(m instanceof Array)return m[0];if(typeof m=="object")return m;if(m!==!1)return""}).replaceAll(":","").replaceAll('"',"").replaceAll(",",`
          `),r=e(this.queryFields),n=e({pageInfo:{[((c=this.queryInfo.paging)==null?void 0:c.hasNextPage)??"hasNextPage"]:void 0}}).slice(1,-1),i=this.queryInfo.enumValues,s={...this.queryInfo.vars,...this.queryVars};for(const[h,p]of Object.entries(this.queryInfo.remapVars??{}))if((s==null?void 0:s[h])!==void 0){if(typeof p=="function"){const m=p(h,s[h],s);if(!m)continue;const[P,M]=m;if(s[P]=M,P===h)continue}else s[p]=s[h];s[h]=void 0}const a=JSON.stringify(s,function(h,p){return p===void 0||p instanceof Array||typeof p=="object"||typeof p=="number"||i!=null&&i.includes(h)?p:`'${p}'`}).replaceAll('"',"").replaceAll("'",'"').slice(1,-1);if(!((u=this==null?void 0:this.queryInfo)!=null&&u.name))throw new Error("Query name is undefined!");const o=this.queryInfo.paging?`query {
      ${this.queryInfo.name}(
        ${a}
      ) {
        edges {
          cursor
          node ${r}
        }
        ${n}
      }
    }`:`query {
    ${this.queryInfo.name}(
      ${a}
    ) 
    ${r}
  }`;return this._query=o,this}async getPage(){var n;if(this.resultTracker.done)return;if(this.buildQuery(),!this._query)throw new Error("Unable to run undefined query");let e;try{e=await Ai(async i=>{const s=await jt(this.url.toString(),{method:"post",headers:{"Content-Type":"application/json"},data:{query:this._query}});if(s.data.errors)throw s;return s},this.config.retryOpts)}catch(i){throw new Error(`Error running query
 ${this._query} - ${i.message?i.message+" -":""} (${JSON.stringify(((n=i==null?void 0:i.data)==null?void 0:n.errors.map(s=>s.message))??(i==null?void 0:i.errors)??i)}) `)}if(this.config.userProvided)return this.trimmer([e.data.data].flat(20));const r=e.data.data[this.queryInfo.name];if(this.queryInfo.paging){const i=r.pageInfo[this.queryInfo.paging.hasNextPage]?r.edges.at(-1)[this.queryInfo.paging.cursor]:void 0;return this.queryVars.after=i,this.trimmer(r.edges.map(s=>s.node))}return this.trimmer([r].flat(20))}trimmer(e){var i,s;const r=++this.resultTracker.numPages,n=this.resultTracker.numResults+=e.length;if(e.length===0)return this.resultTracker.done=!0,e;if(r>=((i=this==null?void 0:this.config)==null?void 0:i.numPages)&&(this.resultTracker.done=!0),n>=((s=this==null?void 0:this.config)==null?void 0:s.numResults)){this.resultTracker.done=!0;const a=this.config.numResults-(n-e.length);return e.slice(0,a)}return e}async first(){const e=await this.getPage();return(e==null?void 0:e.at(0))??void 0}maxPages(e){return this.config.numPages=e,this}limit(e){return this.config.numResults=e,this}async all(){const e=[];do{const r=await this.getPage();if(!r)break;e.push(...r)}while(this.queryVars.after);return e}async*generator(){do{const e=await this.getPage();if(!e)return;for(const r of e)yield r}while(this.queryVars.after)}stream(){return ma.Readable.from(this.generator())}query(e){return this._query=e,this.config.userProvided=!0,this}fields(e,r=!1){const n=(i,s,a)=>{for(const o of Object.keys(a)){let c=s[o];Array.isArray(c)&&(c=c[0]);const u=a[o];if(c===void 0)throw new Error(`Illegal field ${i}${o}`);typeof u=="object"&&n(i+o+".",c,u)}};return r||n("",this.queryFields,e),this.queryFields=e,this}variables(e){return this.queryVars={...this.queryVars,...e},this}async toQuery(){return await this.buildQuery(),this._query}tReturn(){return"tReturn"}tQuery(){return"tQuery"}tVars(){return"tVars"}async then(e,r){return this.all().then(e,r)}async catch(e){return this.then().catch(e)}async finally(e){return this.then().finally(e)}}const u1={id:"",timestamp:0,height:"",previous:""},l1={ids:void 0,minHeight:void 0,maxHeight:void 0,pageSize:10,after:void 0,sort:"DESC"},d1={name:"blocks",query:u1,vars:l1,enumValues:["sort"],remapVars:{pageSize:"first",sort:(t,e)=>[t,e==="ASC"?"HEIGHT_ASC":"HEIGHT_DESC"],minHeight:(t,e,r)=>{r.height={...r.height,min:e},r.minHeight=void 0},maxHeight:(t,e,r)=>{r.height={...r.height,max:e},r.maxHeight=void 0}},paging:{hasNextPage:"hasNextPage",cursor:"cursor"}},h1={id:"",anchor:"",signature:"",recipient:"",owner:{address:"",key:""},fee:{winston:"",ar:""},quantity:{winston:"",ar:""},data:{size:"",type:""},tags:[{name:"",value:""}],block:{id:"",timestamp:0,height:0,previous:""},bundledIn:{id:""}},p1={ids:void 0,from:void 0,to:void 0,tags:void 0,bundledIn:void 0,minHeight:void 0,maxHeight:void 0,pageSize:10,after:void 0,sort:"DESC"},x1={name:"transactions",query:h1,enumValues:["sort"],vars:p1,remapVars:{pageSize:"first",from:"owners",to:"recipients",sort:(t,e)=>[t,e==="ASC"?"HEIGHT_ASC":"HEIGHT_DESC"],minHeight:(t,e,r)=>{r.block={...r.block,min:e},r.minHeight=void 0},maxHeight:(t,e,r)=>{r.block={...r.block,max:e},r.maxHeight=void 0}},paging:{hasNextPage:"hasNextPage",cursor:"cursor"}},y1={id:"",receipt:{deadlineHeight:0,signature:"",timestamp:0,version:""},tags:[{name:"",value:""}],address:"",token:"",signature:"",timestamp:0},g1={ids:void 0,after:void 0,token:void 0,from:void 0,pageSize:100,sort:"ASC",tags:void 0,fromTimestamp:void 0,toTimestamp:void 0},b1={name:"transactions",query:y1,enumValues:["order"],vars:g1,remapVars:{pageSize:"first",sort:"order",from:"owners",fromTimestamp:(t,e,r)=>{r.timestamp={...r.timestamp,from:new Date(e).getTime()},r.fromTimestamp=void 0},toTimestamp:(t,e,r)=>{r.timestamp={...r.timestamp,to:new Date(e).getTime()},r.toTimestamp=void 0}},paging:{hasNextPage:"hasNextPage",cursor:"cursor"}},m1={"irys:transactions":b1,"arweave:transactions":x1,"arweave:blocks":d1};class wd{constructor(e={url:new URL("https://node1.bundlr.network/graphql")}){N(this,"opts");if(!e.url)throw new Error("URL is required");e.url=new URL(e.url),this.opts=e}search(e,r){const n=(r==null?void 0:r.query)??m1[e];return new f1({...this.opts,query:n,queryName:e})}}class Qu{constructor({url:e,arbundles:r}){N(this,"api");N(this,"utils");N(this,"uploader");N(this,"funder");N(this,"address");N(this,"token");N(this,"tokenConfig");N(this,"provenance");N(this,"transactions");N(this,"_readyPromise");N(this,"url");N(this,"arbundles");N(this,"IrysTransaction");this.url=e,this.arbundles=r,this.IrysTransaction=r1(this)}get signer(){return this.tokenConfig.getSigner()}get search(){const e=new wd({url:new URL("/graphql",this.url)});return e.search.bind(e)}query(e){return new wd(e??{url:this.url})}async withdrawBalance(e){return c1(this.utils,this.api,e)}async getLoadedBalance(){if(!this.address)throw new Error("address is undefined");return this.utils.getBalance(this.address)}async getBalance(e){return this.utils.getBalance(e)}async fund(e,r){return this.funder.fund(e,r)}async getPrice(e){return this.utils.getPrice(this.token,e)}async verifyReceipt(e){return yr.verifyReceipt(this.arbundles,e)}createTransaction(e,r){return new this.IrysTransaction(e,this,r)}getSigner(){return this.tokenConfig.getSigner()}async upload(e,r){return this.uploader.uploadData(e,r)}async uploadWithReceipt(e,r){return this.uploader.uploadData(e,{...r,upload:{getReceiptSignature:!0}})}async ready(){return this.tokenConfig.ready&&await this.tokenConfig.ready(),this.address=this.tokenConfig.address,this}get transaction(){const e=this;return{fromRaw(r){return new e.IrysTransaction(r,e,{dataIsRawTransaction:!0})}}}}N(Qu,"VERSION","0.0.2");let w1=class{constructor(e){N(this,"_instance");N(this,"cookieMap",new Map);N(this,"config");e&&this.applyConfig(e)}applyConfig(e){this.config=this.mergeDefaults(e),this._instance=void 0}getConfig(){return this.config}async requestInterceptor(e){const r=this.cookieMap.get(new URL(e.baseURL??"").host);return r&&(e.headers.cookie=r),e}async responseInterceptor(e){var n;const r=(n=e.headers)==null?void 0:n["set-cookie"];return r&&this.cookieMap.set(e.request.host,r),e}mergeDefaults(e){return{url:e.url,timeout:e.timeout??2e4,logging:e.logging??!1,logger:e.logger??console.log,headers:{...e.headers,"x-irys-js-sdk-version":Qu.VERSION},withCredentials:e.withCredentials??!1,retry:{retries:3,maxTimeout:5e3}}}async get(e,r){var n;try{return await this.request(e,{...r,method:"GET"})}catch(i){if((n=i.response)!=null&&n.status)return i.response;throw i}}async post(e,r,n){var i;try{return await this.request(e,{data:r,...n,method:"POST"})}catch(s){if((i=s.response)!=null&&i.status)return s.response;throw s}}get instance(){if(this._instance)return this._instance;const e=jt.create({baseURL:this.config.url.toString(),timeout:this.config.timeout,maxContentLength:1024*1024*512,headers:this.config.headers,withCredentials:this.config.withCredentials});return this.config.withCredentials&&(e.interceptors.request.use(this.requestInterceptor.bind(this)),e.interceptors.response.use(this.responseInterceptor.bind(this))),this.config.logging&&(e.interceptors.request.use(r=>(this.config.logger(`Requesting: ${r.baseURL}/${r.url}`),r)),e.interceptors.response.use(r=>(this.config.logger(`Response: ${r.config.url} - ${r.status}`),r))),this._instance=e}async request(e,r){const n=this.instance,i=(r==null?void 0:r.url)??new URL(e,this.config.url).toString();return Ai(s=>n({...r,url:i}),{...this.config.retry,...r==null?void 0:r.retry})}};class v1{constructor(e){N(this,"utils");this.utils=e}async fund(e,r=1){const n=new qe(e);if(!n.isInteger())throw new Error("must use an integer for funding amount");const i=this.utils.tokenConfig,s=await this.utils.getBundlerAddress(this.utils.token);let a;if(i.needsFee){const p=await i.getFee(i.base[0]==="winston"?0:n,s);a=qe.isBigNumber(p)?p.multipliedBy(r).integerValue(qe.ROUND_CEIL):p}const o=await i.createTx(n,s,a);let c;try{c=await i.sendTx(o.tx)}catch(p){throw p}if(o.txId??(o.txId=c),!o.txId)throw new Error("Undefined transaction ID");yr.checkAndThrow(c,`Sending transaction to the ${this.utils.token} network`);let u=await this.utils.confirmationPoll(o.txId);if(!await this.submitTransaction(o.txId).catch(p=>{u=p}))throw new Error(`failed to post funding tx - ${o.txId} - keep this id! 
 ${u?` - ${(u==null?void 0:u.message)??u}`:""}`);return{reward:qe.isBigNumber(a)?a.toString():JSON.stringify(a),target:s,quantity:n.toString(),id:o.txId}}async submitTransaction(e){return await Ai(async()=>{const r=await this.utils.api.post(`/account/balance/${this.utils.token}`,{tx_id:e});return yr.checkAndThrow(r,`Posting transaction ${e} information to the bundler`,[202]),r},{retries:5,maxTimeout:1e3,minTimeout:100,randomize:!0})}async submitFundTransaction(e){return this.submitTransaction(e)}}const _1="logger/5.7.0";let vd=!1,_d=!1;const Ro={debug:1,default:2,info:2,warning:3,error:4,off:5};let Ed=Ro.default,Af=null;function E1(){try{const t=[];if(["NFD","NFC","NFKD","NFKC"].forEach(e=>{try{if("test".normalize(e)!=="test")throw new Error("bad normalize")}catch{t.push(e)}}),t.length)throw new Error("missing "+t.join(", "));if("".normalize("NFD")!=="e")throw new Error("broken implementation")}catch(t){return t.message}return null}const Sd=E1();var vu;(function(t){t.DEBUG="DEBUG",t.INFO="INFO",t.WARNING="WARNING",t.ERROR="ERROR",t.OFF="OFF"})(vu||(vu={}));var En;(function(t){t.UNKNOWN_ERROR="UNKNOWN_ERROR",t.NOT_IMPLEMENTED="NOT_IMPLEMENTED",t.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",t.NETWORK_ERROR="NETWORK_ERROR",t.SERVER_ERROR="SERVER_ERROR",t.TIMEOUT="TIMEOUT",t.BUFFER_OVERRUN="BUFFER_OVERRUN",t.NUMERIC_FAULT="NUMERIC_FAULT",t.MISSING_NEW="MISSING_NEW",t.INVALID_ARGUMENT="INVALID_ARGUMENT",t.MISSING_ARGUMENT="MISSING_ARGUMENT",t.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",t.CALL_EXCEPTION="CALL_EXCEPTION",t.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",t.NONCE_EXPIRED="NONCE_EXPIRED",t.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",t.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",t.TRANSACTION_REPLACED="TRANSACTION_REPLACED",t.ACTION_REJECTED="ACTION_REJECTED"})(En||(En={}));const Ad="0123456789abcdef";class xe{constructor(e){Object.defineProperty(this,"version",{enumerable:!0,value:e,writable:!1})}_log(e,r){const n=e.toLowerCase();Ro[n]==null&&this.throwArgumentError("invalid log level name","logLevel",e),!(Ed>Ro[n])&&console.log.apply(console,r)}debug(...e){this._log(xe.levels.DEBUG,e)}info(...e){this._log(xe.levels.INFO,e)}warn(...e){this._log(xe.levels.WARNING,e)}makeError(e,r,n){if(_d)return this.makeError("censored error",r,{});r||(r=xe.errors.UNKNOWN_ERROR),n||(n={});const i=[];Object.keys(n).forEach(c=>{const u=n[c];try{if(u instanceof Uint8Array){let h="";for(let p=0;p<u.length;p++)h+=Ad[u[p]>>4],h+=Ad[u[p]&15];i.push(c+"=Uint8Array(0x"+h+")")}else i.push(c+"="+JSON.stringify(u))}catch{i.push(c+"="+JSON.stringify(n[c].toString()))}}),i.push(`code=${r}`),i.push(`version=${this.version}`);const s=e;let a="";switch(r){case En.NUMERIC_FAULT:{a="NUMERIC_FAULT";const c=e;switch(c){case"overflow":case"underflow":case"division-by-zero":a+="-"+c;break;case"negative-power":case"negative-width":a+="-unsupported";break;case"unbound-bitwise-result":a+="-unbound-result";break}break}case En.CALL_EXCEPTION:case En.INSUFFICIENT_FUNDS:case En.MISSING_NEW:case En.NONCE_EXPIRED:case En.REPLACEMENT_UNDERPRICED:case En.TRANSACTION_REPLACED:case En.UNPREDICTABLE_GAS_LIMIT:a=r;break}a&&(e+=" [ See: https://links.ethers.org/v5-errors-"+a+" ]"),i.length&&(e+=" ("+i.join(", ")+")");const o=new Error(e);return o.reason=s,o.code=r,Object.keys(n).forEach(function(c){o[c]=n[c]}),o}throwError(e,r,n){throw this.makeError(e,r,n)}throwArgumentError(e,r,n){return this.throwError(e,xe.errors.INVALID_ARGUMENT,{argument:r,value:n})}assert(e,r,n,i){e||this.throwError(r,n,i)}assertArgument(e,r,n,i){e||this.throwArgumentError(r,n,i)}checkNormalize(e){Sd&&this.throwError("platform missing String.prototype.normalize",xe.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:Sd})}checkSafeUint53(e,r){typeof e=="number"&&(r==null&&(r="value not safe"),(e<0||e>=9007199254740991)&&this.throwError(r,xe.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:e}),e%1&&this.throwError(r,xe.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:e}))}checkArgumentCount(e,r,n){n?n=": "+n:n="",e<r&&this.throwError("missing argument"+n,xe.errors.MISSING_ARGUMENT,{count:e,expectedCount:r}),e>r&&this.throwError("too many arguments"+n,xe.errors.UNEXPECTED_ARGUMENT,{count:e,expectedCount:r})}checkNew(e,r){(e===Object||e==null)&&this.throwError("missing new",xe.errors.MISSING_NEW,{name:r.name})}checkAbstract(e,r){e===r?this.throwError("cannot instantiate abstract class "+JSON.stringify(r.name)+" directly; use a sub-class",xe.errors.UNSUPPORTED_OPERATION,{name:e.name,operation:"new"}):(e===Object||e==null)&&this.throwError("missing new",xe.errors.MISSING_NEW,{name:r.name})}static globalLogger(){return Af||(Af=new xe(_1)),Af}static setCensorship(e,r){if(!e&&r&&this.globalLogger().throwError("cannot permanently disable censorship",xe.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),vd){if(!e)return;this.globalLogger().throwError("error censorship permanent",xe.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}_d=!!e,vd=!!r}static setLogLevel(e){const r=Ro[e.toLowerCase()];if(r==null){xe.globalLogger().warn("invalid log level - "+e);return}Ed=r}static from(e){return new xe(e)}}xe.errors=En;xe.levels=vu;const S1="bytes/5.7.0",er=new xe(S1);function Nh(t){return!!t.toHexString}function gs(t){return t.slice||(t.slice=function(){const e=Array.prototype.slice.call(arguments);return gs(new Uint8Array(Array.prototype.slice.apply(t,e)))}),t}function el(t){return ir(t)&&!(t.length%2)||bc(t)}function Td(t){return typeof t=="number"&&t==t&&t%1===0}function bc(t){if(t==null)return!1;if(t.constructor===Uint8Array)return!0;if(typeof t=="string"||!Td(t.length)||t.length<0)return!1;for(let e=0;e<t.length;e++){const r=t[e];if(!Td(r)||r<0||r>=256)return!1}return!0}function ge(t,e){if(e||(e={}),typeof t=="number"){er.checkSafeUint53(t,"invalid arrayify value");const r=[];for(;t;)r.unshift(t&255),t=parseInt(String(t/256));return r.length===0&&r.push(0),gs(new Uint8Array(r))}if(e.allowMissingPrefix&&typeof t=="string"&&t.substring(0,2)!=="0x"&&(t="0x"+t),Nh(t)&&(t=t.toHexString()),ir(t)){let r=t.substring(2);r.length%2&&(e.hexPad==="left"?r="0"+r:e.hexPad==="right"?r+="0":er.throwArgumentError("hex data is odd-length","value",t));const n=[];for(let i=0;i<r.length;i+=2)n.push(parseInt(r.substring(i,i+2),16));return gs(new Uint8Array(n))}return bc(t)?gs(new Uint8Array(t)):er.throwArgumentError("invalid arrayify value","value",t)}function Br(t){const e=t.map(i=>ge(i)),r=e.reduce((i,s)=>i+s.length,0),n=new Uint8Array(r);return e.reduce((i,s)=>(n.set(s,i),i+s.length),0),gs(n)}function ei(t){let e=ge(t);if(e.length===0)return e;let r=0;for(;r<e.length&&e[r]===0;)r++;return r&&(e=e.slice(r)),e}function A1(t,e){t=ge(t),t.length>e&&er.throwArgumentError("value out of range","value",arguments[0]);const r=new Uint8Array(e);return r.set(t,e-t.length),gs(r)}function ir(t,e){return!(typeof t!="string"||!t.match(/^0x[0-9A-Fa-f]*$/)||e&&t.length!==2+2*e)}const Tf="0123456789abcdef";function ke(t,e){if(e||(e={}),typeof t=="number"){er.checkSafeUint53(t,"invalid hexlify value");let r="";for(;t;)r=Tf[t&15]+r,t=Math.floor(t/16);return r.length?(r.length%2&&(r="0"+r),"0x"+r):"0x00"}if(typeof t=="bigint")return t=t.toString(16),t.length%2?"0x0"+t:"0x"+t;if(e.allowMissingPrefix&&typeof t=="string"&&t.substring(0,2)!=="0x"&&(t="0x"+t),Nh(t))return t.toHexString();if(ir(t))return t.length%2&&(e.hexPad==="left"?t="0x0"+t.substring(2):e.hexPad==="right"?t+="0":er.throwArgumentError("hex data is odd-length","value",t)),t.toLowerCase();if(bc(t)){let r="0x";for(let n=0;n<t.length;n++){let i=t[n];r+=Tf[(i&240)>>4]+Tf[i&15]}return r}return er.throwArgumentError("invalid hexlify value","value",t)}function Dh(t){if(typeof t!="string")t=ke(t);else if(!ir(t)||t.length%2)return null;return(t.length-2)/2}function Ni(t,e,r){return typeof t!="string"?t=ke(t):(!ir(t)||t.length%2)&&er.throwArgumentError("invalid hexData","value",t),e=2+2*e,r!=null?"0x"+t.substring(e,2+2*r):"0x"+t.substring(e)}function Ii(t){let e="0x";return t.forEach(r=>{e+=ke(r).substring(2)}),e}function Ur(t,e){for(typeof t!="string"?t=ke(t):ir(t)||er.throwArgumentError("invalid hex string","value",t),t.length>2*e+2&&er.throwArgumentError("value out of range","value",arguments[1]);t.length<2*e+2;)t="0x0"+t.substring(2);return t}function qs(t){const e={r:"0x",s:"0x",_vs:"0x",recoveryParam:0,v:0,yParityAndS:"0x",compact:"0x"};if(el(t)){let r=ge(t);r.length===64?(e.v=27+(r[32]>>7),r[32]&=127,e.r=ke(r.slice(0,32)),e.s=ke(r.slice(32,64))):r.length===65?(e.r=ke(r.slice(0,32)),e.s=ke(r.slice(32,64)),e.v=r[64]):er.throwArgumentError("invalid signature string","signature",t),e.v<27&&(e.v===0||e.v===1?e.v+=27:er.throwArgumentError("signature invalid v byte","signature",t)),e.recoveryParam=1-e.v%2,e.recoveryParam&&(r[32]|=128),e._vs=ke(r.slice(32,64))}else{if(e.r=t.r,e.s=t.s,e.v=t.v,e.recoveryParam=t.recoveryParam,e._vs=t._vs,e._vs!=null){const i=A1(ge(e._vs),32);e._vs=ke(i);const s=i[0]>=128?1:0;e.recoveryParam==null?e.recoveryParam=s:e.recoveryParam!==s&&er.throwArgumentError("signature recoveryParam mismatch _vs","signature",t),i[0]&=127;const a=ke(i);e.s==null?e.s=a:e.s!==a&&er.throwArgumentError("signature v mismatch _vs","signature",t)}if(e.recoveryParam==null)e.v==null?er.throwArgumentError("signature missing v and recoveryParam","signature",t):e.v===0||e.v===1?e.recoveryParam=e.v:e.recoveryParam=1-e.v%2;else if(e.v==null)e.v=27+e.recoveryParam;else{const i=e.v===0||e.v===1?e.v:1-e.v%2;e.recoveryParam!==i&&er.throwArgumentError("signature recoveryParam mismatch v","signature",t)}e.r==null||!ir(e.r)?er.throwArgumentError("signature missing or invalid r","signature",t):e.r=Ur(e.r,32),e.s==null||!ir(e.s)?er.throwArgumentError("signature missing or invalid s","signature",t):e.s=Ur(e.s,32);const r=ge(e.s);r[0]>=128&&er.throwArgumentError("signature s out of range","signature",t),e.recoveryParam&&(r[0]|=128);const n=ke(r);e._vs&&(ir(e._vs)||er.throwArgumentError("signature invalid _vs","signature",t),e._vs=Ur(e._vs,32)),e._vs==null?e._vs=n:e._vs!==n&&er.throwArgumentError("signature _vs mismatch v and s","signature",t)}return e.yParityAndS=e._vs,e.compact=e.r+e.yParityAndS.substring(2),e}function Rd(t){return t=qs(t),ke(Br([t.r,t.s,t.recoveryParam?"0x1c":"0x1b"]))}const T1="bignumber/5.7.0";var jo=Ke.BN;const Vn=new xe(T1),Rf={},Pd=9007199254740991;let kd=!1;class $e{constructor(e,r){e!==Rf&&Vn.throwError("cannot call constructor directly; use BigNumber.from",xe.errors.UNSUPPORTED_OPERATION,{operation:"new (BigNumber)"}),this._hex=r,this._isBigNumber=!0,Object.freeze(this)}fromTwos(e){return Cr(tt(this).fromTwos(e))}toTwos(e){return Cr(tt(this).toTwos(e))}abs(){return this._hex[0]==="-"?$e.from(this._hex.substring(1)):this}add(e){return Cr(tt(this).add(tt(e)))}sub(e){return Cr(tt(this).sub(tt(e)))}div(e){return $e.from(e).isZero()&&Yr("division-by-zero","div"),Cr(tt(this).div(tt(e)))}mul(e){return Cr(tt(this).mul(tt(e)))}mod(e){const r=tt(e);return r.isNeg()&&Yr("division-by-zero","mod"),Cr(tt(this).umod(r))}pow(e){const r=tt(e);return r.isNeg()&&Yr("negative-power","pow"),Cr(tt(this).pow(r))}and(e){const r=tt(e);return(this.isNegative()||r.isNeg())&&Yr("unbound-bitwise-result","and"),Cr(tt(this).and(r))}or(e){const r=tt(e);return(this.isNegative()||r.isNeg())&&Yr("unbound-bitwise-result","or"),Cr(tt(this).or(r))}xor(e){const r=tt(e);return(this.isNegative()||r.isNeg())&&Yr("unbound-bitwise-result","xor"),Cr(tt(this).xor(r))}mask(e){return(this.isNegative()||e<0)&&Yr("negative-width","mask"),Cr(tt(this).maskn(e))}shl(e){return(this.isNegative()||e<0)&&Yr("negative-width","shl"),Cr(tt(this).shln(e))}shr(e){return(this.isNegative()||e<0)&&Yr("negative-width","shr"),Cr(tt(this).shrn(e))}eq(e){return tt(this).eq(tt(e))}lt(e){return tt(this).lt(tt(e))}lte(e){return tt(this).lte(tt(e))}gt(e){return tt(this).gt(tt(e))}gte(e){return tt(this).gte(tt(e))}isNegative(){return this._hex[0]==="-"}isZero(){return tt(this).isZero()}toNumber(){try{return tt(this).toNumber()}catch{Yr("overflow","toNumber",this.toString())}return null}toBigInt(){try{return BigInt(this.toString())}catch{}return Vn.throwError("this platform does not support BigInt",xe.errors.UNSUPPORTED_OPERATION,{value:this.toString()})}toString(){return arguments.length>0&&(arguments[0]===10?kd||(kd=!0,Vn.warn("BigNumber.toString does not accept any parameters; base-10 is assumed")):arguments[0]===16?Vn.throwError("BigNumber.toString does not accept any parameters; use bigNumber.toHexString()",xe.errors.UNEXPECTED_ARGUMENT,{}):Vn.throwError("BigNumber.toString does not accept parameters",xe.errors.UNEXPECTED_ARGUMENT,{})),tt(this).toString(10)}toHexString(){return this._hex}toJSON(e){return{type:"BigNumber",hex:this.toHexString()}}static from(e){if(e instanceof $e)return e;if(typeof e=="string")return e.match(/^-?0x[0-9a-f]+$/i)?new $e(Rf,va(e)):e.match(/^-?[0-9]+$/)?new $e(Rf,va(new jo(e))):Vn.throwArgumentError("invalid BigNumber string","value",e);if(typeof e=="number")return e%1&&Yr("underflow","BigNumber.from",e),(e>=Pd||e<=-Pd)&&Yr("overflow","BigNumber.from",e),$e.from(String(e));const r=e;if(typeof r=="bigint")return $e.from(r.toString());if(bc(r))return $e.from(ke(r));if(r)if(r.toHexString){const n=r.toHexString();if(typeof n=="string")return $e.from(n)}else{let n=r._hex;if(n==null&&r.type==="BigNumber"&&(n=r.hex),typeof n=="string"&&(ir(n)||n[0]==="-"&&ir(n.substring(1))))return $e.from(n)}return Vn.throwArgumentError("invalid BigNumber value","value",e)}static isBigNumber(e){return!!(e&&e._isBigNumber)}}function va(t){if(typeof t!="string")return va(t.toString(16));if(t[0]==="-")return t=t.substring(1),t[0]==="-"&&Vn.throwArgumentError("invalid hex","value",t),t=va(t),t==="0x00"?t:"-"+t;if(t.substring(0,2)!=="0x"&&(t="0x"+t),t==="0x")return"0x00";for(t.length%2&&(t="0x0"+t.substring(2));t.length>4&&t.substring(0,4)==="0x00";)t="0x"+t.substring(4);return t}function Cr(t){return $e.from(va(t))}function tt(t){const e=$e.from(t).toHexString();return e[0]==="-"?new jo("-"+e.substring(3),16):new jo(e.substring(2),16)}function Yr(t,e,r){const n={fault:t,operation:e};return r!=null&&(n.value=r),Vn.throwError(t,xe.errors.NUMERIC_FAULT,n)}function R1(t){return new jo(t,36).toString(16)}let P1=class{constructor(){N(this,"publicKey");N(this,"signatureType");N(this,"signatureLength");N(this,"ownerLength");N(this,"pem")}static verify(e,r,n,i){throw new Error("You must implement verify method on child")}};var at;(function(t){t[t.ARWEAVE=1]="ARWEAVE",t[t.ED25519=2]="ED25519",t[t.ETHEREUM=3]="ETHEREUM",t[t.SOLANA=4]="SOLANA",t[t.INJECTEDAPTOS=5]="INJECTEDAPTOS",t[t.MULTIAPTOS=6]="MULTIAPTOS",t[t.TYPEDETHEREUM=7]="TYPEDETHEREUM"})(at||(at={}));const zt={[at.ARWEAVE]:{sigLength:512,pubLength:512,sigName:"arweave"},[at.ED25519]:{sigLength:64,pubLength:32,sigName:"ed25519"},[at.ETHEREUM]:{sigLength:65,pubLength:65,sigName:"ethereum"},[at.SOLANA]:{sigLength:64,pubLength:32,sigName:"solana"},[at.INJECTEDAPTOS]:{sigLength:64,pubLength:32,sigName:"injectedAptos"},[at.MULTIAPTOS]:{sigLength:64*32+4,pubLength:32*32+1,sigName:"multiAptos"},[at.TYPEDETHEREUM]:{sigLength:65,pubLength:42,sigName:"typedEthereum"}};class Fa{constructor(e,r){N(this,"_key");N(this,"pk");N(this,"ownerLength",zt[2].pubLength);N(this,"signatureLength",zt[2].sigLength);N(this,"_publicKey");N(this,"signatureType",2);this._key=e,this.pk=r}get publicKey(){return this._publicKey}get key(){throw new Error("You must implement `key`")}sign(e){return Eg(ue.from(e),ue.from(this.key))}static async verify(e,r,n){let i=e;return typeof e=="string"&&(i=Xe.toBuffer(e)),dc(ue.from(n),ue.from(r),ue.from(i))}}function Pr(t){let e=0;for(const i of t)e+=i.byteLength;const r=new Uint8Array(e);let n=0;r.set(new Uint8Array(t[0]),n),n+=t[0].byteLength;for(let i=1;i<t.length;i++)r.set(new Uint8Array(t[i]),n),n+=t[i].byteLength;return r}function Lh(t){const e=Sn(t);return tl(e)}function tl(t){return new TextDecoder("utf-8",{fatal:!0}).decode(t)}function yt(t){return new TextEncoder().encode(t)}function _u(t){return Tn(yt(t))}function Sn(t){return new Uint8Array(Sg(Fh(t)))}function $h(t){return Ag(new Uint8Array(t))}function Tn(t){return qh($h(t))}function qh(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}function Fh(t){t=t.replace(/\-/g,"+").replace(/\_/g,"/");let e;return t.length%4==0?e=0:e=4-t.length%4,t.concat("=".repeat(e))}function k1(t){return new qe(t).shiftedBy(-12)}function M1(t){return new qe(t).shiftedBy(12)}const C1=Object.freeze(Object.defineProperty({__proto__:null,arToWinston:M1,b64UrlDecode:Fh,b64UrlEncode:qh,b64UrlToBuffer:Sn,b64UrlToString:Lh,bufferToString:tl,bufferTob64:$h,bufferTob64Url:Tn,concatBuffers:Pr,stringToB64Url:_u,stringToBuffer:yt,winstonToAr:k1},Symbol.toStringTag,{value:"Module"}));class Po{constructor(){N(this,"keyLength",4096);N(this,"publicExponent",65537);N(this,"hashAlgorithm","sha256");N(this,"driver");this.driver=crypto==null?void 0:crypto.subtle}async generateJWK(){const e=await this.driver.generateKey({name:"RSA-PSS",modulusLength:4096,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!0,["sign"]),r=await this.driver.exportKey("jwk",e.privateKey);return{kty:r.kty,e:r.e,n:r.n,d:r.d,p:r.p,q:r.q,dp:r.dp,dq:r.dq,qi:r.qi}}async sign(e,r,{saltLength:n}={saltLength:32}){const i=await this.driver.sign({name:"RSA-PSS",saltLength:n},await this.jwkToCryptoKey(e),r);return new Uint8Array(i)}async hash(e,r="SHA-256"){const n=await this.driver.digest(r,e);return new Uint8Array(n)}async verify(e,r,n){const i={kty:"RSA",e:"AQAB",n:e},s=await this.jwkToPublicCryptoKey(i),a=await this.driver.digest("SHA-256",r),o=await this.driver.verify({name:"RSA-PSS",saltLength:0},s,n,r),c=await this.driver.verify({name:"RSA-PSS",saltLength:32},s,n,r),u=await this.driver.verify({name:"RSA-PSS",saltLength:Math.ceil((s.algorithm.modulusLength-1)/8)-a.byteLength-2},s,n,r);return o||c||u}async jwkToCryptoKey(e){return this.driver.importKey("jwk",e,{name:"RSA-PSS",hash:{name:"SHA-256"}},!1,["sign"])}async jwkToPublicCryptoKey(e){return this.driver.importKey("jwk",e,{name:"RSA-PSS",hash:{name:"SHA-256"}},!1,["verify"])}async encrypt(e,r,n){const i=await this.driver.importKey("raw",typeof r=="string"?yt(r):r,{name:"PBKDF2",length:32},!1,["deriveKey"]),s=await this.driver.deriveKey({name:"PBKDF2",salt:yt(n||"salt"),iterations:1e5,hash:"SHA-256"},i,{name:"AES-CBC",length:256},!1,["encrypt","decrypt"]),a=new Uint8Array(16);crypto.getRandomValues(a);const o=await this.driver.encrypt({name:"AES-CBC",iv:a},s,e);return Pr([a,o])}async decrypt(e,r,n){const i=await this.driver.importKey("raw",typeof r=="string"?yt(r):r,{name:"PBKDF2",length:32},!1,["deriveKey"]),s=await this.driver.deriveKey({name:"PBKDF2",salt:yt(n||"salt"),iterations:1e5,hash:"SHA-256"},i,{name:"AES-CBC",length:256},!1,["encrypt","decrypt"]),a=e.slice(0,16),o=await this.driver.decrypt({name:"AES-CBC",iv:a},s,e.slice(16));return Pr([o])}}async function Fs(t){if(typeof t[Symbol.asyncIterator]=="function"){const i=t,s=Oi.createHash("sha384");let a=0;for await(const u of i)a+=u.byteLength,s.update(u);const o=Pr([yt("blob"),yt(a.toString())]),c=Pr([await xr().hash(o,"SHA-384"),s.digest()]);return await xr().hash(c,"SHA-384")}else if(Array.isArray(t)){const i=Pr([yt("list"),yt(t.length.toString())]);return await Hh(t,await xr().hash(i,"SHA-384"))}const e=t,r=Pr([yt("blob"),yt(e.byteLength.toString())]),n=Pr([await xr().hash(r,"SHA-384"),await xr().hash(e,"SHA-384")]);return await xr().hash(n,"SHA-384")}async function Hh(t,e){if(t.length<1)return e;const r=Pr([e,await Fs(t[0])]),n=await xr().hash(r,"SHA-384");return await Hh(t.slice(1),n)}class pa extends Error{constructor(r,n={}){var e=(...XS)=>(super(...XS),N(this,"type"),N(this,"response"),this);n.message?e(n.message):e(),this.type=r,this.response=n.response}getType(){return this.type}}function xa(t){let e=t.data;if(typeof t.data=="string")try{e=JSON.parse(t.data)}catch{}if(t.data instanceof ArrayBuffer||t.data instanceof Uint8Array)try{e=JSON.parse(e.toString())}catch{}return e?e.error||e:t.statusText||"unknown"}class I1{constructor(e,r){N(this,"api");N(this,"network");this.api=e,this.network=r}async getByHash(e){const r=await this.api.get(`block/hash/${e}`);if(r.status===200)return r.data;throw r.status===404?new pa("BLOCK_NOT_FOUND"):new Error(`Error while loading block data: ${r}`)}async getByHeight(e){const r=await this.api.get(`block/height/${e}`);if(r.status===200)return r.data;throw r.status===404?new pa("BLOCK_NOT_FOUND"):new Error(`Error while loading block data: ${r}`)}async getCurrent(){const{current:e}=await this.network.getInfo();return await this.getByHash(e)}}const gi=256*1024,B1=32*1024,ca=32,ts=32;class U1{constructor(e){N(this,"crypto");this.crypto=e.deps.crypto}async chunkData(e){const r=[];let n=e,i=0;for(;n.byteLength>=gi;){let s=gi;const a=n.byteLength-gi;a>0&&a<B1&&(s=Math.ceil(n.byteLength/2));const o=n.slice(0,s),c=await this.crypto.hash(o);i+=o.byteLength,r.push({dataHash:c,minByteRange:i-o.byteLength,maxByteRange:i}),n=n.slice(s)}return r.push({dataHash:await this.crypto.hash(n),minByteRange:i,maxByteRange:i+n.byteLength}),r}async generateLeaves(e){return Promise.all(e.map(async({dataHash:r,minByteRange:n,maxByteRange:i})=>({type:"leaf",id:await this.hash(await Promise.all([this.hash(r),this.hash(po(i))])),dataHash:r,minByteRange:n,maxByteRange:i})))}async computeRootHash(e){return(await this.generateTree(e)).id}async generateTree(e){return await this.buildLayers(await this.generateLeaves(await this.chunkData(e)))}async generateTransactionChunks(e){const r=await this.chunkData(e),n=await this.generateLeaves(r),i=await this.buildLayers(n),s=await this.generateProofs(i),a=r.slice(-1)[0];return a.maxByteRange-a.minByteRange===0&&(r.splice(r.length-1,1),s.splice(s.length-1,1)),{data_root:i.id,chunks:r,proofs:s}}async buildLayers(e,r=0){if(e.length<2)return e[0];const n=[];for(let i=0;i<e.length;i+=2)n.push(await this.hashBranch(e[i],e[i+1]));return this.buildLayers(n,r+1)}generateProofs(e){const r=this.resolveBranchProofs(e);return Array.isArray(r)?Kh(r):[r]}resolveBranchProofs(e,r=new Uint8Array,n=0){if(e.type=="leaf")return{offset:e.maxByteRange-1,proof:Pr([r,e.dataHash,po(e.maxByteRange)])};if(e.type=="branch"){const i=Pr([r,e.leftChild.id,e.rightChild.id,po(e.byteRange)]);return[this.resolveBranchProofs(e.leftChild,i,n+1),this.resolveBranchProofs(e.rightChild,i,n+1)]}throw new Error("Unexpected node type")}async validatePath(e,r,n,i,s){if(i<=0)return!1;if(r>=i)return this.validatePath(e,0,i-1,i,s);if(r<0)return this.validatePath(e,0,0,i,s);if(s.length==ts+ca){const m=s.slice(0,ts),P=s.slice(m.length,m.length+ca),M=await this.hash([await this.hash(m),await this.hash(P)]);return Cd(e,M)?{offset:i-1,leftBound:n,rightBound:i,chunkSize:i-n}:!1}const a=s.slice(0,ts),o=s.slice(a.length,a.length+ts),c=s.slice(a.length+o.length,a.length+o.length+ca),u=Md(c),h=s.slice(a.length+o.length+c.length),p=await this.hash([await this.hash(a),await this.hash(o),await this.hash(c)]);return Cd(e,p)?r<u?await this.validatePath(a,r,n,Math.min(i,u),h):await this.validatePath(o,r,Math.max(n,u),i,h):!1}async hashBranch(e,r){return r?{type:"branch",id:await this.hash([await this.hash(e.id),await this.hash(r.id),await this.hash(po(e.maxByteRange))]),byteRange:e.maxByteRange,maxByteRange:r.maxByteRange,leftChild:e,rightChild:r}:e}async hash(e){return Array.isArray(e)&&(e=Gh.utils.concatBuffers(e)),new Uint8Array(await this.crypto.hash(e))}async debug(e,r=""){if(e.byteLength<1)return r;const n=e.slice(0,ts),i=e.slice(n.length,n.length+ts),s=e.slice(n.length+i.length,n.length+i.length+ca),a=Md(s),o=e.slice(n.length+i.length+s.length),c=await this.hash([await this.hash(n),await this.hash(i),await this.hash(s)]),u=`${r}
${JSON.stringify(ue.from(n))},${JSON.stringify(ue.from(i))},${a} => ${JSON.stringify(c)}`;return this.debug(o,u)}}function Kh(t){const e=[];return t.forEach(r=>{Array.isArray(r)?e.push(...Kh(r)):e.push(r)}),e}function po(t){const e=new Uint8Array(ca);for(let r=e.length-1;r>=0;r--){const n=t%256;e[r]=n,t=(t-n)/256}return e}function Md(t){let e=0;for(let r=0;r<t.length;r++)e*=256,e+=t[r];return e}const Cd=(t,e)=>t.every((r,n)=>e[n]===r);class O1{constructor(e){N(this,"api");this.api=e}async getTransactionMetadata(e){const r=await this.api.get(`tx/${e}/offset`);if(r.status===200)return r.data;throw new Error(`Unable to get transaction offset: ${xa(r)}`)}async getChunk(e){const r=await this.api.get(`chunk/${e}`);if(r.status===200)return r.data;throw new Error(`Unable to get chunk: ${xa(r)}`)}async getChunkData(e){const r=await this.getChunk(e);return Sn(r.chunk)}firstChunkOffset(e){return parseInt(e.offset)-parseInt(e.size)+1}async downloadChunkedData(e,r){const n=await this.getTransactionMetadata(e),i=parseInt(n.size),s=new Uint8Array(i);let a=0;for await(const o of this.concurrentChunkDownloader(e,r))s.set(o,a),a+=o.length;return s}async*concurrentChunkDownloader(e,r){const n={concurrency:10,...r},i=await this.getTransactionMetadata(e),s=new qe(i.offset),a=new qe(i.size),o=s.minus(a).plus(1);let c=0;const u=Math.ceil(a.dividedBy(gi).toNumber()),h=R=>this.getChunkData(R.toString()).then(E=>(c+=E.length,E)),p=[],m=u-2,P=Math.min(m,n.concurrency);let M=0;for(let R=0;R<P;R++)p.push(h(o.plus(gi*M++)));for(;M<m;)p.push(h(o.plus(gi*M++))),yield p.shift();for(;p.length>0;)yield p.shift();if(yield h(o.plus(gi*M++)),a.isGreaterThan(c)&&(yield h(o.plus(gi*M++))),!a.isEqualTo(c))throw new Error(`got ${c}B, expected ${a.toString()}B`)}}function N1(t,e){const r=t;return r.deepHash=new e.deepHash({deps:{utils:{stringToBuffer:yt,concatBuffers:Pr},crypto:t}}),r}class D1{constructor({deps:e}){N(this,"crypto");N(this,"utils");this.crypto=e.crypto,this.utils=e.utils}async deepHash(e){if(Array.isArray(e)){const i=this.utils.concatBuffers([this.utils.stringToBuffer("list"),this.utils.stringToBuffer(e.length.toString())]);return await this.deepHashChunks(e,await this.crypto.hash(i,"SHA-384"))}const r=this.utils.concatBuffers([this.utils.stringToBuffer("blob"),this.utils.stringToBuffer(e.byteLength.toString())]),n=this.utils.concatBuffers([await this.crypto.hash(r,"SHA-384"),await this.crypto.hash(e,"SHA-384")]);return await this.crypto.hash(n,"SHA-384")}async deepHashChunks(e,r){if(e.length<1)return r;const n=this.utils.concatBuffers([r,await this.deepHash(e[0])]),i=await this.crypto.hash(n,"SHA-384");return await this.deepHashChunks(e.slice(1),i)}}class Id{constructor(e){N(this,"_instance");N(this,"cookieMap",new Map);N(this,"config");e&&this.applyConfig(e)}applyConfig(e){this.config=this.mergeDefaults(e),this._instance=void 0}getConfig(){return this.config}async requestInterceptor(e){const r=this.cookieMap.get(new URL(e.baseURL??"").host);return r&&(e.headers.cookie=r),e}async responseInterceptor(e){var n;const r=(n=e.headers)==null?void 0:n["set-cookie"];return r&&this.cookieMap.set(e.request.host,r),e}mergeDefaults(e){return e.headers??(e.headers={}),e.network&&!Object.keys(e.headers).includes("x-network")&&(e.headers["x-network"]=e.network),{url:e.url,timeout:e.timeout??2e4,logging:e.logging??!1,logger:e.logger??console.log,headers:{...e.headers,"x-irys-arweave-version":Gh.VERSION},withCredentials:e.withCredentials??!1,retry:{retries:3,maxTimeout:5e3}}}async get(e,r){var n;try{return await this.request(e,{...r,method:"GET"})}catch(i){if((n=i.response)!=null&&n.status)return i.response;throw i}}async post(e,r,n){var i;try{return await this.request(e,{data:r,...n,method:"POST"})}catch(s){if((i=s.response)!=null&&i.status)return s.response;throw s}}get instance(){if(this._instance)return this._instance;const e=jt.create({baseURL:this.config.url.toString(),timeout:this.config.timeout,maxContentLength:1024*1024*512,headers:this.config.headers,withCredentials:this.config.withCredentials});return this.config.withCredentials&&(e.interceptors.request.use(this.requestInterceptor.bind(this)),e.interceptors.response.use(this.responseInterceptor.bind(this))),this.config.logging&&(e.interceptors.request.use(r=>(this.config.logger(`Requesting: ${r.baseURL}/${r.url}`),r)),e.interceptors.response.use(r=>(this.config.logger(`Response: ${r.config.url} - ${r.status}`),r))),this._instance=e}async request(e,r){const n=this.instance,i=(r==null?void 0:r.url)??new URL(e,this.config.url).toString();return Ai(s=>n({...r,url:i}),{...this.config.retry,...r==null?void 0:r.retry})}}const Bd=t=>typeof t!="string"&&"url"in t,L1={maxAttempts:15,randomlySelect:!0};class $1{constructor({gateways:e,miners:r,opts:n}){N(this,"minerInstances",[]);N(this,"globalConfig");N(this,"gatewayInstances",[]);this.globalConfig=(n==null?void 0:n.globalConfig)??{},r&&this.addMiners(r),e&&this.addGateways(e)}async addPeersFrom(e,r){const n=(await this.get("",{url:new URL("/peers",e).toString()})).data;this.addMiners(n.slice(0,r==null?void 0:r.limit).map(i=>`http://${i}`))}addMiners(e){e.forEach(r=>this.minerInstances.push(new Id(Bd(r)?r:{url:new URL(r),...this.globalConfig})))}addGateways(e){e.forEach(r=>this.gatewayInstances.push(new Id(Bd(r)?r:{url:new URL(r),...this.globalConfig})))}async get(e,r){return this.request(e,{...r,method:"GET"})}async post(e,r,n){return this.request(e,{data:r,...n,method:"POST"})}async request(e,r){const n={...L1,...r==null?void 0:r.fallback};let i=0;const s=r!=null&&r.gatewayOnly?this.gatewayInstances:this.gatewayInstances.concat(this.minerInstances),a=Math.min(Math.max(n==null?void 0:n.maxAttempts,1),s.length),o=n==null?void 0:n.onFallback;if(s.length===0)throw new Error("Unable to run request due to 0 configured gateways/miners.");for(;i++<a;){const c=s.at(n!=null&&n.randomlySelect?Math.floor(Math.random()*s.length):i-1);if(c)try{return await c.request(e,{...r})}catch(u){if(o==null||o(u,c),i>=a)throw u}}throw new Error("unreachable")}}class zh{get(e,r){if(!Object.getOwnPropertyNames(this).includes(e))throw new Error(`Field "${e}" is not a property of the Arweave Transaction class.`);if(this[e]instanceof Uint8Array)return r&&r.decode&&r.string?tl(this[e]):r&&r.decode&&!r.string?this[e]:Tn(this[e]);if(this[e]instanceof Array){if((r==null?void 0:r.decode)!==void 0||(r==null?void 0:r.string)!==void 0)throw e==="tags"&&console.warn(`Did you mean to use 'transaction["tags"]' ?`),new Error("Cannot decode or stringify an array.");return this[e]}return r&&r.decode==!0?r&&r.string?Lh(this[e]):Sn(this[e]):this[e]}}class q1 extends zh{constructor(r,n){super();N(this,"name");N(this,"value");this.name=r,this.value=n}}let tn=class extends zh{constructor({attributes:r,deps:n}){super();N(this,"format",2);N(this,"id","");N(this,"last_tx","");N(this,"owner","");N(this,"tags",[]);N(this,"target","");N(this,"quantity","0");N(this,"data_size","0");N(this,"data",new Uint8Array);N(this,"data_root","");N(this,"reward","0");N(this,"signature","");N(this,"merkle");N(this,"deepHash");N(this,"chunks");this.merkle=n.merkle,this.deepHash=n.deepHash,Object.assign(this,r),typeof this.data=="string"&&(this.data=Sn(this.data)),r.tags&&(this.tags=r.tags)}addTag(r,n){this.tags.push({name:_u(r),value:_u(n)})}toJSON(){return{format:this.format,id:this.id,last_tx:this.last_tx,owner:this.owner,tags:this.tags,target:this.target,quantity:this.quantity,data:Tn(this.data),data_size:this.data_size,data_root:this.data_root,data_tree:this.data_tree,reward:this.reward,signature:this.signature}}setOwner(r){this.owner=r}setSignature({id:r,owner:n,reward:i,tags:s,signature:a}){this.id=r,this.owner=n,i&&(this.reward=i),s&&(this.tags=s),this.signature=a}async prepareChunks(r){!this.chunks&&r.byteLength>0&&(this.chunks=await this.merkle.generateTransactionChunks(r),this.data_root=Tn(this.chunks.data_root)),!this.chunks&&r.byteLength===0&&(this.chunks={chunks:[],data_root:new Uint8Array,proofs:[]},this.data_root="")}getChunk(r,n){if(!this.chunks)throw new Error("Chunks have not been prepared");const i=this.chunks.proofs[r],s=this.chunks.chunks[r];return{data_root:this.data_root,data_size:this.data_size,data_path:Tn(i.proof),offset:i.offset.toString(),chunk:Tn(n.slice(s.minByteRange,s.maxByteRange))}}async getSignatureData(){switch(this.format){case 1:const r=this.tags.reduce((i,s)=>Pr([i,Sn(s.name),Sn(s.value)]),new Uint8Array);return Pr([this.get("owner",{decode:!0,string:!1}),this.get("target",{decode:!0,string:!1}),this.get("data",{decode:!0,string:!1}),yt(this.quantity),yt(this.reward),this.get("last_tx",{decode:!0,string:!1}),r]);case 2:this.data_root||await this.prepareChunks(this.data);const n=this.tags.map(i=>[Sn(i.name),Sn(i.value)]);return await this.deepHash.deepHash([yt(this.format.toString()),this.get("owner",{decode:!0,string:!1}),this.get("target",{decode:!0,string:!1}),yt(this.quantity),yt(this.reward),this.get("last_tx",{decode:!0,string:!1}),n,yt(this.data_size),this.get("data_root",{decode:!0,string:!1})]);default:throw new Error(`Unexpected transaction format: ${this.format}`)}}};class F1{constructor(e){N(this,"api");this.api=e}getInfo(){return this.api.get("info").then(e=>e.data)}getPeers(){return this.api.get("peers").then(e=>e.data)}}const Ud=1,H1=["invalid_json","chunk_too_big","data_path_too_big","offset_too_big","data_size_too_big","chunk_proof_ratio_not_attractive","invalid_proof"],Od=1e3*40;class ya{constructor({deps:e,transaction:r}){N(this,"chunkIndex",0);N(this,"txPosted",!1);N(this,"transaction");N(this,"lastRequestTimeEnd",0);N(this,"totalErrors",0);N(this,"data");N(this,"lastResponseStatus",0);N(this,"lastResponseError","");N(this,"crypto");N(this,"api");N(this,"merkle");N(this,"deepHash");if(!r.id)throw new Error("Transaction is not signed");if(!r.chunks)throw new Error("Transaction chunks not prepared");this.api=e.api,this.crypto=e.crypto,this.merkle=e.merkle,this.deepHash=e.deepHash,this.data=r.data,this.transaction=new tn({attributes:Object.assign({},r,{data:new Uint8Array(0)}),deps:{merkle:e.merkle,deepHash:e.deepHash}})}get isComplete(){return this.txPosted&&this.chunkIndex===this.transaction.chunks.chunks.length}get totalChunks(){return this.transaction.chunks.chunks.length}get uploadedChunks(){return this.chunkIndex}get pctComplete(){return Math.trunc(this.uploadedChunks/this.totalChunks*100)}async uploadChunk(e){if(this.isComplete)throw new Error("Upload is already complete");if(this.lastResponseError!==""?this.totalErrors++:this.totalErrors=0,this.totalErrors===100)throw new Error(`Unable to complete upload: ${this.lastResponseStatus}: ${this.lastResponseError}`);let r=this.lastResponseError===""?0:Math.max(this.lastRequestTimeEnd+Od-Date.now(),Od);if(r>0&&(r=r-r*Math.random()*.3,await new Promise(a=>setTimeout(a,r))),this.lastResponseError="",!this.txPosted){await this.postTransaction();return}e&&(this.chunkIndex=e);const n=this.transaction.getChunk(e||this.chunkIndex,this.data);if(!await this.merkle.validatePath(this.transaction.chunks.data_root,parseInt(n.offset),0,parseInt(n.data_size),Sn(n.data_path)))throw new Error(`Unable to validate chunk ${this.chunkIndex}`);const s=await this.api.post("chunk",this.transaction.getChunk(this.chunkIndex,this.data)).catch(a=>(console.error(a.message),{status:-1,data:{error:a.message}}));if(this.lastRequestTimeEnd=Date.now(),this.lastResponseStatus=s.status,this.lastResponseStatus==200)this.chunkIndex++;else if(this.lastResponseError=xa(s),H1.includes(this.lastResponseError))throw new Error(`Fatal error uploading chunk ${this.chunkIndex}: ${this.lastResponseError}`)}static async fromSerialized({serialized:e,data:r,deps:n}){if(!e||typeof e.chunkIndex!="number"||typeof e.transaction!="object")throw new Error("Serialized object does not match expected format.");const i=new tn(e.transaction);i.chunks||await i.prepareChunks(r);const s=new ya({deps:n,transaction:i});if(s.chunkIndex=e.chunkIndex,s.lastRequestTimeEnd=e.lastRequestTimeEnd,s.lastResponseError=e.lastResponseError,s.lastResponseStatus=e.lastResponseStatus,s.txPosted=e.txPosted,s.data=r,s.transaction.data_root!==e.transaction.data_root)throw new Error("Data mismatch: Uploader doesn't match provided data.");return s}static async fromTransactionId(e,r){const n=await e.get(`tx/${r}`);if(n.status!==200)throw new Error(`Tx ${r} not found: ${n.status}`);const i=n.data;return i.data=new Uint8Array(0),{txPosted:!0,chunkIndex:0,lastResponseError:"",lastRequestTimeEnd:0,lastResponseStatus:0,transaction:i}}toJSON(){return{chunkIndex:this.chunkIndex,transaction:this.transaction,lastRequestTimeEnd:this.lastRequestTimeEnd,lastResponseStatus:this.lastResponseStatus,lastResponseError:this.lastResponseError,txPosted:this.txPosted}}async postTransaction(){if(this.totalChunks<=Ud){this.transaction.data=this.data;const n=await this.api.post("tx",this.transaction).catch(i=>(console.error(i),{status:-1,data:{error:i.message}}));if(this.lastRequestTimeEnd=Date.now(),this.lastResponseStatus=n.status,this.transaction.data=new Uint8Array(0),n.status>=200&&n.status<300){this.txPosted=!0,this.chunkIndex=Ud;return}throw this.lastResponseError=xa(n),new Error(`Unable to upload transaction: ${n.status}, ${this.lastResponseError}`)}const r=await this.api.post("tx",this.transaction);if(this.lastRequestTimeEnd=Date.now(),this.lastResponseStatus=r.status,!(r.status>=200&&r.status<300))throw this.lastResponseError=xa(r),new Error(`Unable to upload transaction: ${r.status}, ${this.lastResponseError}`);this.txPosted=!0}}class K1{constructor({deps:e}){N(this,"api");N(this,"crypto");N(this,"chunks");N(this,"merkle");N(this,"deepHash");this.api=e.api,this.crypto=e.crypto,this.chunks=e.chunks,this.merkle=e.merkle,this.deepHash=e.deepHash}getTransactionAnchor(){return this.api.get("tx_anchor",{transformResponse:[]}).then(e=>e.data)}getPrice(e,r){const n=r?`price/${e}/${r}`:`price/${e}`;return this.api.get(n,{transformResponse:[function(i){return i}]}).then(i=>i.data)}async get(e){const r=await this.api.get(`tx/${e}`);if(r.status==200){const n=parseInt(r.data.data_size);if(r.data.format>=2&&n>0&&n<=1024*1024*12){const i=await this.getData(e);return new tn({attributes:{...r.data,data:i},deps:{merkle:this.merkle,deepHash:this.deepHash}})}return new tn({attributes:{...r.data,format:r.data.format||1},deps:{merkle:this.merkle,deepHash:this.deepHash}})}throw r.status===404?new pa("TX_NOT_FOUND"):r.status===410?new pa("TX_FAILED"):new pa("TX_INVALID")}fromRaw(e){return new tn({attributes:e,deps:{merkle:this.merkle,deepHash:this.deepHash}})}getStatus(e){return this.api.get(`tx/${e}/status`).then(r=>r.status===200?{status:200,confirmed:r.data}:{status:r.status,confirmed:null})}async getData(e){let r;try{r=(await this.api.get(`/${e}`,{responseType:"arraybuffer"})).data}catch(n){console.error(`Error while trying to download contiguous data from gateway cache for ${e}`),console.error(n)}if(!r){console.warn(`Falling back to chunks for ${e}`);try{r=await this.chunks.downloadChunkedData(e)}catch(n){console.error(`Error while trying to download chunked data for ${e}`),console.error(n)}}if(!r)throw new Error(`${e} data was not found!`);return r}async getDataStream(e){let r;try{const n=(await this.api.get(`/${e}`,{responseType:"arraybuffer"})).data;r=async function*(){yield n}()}catch(n){console.error(`Error while trying to download contiguous data from gateway cache for ${e}`),console.error(n)}if(!r){console.warn(`Falling back to chunks for ${e}`);try{r=this.chunks.concurrentChunkDownloader(e)}catch(n){console.error(`Error while trying to download chunked data for ${e}`),console.error(n)}}if(!r)throw new Error(`${e} data was not found!`);return r}async sign(e,r,n){const s=typeof r=="object"&&(o=>{let c=!0;return["n","e","d","p","q","dp","dq","qi"].map(u=>!(u in o)&&(c=!1)),c})(r),a=typeof arweaveWallet=="object";if(!s&&!a)throw new Error("No valid JWK or external wallet found to sign transaction.");if(a){try{(await arweaveWallet.getPermissions()).includes("SIGN_TRANSACTION")||await arweaveWallet.connect(["SIGN_TRANSACTION"])}catch{}e.tags=e.tags.map(c=>new q1(c.name,c.value));const o=await arweaveWallet.sign(e,n);e.setSignature({id:o.id,owner:o.owner,reward:o.reward,tags:o.tags,signature:o.signature})}else if(s){e.setOwner(r.n);const o=await e.getSignatureData(),c=await this.crypto.sign(r,o,n),u=await this.crypto.hash(c);e.setSignature({id:Tn(u),owner:r.n,signature:Tn(c)})}else throw new Error("An error occurred while signing. Check wallet is valid")}async verify(e){const r=await e.getSignatureData(),n=e.get("signature",{decode:!0,string:!1}),i=Tn(await this.crypto.hash(n));if(e.id!==i)throw new Error("Invalid transaction signature or ID! The transaction ID doesn't match the expected SHA-256 hash of the signature.");return this.crypto.verify(e.owner,r,n)}async post(e){if(typeof e=="string"?e=new tn({attributes:JSON.parse(e),deps:{merkle:this.merkle,deepHash:this.deepHash}}):typeof e.readInt32BE=="function"?e=new tn({attributes:JSON.parse(e.toString()),deps:{merkle:this.merkle,deepHash:this.deepHash}}):typeof e=="object"&&!(e instanceof tn)&&(e=new tn({attributes:e,deps:{merkle:this.merkle,deepHash:this.deepHash}})),!(e instanceof tn))throw new Error("Must be Transaction object");e.chunks||await e.prepareChunks(e.data);const r=await this.getUploader(e,e.data);try{for(;!r.isComplete;)await r.uploadChunk()}catch(n){if(r.lastResponseStatus>0)return{status:r.lastResponseStatus,statusText:r.lastResponseError,data:{error:r.lastResponseError}};throw n}return{status:200,statusText:"OK",data:{}}}async getUploader(e,r){let n;if(r instanceof ArrayBuffer&&(r=new Uint8Array(r)),e instanceof tn){if(r||(r=e.data),!(r instanceof Uint8Array))throw new Error("Data format is invalid");e.chunks||await e.prepareChunks(r),n=new ya({transaction:e,deps:{api:this.api,crypto:this.crypto,merkle:this.merkle,deepHash:this.deepHash}}),(!n.data||n.data.length===0)&&(n.data=r)}else{if(typeof e=="string"&&(e=await ya.fromTransactionId(this.api,e)),!r||!(r instanceof Uint8Array))throw new Error("Must provide data when resuming upload");n=await ya.fromSerialized({deps:{api:this.api,merkle:this.merkle,crypto:this.crypto,deepHash:this.deepHash},serialized:e,data:r})}return n}async*upload(e,r){const n=await this.getUploader(e,r);for(;!n.isComplete;)await n.uploadChunk(),yield n;return n}}class z1{constructor(e,r){N(this,"api");N(this,"crypto");this.api=e,this.crypto=r}getBalance(e){return this.api.get(`wallet/${e}/balance`,{transformResponse:[function(r){return r}]}).then(r=>r.data)}getLastTransactionID(e){return this.api.get(`wallet/${e}/last_tx`).then(r=>r.data)}generate(){return this.crypto.generateJWK()}async jwkToAddress(e){return!e||e==="use_wallet"?this.getAddress():this.getAddress(e)}async getAddress(e){if(!e||e==="use_wallet"){try{await arweaveWallet.connect(["ACCESS_ADDRESS"])}catch{}return arweaveWallet.getActiveAddress()}else return this.ownerToAddress(e.n)}async ownerToAddress(e){return Tn(await this.crypto.hash(Sn(e)))}}var wi;let jh=(wi=class{constructor(e){N(this,"config");N(this,"api");N(this,"wallets");N(this,"transactions");N(this,"network");N(this,"blocks");N(this,"chunks");N(this,"crypto");N(this,"deepHash");N(this,"merkle");if(this.config=e,!e.crypto)throw new Error("config.crypto is required");this.crypto=N1(e.crypto,{deepHash:D1}),this.deepHash=this.crypto.deepHash;const r=e.gateways?Array.isArray(e.gateways)?e.gateways:[e.gateways]:void 0;this.api=new $1({gateways:r,miners:e.miners}),this.wallets=new z1(this.api,this.crypto),this.chunks=new O1(this.api),this.network=new F1(this.api),this.blocks=new I1(this.api,this.network),this.merkle=new U1({deps:{crypto:this.crypto}}),this.transactions=new K1({deps:{api:this.api,crypto:e.crypto,chunks:this.chunks,merkle:this.merkle,deepHash:this.deepHash}})}get utils(){return wi.utils}getConfig(){return this.config}async createTransaction(e,r){const n={};if(Object.assign(n,e),!e.data&&!(e.target&&e.quantity))throw new Error("A new Arweave transaction must have a 'data' value, or 'target' and 'quantity' values.");if(e.owner==null&&r&&r!=="use_wallet"&&(n.owner=r.n),e.last_tx==null&&(n.last_tx=await this.transactions.getTransactionAnchor()),typeof e.data=="string"&&(e.data=yt(e.data)),e.data instanceof ArrayBuffer&&(e.data=new Uint8Array(e.data)),e.data&&!(e.data instanceof Uint8Array))throw new Error("Expected data to be a string, Uint8Array or ArrayBuffer");if(e.reward==null){const s=e.data?e.data.byteLength:0;n.reward=await this.transactions.getPrice(s,n.target)}n.data_root="",n.data_size=e.data?e.data.byteLength.toString():"0",n.data=e.data||new Uint8Array(0);const i=new tn({attributes:n,deps:{merkle:this.merkle,deepHash:this.deepHash}});return await i.getSignatureData(),i}},N(wi,"init"),N(wi,"utils",C1),N(wi,"VERSION","0.0.1"),wi);const Gh=jh;class rl extends jh{constructor(e,r){super({crypto:(r==null?void 0:r.crypto)??new Po,...r,gateways:e??"https://arweave.net"})}static init(e){return new rl(e)}}const j1=Po.default?Po.default:Po;class Wh extends j1{getPublicKey(e){throw new Error("Unimplemented")}}let G1;function xr(){return G1??(G1=new Wh)}class Vh{constructor(e,r){N(this,"_key");N(this,"pk");N(this,"signatureType",1);N(this,"ownerLength",zt[1].pubLength);N(this,"signatureLength",zt[1].sigLength);N(this,"_publicKey");this._key=e,this.pk=r,r||(this.pk=xr().getPublicKey(JSON.parse(e)))}get publicKey(){return this._publicKey}sign(e){return Oi.createSign("sha256").update(e).sign({key:this._key,padding:Oi.constants.RSA_PKCS1_PSS_PADDING})}static async verify(e,r,n){return await xr().verify(ue.isBuffer(e)?Xe.encode(e):e,r,n)}}var Jh={},Yh={},ko=Na,bs=ko.Buffer,sn={},an;for(an in ko)ko.hasOwnProperty(an)&&(an==="SlowBuffer"||an==="Buffer"||(sn[an]=ko[an]));var ms=sn.Buffer={};for(an in bs)bs.hasOwnProperty(an)&&(an==="allocUnsafe"||an==="allocUnsafeSlow"||(ms[an]=bs[an]));sn.Buffer.prototype=bs.prototype;(!ms.from||ms.from===Uint8Array.from)&&(ms.from=function(t,e,r){if(typeof t=="number")throw new TypeError('The "value" argument must not be of type number. Received type '+typeof t);if(t&&typeof t.length>"u")throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);return bs(t,e,r)});ms.alloc||(ms.alloc=function(t,e,r){if(typeof t!="number")throw new TypeError('The "size" argument must be of type number. Received type '+typeof t);if(t<0||t>=2*(1<<30))throw new RangeError('The value "'+t+'" is invalid for option "size"');var n=bs(t);return!e||e.length===0?n.fill(0):typeof r=="string"?n.fill(e,r):n.fill(e),n});if(!sn.kStringMaxLength)try{sn.kStringMaxLength=Rt.binding("buffer").kStringMaxLength}catch{}sn.constants||(sn.constants={MAX_LENGTH:sn.kMaxLength},sn.kStringMaxLength&&(sn.constants.MAX_STRING_LENGTH=sn.kStringMaxLength));var nl=sn,il={};const W1=xn;function yn(t){this._reporterState={obj:null,path:[],options:t||{},errors:[]}}il.Reporter=yn;yn.prototype.isError=function(e){return e instanceof As};yn.prototype.save=function(){const e=this._reporterState;return{obj:e.obj,pathLen:e.path.length}};yn.prototype.restore=function(e){const r=this._reporterState;r.obj=e.obj,r.path=r.path.slice(0,e.pathLen)};yn.prototype.enterKey=function(e){return this._reporterState.path.push(e)};yn.prototype.exitKey=function(e){const r=this._reporterState;r.path=r.path.slice(0,e-1)};yn.prototype.leaveKey=function(e,r,n){const i=this._reporterState;this.exitKey(e),i.obj!==null&&(i.obj[r]=n)};yn.prototype.path=function(){return this._reporterState.path.join("/")};yn.prototype.enterObject=function(){const e=this._reporterState,r=e.obj;return e.obj={},r};yn.prototype.leaveObject=function(e){const r=this._reporterState,n=r.obj;return r.obj=e,n};yn.prototype.error=function(e){let r;const n=this._reporterState,i=e instanceof As;if(i?r=e:r=new As(n.path.map(function(s){return"["+JSON.stringify(s)+"]"}).join(""),e.message||e,e.stack),!n.options.partial)throw r;return i||n.errors.push(r),r};yn.prototype.wrapResult=function(e){const r=this._reporterState;return r.options.partial?{result:this.isError(e)?null:e,errors:r.errors}:e};function As(t,e){this.path=t,this.rethrow(e)}W1(As,Error);As.prototype.rethrow=function(e){if(this.message=e+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,As),!this.stack)try{throw new Error(this.message)}catch(r){this.stack=r.stack}return this};var Ha={};const V1=xn,mc=il.Reporter,Ts=nl.Buffer;function ln(t,e){if(mc.call(this,e),!Ts.isBuffer(t)){this.error("Input not Buffer");return}this.base=t,this.offset=0,this.length=t.length}V1(ln,mc);Ha.DecoderBuffer=ln;ln.isDecoderBuffer=function(e){return e instanceof ln?!0:typeof e=="object"&&Ts.isBuffer(e.base)&&e.constructor.name==="DecoderBuffer"&&typeof e.offset=="number"&&typeof e.length=="number"&&typeof e.save=="function"&&typeof e.restore=="function"&&typeof e.isEmpty=="function"&&typeof e.readUInt8=="function"&&typeof e.skip=="function"&&typeof e.raw=="function"};ln.prototype.save=function(){return{offset:this.offset,reporter:mc.prototype.save.call(this)}};ln.prototype.restore=function(e){const r=new ln(this.base);return r.offset=e.offset,r.length=this.offset,this.offset=e.offset,mc.prototype.restore.call(this,e.reporter),r};ln.prototype.isEmpty=function(){return this.offset===this.length};ln.prototype.readUInt8=function(e){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(e||"DecoderBuffer overrun")};ln.prototype.skip=function(e,r){if(!(this.offset+e<=this.length))return this.error(r||"DecoderBuffer overrun");const n=new ln(this.base);return n._reporterState=this._reporterState,n.offset=this.offset,n.length=this.offset+e,this.offset+=e,n};ln.prototype.raw=function(e){return this.base.slice(e?e.offset:this.offset,this.length)};function Rs(t,e){if(Array.isArray(t))this.length=0,this.value=t.map(function(r){return Rs.isEncoderBuffer(r)||(r=new Rs(r,e)),this.length+=r.length,r},this);else if(typeof t=="number"){if(!(0<=t&&t<=255))return e.error("non-byte EncoderBuffer value");this.value=t,this.length=1}else if(typeof t=="string")this.value=t,this.length=Ts.byteLength(t);else if(Ts.isBuffer(t))this.value=t,this.length=t.length;else return e.error("Unsupported type: "+typeof t)}Ha.EncoderBuffer=Rs;Rs.isEncoderBuffer=function(e){return e instanceof Rs?!0:typeof e=="object"&&e.constructor.name==="EncoderBuffer"&&typeof e.length=="number"&&typeof e.join=="function"};Rs.prototype.join=function(e,r){return e||(e=Ts.alloc(this.length)),r||(r=0),this.length===0||(Array.isArray(this.value)?this.value.forEach(function(n){n.join(e,r),r+=n.length}):(typeof this.value=="number"?e[r]=this.value:typeof this.value=="string"?e.write(this.value,r):Ts.isBuffer(this.value)&&this.value.copy(e,r),r+=this.length)),e};const J1=il.Reporter,Y1=Ha.EncoderBuffer,X1=Ha.DecoderBuffer,Mr=Tg,Xh=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],Z1=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(Xh),Q1=["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"];function Nt(t,e,r){const n={};this._baseState=n,n.name=r,n.enc=t,n.parent=e||null,n.children=null,n.tag=null,n.args=null,n.reverseArgs=null,n.choice=null,n.optional=!1,n.any=!1,n.obj=!1,n.use=null,n.useDecoder=null,n.key=null,n.default=null,n.explicit=null,n.implicit=null,n.contains=null,n.parent||(n.children=[],this._wrap())}var Zh=Nt;const em=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];Nt.prototype.clone=function(){const e=this._baseState,r={};em.forEach(function(i){r[i]=e[i]});const n=new this.constructor(r.parent);return n._baseState=r,n};Nt.prototype._wrap=function(){const e=this._baseState;Z1.forEach(function(r){this[r]=function(){const i=new this.constructor(this);return e.children.push(i),i[r].apply(i,arguments)}},this)};Nt.prototype._init=function(e){const r=this._baseState;Mr(r.parent===null),e.call(this),r.children=r.children.filter(function(n){return n._baseState.parent===this},this),Mr.equal(r.children.length,1,"Root node can have only one child")};Nt.prototype._useArgs=function(e){const r=this._baseState,n=e.filter(function(i){return i instanceof this.constructor},this);e=e.filter(function(i){return!(i instanceof this.constructor)},this),n.length!==0&&(Mr(r.children===null),r.children=n,n.forEach(function(i){i._baseState.parent=this},this)),e.length!==0&&(Mr(r.args===null),r.args=e,r.reverseArgs=e.map(function(i){if(typeof i!="object"||i.constructor!==Object)return i;const s={};return Object.keys(i).forEach(function(a){a==(a|0)&&(a|=0);const o=i[a];s[o]=a}),s}))};Q1.forEach(function(t){Nt.prototype[t]=function(){const r=this._baseState;throw new Error(t+" not implemented for encoding: "+r.enc)}});Xh.forEach(function(t){Nt.prototype[t]=function(){const r=this._baseState,n=Array.prototype.slice.call(arguments);return Mr(r.tag===null),r.tag=t,this._useArgs(n),this}});Nt.prototype.use=function(e){Mr(e);const r=this._baseState;return Mr(r.use===null),r.use=e,this};Nt.prototype.optional=function(){const e=this._baseState;return e.optional=!0,this};Nt.prototype.def=function(e){const r=this._baseState;return Mr(r.default===null),r.default=e,r.optional=!0,this};Nt.prototype.explicit=function(e){const r=this._baseState;return Mr(r.explicit===null&&r.implicit===null),r.explicit=e,this};Nt.prototype.implicit=function(e){const r=this._baseState;return Mr(r.explicit===null&&r.implicit===null),r.implicit=e,this};Nt.prototype.obj=function(){const e=this._baseState,r=Array.prototype.slice.call(arguments);return e.obj=!0,r.length!==0&&this._useArgs(r),this};Nt.prototype.key=function(e){const r=this._baseState;return Mr(r.key===null),r.key=e,this};Nt.prototype.any=function(){const e=this._baseState;return e.any=!0,this};Nt.prototype.choice=function(e){const r=this._baseState;return Mr(r.choice===null),r.choice=e,this._useArgs(Object.keys(e).map(function(n){return e[n]})),this};Nt.prototype.contains=function(e){const r=this._baseState;return Mr(r.use===null),r.contains=e,this};Nt.prototype._decode=function(e,r){const n=this._baseState;if(n.parent===null)return e.wrapResult(n.children[0]._decode(e,r));let i=n.default,s=!0,a=null;if(n.key!==null&&(a=e.enterKey(n.key)),n.optional){let c=null;if(n.explicit!==null?c=n.explicit:n.implicit!==null?c=n.implicit:n.tag!==null&&(c=n.tag),c===null&&!n.any){const u=e.save();try{n.choice===null?this._decodeGeneric(n.tag,e,r):this._decodeChoice(e,r),s=!0}catch{s=!1}e.restore(u)}else if(s=this._peekTag(e,c,n.any),e.isError(s))return s}let o;if(n.obj&&s&&(o=e.enterObject()),s){if(n.explicit!==null){const u=this._decodeTag(e,n.explicit);if(e.isError(u))return u;e=u}const c=e.offset;if(n.use===null&&n.choice===null){let u;n.any&&(u=e.save());const h=this._decodeTag(e,n.implicit!==null?n.implicit:n.tag,n.any);if(e.isError(h))return h;n.any?i=e.raw(u):e=h}if(r&&r.track&&n.tag!==null&&r.track(e.path(),c,e.length,"tagged"),r&&r.track&&n.tag!==null&&r.track(e.path(),e.offset,e.length,"content"),n.any||(n.choice===null?i=this._decodeGeneric(n.tag,e,r):i=this._decodeChoice(e,r)),e.isError(i))return i;if(!n.any&&n.choice===null&&n.children!==null&&n.children.forEach(function(h){h._decode(e,r)}),n.contains&&(n.tag==="octstr"||n.tag==="bitstr")){const u=new X1(i);i=this._getUse(n.contains,e._reporterState.obj)._decode(u,r)}}return n.obj&&s&&(i=e.leaveObject(o)),n.key!==null&&(i!==null||s===!0)?e.leaveKey(a,n.key,i):a!==null&&e.exitKey(a),i};Nt.prototype._decodeGeneric=function(e,r,n){const i=this._baseState;return e==="seq"||e==="set"?null:e==="seqof"||e==="setof"?this._decodeList(r,e,i.args[0],n):/str$/.test(e)?this._decodeStr(r,e,n):e==="objid"&&i.args?this._decodeObjid(r,i.args[0],i.args[1],n):e==="objid"?this._decodeObjid(r,null,null,n):e==="gentime"||e==="utctime"?this._decodeTime(r,e,n):e==="null_"?this._decodeNull(r,n):e==="bool"?this._decodeBool(r,n):e==="objDesc"?this._decodeStr(r,e,n):e==="int"||e==="enum"?this._decodeInt(r,i.args&&i.args[0],n):i.use!==null?this._getUse(i.use,r._reporterState.obj)._decode(r,n):r.error("unknown tag: "+e)};Nt.prototype._getUse=function(e,r){const n=this._baseState;return n.useDecoder=this._use(e,r),Mr(n.useDecoder._baseState.parent===null),n.useDecoder=n.useDecoder._baseState.children[0],n.implicit!==n.useDecoder._baseState.implicit&&(n.useDecoder=n.useDecoder.clone(),n.useDecoder._baseState.implicit=n.implicit),n.useDecoder};Nt.prototype._decodeChoice=function(e,r){const n=this._baseState;let i=null,s=!1;return Object.keys(n.choice).some(function(a){const o=e.save(),c=n.choice[a];try{const u=c._decode(e,r);if(e.isError(u))return!1;i={type:a,value:u},s=!0}catch{return e.restore(o),!1}return!0},this),s?i:e.error("Choice not matched")};Nt.prototype._createEncoderBuffer=function(e){return new Y1(e,this.reporter)};Nt.prototype._encode=function(e,r,n){const i=this._baseState;if(i.default!==null&&i.default===e)return;const s=this._encodeValue(e,r,n);if(s!==void 0&&!this._skipDefault(s,r,n))return s};Nt.prototype._encodeValue=function(e,r,n){const i=this._baseState;if(i.parent===null)return i.children[0]._encode(e,r||new J1);let s=null;if(this.reporter=r,i.optional&&e===void 0)if(i.default!==null)e=i.default;else return;let a=null,o=!1;if(i.any)s=this._createEncoderBuffer(e);else if(i.choice)s=this._encodeChoice(e,r);else if(i.contains)a=this._getUse(i.contains,n)._encode(e,r),o=!0;else if(i.children)a=i.children.map(function(c){if(c._baseState.tag==="null_")return c._encode(null,r,e);if(c._baseState.key===null)return r.error("Child should have a key");const u=r.enterKey(c._baseState.key);if(typeof e!="object")return r.error("Child expected, but input is not object");const h=c._encode(e[c._baseState.key],r,e);return r.leaveKey(u),h},this).filter(function(c){return c}),a=this._createEncoderBuffer(a);else if(i.tag==="seqof"||i.tag==="setof"){if(!(i.args&&i.args.length===1))return r.error("Too many args for : "+i.tag);if(!Array.isArray(e))return r.error("seqof/setof, but data is not Array");const c=this.clone();c._baseState.implicit=null,a=this._createEncoderBuffer(e.map(function(u){const h=this._baseState;return this._getUse(h.args[0],e)._encode(u,r)},c))}else i.use!==null?s=this._getUse(i.use,n)._encode(e,r):(a=this._encodePrimitive(i.tag,e),o=!0);if(!i.any&&i.choice===null){const c=i.implicit!==null?i.implicit:i.tag,u=i.implicit===null?"universal":"context";c===null?i.use===null&&r.error("Tag could be omitted only for .use()"):i.use===null&&(s=this._encodeComposite(c,o,u,a))}return i.explicit!==null&&(s=this._encodeComposite(i.explicit,!1,"context",s)),s};Nt.prototype._encodeChoice=function(e,r){const n=this._baseState,i=n.choice[e.type];return i||Mr(!1,e.type+" not found in "+JSON.stringify(Object.keys(n.choice))),i._encode(e.value,r)};Nt.prototype._encodePrimitive=function(e,r){const n=this._baseState;if(/str$/.test(e))return this._encodeStr(r,e);if(e==="objid"&&n.args)return this._encodeObjid(r,n.reverseArgs[0],n.args[1]);if(e==="objid")return this._encodeObjid(r,null,null);if(e==="gentime"||e==="utctime")return this._encodeTime(r,e);if(e==="null_")return this._encodeNull();if(e==="int"||e==="enum")return this._encodeInt(r,n.args&&n.reverseArgs[0]);if(e==="bool")return this._encodeBool(r);if(e==="objDesc")return this._encodeStr(r,e);throw new Error("Unsupported tag: "+e)};Nt.prototype._isNumstr=function(e){return/^[0-9 ]*$/.test(e)};Nt.prototype._isPrintstr=function(e){return/^[A-Za-z0-9 '()+,-./:=?]*$/.test(e)};var sl={};(function(t){function e(r){const n={};return Object.keys(r).forEach(function(i){(i|0)==i&&(i=i|0);const s=r[i];n[s]=i}),n}t.tagClass={0:"universal",1:"application",2:"context",3:"private"},t.tagClassByName=e(t.tagClass),t.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},t.tagByName=e(t.tag)})(sl);const tm=xn,Jn=nl.Buffer,Qh=Zh,Pf=sl;function ep(t){this.enc="der",this.name=t.name,this.entity=t,this.tree=new Pn,this.tree._init(t.body)}var tp=ep;ep.prototype.encode=function(e,r){return this.tree._encode(e,r).join()};function Pn(t){Qh.call(this,"der",t)}tm(Pn,Qh);Pn.prototype._encodeComposite=function(e,r,n,i){const s=rm(e,r,n,this.reporter);if(i.length<128){const c=Jn.alloc(2);return c[0]=s,c[1]=i.length,this._createEncoderBuffer([c,i])}let a=1;for(let c=i.length;c>=256;c>>=8)a++;const o=Jn.alloc(2+a);o[0]=s,o[1]=128|a;for(let c=1+a,u=i.length;u>0;c--,u>>=8)o[c]=u&255;return this._createEncoderBuffer([o,i])};Pn.prototype._encodeStr=function(e,r){if(r==="bitstr")return this._createEncoderBuffer([e.unused|0,e.data]);if(r==="bmpstr"){const n=Jn.alloc(e.length*2);for(let i=0;i<e.length;i++)n.writeUInt16BE(e.charCodeAt(i),i*2);return this._createEncoderBuffer(n)}else return r==="numstr"?this._isNumstr(e)?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: numstr supports only digits and space"):r==="printstr"?this._isPrintstr(e)?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(r)?this._createEncoderBuffer(e):r==="objDesc"?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: "+r+" unsupported")};Pn.prototype._encodeObjid=function(e,r,n){if(typeof e=="string"){if(!r)return this.reporter.error("string objid given, but no values map found");if(!r.hasOwnProperty(e))return this.reporter.error("objid not found in values map");e=r[e].split(/[\s.]+/g);for(let o=0;o<e.length;o++)e[o]|=0}else if(Array.isArray(e)){e=e.slice();for(let o=0;o<e.length;o++)e[o]|=0}if(!Array.isArray(e))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(e));if(!n){if(e[1]>=40)return this.reporter.error("Second objid identifier OOB");e.splice(0,2,e[0]*40+e[1])}let i=0;for(let o=0;o<e.length;o++){let c=e[o];for(i++;c>=128;c>>=7)i++}const s=Jn.alloc(i);let a=s.length-1;for(let o=e.length-1;o>=0;o--){let c=e[o];for(s[a--]=c&127;(c>>=7)>0;)s[a--]=128|c&127}return this._createEncoderBuffer(s)};function Xr(t){return t<10?"0"+t:t}Pn.prototype._encodeTime=function(e,r){let n;const i=new Date(e);return r==="gentime"?n=[Xr(i.getUTCFullYear()),Xr(i.getUTCMonth()+1),Xr(i.getUTCDate()),Xr(i.getUTCHours()),Xr(i.getUTCMinutes()),Xr(i.getUTCSeconds()),"Z"].join(""):r==="utctime"?n=[Xr(i.getUTCFullYear()%100),Xr(i.getUTCMonth()+1),Xr(i.getUTCDate()),Xr(i.getUTCHours()),Xr(i.getUTCMinutes()),Xr(i.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+r+" time is not supported yet"),this._encodeStr(n,"octstr")};Pn.prototype._encodeNull=function(){return this._createEncoderBuffer("")};Pn.prototype._encodeInt=function(e,r){if(typeof e=="string"){if(!r)return this.reporter.error("String int or enum given, but no values map");if(!r.hasOwnProperty(e))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(e));e=r[e]}if(typeof e!="number"&&!Jn.isBuffer(e)){const s=e.toArray();!e.sign&&s[0]&128&&s.unshift(0),e=Jn.from(s)}if(Jn.isBuffer(e)){let s=e.length;e.length===0&&s++;const a=Jn.alloc(s);return e.copy(a),e.length===0&&(a[0]=0),this._createEncoderBuffer(a)}if(e<128)return this._createEncoderBuffer(e);if(e<256)return this._createEncoderBuffer([0,e]);let n=1;for(let s=e;s>=256;s>>=8)n++;const i=new Array(n);for(let s=i.length-1;s>=0;s--)i[s]=e&255,e>>=8;return i[0]&128&&i.unshift(0),this._createEncoderBuffer(Jn.from(i))};Pn.prototype._encodeBool=function(e){return this._createEncoderBuffer(e?255:0)};Pn.prototype._use=function(e,r){return typeof e=="function"&&(e=e(r)),e._getEncoder("der").tree};Pn.prototype._skipDefault=function(e,r,n){const i=this._baseState;let s;if(i.default===null)return!1;const a=e.join();if(i.defaultBuffer===void 0&&(i.defaultBuffer=this._encodeValue(i.default,r,n).join()),a.length!==i.defaultBuffer.length)return!1;for(s=0;s<a.length;s++)if(a[s]!==i.defaultBuffer[s])return!1;return!0};function rm(t,e,r,n){let i;if(t==="seqof"?t="seq":t==="setof"&&(t="set"),Pf.tagByName.hasOwnProperty(t))i=Pf.tagByName[t];else if(typeof t=="number"&&(t|0)===t)i=t;else return n.error("Unknown tag: "+t);return i>=31?n.error("Multi-octet tag encoding unsupported"):(e||(i|=32),i|=Pf.tagClassByName[r||"universal"]<<6,i)}const nm=xn,al=tp;function ol(t){al.call(this,t),this.enc="pem"}nm(ol,al);var im=ol;ol.prototype.encode=function(e,r){const i=al.prototype.encode.call(this,e).toString("base64"),s=["-----BEGIN "+r.label+"-----"];for(let a=0;a<i.length;a+=64)s.push(i.slice(a,a+64));return s.push("-----END "+r.label+"-----"),s.join(`
`)};(function(t){const e=t;e.der=tp,e.pem=im})(Yh);var rp={},cl={exports:{}};cl.exports;(function(t){(function(e,r){function n(T,f){if(!T)throw new Error(f||"Assertion failed")}function i(T,f){T.super_=f;var d=function(){};d.prototype=f.prototype,T.prototype=new d,T.prototype.constructor=T}function s(T,f,d){if(s.isBN(T))return T;this.negative=0,this.words=null,this.length=0,this.red=null,T!==null&&((f==="le"||f==="be")&&(d=f,f=10),this._init(T||0,f||10,d||"be"))}typeof e=="object"?e.exports=s:r.BN=s,s.BN=s,s.wordSize=26;var a;try{typeof window<"u"&&typeof window.Buffer<"u"?a=window.Buffer:a=Na.Buffer}catch{}s.isBN=function(f){return f instanceof s?!0:f!==null&&typeof f=="object"&&f.constructor.wordSize===s.wordSize&&Array.isArray(f.words)},s.max=function(f,d){return f.cmp(d)>0?f:d},s.min=function(f,d){return f.cmp(d)<0?f:d},s.prototype._init=function(f,d,y){if(typeof f=="number")return this._initNumber(f,d,y);if(typeof f=="object")return this._initArray(f,d,y);d==="hex"&&(d=16),n(d===(d|0)&&d>=2&&d<=36),f=f.toString().replace(/\s+/g,"");var w=0;f[0]==="-"&&(w++,this.negative=1),w<f.length&&(d===16?this._parseHex(f,w,y):(this._parseBase(f,d,w),y==="le"&&this._initArray(this.toArray(),d,y)))},s.prototype._initNumber=function(f,d,y){f<0&&(this.negative=1,f=-f),f<67108864?(this.words=[f&67108863],this.length=1):f<4503599627370496?(this.words=[f&67108863,f/67108864&67108863],this.length=2):(n(f<9007199254740992),this.words=[f&67108863,f/67108864&67108863,1],this.length=3),y==="le"&&this._initArray(this.toArray(),d,y)},s.prototype._initArray=function(f,d,y){if(n(typeof f.length=="number"),f.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(f.length/3),this.words=new Array(this.length);for(var w=0;w<this.length;w++)this.words[w]=0;var S,B,$=0;if(y==="be")for(w=f.length-1,S=0;w>=0;w-=3)B=f[w]|f[w-1]<<8|f[w-2]<<16,this.words[S]|=B<<$&67108863,this.words[S+1]=B>>>26-$&67108863,$+=24,$>=26&&($-=26,S++);else if(y==="le")for(w=0,S=0;w<f.length;w+=3)B=f[w]|f[w+1]<<8|f[w+2]<<16,this.words[S]|=B<<$&67108863,this.words[S+1]=B>>>26-$&67108863,$+=24,$>=26&&($-=26,S++);return this.strip()};function o(T,f){var d=T.charCodeAt(f);return d>=65&&d<=70?d-55:d>=97&&d<=102?d-87:d-48&15}function c(T,f,d){var y=o(T,d);return d-1>=f&&(y|=o(T,d-1)<<4),y}s.prototype._parseHex=function(f,d,y){this.length=Math.ceil((f.length-d)/6),this.words=new Array(this.length);for(var w=0;w<this.length;w++)this.words[w]=0;var S=0,B=0,$;if(y==="be")for(w=f.length-1;w>=d;w-=2)$=c(f,d,w)<<S,this.words[B]|=$&67108863,S>=18?(S-=18,B+=1,this.words[B]|=$>>>26):S+=8;else{var k=f.length-d;for(w=k%2===0?d+1:d;w<f.length;w+=2)$=c(f,d,w)<<S,this.words[B]|=$&67108863,S>=18?(S-=18,B+=1,this.words[B]|=$>>>26):S+=8}this.strip()};function u(T,f,d,y){for(var w=0,S=Math.min(T.length,d),B=f;B<S;B++){var $=T.charCodeAt(B)-48;w*=y,$>=49?w+=$-49+10:$>=17?w+=$-17+10:w+=$}return w}s.prototype._parseBase=function(f,d,y){this.words=[0],this.length=1;for(var w=0,S=1;S<=67108863;S*=d)w++;w--,S=S/d|0;for(var B=f.length-y,$=B%w,k=Math.min(B,B-$)+y,x=0,b=y;b<k;b+=w)x=u(f,b,b+w,d),this.imuln(S),this.words[0]+x<67108864?this.words[0]+=x:this._iaddn(x);if($!==0){var F=1;for(x=u(f,b,f.length,d),b=0;b<$;b++)F*=d;this.imuln(F),this.words[0]+x<67108864?this.words[0]+=x:this._iaddn(x)}this.strip()},s.prototype.copy=function(f){f.words=new Array(this.length);for(var d=0;d<this.length;d++)f.words[d]=this.words[d];f.length=this.length,f.negative=this.negative,f.red=this.red},s.prototype.clone=function(){var f=new s(null);return this.copy(f),f},s.prototype._expand=function(f){for(;this.length<f;)this.words[this.length++]=0;return this},s.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},s.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var h=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],p=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],m=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(f,d){f=f||10,d=d|0||1;var y;if(f===16||f==="hex"){y="";for(var w=0,S=0,B=0;B<this.length;B++){var $=this.words[B],k=(($<<w|S)&16777215).toString(16);S=$>>>24-w&16777215,S!==0||B!==this.length-1?y=h[6-k.length]+k+y:y=k+y,w+=2,w>=26&&(w-=26,B--)}for(S!==0&&(y=S.toString(16)+y);y.length%d!==0;)y="0"+y;return this.negative!==0&&(y="-"+y),y}if(f===(f|0)&&f>=2&&f<=36){var x=p[f],b=m[f];y="";var F=this.clone();for(F.negative=0;!F.isZero();){var V=F.modn(b).toString(f);F=F.idivn(b),F.isZero()?y=V+y:y=h[x-V.length]+V+y}for(this.isZero()&&(y="0"+y);y.length%d!==0;)y="0"+y;return this.negative!==0&&(y="-"+y),y}n(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var f=this.words[0];return this.length===2?f+=this.words[1]*67108864:this.length===3&&this.words[2]===1?f+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-f:f},s.prototype.toJSON=function(){return this.toString(16)},s.prototype.toBuffer=function(f,d){return n(typeof a<"u"),this.toArrayLike(a,f,d)},s.prototype.toArray=function(f,d){return this.toArrayLike(Array,f,d)},s.prototype.toArrayLike=function(f,d,y){var w=this.byteLength(),S=y||Math.max(1,w);n(w<=S,"byte array longer than desired length"),n(S>0,"Requested array length <= 0"),this.strip();var B=d==="le",$=new f(S),k,x,b=this.clone();if(B){for(x=0;!b.isZero();x++)k=b.andln(255),b.iushrn(8),$[x]=k;for(;x<S;x++)$[x]=0}else{for(x=0;x<S-w;x++)$[x]=0;for(x=0;!b.isZero();x++)k=b.andln(255),b.iushrn(8),$[S-x-1]=k}return $},Math.clz32?s.prototype._countBits=function(f){return 32-Math.clz32(f)}:s.prototype._countBits=function(f){var d=f,y=0;return d>=4096&&(y+=13,d>>>=13),d>=64&&(y+=7,d>>>=7),d>=8&&(y+=4,d>>>=4),d>=2&&(y+=2,d>>>=2),y+d},s.prototype._zeroBits=function(f){if(f===0)return 26;var d=f,y=0;return d&8191||(y+=13,d>>>=13),d&127||(y+=7,d>>>=7),d&15||(y+=4,d>>>=4),d&3||(y+=2,d>>>=2),d&1||y++,y},s.prototype.bitLength=function(){var f=this.words[this.length-1],d=this._countBits(f);return(this.length-1)*26+d};function P(T){for(var f=new Array(T.bitLength()),d=0;d<f.length;d++){var y=d/26|0,w=d%26;f[d]=(T.words[y]&1<<w)>>>w}return f}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var f=0,d=0;d<this.length;d++){var y=this._zeroBits(this.words[d]);if(f+=y,y!==26)break}return f},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(f){return this.negative!==0?this.abs().inotn(f).iaddn(1):this.clone()},s.prototype.fromTwos=function(f){return this.testn(f-1)?this.notn(f).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(f){for(;this.length<f.length;)this.words[this.length++]=0;for(var d=0;d<f.length;d++)this.words[d]=this.words[d]|f.words[d];return this.strip()},s.prototype.ior=function(f){return n((this.negative|f.negative)===0),this.iuor(f)},s.prototype.or=function(f){return this.length>f.length?this.clone().ior(f):f.clone().ior(this)},s.prototype.uor=function(f){return this.length>f.length?this.clone().iuor(f):f.clone().iuor(this)},s.prototype.iuand=function(f){var d;this.length>f.length?d=f:d=this;for(var y=0;y<d.length;y++)this.words[y]=this.words[y]&f.words[y];return this.length=d.length,this.strip()},s.prototype.iand=function(f){return n((this.negative|f.negative)===0),this.iuand(f)},s.prototype.and=function(f){return this.length>f.length?this.clone().iand(f):f.clone().iand(this)},s.prototype.uand=function(f){return this.length>f.length?this.clone().iuand(f):f.clone().iuand(this)},s.prototype.iuxor=function(f){var d,y;this.length>f.length?(d=this,y=f):(d=f,y=this);for(var w=0;w<y.length;w++)this.words[w]=d.words[w]^y.words[w];if(this!==d)for(;w<d.length;w++)this.words[w]=d.words[w];return this.length=d.length,this.strip()},s.prototype.ixor=function(f){return n((this.negative|f.negative)===0),this.iuxor(f)},s.prototype.xor=function(f){return this.length>f.length?this.clone().ixor(f):f.clone().ixor(this)},s.prototype.uxor=function(f){return this.length>f.length?this.clone().iuxor(f):f.clone().iuxor(this)},s.prototype.inotn=function(f){n(typeof f=="number"&&f>=0);var d=Math.ceil(f/26)|0,y=f%26;this._expand(d),y>0&&d--;for(var w=0;w<d;w++)this.words[w]=~this.words[w]&67108863;return y>0&&(this.words[w]=~this.words[w]&67108863>>26-y),this.strip()},s.prototype.notn=function(f){return this.clone().inotn(f)},s.prototype.setn=function(f,d){n(typeof f=="number"&&f>=0);var y=f/26|0,w=f%26;return this._expand(y+1),d?this.words[y]=this.words[y]|1<<w:this.words[y]=this.words[y]&~(1<<w),this.strip()},s.prototype.iadd=function(f){var d;if(this.negative!==0&&f.negative===0)return this.negative=0,d=this.isub(f),this.negative^=1,this._normSign();if(this.negative===0&&f.negative!==0)return f.negative=0,d=this.isub(f),f.negative=1,d._normSign();var y,w;this.length>f.length?(y=this,w=f):(y=f,w=this);for(var S=0,B=0;B<w.length;B++)d=(y.words[B]|0)+(w.words[B]|0)+S,this.words[B]=d&67108863,S=d>>>26;for(;S!==0&&B<y.length;B++)d=(y.words[B]|0)+S,this.words[B]=d&67108863,S=d>>>26;if(this.length=y.length,S!==0)this.words[this.length]=S,this.length++;else if(y!==this)for(;B<y.length;B++)this.words[B]=y.words[B];return this},s.prototype.add=function(f){var d;return f.negative!==0&&this.negative===0?(f.negative=0,d=this.sub(f),f.negative^=1,d):f.negative===0&&this.negative!==0?(this.negative=0,d=f.sub(this),this.negative=1,d):this.length>f.length?this.clone().iadd(f):f.clone().iadd(this)},s.prototype.isub=function(f){if(f.negative!==0){f.negative=0;var d=this.iadd(f);return f.negative=1,d._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(f),this.negative=1,this._normSign();var y=this.cmp(f);if(y===0)return this.negative=0,this.length=1,this.words[0]=0,this;var w,S;y>0?(w=this,S=f):(w=f,S=this);for(var B=0,$=0;$<S.length;$++)d=(w.words[$]|0)-(S.words[$]|0)+B,B=d>>26,this.words[$]=d&67108863;for(;B!==0&&$<w.length;$++)d=(w.words[$]|0)+B,B=d>>26,this.words[$]=d&67108863;if(B===0&&$<w.length&&w!==this)for(;$<w.length;$++)this.words[$]=w.words[$];return this.length=Math.max(this.length,$),w!==this&&(this.negative=1),this.strip()},s.prototype.sub=function(f){return this.clone().isub(f)};function M(T,f,d){d.negative=f.negative^T.negative;var y=T.length+f.length|0;d.length=y,y=y-1|0;var w=T.words[0]|0,S=f.words[0]|0,B=w*S,$=B&67108863,k=B/67108864|0;d.words[0]=$;for(var x=1;x<y;x++){for(var b=k>>>26,F=k&67108863,V=Math.min(x,f.length-1),K=Math.max(0,x-T.length+1);K<=V;K++){var H=x-K|0;w=T.words[H]|0,S=f.words[K]|0,B=w*S+F,b+=B/67108864|0,F=B&67108863}d.words[x]=F|0,k=b|0}return k!==0?d.words[x]=k|0:d.length--,d.strip()}var R=function(f,d,y){var w=f.words,S=d.words,B=y.words,$=0,k,x,b,F=w[0]|0,V=F&8191,K=F>>>13,H=w[1]|0,O=H&8191,j=H>>>13,re=w[2]|0,ie=re&8191,ye=re>>>13,I=w[3]|0,C=I&8191,ne=I>>>13,Ee=w[4]|0,Le=Ee&8191,Pe=Ee>>>13,rt=w[5]|0,ht=rt&8191,et=rt>>>13,Nr=w[6]|0,It=Nr&8191,Et=Nr>>>13,Dr=w[7]|0,gt=Dr&8191,vt=Dr>>>13,wr=w[8]|0,ct=wr&8191,nt=wr>>>13,Gn=w[9]|0,qt=Gn&8191,Bt=Gn>>>13,Mn=S[0]|0,kt=Mn&8191,St=Mn>>>13,Lr=S[1]|0,At=Lr&8191,Mt=Lr>>>13,Jr=S[2]|0,Tt=Jr&8191,Ut=Jr>>>13,Wn=S[3]|0,Ft=Wn&8191,Ht=Wn>>>13,vr=S[4]|0,bt=vr&8191,_t=vr>>>13,Cn=S[5]|0,Ot=Cn&8191,Dt=Cn>>>13,si=S[6]|0,Qe=si&8191,Lt=si>>>13,g=S[7]|0,_=g&8191,v=g>>>13,l=S[8]|0,A=l&8191,G=l>>>13,J=S[9]|0,te=J&8191,ae=J>>>13;y.negative=f.negative^d.negative,y.length=19,k=Math.imul(V,kt),x=Math.imul(V,St),x=x+Math.imul(K,kt)|0,b=Math.imul(K,St);var Te=($+k|0)+((x&8191)<<13)|0;$=(b+(x>>>13)|0)+(Te>>>26)|0,Te&=67108863,k=Math.imul(O,kt),x=Math.imul(O,St),x=x+Math.imul(j,kt)|0,b=Math.imul(j,St),k=k+Math.imul(V,At)|0,x=x+Math.imul(V,Mt)|0,x=x+Math.imul(K,At)|0,b=b+Math.imul(K,Mt)|0;var be=($+k|0)+((x&8191)<<13)|0;$=(b+(x>>>13)|0)+(be>>>26)|0,be&=67108863,k=Math.imul(ie,kt),x=Math.imul(ie,St),x=x+Math.imul(ye,kt)|0,b=Math.imul(ye,St),k=k+Math.imul(O,At)|0,x=x+Math.imul(O,Mt)|0,x=x+Math.imul(j,At)|0,b=b+Math.imul(j,Mt)|0,k=k+Math.imul(V,Tt)|0,x=x+Math.imul(V,Ut)|0,x=x+Math.imul(K,Tt)|0,b=b+Math.imul(K,Ut)|0;var Ge=($+k|0)+((x&8191)<<13)|0;$=(b+(x>>>13)|0)+(Ge>>>26)|0,Ge&=67108863,k=Math.imul(C,kt),x=Math.imul(C,St),x=x+Math.imul(ne,kt)|0,b=Math.imul(ne,St),k=k+Math.imul(ie,At)|0,x=x+Math.imul(ie,Mt)|0,x=x+Math.imul(ye,At)|0,b=b+Math.imul(ye,Mt)|0,k=k+Math.imul(O,Tt)|0,x=x+Math.imul(O,Ut)|0,x=x+Math.imul(j,Tt)|0,b=b+Math.imul(j,Ut)|0,k=k+Math.imul(V,Ft)|0,x=x+Math.imul(V,Ht)|0,x=x+Math.imul(K,Ft)|0,b=b+Math.imul(K,Ht)|0;var ve=($+k|0)+((x&8191)<<13)|0;$=(b+(x>>>13)|0)+(ve>>>26)|0,ve&=67108863,k=Math.imul(Le,kt),x=Math.imul(Le,St),x=x+Math.imul(Pe,kt)|0,b=Math.imul(Pe,St),k=k+Math.imul(C,At)|0,x=x+Math.imul(C,Mt)|0,x=x+Math.imul(ne,At)|0,b=b+Math.imul(ne,Mt)|0,k=k+Math.imul(ie,Tt)|0,x=x+Math.imul(ie,Ut)|0,x=x+Math.imul(ye,Tt)|0,b=b+Math.imul(ye,Ut)|0,k=k+Math.imul(O,Ft)|0,x=x+Math.imul(O,Ht)|0,x=x+Math.imul(j,Ft)|0,b=b+Math.imul(j,Ht)|0,k=k+Math.imul(V,bt)|0,x=x+Math.imul(V,_t)|0,x=x+Math.imul(K,bt)|0,b=b+Math.imul(K,_t)|0;var Me=($+k|0)+((x&8191)<<13)|0;$=(b+(x>>>13)|0)+(Me>>>26)|0,Me&=67108863,k=Math.imul(ht,kt),x=Math.imul(ht,St),x=x+Math.imul(et,kt)|0,b=Math.imul(et,St),k=k+Math.imul(Le,At)|0,x=x+Math.imul(Le,Mt)|0,x=x+Math.imul(Pe,At)|0,b=b+Math.imul(Pe,Mt)|0,k=k+Math.imul(C,Tt)|0,x=x+Math.imul(C,Ut)|0,x=x+Math.imul(ne,Tt)|0,b=b+Math.imul(ne,Ut)|0,k=k+Math.imul(ie,Ft)|0,x=x+Math.imul(ie,Ht)|0,x=x+Math.imul(ye,Ft)|0,b=b+Math.imul(ye,Ht)|0,k=k+Math.imul(O,bt)|0,x=x+Math.imul(O,_t)|0,x=x+Math.imul(j,bt)|0,b=b+Math.imul(j,_t)|0,k=k+Math.imul(V,Ot)|0,x=x+Math.imul(V,Dt)|0,x=x+Math.imul(K,Ot)|0,b=b+Math.imul(K,Dt)|0;var Ce=($+k|0)+((x&8191)<<13)|0;$=(b+(x>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,k=Math.imul(It,kt),x=Math.imul(It,St),x=x+Math.imul(Et,kt)|0,b=Math.imul(Et,St),k=k+Math.imul(ht,At)|0,x=x+Math.imul(ht,Mt)|0,x=x+Math.imul(et,At)|0,b=b+Math.imul(et,Mt)|0,k=k+Math.imul(Le,Tt)|0,x=x+Math.imul(Le,Ut)|0,x=x+Math.imul(Pe,Tt)|0,b=b+Math.imul(Pe,Ut)|0,k=k+Math.imul(C,Ft)|0,x=x+Math.imul(C,Ht)|0,x=x+Math.imul(ne,Ft)|0,b=b+Math.imul(ne,Ht)|0,k=k+Math.imul(ie,bt)|0,x=x+Math.imul(ie,_t)|0,x=x+Math.imul(ye,bt)|0,b=b+Math.imul(ye,_t)|0,k=k+Math.imul(O,Ot)|0,x=x+Math.imul(O,Dt)|0,x=x+Math.imul(j,Ot)|0,b=b+Math.imul(j,Dt)|0,k=k+Math.imul(V,Qe)|0,x=x+Math.imul(V,Lt)|0,x=x+Math.imul(K,Qe)|0,b=b+Math.imul(K,Lt)|0;var De=($+k|0)+((x&8191)<<13)|0;$=(b+(x>>>13)|0)+(De>>>26)|0,De&=67108863,k=Math.imul(gt,kt),x=Math.imul(gt,St),x=x+Math.imul(vt,kt)|0,b=Math.imul(vt,St),k=k+Math.imul(It,At)|0,x=x+Math.imul(It,Mt)|0,x=x+Math.imul(Et,At)|0,b=b+Math.imul(Et,Mt)|0,k=k+Math.imul(ht,Tt)|0,x=x+Math.imul(ht,Ut)|0,x=x+Math.imul(et,Tt)|0,b=b+Math.imul(et,Ut)|0,k=k+Math.imul(Le,Ft)|0,x=x+Math.imul(Le,Ht)|0,x=x+Math.imul(Pe,Ft)|0,b=b+Math.imul(Pe,Ht)|0,k=k+Math.imul(C,bt)|0,x=x+Math.imul(C,_t)|0,x=x+Math.imul(ne,bt)|0,b=b+Math.imul(ne,_t)|0,k=k+Math.imul(ie,Ot)|0,x=x+Math.imul(ie,Dt)|0,x=x+Math.imul(ye,Ot)|0,b=b+Math.imul(ye,Dt)|0,k=k+Math.imul(O,Qe)|0,x=x+Math.imul(O,Lt)|0,x=x+Math.imul(j,Qe)|0,b=b+Math.imul(j,Lt)|0,k=k+Math.imul(V,_)|0,x=x+Math.imul(V,v)|0,x=x+Math.imul(K,_)|0,b=b+Math.imul(K,v)|0;var Ne=($+k|0)+((x&8191)<<13)|0;$=(b+(x>>>13)|0)+(Ne>>>26)|0,Ne&=67108863,k=Math.imul(ct,kt),x=Math.imul(ct,St),x=x+Math.imul(nt,kt)|0,b=Math.imul(nt,St),k=k+Math.imul(gt,At)|0,x=x+Math.imul(gt,Mt)|0,x=x+Math.imul(vt,At)|0,b=b+Math.imul(vt,Mt)|0,k=k+Math.imul(It,Tt)|0,x=x+Math.imul(It,Ut)|0,x=x+Math.imul(Et,Tt)|0,b=b+Math.imul(Et,Ut)|0,k=k+Math.imul(ht,Ft)|0,x=x+Math.imul(ht,Ht)|0,x=x+Math.imul(et,Ft)|0,b=b+Math.imul(et,Ht)|0,k=k+Math.imul(Le,bt)|0,x=x+Math.imul(Le,_t)|0,x=x+Math.imul(Pe,bt)|0,b=b+Math.imul(Pe,_t)|0,k=k+Math.imul(C,Ot)|0,x=x+Math.imul(C,Dt)|0,x=x+Math.imul(ne,Ot)|0,b=b+Math.imul(ne,Dt)|0,k=k+Math.imul(ie,Qe)|0,x=x+Math.imul(ie,Lt)|0,x=x+Math.imul(ye,Qe)|0,b=b+Math.imul(ye,Lt)|0,k=k+Math.imul(O,_)|0,x=x+Math.imul(O,v)|0,x=x+Math.imul(j,_)|0,b=b+Math.imul(j,v)|0,k=k+Math.imul(V,A)|0,x=x+Math.imul(V,G)|0,x=x+Math.imul(K,A)|0,b=b+Math.imul(K,G)|0;var Ie=($+k|0)+((x&8191)<<13)|0;$=(b+(x>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,k=Math.imul(qt,kt),x=Math.imul(qt,St),x=x+Math.imul(Bt,kt)|0,b=Math.imul(Bt,St),k=k+Math.imul(ct,At)|0,x=x+Math.imul(ct,Mt)|0,x=x+Math.imul(nt,At)|0,b=b+Math.imul(nt,Mt)|0,k=k+Math.imul(gt,Tt)|0,x=x+Math.imul(gt,Ut)|0,x=x+Math.imul(vt,Tt)|0,b=b+Math.imul(vt,Ut)|0,k=k+Math.imul(It,Ft)|0,x=x+Math.imul(It,Ht)|0,x=x+Math.imul(Et,Ft)|0,b=b+Math.imul(Et,Ht)|0,k=k+Math.imul(ht,bt)|0,x=x+Math.imul(ht,_t)|0,x=x+Math.imul(et,bt)|0,b=b+Math.imul(et,_t)|0,k=k+Math.imul(Le,Ot)|0,x=x+Math.imul(Le,Dt)|0,x=x+Math.imul(Pe,Ot)|0,b=b+Math.imul(Pe,Dt)|0,k=k+Math.imul(C,Qe)|0,x=x+Math.imul(C,Lt)|0,x=x+Math.imul(ne,Qe)|0,b=b+Math.imul(ne,Lt)|0,k=k+Math.imul(ie,_)|0,x=x+Math.imul(ie,v)|0,x=x+Math.imul(ye,_)|0,b=b+Math.imul(ye,v)|0,k=k+Math.imul(O,A)|0,x=x+Math.imul(O,G)|0,x=x+Math.imul(j,A)|0,b=b+Math.imul(j,G)|0,k=k+Math.imul(V,te)|0,x=x+Math.imul(V,ae)|0,x=x+Math.imul(K,te)|0,b=b+Math.imul(K,ae)|0;var Ue=($+k|0)+((x&8191)<<13)|0;$=(b+(x>>>13)|0)+(Ue>>>26)|0,Ue&=67108863,k=Math.imul(qt,At),x=Math.imul(qt,Mt),x=x+Math.imul(Bt,At)|0,b=Math.imul(Bt,Mt),k=k+Math.imul(ct,Tt)|0,x=x+Math.imul(ct,Ut)|0,x=x+Math.imul(nt,Tt)|0,b=b+Math.imul(nt,Ut)|0,k=k+Math.imul(gt,Ft)|0,x=x+Math.imul(gt,Ht)|0,x=x+Math.imul(vt,Ft)|0,b=b+Math.imul(vt,Ht)|0,k=k+Math.imul(It,bt)|0,x=x+Math.imul(It,_t)|0,x=x+Math.imul(Et,bt)|0,b=b+Math.imul(Et,_t)|0,k=k+Math.imul(ht,Ot)|0,x=x+Math.imul(ht,Dt)|0,x=x+Math.imul(et,Ot)|0,b=b+Math.imul(et,Dt)|0,k=k+Math.imul(Le,Qe)|0,x=x+Math.imul(Le,Lt)|0,x=x+Math.imul(Pe,Qe)|0,b=b+Math.imul(Pe,Lt)|0,k=k+Math.imul(C,_)|0,x=x+Math.imul(C,v)|0,x=x+Math.imul(ne,_)|0,b=b+Math.imul(ne,v)|0,k=k+Math.imul(ie,A)|0,x=x+Math.imul(ie,G)|0,x=x+Math.imul(ye,A)|0,b=b+Math.imul(ye,G)|0,k=k+Math.imul(O,te)|0,x=x+Math.imul(O,ae)|0,x=x+Math.imul(j,te)|0,b=b+Math.imul(j,ae)|0;var Be=($+k|0)+((x&8191)<<13)|0;$=(b+(x>>>13)|0)+(Be>>>26)|0,Be&=67108863,k=Math.imul(qt,Tt),x=Math.imul(qt,Ut),x=x+Math.imul(Bt,Tt)|0,b=Math.imul(Bt,Ut),k=k+Math.imul(ct,Ft)|0,x=x+Math.imul(ct,Ht)|0,x=x+Math.imul(nt,Ft)|0,b=b+Math.imul(nt,Ht)|0,k=k+Math.imul(gt,bt)|0,x=x+Math.imul(gt,_t)|0,x=x+Math.imul(vt,bt)|0,b=b+Math.imul(vt,_t)|0,k=k+Math.imul(It,Ot)|0,x=x+Math.imul(It,Dt)|0,x=x+Math.imul(Et,Ot)|0,b=b+Math.imul(Et,Dt)|0,k=k+Math.imul(ht,Qe)|0,x=x+Math.imul(ht,Lt)|0,x=x+Math.imul(et,Qe)|0,b=b+Math.imul(et,Lt)|0,k=k+Math.imul(Le,_)|0,x=x+Math.imul(Le,v)|0,x=x+Math.imul(Pe,_)|0,b=b+Math.imul(Pe,v)|0,k=k+Math.imul(C,A)|0,x=x+Math.imul(C,G)|0,x=x+Math.imul(ne,A)|0,b=b+Math.imul(ne,G)|0,k=k+Math.imul(ie,te)|0,x=x+Math.imul(ie,ae)|0,x=x+Math.imul(ye,te)|0,b=b+Math.imul(ye,ae)|0;var _e=($+k|0)+((x&8191)<<13)|0;$=(b+(x>>>13)|0)+(_e>>>26)|0,_e&=67108863,k=Math.imul(qt,Ft),x=Math.imul(qt,Ht),x=x+Math.imul(Bt,Ft)|0,b=Math.imul(Bt,Ht),k=k+Math.imul(ct,bt)|0,x=x+Math.imul(ct,_t)|0,x=x+Math.imul(nt,bt)|0,b=b+Math.imul(nt,_t)|0,k=k+Math.imul(gt,Ot)|0,x=x+Math.imul(gt,Dt)|0,x=x+Math.imul(vt,Ot)|0,b=b+Math.imul(vt,Dt)|0,k=k+Math.imul(It,Qe)|0,x=x+Math.imul(It,Lt)|0,x=x+Math.imul(Et,Qe)|0,b=b+Math.imul(Et,Lt)|0,k=k+Math.imul(ht,_)|0,x=x+Math.imul(ht,v)|0,x=x+Math.imul(et,_)|0,b=b+Math.imul(et,v)|0,k=k+Math.imul(Le,A)|0,x=x+Math.imul(Le,G)|0,x=x+Math.imul(Pe,A)|0,b=b+Math.imul(Pe,G)|0,k=k+Math.imul(C,te)|0,x=x+Math.imul(C,ae)|0,x=x+Math.imul(ne,te)|0,b=b+Math.imul(ne,ae)|0;var Re=($+k|0)+((x&8191)<<13)|0;$=(b+(x>>>13)|0)+(Re>>>26)|0,Re&=67108863,k=Math.imul(qt,bt),x=Math.imul(qt,_t),x=x+Math.imul(Bt,bt)|0,b=Math.imul(Bt,_t),k=k+Math.imul(ct,Ot)|0,x=x+Math.imul(ct,Dt)|0,x=x+Math.imul(nt,Ot)|0,b=b+Math.imul(nt,Dt)|0,k=k+Math.imul(gt,Qe)|0,x=x+Math.imul(gt,Lt)|0,x=x+Math.imul(vt,Qe)|0,b=b+Math.imul(vt,Lt)|0,k=k+Math.imul(It,_)|0,x=x+Math.imul(It,v)|0,x=x+Math.imul(Et,_)|0,b=b+Math.imul(Et,v)|0,k=k+Math.imul(ht,A)|0,x=x+Math.imul(ht,G)|0,x=x+Math.imul(et,A)|0,b=b+Math.imul(et,G)|0,k=k+Math.imul(Le,te)|0,x=x+Math.imul(Le,ae)|0,x=x+Math.imul(Pe,te)|0,b=b+Math.imul(Pe,ae)|0;var me=($+k|0)+((x&8191)<<13)|0;$=(b+(x>>>13)|0)+(me>>>26)|0,me&=67108863,k=Math.imul(qt,Ot),x=Math.imul(qt,Dt),x=x+Math.imul(Bt,Ot)|0,b=Math.imul(Bt,Dt),k=k+Math.imul(ct,Qe)|0,x=x+Math.imul(ct,Lt)|0,x=x+Math.imul(nt,Qe)|0,b=b+Math.imul(nt,Lt)|0,k=k+Math.imul(gt,_)|0,x=x+Math.imul(gt,v)|0,x=x+Math.imul(vt,_)|0,b=b+Math.imul(vt,v)|0,k=k+Math.imul(It,A)|0,x=x+Math.imul(It,G)|0,x=x+Math.imul(Et,A)|0,b=b+Math.imul(Et,G)|0,k=k+Math.imul(ht,te)|0,x=x+Math.imul(ht,ae)|0,x=x+Math.imul(et,te)|0,b=b+Math.imul(et,ae)|0;var Se=($+k|0)+((x&8191)<<13)|0;$=(b+(x>>>13)|0)+(Se>>>26)|0,Se&=67108863,k=Math.imul(qt,Qe),x=Math.imul(qt,Lt),x=x+Math.imul(Bt,Qe)|0,b=Math.imul(Bt,Lt),k=k+Math.imul(ct,_)|0,x=x+Math.imul(ct,v)|0,x=x+Math.imul(nt,_)|0,b=b+Math.imul(nt,v)|0,k=k+Math.imul(gt,A)|0,x=x+Math.imul(gt,G)|0,x=x+Math.imul(vt,A)|0,b=b+Math.imul(vt,G)|0,k=k+Math.imul(It,te)|0,x=x+Math.imul(It,ae)|0,x=x+Math.imul(Et,te)|0,b=b+Math.imul(Et,ae)|0;var Ae=($+k|0)+((x&8191)<<13)|0;$=(b+(x>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,k=Math.imul(qt,_),x=Math.imul(qt,v),x=x+Math.imul(Bt,_)|0,b=Math.imul(Bt,v),k=k+Math.imul(ct,A)|0,x=x+Math.imul(ct,G)|0,x=x+Math.imul(nt,A)|0,b=b+Math.imul(nt,G)|0,k=k+Math.imul(gt,te)|0,x=x+Math.imul(gt,ae)|0,x=x+Math.imul(vt,te)|0,b=b+Math.imul(vt,ae)|0;var we=($+k|0)+((x&8191)<<13)|0;$=(b+(x>>>13)|0)+(we>>>26)|0,we&=67108863,k=Math.imul(qt,A),x=Math.imul(qt,G),x=x+Math.imul(Bt,A)|0,b=Math.imul(Bt,G),k=k+Math.imul(ct,te)|0,x=x+Math.imul(ct,ae)|0,x=x+Math.imul(nt,te)|0,b=b+Math.imul(nt,ae)|0;var Z=($+k|0)+((x&8191)<<13)|0;$=(b+(x>>>13)|0)+(Z>>>26)|0,Z&=67108863,k=Math.imul(qt,te),x=Math.imul(qt,ae),x=x+Math.imul(Bt,te)|0,b=Math.imul(Bt,ae);var Q=($+k|0)+((x&8191)<<13)|0;return $=(b+(x>>>13)|0)+(Q>>>26)|0,Q&=67108863,B[0]=Te,B[1]=be,B[2]=Ge,B[3]=ve,B[4]=Me,B[5]=Ce,B[6]=De,B[7]=Ne,B[8]=Ie,B[9]=Ue,B[10]=Be,B[11]=_e,B[12]=Re,B[13]=me,B[14]=Se,B[15]=Ae,B[16]=we,B[17]=Z,B[18]=Q,$!==0&&(B[19]=$,y.length++),y};Math.imul||(R=M);function E(T,f,d){d.negative=f.negative^T.negative,d.length=T.length+f.length;for(var y=0,w=0,S=0;S<d.length-1;S++){var B=w;w=0;for(var $=y&67108863,k=Math.min(S,f.length-1),x=Math.max(0,S-T.length+1);x<=k;x++){var b=S-x,F=T.words[b]|0,V=f.words[x]|0,K=F*V,H=K&67108863;B=B+(K/67108864|0)|0,H=H+$|0,$=H&67108863,B=B+(H>>>26)|0,w+=B>>>26,B&=67108863}d.words[S]=$,y=B,B=w}return y!==0?d.words[S]=y:d.length--,d.strip()}function L(T,f,d){var y=new W;return y.mulp(T,f,d)}s.prototype.mulTo=function(f,d){var y,w=this.length+f.length;return this.length===10&&f.length===10?y=R(this,f,d):w<63?y=M(this,f,d):w<1024?y=E(this,f,d):y=L(this,f,d),y};function W(T,f){this.x=T,this.y=f}W.prototype.makeRBT=function(f){for(var d=new Array(f),y=s.prototype._countBits(f)-1,w=0;w<f;w++)d[w]=this.revBin(w,y,f);return d},W.prototype.revBin=function(f,d,y){if(f===0||f===y-1)return f;for(var w=0,S=0;S<d;S++)w|=(f&1)<<d-S-1,f>>=1;return w},W.prototype.permute=function(f,d,y,w,S,B){for(var $=0;$<B;$++)w[$]=d[f[$]],S[$]=y[f[$]]},W.prototype.transform=function(f,d,y,w,S,B){this.permute(B,f,d,y,w,S);for(var $=1;$<S;$<<=1)for(var k=$<<1,x=Math.cos(2*Math.PI/k),b=Math.sin(2*Math.PI/k),F=0;F<S;F+=k)for(var V=x,K=b,H=0;H<$;H++){var O=y[F+H],j=w[F+H],re=y[F+H+$],ie=w[F+H+$],ye=V*re-K*ie;ie=V*ie+K*re,re=ye,y[F+H]=O+re,w[F+H]=j+ie,y[F+H+$]=O-re,w[F+H+$]=j-ie,H!==k&&(ye=x*V-b*K,K=x*K+b*V,V=ye)}},W.prototype.guessLen13b=function(f,d){var y=Math.max(d,f)|1,w=y&1,S=0;for(y=y/2|0;y;y=y>>>1)S++;return 1<<S+1+w},W.prototype.conjugate=function(f,d,y){if(!(y<=1))for(var w=0;w<y/2;w++){var S=f[w];f[w]=f[y-w-1],f[y-w-1]=S,S=d[w],d[w]=-d[y-w-1],d[y-w-1]=-S}},W.prototype.normalize13b=function(f,d){for(var y=0,w=0;w<d/2;w++){var S=Math.round(f[2*w+1]/d)*8192+Math.round(f[2*w]/d)+y;f[w]=S&67108863,S<67108864?y=0:y=S/67108864|0}return f},W.prototype.convert13b=function(f,d,y,w){for(var S=0,B=0;B<d;B++)S=S+(f[B]|0),y[2*B]=S&8191,S=S>>>13,y[2*B+1]=S&8191,S=S>>>13;for(B=2*d;B<w;++B)y[B]=0;n(S===0),n((S&-8192)===0)},W.prototype.stub=function(f){for(var d=new Array(f),y=0;y<f;y++)d[y]=0;return d},W.prototype.mulp=function(f,d,y){var w=2*this.guessLen13b(f.length,d.length),S=this.makeRBT(w),B=this.stub(w),$=new Array(w),k=new Array(w),x=new Array(w),b=new Array(w),F=new Array(w),V=new Array(w),K=y.words;K.length=w,this.convert13b(f.words,f.length,$,w),this.convert13b(d.words,d.length,b,w),this.transform($,B,k,x,w,S),this.transform(b,B,F,V,w,S);for(var H=0;H<w;H++){var O=k[H]*F[H]-x[H]*V[H];x[H]=k[H]*V[H]+x[H]*F[H],k[H]=O}return this.conjugate(k,x,w),this.transform(k,x,K,B,w,S),this.conjugate(K,B,w),this.normalize13b(K,w),y.negative=f.negative^d.negative,y.length=f.length+d.length,y.strip()},s.prototype.mul=function(f){var d=new s(null);return d.words=new Array(this.length+f.length),this.mulTo(f,d)},s.prototype.mulf=function(f){var d=new s(null);return d.words=new Array(this.length+f.length),L(this,f,d)},s.prototype.imul=function(f){return this.clone().mulTo(f,this)},s.prototype.imuln=function(f){n(typeof f=="number"),n(f<67108864);for(var d=0,y=0;y<this.length;y++){var w=(this.words[y]|0)*f,S=(w&67108863)+(d&67108863);d>>=26,d+=w/67108864|0,d+=S>>>26,this.words[y]=S&67108863}return d!==0&&(this.words[y]=d,this.length++),this},s.prototype.muln=function(f){return this.clone().imuln(f)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(f){var d=P(f);if(d.length===0)return new s(1);for(var y=this,w=0;w<d.length&&d[w]===0;w++,y=y.sqr());if(++w<d.length)for(var S=y.sqr();w<d.length;w++,S=S.sqr())d[w]!==0&&(y=y.mul(S));return y},s.prototype.iushln=function(f){n(typeof f=="number"&&f>=0);var d=f%26,y=(f-d)/26,w=67108863>>>26-d<<26-d,S;if(d!==0){var B=0;for(S=0;S<this.length;S++){var $=this.words[S]&w,k=(this.words[S]|0)-$<<d;this.words[S]=k|B,B=$>>>26-d}B&&(this.words[S]=B,this.length++)}if(y!==0){for(S=this.length-1;S>=0;S--)this.words[S+y]=this.words[S];for(S=0;S<y;S++)this.words[S]=0;this.length+=y}return this.strip()},s.prototype.ishln=function(f){return n(this.negative===0),this.iushln(f)},s.prototype.iushrn=function(f,d,y){n(typeof f=="number"&&f>=0);var w;d?w=(d-d%26)/26:w=0;var S=f%26,B=Math.min((f-S)/26,this.length),$=67108863^67108863>>>S<<S,k=y;if(w-=B,w=Math.max(0,w),k){for(var x=0;x<B;x++)k.words[x]=this.words[x];k.length=B}if(B!==0)if(this.length>B)for(this.length-=B,x=0;x<this.length;x++)this.words[x]=this.words[x+B];else this.words[0]=0,this.length=1;var b=0;for(x=this.length-1;x>=0&&(b!==0||x>=w);x--){var F=this.words[x]|0;this.words[x]=b<<26-S|F>>>S,b=F&$}return k&&b!==0&&(k.words[k.length++]=b),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},s.prototype.ishrn=function(f,d,y){return n(this.negative===0),this.iushrn(f,d,y)},s.prototype.shln=function(f){return this.clone().ishln(f)},s.prototype.ushln=function(f){return this.clone().iushln(f)},s.prototype.shrn=function(f){return this.clone().ishrn(f)},s.prototype.ushrn=function(f){return this.clone().iushrn(f)},s.prototype.testn=function(f){n(typeof f=="number"&&f>=0);var d=f%26,y=(f-d)/26,w=1<<d;if(this.length<=y)return!1;var S=this.words[y];return!!(S&w)},s.prototype.imaskn=function(f){n(typeof f=="number"&&f>=0);var d=f%26,y=(f-d)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=y)return this;if(d!==0&&y++,this.length=Math.min(y,this.length),d!==0){var w=67108863^67108863>>>d<<d;this.words[this.length-1]&=w}return this.strip()},s.prototype.maskn=function(f){return this.clone().imaskn(f)},s.prototype.iaddn=function(f){return n(typeof f=="number"),n(f<67108864),f<0?this.isubn(-f):this.negative!==0?this.length===1&&(this.words[0]|0)<f?(this.words[0]=f-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(f),this.negative=1,this):this._iaddn(f)},s.prototype._iaddn=function(f){this.words[0]+=f;for(var d=0;d<this.length&&this.words[d]>=67108864;d++)this.words[d]-=67108864,d===this.length-1?this.words[d+1]=1:this.words[d+1]++;return this.length=Math.max(this.length,d+1),this},s.prototype.isubn=function(f){if(n(typeof f=="number"),n(f<67108864),f<0)return this.iaddn(-f);if(this.negative!==0)return this.negative=0,this.iaddn(f),this.negative=1,this;if(this.words[0]-=f,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var d=0;d<this.length&&this.words[d]<0;d++)this.words[d]+=67108864,this.words[d+1]-=1;return this.strip()},s.prototype.addn=function(f){return this.clone().iaddn(f)},s.prototype.subn=function(f){return this.clone().isubn(f)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(f,d,y){var w=f.length+y,S;this._expand(w);var B,$=0;for(S=0;S<f.length;S++){B=(this.words[S+y]|0)+$;var k=(f.words[S]|0)*d;B-=k&67108863,$=(B>>26)-(k/67108864|0),this.words[S+y]=B&67108863}for(;S<this.length-y;S++)B=(this.words[S+y]|0)+$,$=B>>26,this.words[S+y]=B&67108863;if($===0)return this.strip();for(n($===-1),$=0,S=0;S<this.length;S++)B=-(this.words[S]|0)+$,$=B>>26,this.words[S]=B&67108863;return this.negative=1,this.strip()},s.prototype._wordDiv=function(f,d){var y=this.length-f.length,w=this.clone(),S=f,B=S.words[S.length-1]|0,$=this._countBits(B);y=26-$,y!==0&&(S=S.ushln(y),w.iushln(y),B=S.words[S.length-1]|0);var k=w.length-S.length,x;if(d!=="mod"){x=new s(null),x.length=k+1,x.words=new Array(x.length);for(var b=0;b<x.length;b++)x.words[b]=0}var F=w.clone()._ishlnsubmul(S,1,k);F.negative===0&&(w=F,x&&(x.words[k]=1));for(var V=k-1;V>=0;V--){var K=(w.words[S.length+V]|0)*67108864+(w.words[S.length+V-1]|0);for(K=Math.min(K/B|0,67108863),w._ishlnsubmul(S,K,V);w.negative!==0;)K--,w.negative=0,w._ishlnsubmul(S,1,V),w.isZero()||(w.negative^=1);x&&(x.words[V]=K)}return x&&x.strip(),w.strip(),d!=="div"&&y!==0&&w.iushrn(y),{div:x||null,mod:w}},s.prototype.divmod=function(f,d,y){if(n(!f.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var w,S,B;return this.negative!==0&&f.negative===0?(B=this.neg().divmod(f,d),d!=="mod"&&(w=B.div.neg()),d!=="div"&&(S=B.mod.neg(),y&&S.negative!==0&&S.iadd(f)),{div:w,mod:S}):this.negative===0&&f.negative!==0?(B=this.divmod(f.neg(),d),d!=="mod"&&(w=B.div.neg()),{div:w,mod:B.mod}):this.negative&f.negative?(B=this.neg().divmod(f.neg(),d),d!=="div"&&(S=B.mod.neg(),y&&S.negative!==0&&S.isub(f)),{div:B.div,mod:S}):f.length>this.length||this.cmp(f)<0?{div:new s(0),mod:this}:f.length===1?d==="div"?{div:this.divn(f.words[0]),mod:null}:d==="mod"?{div:null,mod:new s(this.modn(f.words[0]))}:{div:this.divn(f.words[0]),mod:new s(this.modn(f.words[0]))}:this._wordDiv(f,d)},s.prototype.div=function(f){return this.divmod(f,"div",!1).div},s.prototype.mod=function(f){return this.divmod(f,"mod",!1).mod},s.prototype.umod=function(f){return this.divmod(f,"mod",!0).mod},s.prototype.divRound=function(f){var d=this.divmod(f);if(d.mod.isZero())return d.div;var y=d.div.negative!==0?d.mod.isub(f):d.mod,w=f.ushrn(1),S=f.andln(1),B=y.cmp(w);return B<0||S===1&&B===0?d.div:d.div.negative!==0?d.div.isubn(1):d.div.iaddn(1)},s.prototype.modn=function(f){n(f<=67108863);for(var d=(1<<26)%f,y=0,w=this.length-1;w>=0;w--)y=(d*y+(this.words[w]|0))%f;return y},s.prototype.idivn=function(f){n(f<=67108863);for(var d=0,y=this.length-1;y>=0;y--){var w=(this.words[y]|0)+d*67108864;this.words[y]=w/f|0,d=w%f}return this.strip()},s.prototype.divn=function(f){return this.clone().idivn(f)},s.prototype.egcd=function(f){n(f.negative===0),n(!f.isZero());var d=this,y=f.clone();d.negative!==0?d=d.umod(f):d=d.clone();for(var w=new s(1),S=new s(0),B=new s(0),$=new s(1),k=0;d.isEven()&&y.isEven();)d.iushrn(1),y.iushrn(1),++k;for(var x=y.clone(),b=d.clone();!d.isZero();){for(var F=0,V=1;!(d.words[0]&V)&&F<26;++F,V<<=1);if(F>0)for(d.iushrn(F);F-- >0;)(w.isOdd()||S.isOdd())&&(w.iadd(x),S.isub(b)),w.iushrn(1),S.iushrn(1);for(var K=0,H=1;!(y.words[0]&H)&&K<26;++K,H<<=1);if(K>0)for(y.iushrn(K);K-- >0;)(B.isOdd()||$.isOdd())&&(B.iadd(x),$.isub(b)),B.iushrn(1),$.iushrn(1);d.cmp(y)>=0?(d.isub(y),w.isub(B),S.isub($)):(y.isub(d),B.isub(w),$.isub(S))}return{a:B,b:$,gcd:y.iushln(k)}},s.prototype._invmp=function(f){n(f.negative===0),n(!f.isZero());var d=this,y=f.clone();d.negative!==0?d=d.umod(f):d=d.clone();for(var w=new s(1),S=new s(0),B=y.clone();d.cmpn(1)>0&&y.cmpn(1)>0;){for(var $=0,k=1;!(d.words[0]&k)&&$<26;++$,k<<=1);if($>0)for(d.iushrn($);$-- >0;)w.isOdd()&&w.iadd(B),w.iushrn(1);for(var x=0,b=1;!(y.words[0]&b)&&x<26;++x,b<<=1);if(x>0)for(y.iushrn(x);x-- >0;)S.isOdd()&&S.iadd(B),S.iushrn(1);d.cmp(y)>=0?(d.isub(y),w.isub(S)):(y.isub(d),S.isub(w))}var F;return d.cmpn(1)===0?F=w:F=S,F.cmpn(0)<0&&F.iadd(f),F},s.prototype.gcd=function(f){if(this.isZero())return f.abs();if(f.isZero())return this.abs();var d=this.clone(),y=f.clone();d.negative=0,y.negative=0;for(var w=0;d.isEven()&&y.isEven();w++)d.iushrn(1),y.iushrn(1);do{for(;d.isEven();)d.iushrn(1);for(;y.isEven();)y.iushrn(1);var S=d.cmp(y);if(S<0){var B=d;d=y,y=B}else if(S===0||y.cmpn(1)===0)break;d.isub(y)}while(!0);return y.iushln(w)},s.prototype.invm=function(f){return this.egcd(f).a.umod(f)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(f){return this.words[0]&f},s.prototype.bincn=function(f){n(typeof f=="number");var d=f%26,y=(f-d)/26,w=1<<d;if(this.length<=y)return this._expand(y+1),this.words[y]|=w,this;for(var S=w,B=y;S!==0&&B<this.length;B++){var $=this.words[B]|0;$+=S,S=$>>>26,$&=67108863,this.words[B]=$}return S!==0&&(this.words[B]=S,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(f){var d=f<0;if(this.negative!==0&&!d)return-1;if(this.negative===0&&d)return 1;this.strip();var y;if(this.length>1)y=1;else{d&&(f=-f),n(f<=67108863,"Number is too big");var w=this.words[0]|0;y=w===f?0:w<f?-1:1}return this.negative!==0?-y|0:y},s.prototype.cmp=function(f){if(this.negative!==0&&f.negative===0)return-1;if(this.negative===0&&f.negative!==0)return 1;var d=this.ucmp(f);return this.negative!==0?-d|0:d},s.prototype.ucmp=function(f){if(this.length>f.length)return 1;if(this.length<f.length)return-1;for(var d=0,y=this.length-1;y>=0;y--){var w=this.words[y]|0,S=f.words[y]|0;if(w!==S){w<S?d=-1:w>S&&(d=1);break}}return d},s.prototype.gtn=function(f){return this.cmpn(f)===1},s.prototype.gt=function(f){return this.cmp(f)===1},s.prototype.gten=function(f){return this.cmpn(f)>=0},s.prototype.gte=function(f){return this.cmp(f)>=0},s.prototype.ltn=function(f){return this.cmpn(f)===-1},s.prototype.lt=function(f){return this.cmp(f)===-1},s.prototype.lten=function(f){return this.cmpn(f)<=0},s.prototype.lte=function(f){return this.cmp(f)<=0},s.prototype.eqn=function(f){return this.cmpn(f)===0},s.prototype.eq=function(f){return this.cmp(f)===0},s.red=function(f){return new ee(f)},s.prototype.toRed=function(f){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),f.convertTo(this)._forceRed(f)},s.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(f){return this.red=f,this},s.prototype.forceRed=function(f){return n(!this.red,"Already a number in reduction context"),this._forceRed(f)},s.prototype.redAdd=function(f){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,f)},s.prototype.redIAdd=function(f){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,f)},s.prototype.redSub=function(f){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,f)},s.prototype.redISub=function(f){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,f)},s.prototype.redShl=function(f){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,f)},s.prototype.redMul=function(f){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,f),this.red.mul(this,f)},s.prototype.redIMul=function(f){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,f),this.red.imul(this,f)},s.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(f){return n(this.red&&!f.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,f)};var z={k256:null,p224:null,p192:null,p25519:null};function D(T,f){this.name=T,this.p=new s(f,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}D.prototype._tmp=function(){var f=new s(null);return f.words=new Array(Math.ceil(this.n/13)),f},D.prototype.ireduce=function(f){var d=f,y;do this.split(d,this.tmp),d=this.imulK(d),d=d.iadd(this.tmp),y=d.bitLength();while(y>this.n);var w=y<this.n?-1:d.ucmp(this.p);return w===0?(d.words[0]=0,d.length=1):w>0?d.isub(this.p):d.strip!==void 0?d.strip():d._strip(),d},D.prototype.split=function(f,d){f.iushrn(this.n,0,d)},D.prototype.imulK=function(f){return f.imul(this.k)};function U(){D.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(U,D),U.prototype.split=function(f,d){for(var y=4194303,w=Math.min(f.length,9),S=0;S<w;S++)d.words[S]=f.words[S];if(d.length=w,f.length<=9){f.words[0]=0,f.length=1;return}var B=f.words[9];for(d.words[d.length++]=B&y,S=10;S<f.length;S++){var $=f.words[S]|0;f.words[S-10]=($&y)<<4|B>>>22,B=$}B>>>=22,f.words[S-10]=B,B===0&&f.length>10?f.length-=10:f.length-=9},U.prototype.imulK=function(f){f.words[f.length]=0,f.words[f.length+1]=0,f.length+=2;for(var d=0,y=0;y<f.length;y++){var w=f.words[y]|0;d+=w*977,f.words[y]=d&67108863,d=w*64+(d/67108864|0)}return f.words[f.length-1]===0&&(f.length--,f.words[f.length-1]===0&&f.length--),f};function Y(){D.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(Y,D);function oe(){D.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(oe,D);function X(){D.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i(X,D),X.prototype.imulK=function(f){for(var d=0,y=0;y<f.length;y++){var w=(f.words[y]|0)*19+d,S=w&67108863;w>>>=26,f.words[y]=S,d=w}return d!==0&&(f.words[f.length++]=d),f},s._prime=function(f){if(z[f])return z[f];var d;if(f==="k256")d=new U;else if(f==="p224")d=new Y;else if(f==="p192")d=new oe;else if(f==="p25519")d=new X;else throw new Error("Unknown prime "+f);return z[f]=d,d};function ee(T){if(typeof T=="string"){var f=s._prime(T);this.m=f.p,this.prime=f}else n(T.gtn(1),"modulus must be greater than 1"),this.m=T,this.prime=null}ee.prototype._verify1=function(f){n(f.negative===0,"red works only with positives"),n(f.red,"red works only with red numbers")},ee.prototype._verify2=function(f,d){n((f.negative|d.negative)===0,"red works only with positives"),n(f.red&&f.red===d.red,"red works only with red numbers")},ee.prototype.imod=function(f){return this.prime?this.prime.ireduce(f)._forceRed(this):f.umod(this.m)._forceRed(this)},ee.prototype.neg=function(f){return f.isZero()?f.clone():this.m.sub(f)._forceRed(this)},ee.prototype.add=function(f,d){this._verify2(f,d);var y=f.add(d);return y.cmp(this.m)>=0&&y.isub(this.m),y._forceRed(this)},ee.prototype.iadd=function(f,d){this._verify2(f,d);var y=f.iadd(d);return y.cmp(this.m)>=0&&y.isub(this.m),y},ee.prototype.sub=function(f,d){this._verify2(f,d);var y=f.sub(d);return y.cmpn(0)<0&&y.iadd(this.m),y._forceRed(this)},ee.prototype.isub=function(f,d){this._verify2(f,d);var y=f.isub(d);return y.cmpn(0)<0&&y.iadd(this.m),y},ee.prototype.shl=function(f,d){return this._verify1(f),this.imod(f.ushln(d))},ee.prototype.imul=function(f,d){return this._verify2(f,d),this.imod(f.imul(d))},ee.prototype.mul=function(f,d){return this._verify2(f,d),this.imod(f.mul(d))},ee.prototype.isqr=function(f){return this.imul(f,f.clone())},ee.prototype.sqr=function(f){return this.mul(f,f)},ee.prototype.sqrt=function(f){if(f.isZero())return f.clone();var d=this.m.andln(3);if(n(d%2===1),d===3){var y=this.m.add(new s(1)).iushrn(2);return this.pow(f,y)}for(var w=this.m.subn(1),S=0;!w.isZero()&&w.andln(1)===0;)S++,w.iushrn(1);n(!w.isZero());var B=new s(1).toRed(this),$=B.redNeg(),k=this.m.subn(1).iushrn(1),x=this.m.bitLength();for(x=new s(2*x*x).toRed(this);this.pow(x,k).cmp($)!==0;)x.redIAdd($);for(var b=this.pow(x,w),F=this.pow(f,w.addn(1).iushrn(1)),V=this.pow(f,w),K=S;V.cmp(B)!==0;){for(var H=V,O=0;H.cmp(B)!==0;O++)H=H.redSqr();n(O<K);var j=this.pow(b,new s(1).iushln(K-O-1));F=F.redMul(j),b=j.redSqr(),V=V.redMul(b),K=O}return F},ee.prototype.invm=function(f){var d=f._invmp(this.m);return d.negative!==0?(d.negative=0,this.imod(d).redNeg()):this.imod(d)},ee.prototype.pow=function(f,d){if(d.isZero())return new s(1).toRed(this);if(d.cmpn(1)===0)return f.clone();var y=4,w=new Array(1<<y);w[0]=new s(1).toRed(this),w[1]=f;for(var S=2;S<w.length;S++)w[S]=this.mul(w[S-1],f);var B=w[0],$=0,k=0,x=d.bitLength()%26;for(x===0&&(x=26),S=d.length-1;S>=0;S--){for(var b=d.words[S],F=x-1;F>=0;F--){var V=b>>F&1;if(B!==w[0]&&(B=this.sqr(B)),V===0&&$===0){k=0;continue}$<<=1,$|=V,k++,!(k!==y&&(S!==0||F!==0))&&(B=this.mul(B,w[$]),k=0,$=0)}x=26}return B},ee.prototype.convertTo=function(f){var d=f.umod(this.m);return d===f?d.clone():d},ee.prototype.convertFrom=function(f){var d=f.clone();return d.red=null,d},s.mont=function(f){return new se(f)};function se(T){ee.call(this,T),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(se,ee),se.prototype.convertTo=function(f){return this.imod(f.ushln(this.shift))},se.prototype.convertFrom=function(f){var d=this.imod(f.mul(this.rinv));return d.red=null,d},se.prototype.imul=function(f,d){if(f.isZero()||d.isZero())return f.words[0]=0,f.length=1,f;var y=f.imul(d),w=y.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),S=y.isub(w).iushrn(this.shift),B=S;return S.cmp(this.m)>=0?B=S.isub(this.m):S.cmpn(0)<0&&(B=S.iadd(this.m)),B._forceRed(this)},se.prototype.mul=function(f,d){if(f.isZero()||d.isZero())return new s(0)._forceRed(this);var y=f.mul(d),w=y.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),S=y.isub(w).iushrn(this.shift),B=S;return S.cmp(this.m)>=0?B=S.isub(this.m):S.cmpn(0)<0&&(B=S.iadd(this.m)),B._forceRed(this)},se.prototype.invm=function(f){var d=this.imod(f._invmp(this.m).mul(this.r2));return d._forceRed(this)}})(t,Ze)})(cl);var np=cl.exports;const ip=pn(np),sm=xn,am=np,Nd=Ha.DecoderBuffer,sp=Zh,Dd=sl;function ap(t){this.enc="der",this.name=t.name,this.entity=t,this.tree=new Wr,this.tree._init(t.body)}var op=ap;ap.prototype.decode=function(e,r){return Nd.isDecoderBuffer(e)||(e=new Nd(e,r)),this.tree._decode(e,r)};function Wr(t){sp.call(this,"der",t)}sm(Wr,sp);Wr.prototype._peekTag=function(e,r,n){if(e.isEmpty())return!1;const i=e.save(),s=fl(e,'Failed to peek tag: "'+r+'"');return e.isError(s)?s:(e.restore(i),s.tag===r||s.tagStr===r||s.tagStr+"of"===r||n)};Wr.prototype._decodeTag=function(e,r,n){const i=fl(e,'Failed to decode tag of "'+r+'"');if(e.isError(i))return i;let s=cp(e,i.primitive,'Failed to get length of "'+r+'"');if(e.isError(s))return s;if(!n&&i.tag!==r&&i.tagStr!==r&&i.tagStr+"of"!==r)return e.error('Failed to match tag: "'+r+'"');if(i.primitive||s!==null)return e.skip(s,'Failed to match body of: "'+r+'"');const a=e.save(),o=this._skipUntilEnd(e,'Failed to skip indefinite length body: "'+this.tag+'"');return e.isError(o)?o:(s=e.offset-a.offset,e.restore(a),e.skip(s,'Failed to match body of: "'+r+'"'))};Wr.prototype._skipUntilEnd=function(e,r){for(;;){const n=fl(e,r);if(e.isError(n))return n;const i=cp(e,n.primitive,r);if(e.isError(i))return i;let s;if(n.primitive||i!==null?s=e.skip(i):s=this._skipUntilEnd(e,r),e.isError(s))return s;if(n.tagStr==="end")break}};Wr.prototype._decodeList=function(e,r,n,i){const s=[];for(;!e.isEmpty();){const a=this._peekTag(e,"end");if(e.isError(a))return a;const o=n.decode(e,"der",i);if(e.isError(o)&&a)break;s.push(o)}return s};Wr.prototype._decodeStr=function(e,r){if(r==="bitstr"){const n=e.readUInt8();return e.isError(n)?n:{unused:n,data:e.raw()}}else if(r==="bmpstr"){const n=e.raw();if(n.length%2===1)return e.error("Decoding of string type: bmpstr length mismatch");let i="";for(let s=0;s<n.length/2;s++)i+=String.fromCharCode(n.readUInt16BE(s*2));return i}else if(r==="numstr"){const n=e.raw().toString("ascii");return this._isNumstr(n)?n:e.error("Decoding of string type: numstr unsupported characters")}else{if(r==="octstr")return e.raw();if(r==="objDesc")return e.raw();if(r==="printstr"){const n=e.raw().toString("ascii");return this._isPrintstr(n)?n:e.error("Decoding of string type: printstr unsupported characters")}else return/str$/.test(r)?e.raw().toString():e.error("Decoding of string type: "+r+" unsupported")}};Wr.prototype._decodeObjid=function(e,r,n){let i;const s=[];let a=0,o=0;for(;!e.isEmpty();)o=e.readUInt8(),a<<=7,a|=o&127,o&128||(s.push(a),a=0);o&128&&s.push(a);const c=s[0]/40|0,u=s[0]%40;if(n?i=s:i=[c,u].concat(s.slice(1)),r){let h=r[i.join(" ")];h===void 0&&(h=r[i.join(".")]),h!==void 0&&(i=h)}return i};Wr.prototype._decodeTime=function(e,r){const n=e.raw().toString();let i,s,a,o,c,u;if(r==="gentime")i=n.slice(0,4)|0,s=n.slice(4,6)|0,a=n.slice(6,8)|0,o=n.slice(8,10)|0,c=n.slice(10,12)|0,u=n.slice(12,14)|0;else if(r==="utctime")i=n.slice(0,2)|0,s=n.slice(2,4)|0,a=n.slice(4,6)|0,o=n.slice(6,8)|0,c=n.slice(8,10)|0,u=n.slice(10,12)|0,i<70?i=2e3+i:i=1900+i;else return e.error("Decoding "+r+" time is not supported yet");return Date.UTC(i,s-1,a,o,c,u,0)};Wr.prototype._decodeNull=function(){return null};Wr.prototype._decodeBool=function(e){const r=e.readUInt8();return e.isError(r)?r:r!==0};Wr.prototype._decodeInt=function(e,r){const n=e.raw();let i=new am(n);return r&&(i=r[i.toString(10)]||i),i};Wr.prototype._use=function(e,r){return typeof e=="function"&&(e=e(r)),e._getDecoder("der").tree};function fl(t,e){let r=t.readUInt8(e);if(t.isError(r))return r;const n=Dd.tagClass[r>>6],i=(r&32)===0;if((r&31)===31){let a=r;for(r=0;(a&128)===128;){if(a=t.readUInt8(e),t.isError(a))return a;r<<=7,r|=a&127}}else r&=31;const s=Dd.tag[r];return{cls:n,primitive:i,tag:r,tagStr:s}}function cp(t,e,r){let n=t.readUInt8(r);if(t.isError(n))return n;if(!e&&n===128)return null;if(!(n&128))return n;const i=n&127;if(i>4)return t.error("length octect is too long");n=0;for(let s=0;s<i;s++){n<<=8;const a=t.readUInt8(r);if(t.isError(a))return a;n|=a}return n}const om=xn,cm=nl.Buffer,ul=op;function ll(t){ul.call(this,t),this.enc="pem"}om(ll,ul);var fm=ll;ll.prototype.decode=function(e,r){const n=e.toString().split(/[\r\n]+/g),i=r.label.toUpperCase(),s=/^-----(BEGIN|END) ([^-]+)-----$/;let a=-1,o=-1;for(let h=0;h<n.length;h++){const p=n[h].match(s);if(p!==null&&p[2]===i)if(a===-1){if(p[1]!=="BEGIN")break;a=h}else{if(p[1]!=="END")break;o=h;break}}if(a===-1||o===-1)throw new Error("PEM section not found for: "+i);const c=n.slice(a+1,o).join("");c.replace(/[^a-z0-9+/=]+/gi,"");const u=cm.from(c,"base64");return ul.prototype.decode.call(this,u,r)};(function(t){const e=t;e.der=op,e.pem=fm})(rp);(function(t){const e=Yh,r=rp,n=xn,i=t;i.define=function(o,c){return new s(o,c)};function s(a,o){this.name=a,this.body=o,this.decoders={},this.encoders={}}s.prototype._createNamed=function(o){const c=this.name;function u(h){this._initNamed(h,c)}return n(u,o),u.prototype._initNamed=function(p,m){o.call(this,p,m)},new u(this)},s.prototype._getDecoder=function(o){return o=o||"der",this.decoders.hasOwnProperty(o)||(this.decoders[o]=this._createNamed(r[o])),this.decoders[o]},s.prototype.decode=function(o,c,u){return this._getDecoder(c).decode(o,u)},s.prototype._getEncoder=function(o){return o=o||"der",this.encoders.hasOwnProperty(o)||(this.encoders[o]=this._createNamed(e[o])),this.encoders[o]},s.prototype.encode=function(o,c,u){return this._getEncoder(c).encode(o,u)}})(Jh);const um=pn(Jh),zi=um.define,lm=zi("RSAPublicKey",function(){this.seq().obj(this.key("n").int(),this.key("e").int())}),fp=zi("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional().any())});zi("PublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(fp),this.key("publicKey").bitstr())});const up=zi("Version",function(){this.int({0:"two-prime",1:"multi"})}),dm=zi("OtherPrimeInfos",function(){this.seq().obj(this.key("ri").int(),this.key("di").int(),this.key("ti").int())}),hm=zi("RSAPrivateKey",function(){this.seq().obj(this.key("version").use(up),this.key("n").int(),this.key("e").int(),this.key("d").int(),this.key("p").int(),this.key("q").int(),this.key("dp").int(),this.key("dq").int(),this.key("qi").int(),this.key("other").optional().use(dm))});zi("PrivateKeyInfo",function(){this.seq().obj(this.key("version").use(up),this.key("algorithm").use(fp),this.key("privateKey").bitstr())});function pm(t){return{n:oi(t.n),e:oi(t.e),d:t.d&&oi(t.d),p:t.p&&oi(t.p),q:t.q&&oi(t.q),dp:t.dp&&oi(t.dp),dq:t.dq&&oi(t.dq),qi:t.qi&&oi(t.qi)}}function xm(t){return new ip(ue.from(t,"base64"))}function oi(t){return/^[0-9]+$/.test(t)?new ip(t,10):xm(t)}function ym(t){const e=pm(t),r=!!e.d,n=r?"PRIVATE":"PUBLIC",i="-----BEGIN RSA "+n+` KEY-----
`,s=`
-----END RSA `+n+` KEY-----
`;let a=ue.alloc(0);r?(e.version="two-prime",a=hm.encode(e,"der")):a=lm.encode(e,"der");const o=a.toString("base64").match(/.{1,64}/g).join(`
`);return i+o+s}class wc extends Vh{constructor(r){super(ym(r),r.n);N(this,"jwk");this.jwk=r}get publicKey(){if(!this.pk)throw new Error("ArweaveSigner - pk is undefined");return Xe.toBuffer(this.pk)}sign(r){return xr().sign(this.jwk,r)}static async verify(r,n,i){return await xr().verify(r,n,i)}}class lp{constructor(e){N(this,"_publicKey");N(this,"ownerLength",zt[2].pubLength);N(this,"signatureLength",zt[2].sigLength);N(this,"signatureType",2);N(this,"pem");N(this,"provider");if(this.provider=e,!this.provider.publicKey)throw new Error("InjectedSolanaSigner - provider.publicKey is undefined");this._publicKey=this.provider.publicKey.toBuffer()}get publicKey(){return this._publicKey}async sign(e){if(!this.provider.signMessage)throw new Error("Selected Wallet does not support message signing");return await this.provider.signMessage(e)}static async verify(e,r,n){let i=e;return typeof e=="string"&&(i=Xe.toBuffer(e)),dc(ue.from(n),ue.from(r),ue.from(i))}}function hr(t){return"0x"+fh.keccak_256(ge(t))}const gm=$e.from(-1),bm=$e.from(0),mm=$e.from(1),wm=$e.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),vm="strings/5.7.0",dp=new xe(vm);var Di;(function(t){t.current="",t.NFC="NFC",t.NFD="NFD",t.NFKC="NFKC",t.NFKD="NFKD"})(Di||(Di={}));var Hr;(function(t){t.UNEXPECTED_CONTINUE="unexpected continuation byte",t.BAD_PREFIX="bad codepoint prefix",t.OVERRUN="string overrun",t.MISSING_CONTINUE="missing continuation byte",t.OUT_OF_RANGE="out of UTF-8 range",t.UTF16_SURROGATE="UTF-16 surrogate",t.OVERLONG="overlong representation"})(Hr||(Hr={}));function _m(t,e,r,n,i){return dp.throwArgumentError(`invalid codepoint at offset ${e}; ${t}`,"bytes",r)}function hp(t,e,r,n,i){if(t===Hr.BAD_PREFIX||t===Hr.UNEXPECTED_CONTINUE){let s=0;for(let a=e+1;a<r.length&&r[a]>>6===2;a++)s++;return s}return t===Hr.OVERRUN?r.length-e-1:0}function Em(t,e,r,n,i){return t===Hr.OVERLONG?(n.push(i),0):(n.push(65533),hp(t,e,r))}const Sm=Object.freeze({error:_m,ignore:hp,replace:Em});function Am(t,e){e==null&&(e=Sm.error),t=ge(t);const r=[];let n=0;for(;n<t.length;){const i=t[n++];if(!(i>>7)){r.push(i);continue}let s=null,a=null;if((i&224)===192)s=1,a=127;else if((i&240)===224)s=2,a=2047;else if((i&248)===240)s=3,a=65535;else{(i&192)===128?n+=e(Hr.UNEXPECTED_CONTINUE,n-1,t,r):n+=e(Hr.BAD_PREFIX,n-1,t,r);continue}if(n-1+s>=t.length){n+=e(Hr.OVERRUN,n-1,t,r);continue}let o=i&(1<<8-s-1)-1;for(let c=0;c<s;c++){let u=t[n];if((u&192)!=128){n+=e(Hr.MISSING_CONTINUE,n,t,r),o=null;break}o=o<<6|u&63,n++}if(o!==null){if(o>1114111){n+=e(Hr.OUT_OF_RANGE,n-1-s,t,r,o);continue}if(o>=55296&&o<=57343){n+=e(Hr.UTF16_SURROGATE,n-1-s,t,r,o);continue}if(o<=a){n+=e(Hr.OVERLONG,n-1-s,t,r,o);continue}r.push(o)}}return r}function Kn(t,e=Di.current){e!=Di.current&&(dp.checkNormalize(),t=t.normalize(e));let r=[];for(let n=0;n<t.length;n++){const i=t.charCodeAt(n);if(i<128)r.push(i);else if(i<2048)r.push(i>>6|192),r.push(i&63|128);else if((i&64512)==55296){n++;const s=t.charCodeAt(n);if(n>=t.length||(s&64512)!==56320)throw new Error("invalid utf-8 string");const a=65536+((i&1023)<<10)+(s&1023);r.push(a>>18|240),r.push(a>>12&63|128),r.push(a>>6&63|128),r.push(a&63|128)}else r.push(i>>12|224),r.push(i>>6&63|128),r.push(i&63|128)}return ge(r)}function Tm(t){return t.map(e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10&1023)+55296,(e&1023)+56320))).join("")}function Rm(t,e){return Tm(Am(t,e))}function Ci(t){return hr(Kn(t))}const Pm="hash/5.7.0",km=`Ethereum Signed Message:
`;function vc(t){return typeof t=="string"&&(t=Kn(t)),hr(Br([Kn(km),Kn(String(t.length)),t]))}const Mm="rlp/5.7.0",Cm=new xe(Mm);function Ld(t){const e=[];for(;t;)e.unshift(t&255),t>>=8;return e}function pp(t){if(Array.isArray(t)){let n=[];if(t.forEach(function(s){n=n.concat(pp(s))}),n.length<=55)return n.unshift(192+n.length),n;const i=Ld(n.length);return i.unshift(247+i.length),i.concat(n)}el(t)||Cm.throwArgumentError("RLP object must be BytesLike","object",t);const e=Array.prototype.slice.call(ge(t));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const r=Ld(e.length);return r.unshift(183+r.length),r.concat(e)}function _a(t){return ke(pp(t))}const Im="address/5.7.0",xs=new xe(Im);function $d(t){ir(t,20)||xs.throwArgumentError("invalid address","address",t),t=t.toLowerCase();const e=t.substring(2).split(""),r=new Uint8Array(40);for(let i=0;i<40;i++)r[i]=e[i].charCodeAt(0);const n=ge(hr(r));for(let i=0;i<40;i+=2)n[i>>1]>>4>=8&&(e[i]=e[i].toUpperCase()),(n[i>>1]&15)>=8&&(e[i+1]=e[i+1].toUpperCase());return"0x"+e.join("")}const Bm=9007199254740991;function Um(t){return Math.log10?Math.log10(t):Math.log(t)/Math.LN10}const dl={};for(let t=0;t<10;t++)dl[String(t)]=String(t);for(let t=0;t<26;t++)dl[String.fromCharCode(65+t)]=String(10+t);const qd=Math.floor(Um(Bm));function Om(t){t=t.toUpperCase(),t=t.substring(4)+t.substring(0,2)+"00";let e=t.split("").map(n=>dl[n]).join("");for(;e.length>=qd;){let n=e.substring(0,qd);e=parseInt(n,10)%97+e.substring(n.length)}let r=String(98-parseInt(e,10)%97);for(;r.length<2;)r="0"+r;return r}function fr(t){let e=null;if(typeof t!="string"&&xs.throwArgumentError("invalid address","address",t),t.match(/^(0x)?[0-9a-fA-F]{40}$/))t.substring(0,2)!=="0x"&&(t="0x"+t),e=$d(t),t.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&e!==t&&xs.throwArgumentError("bad address checksum","address",t);else if(t.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(t.substring(2,4)!==Om(t)&&xs.throwArgumentError("bad icap checksum","address",t),e=R1(t.substring(4));e.length<40;)e="0"+e;e=$d("0x"+e)}else xs.throwArgumentError("invalid address","address",t);return e}function Nm(t){let e=null;try{e=fr(t.from)}catch{xs.throwArgumentError("missing from address","transaction",t)}const r=ei(ge($e.from(t.nonce).toHexString()));return fr(Ni(hr(_a([e,r])),12))}const Dm="properties/5.7.0";var Lm=function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(h){try{u(n.next(h))}catch(p){a(p)}}function c(h){try{u(n.throw(h))}catch(p){a(p)}}function u(h){h.done?s(h.value):i(h.value).then(o,c)}u((n=n.apply(t,e||[])).next())})};const Go=new xe(Dm);function he(t,e,r){Object.defineProperty(t,e,{enumerable:!0,value:r,writable:!1})}function fa(t,e){for(let r=0;r<32;r++){if(t[e])return t[e];if(!t.prototype||typeof t.prototype!="object")break;t=Object.getPrototypeOf(t.prototype).constructor}return null}function Xn(t){return Lm(this,void 0,void 0,function*(){const e=Object.keys(t).map(n=>{const i=t[n];return Promise.resolve(i).then(s=>({key:n,value:s}))});return(yield Promise.all(e)).reduce((n,i)=>(n[i.key]=i.value,n),{})})}function $m(t,e){(!t||typeof t!="object")&&Go.throwArgumentError("invalid object","object",t),Object.keys(t).forEach(r=>{e[r]||Go.throwArgumentError("invalid object key - "+r,"transaction:"+r,t)})}function _i(t){const e={};for(const r in t)e[r]=t[r];return e}const qm={bigint:!0,boolean:!0,function:!0,number:!0,string:!0};function xp(t){if(t==null||qm[typeof t])return!0;if(Array.isArray(t)||typeof t=="object"){if(!Object.isFrozen(t))return!1;const e=Object.keys(t);for(let r=0;r<e.length;r++){let n=null;try{n=t[e[r]]}catch{continue}if(!xp(n))return!1}return!0}return Go.throwArgumentError(`Cannot deepCopy ${typeof t}`,"object",t)}function Fm(t){if(xp(t))return t;if(Array.isArray(t))return Object.freeze(t.map(e=>Ps(e)));if(typeof t=="object"){const e={};for(const r in t){const n=t[r];n!==void 0&&he(e,r,Ps(n))}return e}return Go.throwArgumentError(`Cannot deepCopy ${typeof t}`,"object",t)}function Ps(t){return Fm(t)}class Hs{constructor(e){for(const r in e)this[r]=Ps(e[r])}}var Hm=function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(h){try{u(n.next(h))}catch(p){a(p)}}function c(h){try{u(n.throw(h))}catch(p){a(p)}}function u(h){h.done?s(h.value):i(h.value).then(o,c)}u((n=n.apply(t,e||[])).next())})};const Vt=new xe(Pm),yp=new Uint8Array(32);yp.fill(0);const Km=$e.from(-1),gp=$e.from(0),bp=$e.from(1),zm=$e.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function jm(t){const e=ge(t),r=e.length%32;return r?Ii([e,yp.slice(r)]):ke(e)}const Gm=Ur(bp.toHexString(),32),Wm=Ur(gp.toHexString(),32),Fd={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},kf=["name","version","chainId","verifyingContract","salt"];function Hd(t){return function(e){return typeof e!="string"&&Vt.throwArgumentError(`invalid domain value for ${JSON.stringify(t)}`,`domain.${t}`,e),e}}const Vm={name:Hd("name"),version:Hd("version"),chainId:function(t){try{return $e.from(t).toString()}catch{}return Vt.throwArgumentError('invalid domain value for "chainId"',"domain.chainId",t)},verifyingContract:function(t){try{return fr(t).toLowerCase()}catch{}return Vt.throwArgumentError('invalid domain value "verifyingContract"',"domain.verifyingContract",t)},salt:function(t){try{const e=ge(t);if(e.length!==32)throw new Error("bad length");return ke(e)}catch{}return Vt.throwArgumentError('invalid domain value "salt"',"domain.salt",t)}};function Mf(t){{const e=t.match(/^(u?)int(\d*)$/);if(e){const r=e[1]==="",n=parseInt(e[2]||"256");(n%8!==0||n>256||e[2]&&e[2]!==String(n))&&Vt.throwArgumentError("invalid numeric width","type",t);const i=zm.mask(r?n-1:n),s=r?i.add(bp).mul(Km):gp;return function(a){const o=$e.from(a);return(o.lt(s)||o.gt(i))&&Vt.throwArgumentError(`value out-of-bounds for ${t}`,"value",a),Ur(o.toTwos(256).toHexString(),32)}}}{const e=t.match(/^bytes(\d+)$/);if(e){const r=parseInt(e[1]);return(r===0||r>32||e[1]!==String(r))&&Vt.throwArgumentError("invalid bytes width","type",t),function(n){return ge(n).length!==r&&Vt.throwArgumentError(`invalid length for ${t}`,"value",n),jm(n)}}}switch(t){case"address":return function(e){return Ur(fr(e),32)};case"bool":return function(e){return e?Gm:Wm};case"bytes":return function(e){return hr(e)};case"string":return function(e){return Ci(e)}}return null}function Kd(t,e){return`${t}(${e.map(({name:r,type:n})=>n+" "+r).join(",")})`}class Ir{constructor(e){he(this,"types",Object.freeze(Ps(e))),he(this,"_encoderCache",{}),he(this,"_types",{});const r={},n={},i={};Object.keys(e).forEach(o=>{r[o]={},n[o]=[],i[o]={}});for(const o in e){const c={};e[o].forEach(u=>{c[u.name]&&Vt.throwArgumentError(`duplicate variable name ${JSON.stringify(u.name)} in ${JSON.stringify(o)}`,"types",e),c[u.name]=!0;const h=u.type.match(/^([^\x5b]*)(\x5b|$)/)[1];h===o&&Vt.throwArgumentError(`circular type reference to ${JSON.stringify(h)}`,"types",e),!Mf(h)&&(n[h]||Vt.throwArgumentError(`unknown type ${JSON.stringify(h)}`,"types",e),n[h].push(o),r[o][h]=!0)})}const s=Object.keys(n).filter(o=>n[o].length===0);s.length===0?Vt.throwArgumentError("missing primary type","types",e):s.length>1&&Vt.throwArgumentError(`ambiguous primary types or unused types: ${s.map(o=>JSON.stringify(o)).join(", ")}`,"types",e),he(this,"primaryType",s[0]);function a(o,c){c[o]&&Vt.throwArgumentError(`circular type reference to ${JSON.stringify(o)}`,"types",e),c[o]=!0,Object.keys(r[o]).forEach(u=>{n[u]&&(a(u,c),Object.keys(c).forEach(h=>{i[h][u]=!0}))}),delete c[o]}a(this.primaryType,{});for(const o in i){const c=Object.keys(i[o]);c.sort(),this._types[o]=Kd(o,e[o])+c.map(u=>Kd(u,e[u])).join("")}}getEncoder(e){let r=this._encoderCache[e];return r||(r=this._encoderCache[e]=this._getEncoder(e)),r}_getEncoder(e){{const i=Mf(e);if(i)return i}const r=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(r){const i=r[1],s=this.getEncoder(i),a=parseInt(r[3]);return o=>{a>=0&&o.length!==a&&Vt.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",o);let c=o.map(s);return this._types[i]&&(c=c.map(hr)),hr(Ii(c))}}const n=this.types[e];if(n){const i=Ci(this._types[e]);return s=>{const a=n.map(({name:o,type:c})=>{const u=this.getEncoder(c)(s[o]);return this._types[c]?hr(u):u});return a.unshift(i),Ii(a)}}return Vt.throwArgumentError(`unknown type: ${e}`,"type",e)}encodeType(e){const r=this._types[e];return r||Vt.throwArgumentError(`unknown type: ${JSON.stringify(e)}`,"name",e),r}encodeData(e,r){return this.getEncoder(e)(r)}hashStruct(e,r){return hr(this.encodeData(e,r))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,r,n){if(Mf(e))return n(e,r);const i=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(i){const a=i[1],o=parseInt(i[3]);return o>=0&&r.length!==o&&Vt.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",r),r.map(c=>this._visit(a,c,n))}const s=this.types[e];return s?s.reduce((a,{name:o,type:c})=>(a[o]=this._visit(c,r[o],n),a),{}):Vt.throwArgumentError(`unknown type: ${e}`,"type",e)}visit(e,r){return this._visit(this.primaryType,e,r)}static from(e){return new Ir(e)}static getPrimaryType(e){return Ir.from(e).primaryType}static hashStruct(e,r,n){return Ir.from(r).hashStruct(e,n)}static hashDomain(e){const r=[];for(const n in e){const i=Fd[n];i||Vt.throwArgumentError(`invalid typed-data domain key: ${JSON.stringify(n)}`,"domain",e),r.push({name:n,type:i})}return r.sort((n,i)=>kf.indexOf(n.name)-kf.indexOf(i.name)),Ir.hashStruct("EIP712Domain",{EIP712Domain:r},e)}static encode(e,r,n){return Ii(["0x1901",Ir.hashDomain(e),Ir.from(r).hash(n)])}static hash(e,r,n){return hr(Ir.encode(e,r,n))}static resolveNames(e,r,n,i){return Hm(this,void 0,void 0,function*(){e=_i(e);const s={};e.verifyingContract&&!ir(e.verifyingContract,20)&&(s[e.verifyingContract]="0x");const a=Ir.from(r);a.visit(n,(o,c)=>(o==="address"&&!ir(c,20)&&(s[c]="0x"),c));for(const o in s)s[o]=yield i(o);return e.verifyingContract&&s[e.verifyingContract]&&(e.verifyingContract=s[e.verifyingContract]),n=a.visit(n,(o,c)=>o==="address"&&s[c]?s[c]:c),{domain:e,value:n}})}static getPayload(e,r,n){Ir.hashDomain(e);const i={},s=[];kf.forEach(c=>{const u=e[c];u!=null&&(i[c]=Vm[c](u),s.push({name:c,type:Fd[c]}))});const a=Ir.from(r),o=_i(r);return o.EIP712Domain?Vt.throwArgumentError("types must not contain EIP712Domain type","types.EIP712Domain",r):o.EIP712Domain=s,a.encode(n),{types:o,domain:i,primaryType:a.primaryType,message:a.visit(n,(c,u)=>{if(c.match(/^bytes(\d*)/))return ke(ge(u));if(c.match(/^u?int/))return $e.from(u).toString();switch(c){case"address":return u.toLowerCase();case"bool":return!!u;case"string":return typeof u!="string"&&Vt.throwArgumentError("invalid string","value",u),u}return Vt.throwArgumentError("unsupported type","type",c)})}}}function Ks(t,e,r){return r={path:e,exports:{},require:function(n,i){return Jm(n,i??r.path)}},t(r,r.exports),r.exports}function Jm(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var hl=mp;function mp(t,e){if(!t)throw new Error(e||"Assertion failed")}mp.equal=function(e,r,n){if(e!=r)throw new Error(n||"Assertion failed: "+e+" != "+r)};var Rn=Ks(function(t,e){var r=e;function n(a,o){if(Array.isArray(a))return a.slice();if(!a)return[];var c=[];if(typeof a!="string"){for(var u=0;u<a.length;u++)c[u]=a[u]|0;return c}if(o==="hex"){a=a.replace(/[^a-z0-9]+/ig,""),a.length%2!==0&&(a="0"+a);for(var u=0;u<a.length;u+=2)c.push(parseInt(a[u]+a[u+1],16))}else for(var u=0;u<a.length;u++){var h=a.charCodeAt(u),p=h>>8,m=h&255;p?c.push(p,m):c.push(m)}return c}r.toArray=n;function i(a){return a.length===1?"0"+a:a}r.zero2=i;function s(a){for(var o="",c=0;c<a.length;c++)o+=i(a[c].toString(16));return o}r.toHex=s,r.encode=function(o,c){return c==="hex"?s(o):o}}),Vr=Ks(function(t,e){var r=e;r.assert=hl,r.toArray=Rn.toArray,r.zero2=Rn.zero2,r.toHex=Rn.toHex,r.encode=Rn.encode;function n(c,u,h){var p=new Array(Math.max(c.bitLength(),h)+1);p.fill(0);for(var m=1<<u+1,P=c.clone(),M=0;M<p.length;M++){var R,E=P.andln(m-1);P.isOdd()?(E>(m>>1)-1?R=(m>>1)-E:R=E,P.isubn(R)):R=0,p[M]=R,P.iushrn(1)}return p}r.getNAF=n;function i(c,u){var h=[[],[]];c=c.clone(),u=u.clone();for(var p=0,m=0,P;c.cmpn(-p)>0||u.cmpn(-m)>0;){var M=c.andln(3)+p&3,R=u.andln(3)+m&3;M===3&&(M=-1),R===3&&(R=-1);var E;M&1?(P=c.andln(7)+p&7,(P===3||P===5)&&R===2?E=-M:E=M):E=0,h[0].push(E);var L;R&1?(P=u.andln(7)+m&7,(P===3||P===5)&&M===2?L=-R:L=R):L=0,h[1].push(L),2*p===E+1&&(p=1-p),2*m===L+1&&(m=1-m),c.iushrn(1),u.iushrn(1)}return h}r.getJSF=i;function s(c,u,h){var p="_"+u;c.prototype[u]=function(){return this[p]!==void 0?this[p]:this[p]=h.call(this)}}r.cachedProperty=s;function a(c){return typeof c=="string"?r.toArray(c,"hex"):c}r.parseBytes=a;function o(c){return new Ke(c,"hex","le")}r.intFromLE=o}),Wo=Vr.getNAF,Ym=Vr.getJSF,Vo=Vr.assert;function Ti(t,e){this.type=t,this.p=new Ke(e.p,16),this.red=e.prime?Ke.red(e.prime):Ke.mont(this.p),this.zero=new Ke(0).toRed(this.red),this.one=new Ke(1).toRed(this.red),this.two=new Ke(2).toRed(this.red),this.n=e.n&&new Ke(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var ji=Ti;Ti.prototype.point=function(){throw new Error("Not implemented")};Ti.prototype.validate=function(){throw new Error("Not implemented")};Ti.prototype._fixedNafMul=function(e,r){Vo(e.precomputed);var n=e._getDoubles(),i=Wo(r,1,this._bitLength),s=(1<<n.step+1)-(n.step%2===0?2:1);s/=3;var a=[],o,c;for(o=0;o<i.length;o+=n.step){c=0;for(var u=o+n.step-1;u>=o;u--)c=(c<<1)+i[u];a.push(c)}for(var h=this.jpoint(null,null,null),p=this.jpoint(null,null,null),m=s;m>0;m--){for(o=0;o<a.length;o++)c=a[o],c===m?p=p.mixedAdd(n.points[o]):c===-m&&(p=p.mixedAdd(n.points[o].neg()));h=h.add(p)}return h.toP()};Ti.prototype._wnafMul=function(e,r){var n=4,i=e._getNAFPoints(n);n=i.wnd;for(var s=i.points,a=Wo(r,n,this._bitLength),o=this.jpoint(null,null,null),c=a.length-1;c>=0;c--){for(var u=0;c>=0&&a[c]===0;c--)u++;if(c>=0&&u++,o=o.dblp(u),c<0)break;var h=a[c];Vo(h!==0),e.type==="affine"?h>0?o=o.mixedAdd(s[h-1>>1]):o=o.mixedAdd(s[-h-1>>1].neg()):h>0?o=o.add(s[h-1>>1]):o=o.add(s[-h-1>>1].neg())}return e.type==="affine"?o.toP():o};Ti.prototype._wnafMulAdd=function(e,r,n,i,s){var a=this._wnafT1,o=this._wnafT2,c=this._wnafT3,u=0,h,p,m;for(h=0;h<i;h++){m=r[h];var P=m._getNAFPoints(e);a[h]=P.wnd,o[h]=P.points}for(h=i-1;h>=1;h-=2){var M=h-1,R=h;if(a[M]!==1||a[R]!==1){c[M]=Wo(n[M],a[M],this._bitLength),c[R]=Wo(n[R],a[R],this._bitLength),u=Math.max(c[M].length,u),u=Math.max(c[R].length,u);continue}var E=[r[M],null,null,r[R]];r[M].y.cmp(r[R].y)===0?(E[1]=r[M].add(r[R]),E[2]=r[M].toJ().mixedAdd(r[R].neg())):r[M].y.cmp(r[R].y.redNeg())===0?(E[1]=r[M].toJ().mixedAdd(r[R]),E[2]=r[M].add(r[R].neg())):(E[1]=r[M].toJ().mixedAdd(r[R]),E[2]=r[M].toJ().mixedAdd(r[R].neg()));var L=[-3,-1,-5,-7,0,7,5,1,3],W=Ym(n[M],n[R]);for(u=Math.max(W[0].length,u),c[M]=new Array(u),c[R]=new Array(u),p=0;p<u;p++){var z=W[0][p]|0,D=W[1][p]|0;c[M][p]=L[(z+1)*3+(D+1)],c[R][p]=0,o[M]=E}}var U=this.jpoint(null,null,null),Y=this._wnafT4;for(h=u;h>=0;h--){for(var oe=0;h>=0;){var X=!0;for(p=0;p<i;p++)Y[p]=c[p][h]|0,Y[p]!==0&&(X=!1);if(!X)break;oe++,h--}if(h>=0&&oe++,U=U.dblp(oe),h<0)break;for(p=0;p<i;p++){var ee=Y[p];ee!==0&&(ee>0?m=o[p][ee-1>>1]:ee<0&&(m=o[p][-ee-1>>1].neg()),m.type==="affine"?U=U.mixedAdd(m):U=U.add(m))}}for(h=0;h<i;h++)o[h]=null;return s?U:U.toP()};function gn(t,e){this.curve=t,this.type=e,this.precomputed=null}Ti.BasePoint=gn;gn.prototype.eq=function(){throw new Error("Not implemented")};gn.prototype.validate=function(){return this.curve.validate(this)};Ti.prototype.decodePoint=function(e,r){e=Vr.toArray(e,r);var n=this.p.byteLength();if((e[0]===4||e[0]===6||e[0]===7)&&e.length-1===2*n){e[0]===6?Vo(e[e.length-1]%2===0):e[0]===7&&Vo(e[e.length-1]%2===1);var i=this.point(e.slice(1,1+n),e.slice(1+n,1+2*n));return i}else if((e[0]===2||e[0]===3)&&e.length-1===n)return this.pointFromX(e.slice(1,1+n),e[0]===3);throw new Error("Unknown point format")};gn.prototype.encodeCompressed=function(e){return this.encode(e,!0)};gn.prototype._encode=function(e){var r=this.curve.p.byteLength(),n=this.getX().toArray("be",r);return e?[this.getY().isEven()?2:3].concat(n):[4].concat(n,this.getY().toArray("be",r))};gn.prototype.encode=function(e,r){return Vr.encode(this._encode(r),e)};gn.prototype.precompute=function(e){if(this.precomputed)return this;var r={doubles:null,naf:null,beta:null};return r.naf=this._getNAFPoints(8),r.doubles=this._getDoubles(4,e),r.beta=this._getBeta(),this.precomputed=r,this};gn.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var r=this.precomputed.doubles;return r?r.points.length>=Math.ceil((e.bitLength()+1)/r.step):!1};gn.prototype._getDoubles=function(e,r){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var n=[this],i=this,s=0;s<r;s+=e){for(var a=0;a<e;a++)i=i.dbl();n.push(i)}return{step:e,points:n}};gn.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var r=[this],n=(1<<e)-1,i=n===1?null:this.dbl(),s=1;s<n;s++)r[s]=r[s-1].add(i);return{wnd:e,points:r}};gn.prototype._getBeta=function(){return null};gn.prototype.dblp=function(e){for(var r=this,n=0;n<e;n++)r=r.dbl();return r};var pl=Ks(function(t){typeof Object.create=="function"?t.exports=function(r,n){n&&(r.super_=n,r.prototype=Object.create(n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(r,n){if(n){r.super_=n;var i=function(){};i.prototype=n.prototype,r.prototype=new i,r.prototype.constructor=r}}}),Xm=Vr.assert;function bn(t){ji.call(this,"short",t),this.a=new Ke(t.a,16).toRed(this.red),this.b=new Ke(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(t),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}pl(bn,ji);var Zm=bn;bn.prototype._getEndomorphism=function(e){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var r,n;if(e.beta)r=new Ke(e.beta,16).toRed(this.red);else{var i=this._getEndoRoots(this.p);r=i[0].cmp(i[1])<0?i[0]:i[1],r=r.toRed(this.red)}if(e.lambda)n=new Ke(e.lambda,16);else{var s=this._getEndoRoots(this.n);this.g.mul(s[0]).x.cmp(this.g.x.redMul(r))===0?n=s[0]:(n=s[1],Xm(this.g.mul(n).x.cmp(this.g.x.redMul(r))===0))}var a;return e.basis?a=e.basis.map(function(o){return{a:new Ke(o.a,16),b:new Ke(o.b,16)}}):a=this._getEndoBasis(n),{beta:r,lambda:n,basis:a}}};bn.prototype._getEndoRoots=function(e){var r=e===this.p?this.red:Ke.mont(e),n=new Ke(2).toRed(r).redInvm(),i=n.redNeg(),s=new Ke(3).toRed(r).redNeg().redSqrt().redMul(n),a=i.redAdd(s).fromRed(),o=i.redSub(s).fromRed();return[a,o]};bn.prototype._getEndoBasis=function(e){for(var r=this.n.ushrn(Math.floor(this.n.bitLength()/2)),n=e,i=this.n.clone(),s=new Ke(1),a=new Ke(0),o=new Ke(0),c=new Ke(1),u,h,p,m,P,M,R,E=0,L,W;n.cmpn(0)!==0;){var z=i.div(n);L=i.sub(z.mul(n)),W=o.sub(z.mul(s));var D=c.sub(z.mul(a));if(!p&&L.cmp(r)<0)u=R.neg(),h=s,p=L.neg(),m=W;else if(p&&++E===2)break;R=L,i=n,n=L,o=s,s=W,c=a,a=D}P=L.neg(),M=W;var U=p.sqr().add(m.sqr()),Y=P.sqr().add(M.sqr());return Y.cmp(U)>=0&&(P=u,M=h),p.negative&&(p=p.neg(),m=m.neg()),P.negative&&(P=P.neg(),M=M.neg()),[{a:p,b:m},{a:P,b:M}]};bn.prototype._endoSplit=function(e){var r=this.endo.basis,n=r[0],i=r[1],s=i.b.mul(e).divRound(this.n),a=n.b.neg().mul(e).divRound(this.n),o=s.mul(n.a),c=a.mul(i.a),u=s.mul(n.b),h=a.mul(i.b),p=e.sub(o).sub(c),m=u.add(h).neg();return{k1:p,k2:m}};bn.prototype.pointFromX=function(e,r){e=new Ke(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),i=n.redSqrt();if(i.redSqr().redSub(n).cmp(this.zero)!==0)throw new Error("invalid point");var s=i.fromRed().isOdd();return(r&&!s||!r&&s)&&(i=i.redNeg()),this.point(e,i)};bn.prototype.validate=function(e){if(e.inf)return!0;var r=e.x,n=e.y,i=this.a.redMul(r),s=r.redSqr().redMul(r).redIAdd(i).redIAdd(this.b);return n.redSqr().redISub(s).cmpn(0)===0};bn.prototype._endoWnafMulAdd=function(e,r,n){for(var i=this._endoWnafT1,s=this._endoWnafT2,a=0;a<e.length;a++){var o=this._endoSplit(r[a]),c=e[a],u=c._getBeta();o.k1.negative&&(o.k1.ineg(),c=c.neg(!0)),o.k2.negative&&(o.k2.ineg(),u=u.neg(!0)),i[a*2]=c,i[a*2+1]=u,s[a*2]=o.k1,s[a*2+1]=o.k2}for(var h=this._wnafMulAdd(1,i,s,a*2,n),p=0;p<a*2;p++)i[p]=null,s[p]=null;return h};function pr(t,e,r,n){ji.BasePoint.call(this,t,"affine"),e===null&&r===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new Ke(e,16),this.y=new Ke(r,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}pl(pr,ji.BasePoint);bn.prototype.point=function(e,r,n){return new pr(this,e,r,n)};bn.prototype.pointFromJSON=function(e,r){return pr.fromJSON(this,e,r)};pr.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var r=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var n=this.curve,i=function(s){return n.point(s.x.redMul(n.endo.beta),s.y)};e.beta=r,r.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(i)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(i)}}}return r}};pr.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};pr.fromJSON=function(e,r,n){typeof r=="string"&&(r=JSON.parse(r));var i=e.point(r[0],r[1],n);if(!r[2])return i;function s(o){return e.point(o[0],o[1],n)}var a=r[2];return i.precomputed={beta:null,doubles:a.doubles&&{step:a.doubles.step,points:[i].concat(a.doubles.points.map(s))},naf:a.naf&&{wnd:a.naf.wnd,points:[i].concat(a.naf.points.map(s))}},i};pr.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};pr.prototype.isInfinity=function(){return this.inf};pr.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(this.x.cmp(e.x)===0)return this.curve.point(null,null);var r=this.y.redSub(e.y);r.cmpn(0)!==0&&(r=r.redMul(this.x.redSub(e.x).redInvm()));var n=r.redSqr().redISub(this.x).redISub(e.x),i=r.redMul(this.x.redSub(n)).redISub(this.y);return this.curve.point(n,i)};pr.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(e.cmpn(0)===0)return this.curve.point(null,null);var r=this.curve.a,n=this.x.redSqr(),i=e.redInvm(),s=n.redAdd(n).redIAdd(n).redIAdd(r).redMul(i),a=s.redSqr().redISub(this.x.redAdd(this.x)),o=s.redMul(this.x.redSub(a)).redISub(this.y);return this.curve.point(a,o)};pr.prototype.getX=function(){return this.x.fromRed()};pr.prototype.getY=function(){return this.y.fromRed()};pr.prototype.mul=function(e){return e=new Ke(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)};pr.prototype.mulAdd=function(e,r,n){var i=[this,r],s=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,s):this.curve._wnafMulAdd(1,i,s,2)};pr.prototype.jmulAdd=function(e,r,n){var i=[this,r],s=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,s,!0):this.curve._wnafMulAdd(1,i,s,2,!0)};pr.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||this.x.cmp(e.x)===0&&this.y.cmp(e.y)===0)};pr.prototype.neg=function(e){if(this.inf)return this;var r=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var n=this.precomputed,i=function(s){return s.neg()};r.precomputed={naf:n.naf&&{wnd:n.naf.wnd,points:n.naf.points.map(i)},doubles:n.doubles&&{step:n.doubles.step,points:n.doubles.points.map(i)}}}return r};pr.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var e=this.curve.jpoint(this.x,this.y,this.curve.one);return e};function br(t,e,r,n){ji.BasePoint.call(this,t,"jacobian"),e===null&&r===null&&n===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new Ke(0)):(this.x=new Ke(e,16),this.y=new Ke(r,16),this.z=new Ke(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}pl(br,ji.BasePoint);bn.prototype.jpoint=function(e,r,n){return new br(this,e,r,n)};br.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),r=e.redSqr(),n=this.x.redMul(r),i=this.y.redMul(r).redMul(e);return this.curve.point(n,i)};br.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};br.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var r=e.z.redSqr(),n=this.z.redSqr(),i=this.x.redMul(r),s=e.x.redMul(n),a=this.y.redMul(r.redMul(e.z)),o=e.y.redMul(n.redMul(this.z)),c=i.redSub(s),u=a.redSub(o);if(c.cmpn(0)===0)return u.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var h=c.redSqr(),p=h.redMul(c),m=i.redMul(h),P=u.redSqr().redIAdd(p).redISub(m).redISub(m),M=u.redMul(m.redISub(P)).redISub(a.redMul(p)),R=this.z.redMul(e.z).redMul(c);return this.curve.jpoint(P,M,R)};br.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var r=this.z.redSqr(),n=this.x,i=e.x.redMul(r),s=this.y,a=e.y.redMul(r).redMul(this.z),o=n.redSub(i),c=s.redSub(a);if(o.cmpn(0)===0)return c.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var u=o.redSqr(),h=u.redMul(o),p=n.redMul(u),m=c.redSqr().redIAdd(h).redISub(p).redISub(p),P=c.redMul(p.redISub(m)).redISub(s.redMul(h)),M=this.z.redMul(o);return this.curve.jpoint(m,P,M)};br.prototype.dblp=function(e){if(e===0)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var r;if(this.curve.zeroA||this.curve.threeA){var n=this;for(r=0;r<e;r++)n=n.dbl();return n}var i=this.curve.a,s=this.curve.tinv,a=this.x,o=this.y,c=this.z,u=c.redSqr().redSqr(),h=o.redAdd(o);for(r=0;r<e;r++){var p=a.redSqr(),m=h.redSqr(),P=m.redSqr(),M=p.redAdd(p).redIAdd(p).redIAdd(i.redMul(u)),R=a.redMul(m),E=M.redSqr().redISub(R.redAdd(R)),L=R.redISub(E),W=M.redMul(L);W=W.redIAdd(W).redISub(P);var z=h.redMul(c);r+1<e&&(u=u.redMul(P)),a=E,c=z,h=W}return this.curve.jpoint(a,h.redMul(s),c)};br.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};br.prototype._zeroDbl=function(){var e,r,n;if(this.zOne){var i=this.x.redSqr(),s=this.y.redSqr(),a=s.redSqr(),o=this.x.redAdd(s).redSqr().redISub(i).redISub(a);o=o.redIAdd(o);var c=i.redAdd(i).redIAdd(i),u=c.redSqr().redISub(o).redISub(o),h=a.redIAdd(a);h=h.redIAdd(h),h=h.redIAdd(h),e=u,r=c.redMul(o.redISub(u)).redISub(h),n=this.y.redAdd(this.y)}else{var p=this.x.redSqr(),m=this.y.redSqr(),P=m.redSqr(),M=this.x.redAdd(m).redSqr().redISub(p).redISub(P);M=M.redIAdd(M);var R=p.redAdd(p).redIAdd(p),E=R.redSqr(),L=P.redIAdd(P);L=L.redIAdd(L),L=L.redIAdd(L),e=E.redISub(M).redISub(M),r=R.redMul(M.redISub(e)).redISub(L),n=this.y.redMul(this.z),n=n.redIAdd(n)}return this.curve.jpoint(e,r,n)};br.prototype._threeDbl=function(){var e,r,n;if(this.zOne){var i=this.x.redSqr(),s=this.y.redSqr(),a=s.redSqr(),o=this.x.redAdd(s).redSqr().redISub(i).redISub(a);o=o.redIAdd(o);var c=i.redAdd(i).redIAdd(i).redIAdd(this.curve.a),u=c.redSqr().redISub(o).redISub(o);e=u;var h=a.redIAdd(a);h=h.redIAdd(h),h=h.redIAdd(h),r=c.redMul(o.redISub(u)).redISub(h),n=this.y.redAdd(this.y)}else{var p=this.z.redSqr(),m=this.y.redSqr(),P=this.x.redMul(m),M=this.x.redSub(p).redMul(this.x.redAdd(p));M=M.redAdd(M).redIAdd(M);var R=P.redIAdd(P);R=R.redIAdd(R);var E=R.redAdd(R);e=M.redSqr().redISub(E),n=this.y.redAdd(this.z).redSqr().redISub(m).redISub(p);var L=m.redSqr();L=L.redIAdd(L),L=L.redIAdd(L),L=L.redIAdd(L),r=M.redMul(R.redISub(e)).redISub(L)}return this.curve.jpoint(e,r,n)};br.prototype._dbl=function(){var e=this.curve.a,r=this.x,n=this.y,i=this.z,s=i.redSqr().redSqr(),a=r.redSqr(),o=n.redSqr(),c=a.redAdd(a).redIAdd(a).redIAdd(e.redMul(s)),u=r.redAdd(r);u=u.redIAdd(u);var h=u.redMul(o),p=c.redSqr().redISub(h.redAdd(h)),m=h.redISub(p),P=o.redSqr();P=P.redIAdd(P),P=P.redIAdd(P),P=P.redIAdd(P);var M=c.redMul(m).redISub(P),R=n.redAdd(n).redMul(i);return this.curve.jpoint(p,M,R)};br.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),r=this.y.redSqr(),n=this.z.redSqr(),i=r.redSqr(),s=e.redAdd(e).redIAdd(e),a=s.redSqr(),o=this.x.redAdd(r).redSqr().redISub(e).redISub(i);o=o.redIAdd(o),o=o.redAdd(o).redIAdd(o),o=o.redISub(a);var c=o.redSqr(),u=i.redIAdd(i);u=u.redIAdd(u),u=u.redIAdd(u),u=u.redIAdd(u);var h=s.redIAdd(o).redSqr().redISub(a).redISub(c).redISub(u),p=r.redMul(h);p=p.redIAdd(p),p=p.redIAdd(p);var m=this.x.redMul(c).redISub(p);m=m.redIAdd(m),m=m.redIAdd(m);var P=this.y.redMul(h.redMul(u.redISub(h)).redISub(o.redMul(c)));P=P.redIAdd(P),P=P.redIAdd(P),P=P.redIAdd(P);var M=this.z.redAdd(o).redSqr().redISub(n).redISub(c);return this.curve.jpoint(m,P,M)};br.prototype.mul=function(e,r){return e=new Ke(e,r),this.curve._wnafMul(this,e)};br.prototype.eq=function(e){if(e.type==="affine")return this.eq(e.toJ());if(this===e)return!0;var r=this.z.redSqr(),n=e.z.redSqr();if(this.x.redMul(n).redISub(e.x.redMul(r)).cmpn(0)!==0)return!1;var i=r.redMul(this.z),s=n.redMul(e.z);return this.y.redMul(s).redISub(e.y.redMul(i)).cmpn(0)===0};br.prototype.eqXToP=function(e){var r=this.z.redSqr(),n=e.toRed(this.curve.red).redMul(r);if(this.x.cmp(n)===0)return!0;for(var i=e.clone(),s=this.curve.redN.redMul(r);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(n.redIAdd(s),this.x.cmp(n)===0)return!0}};br.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};br.prototype.isInfinity=function(){return this.z.cmpn(0)===0};var Mo=Ks(function(t,e){var r=e;r.base=ji,r.short=Zm,r.mont=null,r.edwards=null}),Co=Ks(function(t,e){var r=e,n=Vr.assert;function i(o){o.type==="short"?this.curve=new Mo.short(o):o.type==="edwards"?this.curve=new Mo.edwards(o):this.curve=new Mo.mont(o),this.g=this.curve.g,this.n=this.curve.n,this.hash=o.hash,n(this.g.validate(),"Invalid curve"),n(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}r.PresetCurve=i;function s(o,c){Object.defineProperty(r,o,{configurable:!0,enumerable:!0,get:function(){var u=new i(c);return Object.defineProperty(r,o,{configurable:!0,enumerable:!0,value:u}),u}})}s("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:qr.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),s("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:qr.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),s("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:qr.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),s("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:qr.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),s("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:qr.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),s("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:qr.sha256,gRed:!1,g:["9"]}),s("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:qr.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var a;try{a=null.crash()}catch{a=void 0}s("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:qr.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",a]})});function Ei(t){if(!(this instanceof Ei))return new Ei(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=Rn.toArray(t.entropy,t.entropyEnc||"hex"),r=Rn.toArray(t.nonce,t.nonceEnc||"hex"),n=Rn.toArray(t.pers,t.persEnc||"hex");hl(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,r,n)}var wp=Ei;Ei.prototype._init=function(e,r,n){var i=e.concat(r).concat(n);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var s=0;s<this.V.length;s++)this.K[s]=0,this.V[s]=1;this._update(i),this._reseed=1,this.reseedInterval=281474976710656};Ei.prototype._hmac=function(){return new qr.hmac(this.hash,this.K)};Ei.prototype._update=function(e){var r=this._hmac().update(this.V).update([0]);e&&(r=r.update(e)),this.K=r.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())};Ei.prototype.reseed=function(e,r,n,i){typeof r!="string"&&(i=n,n=r,r=null),e=Rn.toArray(e,r),n=Rn.toArray(n,i),hl(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(n||[])),this._reseed=1};Ei.prototype.generate=function(e,r,n,i){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof r!="string"&&(i=n,n=r,r=null),n&&(n=Rn.toArray(n,i||"hex"),this._update(n));for(var s=[];s.length<e;)this.V=this._hmac().update(this.V).digest(),s=s.concat(this.V);var a=s.slice(0,e);return this._update(n),this._reseed++,Rn.encode(a,r)};var Eu=Vr.assert;function Tr(t,e){this.ec=t,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}var xl=Tr;Tr.fromPublic=function(e,r,n){return r instanceof Tr?r:new Tr(e,{pub:r,pubEnc:n})};Tr.fromPrivate=function(e,r,n){return r instanceof Tr?r:new Tr(e,{priv:r,privEnc:n})};Tr.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};Tr.prototype.getPublic=function(e,r){return typeof e=="string"&&(r=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),r?this.pub.encode(r,e):this.pub};Tr.prototype.getPrivate=function(e){return e==="hex"?this.priv.toString(16,2):this.priv};Tr.prototype._importPrivate=function(e,r){this.priv=new Ke(e,r||16),this.priv=this.priv.umod(this.ec.curve.n)};Tr.prototype._importPublic=function(e,r){if(e.x||e.y){this.ec.curve.type==="mont"?Eu(e.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&Eu(e.x&&e.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(e.x,e.y);return}this.pub=this.ec.curve.decodePoint(e,r)};Tr.prototype.derive=function(e){return e.validate()||Eu(e.validate(),"public point not validated"),e.mul(this.priv).getX()};Tr.prototype.sign=function(e,r,n){return this.ec.sign(e,this,r,n)};Tr.prototype.verify=function(e,r){return this.ec.verify(e,r,this)};Tr.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var Qm=Vr.assert;function _c(t,e){if(t instanceof _c)return t;this._importDER(t,e)||(Qm(t.r&&t.s,"Signature without r or s"),this.r=new Ke(t.r,16),this.s=new Ke(t.s,16),t.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}var Ec=_c;function ew(){this.place=0}function Cf(t,e){var r=t[e.place++];if(!(r&128))return r;var n=r&15;if(n===0||n>4)return!1;for(var i=0,s=0,a=e.place;s<n;s++,a++)i<<=8,i|=t[a],i>>>=0;return i<=127?!1:(e.place=a,i)}function zd(t){for(var e=0,r=t.length-1;!t[e]&&!(t[e+1]&128)&&e<r;)e++;return e===0?t:t.slice(e)}_c.prototype._importDER=function(e,r){e=Vr.toArray(e,r);var n=new ew;if(e[n.place++]!==48)return!1;var i=Cf(e,n);if(i===!1||i+n.place!==e.length||e[n.place++]!==2)return!1;var s=Cf(e,n);if(s===!1)return!1;var a=e.slice(n.place,s+n.place);if(n.place+=s,e[n.place++]!==2)return!1;var o=Cf(e,n);if(o===!1||e.length!==o+n.place)return!1;var c=e.slice(n.place,o+n.place);if(a[0]===0)if(a[1]&128)a=a.slice(1);else return!1;if(c[0]===0)if(c[1]&128)c=c.slice(1);else return!1;return this.r=new Ke(a),this.s=new Ke(c),this.recoveryParam=null,!0};function If(t,e){if(e<128){t.push(e);return}var r=1+(Math.log(e)/Math.LN2>>>3);for(t.push(r|128);--r;)t.push(e>>>(r<<3)&255);t.push(e)}_c.prototype.toDER=function(e){var r=this.r.toArray(),n=this.s.toArray();for(r[0]&128&&(r=[0].concat(r)),n[0]&128&&(n=[0].concat(n)),r=zd(r),n=zd(n);!n[0]&&!(n[1]&128);)n=n.slice(1);var i=[2];If(i,r.length),i=i.concat(r),i.push(2),If(i,n.length);var s=i.concat(n),a=[48];return If(a,s.length),a=a.concat(s),Vr.encode(a,e)};var tw=function(){throw new Error("unsupported")},vp=Vr.assert;function dn(t){if(!(this instanceof dn))return new dn(t);typeof t=="string"&&(vp(Object.prototype.hasOwnProperty.call(Co,t),"Unknown curve "+t),t=Co[t]),t instanceof Co.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1),this.hash=t.hash||t.curve.hash}var rw=dn;dn.prototype.keyPair=function(e){return new xl(this,e)};dn.prototype.keyFromPrivate=function(e,r){return xl.fromPrivate(this,e,r)};dn.prototype.keyFromPublic=function(e,r){return xl.fromPublic(this,e,r)};dn.prototype.genKeyPair=function(e){e||(e={});for(var r=new wp({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||tw(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),n=this.n.byteLength(),i=this.n.sub(new Ke(2));;){var s=new Ke(r.generate(n));if(!(s.cmp(i)>0))return s.iaddn(1),this.keyFromPrivate(s)}};dn.prototype._truncateToN=function(e,r){var n=e.byteLength()*8-this.n.bitLength();return n>0&&(e=e.ushrn(n)),!r&&e.cmp(this.n)>=0?e.sub(this.n):e};dn.prototype.sign=function(e,r,n,i){typeof n=="object"&&(i=n,n=null),i||(i={}),r=this.keyFromPrivate(r,n),e=this._truncateToN(new Ke(e,16));for(var s=this.n.byteLength(),a=r.getPrivate().toArray("be",s),o=e.toArray("be",s),c=new wp({hash:this.hash,entropy:a,nonce:o,pers:i.pers,persEnc:i.persEnc||"utf8"}),u=this.n.sub(new Ke(1)),h=0;;h++){var p=i.k?i.k(h):new Ke(c.generate(this.n.byteLength()));if(p=this._truncateToN(p,!0),!(p.cmpn(1)<=0||p.cmp(u)>=0)){var m=this.g.mul(p);if(!m.isInfinity()){var P=m.getX(),M=P.umod(this.n);if(M.cmpn(0)!==0){var R=p.invm(this.n).mul(M.mul(r.getPrivate()).iadd(e));if(R=R.umod(this.n),R.cmpn(0)!==0){var E=(m.getY().isOdd()?1:0)|(P.cmp(M)!==0?2:0);return i.canonical&&R.cmp(this.nh)>0&&(R=this.n.sub(R),E^=1),new Ec({r:M,s:R,recoveryParam:E})}}}}}};dn.prototype.verify=function(e,r,n,i){e=this._truncateToN(new Ke(e,16)),n=this.keyFromPublic(n,i),r=new Ec(r,"hex");var s=r.r,a=r.s;if(s.cmpn(1)<0||s.cmp(this.n)>=0||a.cmpn(1)<0||a.cmp(this.n)>=0)return!1;var o=a.invm(this.n),c=o.mul(e).umod(this.n),u=o.mul(s).umod(this.n),h;return this.curve._maxwellTrick?(h=this.g.jmulAdd(c,n.getPublic(),u),h.isInfinity()?!1:h.eqXToP(s)):(h=this.g.mulAdd(c,n.getPublic(),u),h.isInfinity()?!1:h.getX().umod(this.n).cmp(s)===0)};dn.prototype.recoverPubKey=function(t,e,r,n){vp((3&r)===r,"The recovery param is more than two bits"),e=new Ec(e,n);var i=this.n,s=new Ke(t),a=e.r,o=e.s,c=r&1,u=r>>1;if(a.cmp(this.curve.p.umod(this.curve.n))>=0&&u)throw new Error("Unable to find sencond key candinate");u?a=this.curve.pointFromX(a.add(this.curve.n),c):a=this.curve.pointFromX(a,c);var h=e.r.invm(i),p=i.sub(s).mul(h).umod(i),m=o.mul(h).umod(i);return this.g.mulAdd(p,a,m)};dn.prototype.getKeyRecoveryParam=function(t,e,r,n){if(e=new Ec(e,n),e.recoveryParam!==null)return e.recoveryParam;for(var i=0;i<4;i++){var s;try{s=this.recoverPubKey(t,e,i)}catch{continue}if(s.eq(r))return i}throw new Error("Unable to find valid recovery factor")};var nw=Ks(function(t,e){var r=e;r.version="6.5.4",r.utils=Vr,r.rand=function(){throw new Error("unsupported")},r.curve=Mo,r.curves=Co,r.ec=rw,r.eddsa=null}),iw=nw.ec;const sw="signing-key/5.7.0",Su=new xe(sw);let Bf=null;function On(){return Bf||(Bf=new iw("secp256k1")),Bf}class ws{constructor(e){he(this,"curve","secp256k1"),he(this,"privateKey",ke(e)),Dh(this.privateKey)!==32&&Su.throwArgumentError("invalid private key","privateKey","[[ REDACTED ]]");const r=On().keyFromPrivate(ge(this.privateKey));he(this,"publicKey","0x"+r.getPublic(!1,"hex")),he(this,"compressedPublicKey","0x"+r.getPublic(!0,"hex")),he(this,"_isSigningKey",!0)}_addPoint(e){const r=On().keyFromPublic(ge(this.publicKey)),n=On().keyFromPublic(ge(e));return"0x"+r.pub.add(n.pub).encodeCompressed("hex")}signDigest(e){const r=On().keyFromPrivate(ge(this.privateKey)),n=ge(e);n.length!==32&&Su.throwArgumentError("bad digest length","digest",e);const i=r.sign(n,{canonical:!0});return qs({recoveryParam:i.recoveryParam,r:Ur("0x"+i.r.toString(16),32),s:Ur("0x"+i.s.toString(16),32)})}computeSharedSecret(e){const r=On().keyFromPrivate(ge(this.privateKey)),n=On().keyFromPublic(ge(Ep(e)));return Ur("0x"+r.derive(n.getPublic()).toString(16),32)}static isSigningKey(e){return!!(e&&e._isSigningKey)}}function _p(t,e){const r=qs(e),n={r:ge(r.r),s:ge(r.s)};return"0x"+On().recoverPubKey(ge(t),n,r.recoveryParam).encode("hex",!1)}function Ep(t,e){const r=ge(t);if(r.length===32){const n=new ws(r);return e?"0x"+On().keyFromPrivate(r).getPublic(!0,"hex"):n.publicKey}else{if(r.length===33)return e?ke(r):"0x"+On().keyFromPublic(r).getPublic(!1,"hex");if(r.length===65)return e?"0x"+On().keyFromPublic(r).getPublic(!0,"hex"):ke(r)}return Su.throwArgumentError("invalid public or private key","key","[REDACTED]")}const aw="transactions/5.7.0",An=new xe(aw);var jd;(function(t){t[t.legacy=0]="legacy",t[t.eip2930=1]="eip2930",t[t.eip1559=2]="eip1559"})(jd||(jd={}));const ow=[{name:"nonce",maxLength:32,numeric:!0},{name:"gasPrice",maxLength:32,numeric:!0},{name:"gasLimit",maxLength:32,numeric:!0},{name:"to",length:20},{name:"value",maxLength:32,numeric:!0},{name:"data"}],cw={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,type:!0,value:!0};function vi(t){const e=Ep(t);return fr(Ni(hr(Ni(e,1)),12))}function Sp(t,e){return vi(_p(ge(t),e))}function Kr(t,e){const r=ei($e.from(t).toHexString());return r.length>32&&An.throwArgumentError("invalid length for "+e,"transaction:"+e,t),r}function Uf(t,e){return{address:fr(t),storageKeys:(e||[]).map((r,n)=>(Dh(r)!==32&&An.throwArgumentError("invalid access list storageKey",`accessList[${t}:${n}]`,r),r.toLowerCase()))}}function Ap(t){if(Array.isArray(t))return t.map((r,n)=>Array.isArray(r)?(r.length>2&&An.throwArgumentError("access list expected to be [ address, storageKeys[] ]",`value[${n}]`,r),Uf(r[0],r[1])):Uf(r.address,r.storageKeys));const e=Object.keys(t).map(r=>{const n=t[r].reduce((i,s)=>(i[s]=!0,i),{});return Uf(r,Object.keys(n).sort())});return e.sort((r,n)=>r.address.localeCompare(n.address)),e}function Tp(t){return Ap(t).map(e=>[e.address,e.storageKeys])}function fw(t,e){if(t.gasPrice!=null){const n=$e.from(t.gasPrice),i=$e.from(t.maxFeePerGas||0);n.eq(i)||An.throwArgumentError("mismatch EIP-1559 gasPrice != maxFeePerGas","tx",{gasPrice:n,maxFeePerGas:i})}const r=[Kr(t.chainId||0,"chainId"),Kr(t.nonce||0,"nonce"),Kr(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),Kr(t.maxFeePerGas||0,"maxFeePerGas"),Kr(t.gasLimit||0,"gasLimit"),t.to!=null?fr(t.to):"0x",Kr(t.value||0,"value"),t.data||"0x",Tp(t.accessList||[])];if(e){const n=qs(e);r.push(Kr(n.recoveryParam,"recoveryParam")),r.push(ei(n.r)),r.push(ei(n.s))}return Ii(["0x02",_a(r)])}function uw(t,e){const r=[Kr(t.chainId||0,"chainId"),Kr(t.nonce||0,"nonce"),Kr(t.gasPrice||0,"gasPrice"),Kr(t.gasLimit||0,"gasLimit"),t.to!=null?fr(t.to):"0x",Kr(t.value||0,"value"),t.data||"0x",Tp(t.accessList||[])];if(e){const n=qs(e);r.push(Kr(n.recoveryParam,"recoveryParam")),r.push(ei(n.r)),r.push(ei(n.s))}return Ii(["0x01",_a(r)])}function lw(t,e){$m(t,cw);const r=[];ow.forEach(function(a){let o=t[a.name]||[];const c={};a.numeric&&(c.hexPad="left"),o=ge(ke(o,c)),a.length&&o.length!==a.length&&o.length>0&&An.throwArgumentError("invalid length for "+a.name,"transaction:"+a.name,o),a.maxLength&&(o=ei(o),o.length>a.maxLength&&An.throwArgumentError("invalid length for "+a.name,"transaction:"+a.name,o)),r.push(ke(o))});let n=0;if(t.chainId!=null?(n=t.chainId,typeof n!="number"&&An.throwArgumentError("invalid transaction.chainId","transaction",t)):e&&!el(e)&&e.v>28&&(n=Math.floor((e.v-35)/2)),n!==0&&(r.push(ke(n)),r.push("0x"),r.push("0x")),!e)return _a(r);const i=qs(e);let s=27+i.recoveryParam;return n!==0?(r.pop(),r.pop(),r.pop(),s+=n*2+8,i.v>28&&i.v!==s&&An.throwArgumentError("transaction.chainId/signature.v mismatch","signature",e)):i.v!==s&&An.throwArgumentError("transaction.chainId/signature.v mismatch","signature",e),r.push(ke(s)),r.push(ei(ge(i.r))),r.push(ei(ge(i.s))),_a(r)}function Gd(t,e){if(t.type==null||t.type===0)return t.accessList!=null&&An.throwArgumentError("untyped transactions do not support accessList; include type: 1","transaction",t),lw(t,e);switch(t.type){case 1:return uw(t,e);case 2:return fw(t,e)}return An.throwError(`unsupported transaction type: ${t.type}`,xe.errors.UNSUPPORTED_OPERATION,{operation:"serializeTransaction",transactionType:t.type})}const dw="abstract-provider/5.7.0";var hw=function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(h){try{u(n.next(h))}catch(p){a(p)}}function c(h){try{u(n.throw(h))}catch(p){a(p)}}function u(h){h.done?s(h.value):i(h.value).then(o,c)}u((n=n.apply(t,e||[])).next())})};const pw=new xe(dw);let Rp=class Pp{constructor(){pw.checkAbstract(new.target,Pp),he(this,"_isProvider",!0)}getFeeData(){return hw(this,void 0,void 0,function*(){const{block:e,gasPrice:r}=yield Xn({block:this.getBlock("latest"),gasPrice:this.getGasPrice().catch(a=>null)});let n=null,i=null,s=null;return e&&e.baseFeePerGas&&(n=e.baseFeePerGas,s=$e.from("1500000000"),i=e.baseFeePerGas.mul(2).add(s)),{lastBaseFeePerGas:n,maxFeePerGas:i,maxPriorityFeePerGas:s,gasPrice:r}})}addListener(e,r){return this.on(e,r)}removeListener(e,r){return this.off(e,r)}static isProvider(e){return!!(e&&e._isProvider)}};const xw="abstract-signer/5.7.0";var wn=function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(h){try{u(n.next(h))}catch(p){a(p)}}function c(h){try{u(n.throw(h))}catch(p){a(p)}}function u(h){h.done?s(h.value):i(h.value).then(o,c)}u((n=n.apply(t,e||[])).next())})};const Zr=new xe(xw),yw=["accessList","ccipReadEnabled","chainId","customData","data","from","gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","nonce","to","type","value"],gw=[xe.errors.INSUFFICIENT_FUNDS,xe.errors.NONCE_EXPIRED,xe.errors.REPLACEMENT_UNDERPRICED];class Ka{constructor(){Zr.checkAbstract(new.target,Ka),he(this,"_isSigner",!0)}getBalance(e){return wn(this,void 0,void 0,function*(){return this._checkProvider("getBalance"),yield this.provider.getBalance(this.getAddress(),e)})}getTransactionCount(e){return wn(this,void 0,void 0,function*(){return this._checkProvider("getTransactionCount"),yield this.provider.getTransactionCount(this.getAddress(),e)})}estimateGas(e){return wn(this,void 0,void 0,function*(){this._checkProvider("estimateGas");const r=yield Xn(this.checkTransaction(e));return yield this.provider.estimateGas(r)})}call(e,r){return wn(this,void 0,void 0,function*(){this._checkProvider("call");const n=yield Xn(this.checkTransaction(e));return yield this.provider.call(n,r)})}sendTransaction(e){return wn(this,void 0,void 0,function*(){this._checkProvider("sendTransaction");const r=yield this.populateTransaction(e),n=yield this.signTransaction(r);return yield this.provider.sendTransaction(n)})}getChainId(){return wn(this,void 0,void 0,function*(){return this._checkProvider("getChainId"),(yield this.provider.getNetwork()).chainId})}getGasPrice(){return wn(this,void 0,void 0,function*(){return this._checkProvider("getGasPrice"),yield this.provider.getGasPrice()})}getFeeData(){return wn(this,void 0,void 0,function*(){return this._checkProvider("getFeeData"),yield this.provider.getFeeData()})}resolveName(e){return wn(this,void 0,void 0,function*(){return this._checkProvider("resolveName"),yield this.provider.resolveName(e)})}checkTransaction(e){for(const n in e)yw.indexOf(n)===-1&&Zr.throwArgumentError("invalid transaction key: "+n,"transaction",e);const r=_i(e);return r.from==null?r.from=this.getAddress():r.from=Promise.all([Promise.resolve(r.from),this.getAddress()]).then(n=>(n[0].toLowerCase()!==n[1].toLowerCase()&&Zr.throwArgumentError("from address mismatch","transaction",e),n[0])),r}populateTransaction(e){return wn(this,void 0,void 0,function*(){const r=yield Xn(this.checkTransaction(e));r.to!=null&&(r.to=Promise.resolve(r.to).then(i=>wn(this,void 0,void 0,function*(){if(i==null)return null;const s=yield this.resolveName(i);return s==null&&Zr.throwArgumentError("provided ENS name resolves to null","tx.to",i),s})),r.to.catch(i=>{}));const n=r.maxFeePerGas!=null||r.maxPriorityFeePerGas!=null;if(r.gasPrice!=null&&(r.type===2||n)?Zr.throwArgumentError("eip-1559 transaction do not support gasPrice","transaction",e):(r.type===0||r.type===1)&&n&&Zr.throwArgumentError("pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","transaction",e),(r.type===2||r.type==null)&&r.maxFeePerGas!=null&&r.maxPriorityFeePerGas!=null)r.type=2;else if(r.type===0||r.type===1)r.gasPrice==null&&(r.gasPrice=this.getGasPrice());else{const i=yield this.getFeeData();if(r.type==null)if(i.maxFeePerGas!=null&&i.maxPriorityFeePerGas!=null)if(r.type=2,r.gasPrice!=null){const s=r.gasPrice;delete r.gasPrice,r.maxFeePerGas=s,r.maxPriorityFeePerGas=s}else r.maxFeePerGas==null&&(r.maxFeePerGas=i.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=i.maxPriorityFeePerGas);else i.gasPrice!=null?(n&&Zr.throwError("network does not support EIP-1559",xe.errors.UNSUPPORTED_OPERATION,{operation:"populateTransaction"}),r.gasPrice==null&&(r.gasPrice=i.gasPrice),r.type=0):Zr.throwError("failed to get consistent fee data",xe.errors.UNSUPPORTED_OPERATION,{operation:"signer.getFeeData"});else r.type===2&&(r.maxFeePerGas==null&&(r.maxFeePerGas=i.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=i.maxPriorityFeePerGas))}return r.nonce==null&&(r.nonce=this.getTransactionCount("pending")),r.gasLimit==null&&(r.gasLimit=this.estimateGas(r).catch(i=>{if(gw.indexOf(i.code)>=0)throw i;return Zr.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",xe.errors.UNPREDICTABLE_GAS_LIMIT,{error:i,tx:r})})),r.chainId==null?r.chainId=this.getChainId():r.chainId=Promise.all([Promise.resolve(r.chainId),this.getChainId()]).then(i=>(i[1]!==0&&i[0]!==i[1]&&Zr.throwArgumentError("chainId address mismatch","transaction",e),i[0])),yield Xn(r)})}_checkProvider(e){this.provider||Zr.throwError("missing provider",xe.errors.UNSUPPORTED_OPERATION,{operation:e||"_checkProvider"})}static isSigner(e){return!!(e&&e._isSigner)}}class yl extends Ka{constructor(e,r){super(),he(this,"address",e),he(this,"provider",r||null)}getAddress(){return Promise.resolve(this.address)}_fail(e,r){return Promise.resolve().then(()=>{Zr.throwError(e,xe.errors.UNSUPPORTED_OPERATION,{operation:r})})}signMessage(e){return this._fail("VoidSigner cannot sign messages","signMessage")}signTransaction(e){return this._fail("VoidSigner cannot sign transactions","signTransaction")}_signTypedData(e,r,n){return this._fail("VoidSigner cannot sign typed data","signTypedData")}connect(e){return new yl(this.address,e)}}class kp{constructor(e){he(this,"alphabet",e),he(this,"base",e.length),he(this,"_alphabetMap",{}),he(this,"_leader",e.charAt(0));for(let r=0;r<e.length;r++)this._alphabetMap[e.charAt(r)]=r}encode(e){let r=ge(e);if(r.length===0)return"";let n=[0];for(let s=0;s<r.length;++s){let a=r[s];for(let o=0;o<n.length;++o)a+=n[o]<<8,n[o]=a%this.base,a=a/this.base|0;for(;a>0;)n.push(a%this.base),a=a/this.base|0}let i="";for(let s=0;r[s]===0&&s<r.length-1;++s)i+=this._leader;for(let s=n.length-1;s>=0;--s)i+=this.alphabet[n[s]];return i}decode(e){if(typeof e!="string")throw new TypeError("Expected String");let r=[];if(e.length===0)return new Uint8Array(r);r.push(0);for(let n=0;n<e.length;n++){let i=this._alphabetMap[e[n]];if(i===void 0)throw new Error("Non-base"+this.base+" character");let s=i;for(let a=0;a<r.length;++a)s+=r[a]*this.base,r[a]=s&255,s>>=8;for(;s>0;)r.push(s&255),s>>=8}for(let n=0;e[n]===this._leader&&n<e.length-1;++n)r.push(0);return ge(new Uint8Array(r.reverse()))}}new kp("abcdefghijklmnopqrstuvwxyz234567");const Mp=new kp("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");var Ea;(function(t){t.sha256="sha256",t.sha512="sha512"})(Ea||(Ea={}));const bw="sha2/5.7.0",mw=new xe(bw);function ww(t){return"0x"+qr.ripemd160().update(ge(t)).digest("hex")}function Sa(t){return"0x"+qr.sha256().update(ge(t)).digest("hex")}function Jo(t,e,r){return Ea[t]||mw.throwError("unsupported algorithm "+t,xe.errors.UNSUPPORTED_OPERATION,{operation:"hmac",algorithm:t}),"0x"+qr.hmac(qr[t],ge(e)).update(ge(r)).digest("hex")}function gl(t,e,r,n,i){t=ge(t),e=ge(e);let s,a=1;const o=new Uint8Array(n),c=new Uint8Array(e.length+4);c.set(e);let u,h;for(let p=1;p<=a;p++){c[e.length]=p>>24&255,c[e.length+1]=p>>16&255,c[e.length+2]=p>>8&255,c[e.length+3]=p&255;let m=ge(Jo(i,t,c));s||(s=m.length,h=new Uint8Array(s),a=Math.ceil(n/s),u=n-(a-1)*s),h.set(m);for(let R=1;R<r;R++){m=ge(Jo(i,t,m));for(let E=0;E<s;E++)h[E]^=m[E]}const P=(p-1)*s,M=p===a?u:s;o.set(ge(h).slice(0,M),P)}return ke(o)}const vw="wordlists/5.7.0",_w=new xe(vw);class za{constructor(e){_w.checkAbstract(new.target,za),he(this,"locale",e)}split(e){return e.toLowerCase().split(/ +/g)}join(e){return e.join(" ")}static check(e){const r=[];for(let n=0;n<2048;n++){const i=e.getWord(n);if(n!==e.getWordIndex(i))return"0x";r.push(i)}return Ci(r.join(`
`)+`
`)}static register(e,r){r||(r=e.locale)}}const Ew="AbandonAbilityAbleAboutAboveAbsentAbsorbAbstractAbsurdAbuseAccessAccidentAccountAccuseAchieveAcidAcousticAcquireAcrossActActionActorActressActualAdaptAddAddictAddressAdjustAdmitAdultAdvanceAdviceAerobicAffairAffordAfraidAgainAgeAgentAgreeAheadAimAirAirportAisleAlarmAlbumAlcoholAlertAlienAllAlleyAllowAlmostAloneAlphaAlreadyAlsoAlterAlwaysAmateurAmazingAmongAmountAmusedAnalystAnchorAncientAngerAngleAngryAnimalAnkleAnnounceAnnualAnotherAnswerAntennaAntiqueAnxietyAnyApartApologyAppearAppleApproveAprilArchArcticAreaArenaArgueArmArmedArmorArmyAroundArrangeArrestArriveArrowArtArtefactArtistArtworkAskAspectAssaultAssetAssistAssumeAsthmaAthleteAtomAttackAttendAttitudeAttractAuctionAuditAugustAuntAuthorAutoAutumnAverageAvocadoAvoidAwakeAwareAwayAwesomeAwfulAwkwardAxisBabyBachelorBaconBadgeBagBalanceBalconyBallBambooBananaBannerBarBarelyBargainBarrelBaseBasicBasketBattleBeachBeanBeautyBecauseBecomeBeefBeforeBeginBehaveBehindBelieveBelowBeltBenchBenefitBestBetrayBetterBetweenBeyondBicycleBidBikeBindBiologyBirdBirthBitterBlackBladeBlameBlanketBlastBleakBlessBlindBloodBlossomBlouseBlueBlurBlushBoardBoatBodyBoilBombBoneBonusBookBoostBorderBoringBorrowBossBottomBounceBoxBoyBracketBrainBrandBrassBraveBreadBreezeBrickBridgeBriefBrightBringBriskBroccoliBrokenBronzeBroomBrotherBrownBrushBubbleBuddyBudgetBuffaloBuildBulbBulkBulletBundleBunkerBurdenBurgerBurstBusBusinessBusyButterBuyerBuzzCabbageCabinCableCactusCageCakeCallCalmCameraCampCanCanalCancelCandyCannonCanoeCanvasCanyonCapableCapitalCaptainCarCarbonCardCargoCarpetCarryCartCaseCashCasinoCastleCasualCatCatalogCatchCategoryCattleCaughtCauseCautionCaveCeilingCeleryCementCensusCenturyCerealCertainChairChalkChampionChangeChaosChapterChargeChaseChatCheapCheckCheeseChefCherryChestChickenChiefChildChimneyChoiceChooseChronicChuckleChunkChurnCigarCinnamonCircleCitizenCityCivilClaimClapClarifyClawClayCleanClerkCleverClickClientCliffClimbClinicClipClockClogCloseClothCloudClownClubClumpClusterClutchCoachCoastCoconutCodeCoffeeCoilCoinCollectColorColumnCombineComeComfortComicCommonCompanyConcertConductConfirmCongressConnectConsiderControlConvinceCookCoolCopperCopyCoralCoreCornCorrectCostCottonCouchCountryCoupleCourseCousinCoverCoyoteCrackCradleCraftCramCraneCrashCraterCrawlCrazyCreamCreditCreekCrewCricketCrimeCrispCriticCropCrossCrouchCrowdCrucialCruelCruiseCrumbleCrunchCrushCryCrystalCubeCultureCupCupboardCuriousCurrentCurtainCurveCushionCustomCuteCycleDadDamageDampDanceDangerDaringDashDaughterDawnDayDealDebateDebrisDecadeDecemberDecideDeclineDecorateDecreaseDeerDefenseDefineDefyDegreeDelayDeliverDemandDemiseDenialDentistDenyDepartDependDepositDepthDeputyDeriveDescribeDesertDesignDeskDespairDestroyDetailDetectDevelopDeviceDevoteDiagramDialDiamondDiaryDiceDieselDietDifferDigitalDignityDilemmaDinnerDinosaurDirectDirtDisagreeDiscoverDiseaseDishDismissDisorderDisplayDistanceDivertDivideDivorceDizzyDoctorDocumentDogDollDolphinDomainDonateDonkeyDonorDoorDoseDoubleDoveDraftDragonDramaDrasticDrawDreamDressDriftDrillDrinkDripDriveDropDrumDryDuckDumbDuneDuringDustDutchDutyDwarfDynamicEagerEagleEarlyEarnEarthEasilyEastEasyEchoEcologyEconomyEdgeEditEducateEffortEggEightEitherElbowElderElectricElegantElementElephantElevatorEliteElseEmbarkEmbodyEmbraceEmergeEmotionEmployEmpowerEmptyEnableEnactEndEndlessEndorseEnemyEnergyEnforceEngageEngineEnhanceEnjoyEnlistEnoughEnrichEnrollEnsureEnterEntireEntryEnvelopeEpisodeEqualEquipEraEraseErodeErosionErrorEruptEscapeEssayEssenceEstateEternalEthicsEvidenceEvilEvokeEvolveExactExampleExcessExchangeExciteExcludeExcuseExecuteExerciseExhaustExhibitExileExistExitExoticExpandExpectExpireExplainExposeExpressExtendExtraEyeEyebrowFabricFaceFacultyFadeFaintFaithFallFalseFameFamilyFamousFanFancyFantasyFarmFashionFatFatalFatherFatigueFaultFavoriteFeatureFebruaryFederalFeeFeedFeelFemaleFenceFestivalFetchFeverFewFiberFictionFieldFigureFileFilmFilterFinalFindFineFingerFinishFireFirmFirstFiscalFishFitFitnessFixFlagFlameFlashFlatFlavorFleeFlightFlipFloatFlockFloorFlowerFluidFlushFlyFoamFocusFogFoilFoldFollowFoodFootForceForestForgetForkFortuneForumForwardFossilFosterFoundFoxFragileFrameFrequentFreshFriendFringeFrogFrontFrostFrownFrozenFruitFuelFunFunnyFurnaceFuryFutureGadgetGainGalaxyGalleryGameGapGarageGarbageGardenGarlicGarmentGasGaspGateGatherGaugeGazeGeneralGeniusGenreGentleGenuineGestureGhostGiantGiftGiggleGingerGiraffeGirlGiveGladGlanceGlareGlassGlideGlimpseGlobeGloomGloryGloveGlowGlueGoatGoddessGoldGoodGooseGorillaGospelGossipGovernGownGrabGraceGrainGrantGrapeGrassGravityGreatGreenGridGriefGritGroceryGroupGrowGruntGuardGuessGuideGuiltGuitarGunGymHabitHairHalfHammerHamsterHandHappyHarborHardHarshHarvestHatHaveHawkHazardHeadHealthHeartHeavyHedgehogHeightHelloHelmetHelpHenHeroHiddenHighHillHintHipHireHistoryHobbyHockeyHoldHoleHolidayHollowHomeHoneyHoodHopeHornHorrorHorseHospitalHostHotelHourHoverHubHugeHumanHumbleHumorHundredHungryHuntHurdleHurryHurtHusbandHybridIceIconIdeaIdentifyIdleIgnoreIllIllegalIllnessImageImitateImmenseImmuneImpactImposeImproveImpulseInchIncludeIncomeIncreaseIndexIndicateIndoorIndustryInfantInflictInformInhaleInheritInitialInjectInjuryInmateInnerInnocentInputInquiryInsaneInsectInsideInspireInstallIntactInterestIntoInvestInviteInvolveIronIslandIsolateIssueItemIvoryJacketJaguarJarJazzJealousJeansJellyJewelJobJoinJokeJourneyJoyJudgeJuiceJumpJungleJuniorJunkJustKangarooKeenKeepKetchupKeyKickKidKidneyKindKingdomKissKitKitchenKiteKittenKiwiKneeKnifeKnockKnowLabLabelLaborLadderLadyLakeLampLanguageLaptopLargeLaterLatinLaughLaundryLavaLawLawnLawsuitLayerLazyLeaderLeafLearnLeaveLectureLeftLegLegalLegendLeisureLemonLendLengthLensLeopardLessonLetterLevelLiarLibertyLibraryLicenseLifeLiftLightLikeLimbLimitLinkLionLiquidListLittleLiveLizardLoadLoanLobsterLocalLockLogicLonelyLongLoopLotteryLoudLoungeLoveLoyalLuckyLuggageLumberLunarLunchLuxuryLyricsMachineMadMagicMagnetMaidMailMainMajorMakeMammalManManageMandateMangoMansionManualMapleMarbleMarchMarginMarineMarketMarriageMaskMassMasterMatchMaterialMathMatrixMatterMaximumMazeMeadowMeanMeasureMeatMechanicMedalMediaMelodyMeltMemberMemoryMentionMenuMercyMergeMeritMerryMeshMessageMetalMethodMiddleMidnightMilkMillionMimicMindMinimumMinorMinuteMiracleMirrorMiseryMissMistakeMixMixedMixtureMobileModelModifyMomMomentMonitorMonkeyMonsterMonthMoonMoralMoreMorningMosquitoMotherMotionMotorMountainMouseMoveMovieMuchMuffinMuleMultiplyMuscleMuseumMushroomMusicMustMutualMyselfMysteryMythNaiveNameNapkinNarrowNastyNationNatureNearNeckNeedNegativeNeglectNeitherNephewNerveNestNetNetworkNeutralNeverNewsNextNiceNightNobleNoiseNomineeNoodleNormalNorthNoseNotableNoteNothingNoticeNovelNowNuclearNumberNurseNutOakObeyObjectObligeObscureObserveObtainObviousOccurOceanOctoberOdorOffOfferOfficeOftenOilOkayOldOliveOlympicOmitOnceOneOnionOnlineOnlyOpenOperaOpinionOpposeOptionOrangeOrbitOrchardOrderOrdinaryOrganOrientOriginalOrphanOstrichOtherOutdoorOuterOutputOutsideOvalOvenOverOwnOwnerOxygenOysterOzonePactPaddlePagePairPalacePalmPandaPanelPanicPantherPaperParadeParentParkParrotPartyPassPatchPathPatientPatrolPatternPausePavePaymentPeacePeanutPearPeasantPelicanPenPenaltyPencilPeoplePepperPerfectPermitPersonPetPhonePhotoPhrasePhysicalPianoPicnicPicturePiecePigPigeonPillPilotPinkPioneerPipePistolPitchPizzaPlacePlanetPlasticPlatePlayPleasePledgePluckPlugPlungePoemPoetPointPolarPolePolicePondPonyPoolPopularPortionPositionPossiblePostPotatoPotteryPovertyPowderPowerPracticePraisePredictPreferPreparePresentPrettyPreventPricePridePrimaryPrintPriorityPrisonPrivatePrizeProblemProcessProduceProfitProgramProjectPromoteProofPropertyProsperProtectProudProvidePublicPuddingPullPulpPulsePumpkinPunchPupilPuppyPurchasePurityPurposePursePushPutPuzzlePyramidQualityQuantumQuarterQuestionQuickQuitQuizQuoteRabbitRaccoonRaceRackRadarRadioRailRainRaiseRallyRampRanchRandomRangeRapidRareRateRatherRavenRawRazorReadyRealReasonRebelRebuildRecallReceiveRecipeRecordRecycleReduceReflectReformRefuseRegionRegretRegularRejectRelaxReleaseReliefRelyRemainRememberRemindRemoveRenderRenewRentReopenRepairRepeatReplaceReportRequireRescueResembleResistResourceResponseResultRetireRetreatReturnReunionRevealReviewRewardRhythmRibRibbonRiceRichRideRidgeRifleRightRigidRingRiotRippleRiskRitualRivalRiverRoadRoastRobotRobustRocketRomanceRoofRookieRoomRoseRotateRoughRoundRouteRoyalRubberRudeRugRuleRunRunwayRuralSadSaddleSadnessSafeSailSaladSalmonSalonSaltSaluteSameSampleSandSatisfySatoshiSauceSausageSaveSayScaleScanScareScatterSceneSchemeSchoolScienceScissorsScorpionScoutScrapScreenScriptScrubSeaSearchSeasonSeatSecondSecretSectionSecuritySeedSeekSegmentSelectSellSeminarSeniorSenseSentenceSeriesServiceSessionSettleSetupSevenShadowShaftShallowShareShedShellSheriffShieldShiftShineShipShiverShockShoeShootShopShortShoulderShoveShrimpShrugShuffleShySiblingSickSideSiegeSightSignSilentSilkSillySilverSimilarSimpleSinceSingSirenSisterSituateSixSizeSkateSketchSkiSkillSkinSkirtSkullSlabSlamSleepSlenderSliceSlideSlightSlimSloganSlotSlowSlushSmallSmartSmileSmokeSmoothSnackSnakeSnapSniffSnowSoapSoccerSocialSockSodaSoftSolarSoldierSolidSolutionSolveSomeoneSongSoonSorrySortSoulSoundSoupSourceSouthSpaceSpareSpatialSpawnSpeakSpecialSpeedSpellSpendSphereSpiceSpiderSpikeSpinSpiritSplitSpoilSponsorSpoonSportSpotSpraySpreadSpringSpySquareSqueezeSquirrelStableStadiumStaffStageStairsStampStandStartStateStaySteakSteelStemStepStereoStickStillStingStockStomachStoneStoolStoryStoveStrategyStreetStrikeStrongStruggleStudentStuffStumbleStyleSubjectSubmitSubwaySuccessSuchSuddenSufferSugarSuggestSuitSummerSunSunnySunsetSuperSupplySupremeSureSurfaceSurgeSurpriseSurroundSurveySuspectSustainSwallowSwampSwapSwarmSwearSweetSwiftSwimSwingSwitchSwordSymbolSymptomSyrupSystemTableTackleTagTailTalentTalkTankTapeTargetTaskTasteTattooTaxiTeachTeamTellTenTenantTennisTentTermTestTextThankThatThemeThenTheoryThereTheyThingThisThoughtThreeThriveThrowThumbThunderTicketTideTigerTiltTimberTimeTinyTipTiredTissueTitleToastTobaccoTodayToddlerToeTogetherToiletTokenTomatoTomorrowToneTongueTonightToolToothTopTopicToppleTorchTornadoTortoiseTossTotalTouristTowardTowerTownToyTrackTradeTrafficTragicTrainTransferTrapTrashTravelTrayTreatTreeTrendTrialTribeTrickTriggerTrimTripTrophyTroubleTruckTrueTrulyTrumpetTrustTruthTryTubeTuitionTumbleTunaTunnelTurkeyTurnTurtleTwelveTwentyTwiceTwinTwistTwoTypeTypicalUglyUmbrellaUnableUnawareUncleUncoverUnderUndoUnfairUnfoldUnhappyUniformUniqueUnitUniverseUnknownUnlockUntilUnusualUnveilUpdateUpgradeUpholdUponUpperUpsetUrbanUrgeUsageUseUsedUsefulUselessUsualUtilityVacantVacuumVagueValidValleyValveVanVanishVaporVariousVastVaultVehicleVelvetVendorVentureVenueVerbVerifyVersionVeryVesselVeteranViableVibrantViciousVictoryVideoViewVillageVintageViolinVirtualVirusVisaVisitVisualVitalVividVocalVoiceVoidVolcanoVolumeVoteVoyageWageWagonWaitWalkWallWalnutWantWarfareWarmWarriorWashWaspWasteWaterWaveWayWealthWeaponWearWeaselWeatherWebWeddingWeekendWeirdWelcomeWestWetWhaleWhatWheatWheelWhenWhereWhipWhisperWideWidthWifeWildWillWinWindowWineWingWinkWinnerWinterWireWisdomWiseWishWitnessWolfWomanWonderWoodWoolWordWorkWorldWorryWorthWrapWreckWrestleWristWriteWrongYardYearYellowYouYoungYouthZebraZeroZoneZoo";let ga=null;function Wd(t){if(ga==null&&(ga=Ew.replace(/([A-Z])/g," $1").toLowerCase().substring(1).split(" "),za.check(t)!=="0x3c8acc1e7b08d8e76f9fda015ef48dc8c710a73cb7e0f77b2c18a9b5a7adde60"))throw ga=null,new Error("BIP39 Wordlist for en (English) FAILED")}class Sw extends za{constructor(){super("en")}getWord(e){return Wd(this),ga[e]}getWordIndex(e){return Wd(this),ga.indexOf(e)}}const Cp=new Sw;za.register(Cp);const Vd={en:Cp},Aw="hdnode/5.7.0",Yo=new xe(Aw),Tw=$e.from("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Rw=Kn("Bitcoin seed"),ra=2147483648;function Ip(t){return(1<<t)-1<<8-t}function Pw(t){return(1<<t)-1}function xo(t){return Ur(ke(t),32)}function Jd(t){return Mp.encode(Br([t,Ni(Sa(Sa(t)),0,4)]))}function bl(t){if(t==null)return Vd.en;if(typeof t=="string"){const e=Vd[t];return e==null&&Yo.throwArgumentError("unknown locale","wordlist",t),e}return t}const rs={},Aa="m/44'/60'/0'/0/0";class nn{constructor(e,r,n,i,s,a,o,c){if(e!==rs)throw new Error("HDNode constructor cannot be called directly");if(r){const u=new ws(r);he(this,"privateKey",u.privateKey),he(this,"publicKey",u.compressedPublicKey)}else he(this,"privateKey",null),he(this,"publicKey",ke(n));he(this,"parentFingerprint",i),he(this,"fingerprint",Ni(ww(Sa(this.publicKey)),0,4)),he(this,"address",vi(this.publicKey)),he(this,"chainCode",s),he(this,"index",a),he(this,"depth",o),c==null?(he(this,"mnemonic",null),he(this,"path",null)):typeof c=="string"?(he(this,"mnemonic",null),he(this,"path",c)):(he(this,"mnemonic",c),he(this,"path",c.path))}get extendedKey(){if(this.depth>=256)throw new Error("Depth too large!");return Jd(Br([this.privateKey!=null?"0x0488ADE4":"0x0488B21E",ke(this.depth),this.parentFingerprint,Ur(ke(this.index),4),this.chainCode,this.privateKey!=null?Br(["0x00",this.privateKey]):this.publicKey]))}neuter(){return new nn(rs,null,this.publicKey,this.parentFingerprint,this.chainCode,this.index,this.depth,this.path)}_derive(e){if(e>4294967295)throw new Error("invalid index - "+String(e));let r=this.path;r&&(r+="/"+(e&~ra));const n=new Uint8Array(37);if(e&ra){if(!this.privateKey)throw new Error("cannot derive child of neutered node");n.set(ge(this.privateKey),1),r&&(r+="'")}else n.set(ge(this.publicKey));for(let p=24;p>=0;p-=8)n[33+(p>>3)]=e>>24-p&255;const i=ge(Jo(Ea.sha512,this.chainCode,n)),s=i.slice(0,32),a=i.slice(32);let o=null,c=null;this.privateKey?o=xo($e.from(s).add(this.privateKey).mod(Tw)):c=new ws(ke(s))._addPoint(this.publicKey);let u=r;const h=this.mnemonic;return h&&(u=Object.freeze({phrase:h.phrase,path:r,locale:h.locale||"en"})),new nn(rs,o,c,this.fingerprint,xo(a),e,this.depth+1,u)}derivePath(e){const r=e.split("/");if(r.length===0||r[0]==="m"&&this.depth!==0)throw new Error("invalid path - "+e);r[0]==="m"&&r.shift();let n=this;for(let i=0;i<r.length;i++){const s=r[i];if(s.match(/^[0-9]+'$/)){const a=parseInt(s.substring(0,s.length-1));if(a>=ra)throw new Error("invalid path index - "+s);n=n._derive(ra+a)}else if(s.match(/^[0-9]+$/)){const a=parseInt(s);if(a>=ra)throw new Error("invalid path index - "+s);n=n._derive(a)}else throw new Error("invalid path component - "+s)}return n}static _fromSeed(e,r){const n=ge(e);if(n.length<16||n.length>64)throw new Error("invalid seed");const i=ge(Jo(Ea.sha512,Rw,n));return new nn(rs,xo(i.slice(0,32)),null,"0x00000000",xo(i.slice(32)),0,0,r)}static fromMnemonic(e,r,n){return n=bl(n),e=ml(Bp(e,n),n),nn._fromSeed(kw(e,r),{phrase:e,path:"m",locale:n.locale})}static fromSeed(e){return nn._fromSeed(e,null)}static fromExtendedKey(e){const r=Mp.decode(e);(r.length!==82||Jd(r.slice(0,78))!==e)&&Yo.throwArgumentError("invalid extended key","extendedKey","[REDACTED]");const n=r[4],i=ke(r.slice(5,9)),s=parseInt(ke(r.slice(9,13)).substring(2),16),a=ke(r.slice(13,45)),o=r.slice(45,78);switch(ke(r.slice(0,4))){case"0x0488b21e":case"0x043587cf":return new nn(rs,null,ke(o),i,a,s,n,null);case"0x0488ade4":case"0x04358394 ":if(o[0]!==0)break;return new nn(rs,ke(o.slice(1)),null,i,a,s,n,null)}return Yo.throwArgumentError("invalid extended key","extendedKey","[REDACTED]")}}function kw(t,e){e||(e="");const r=Kn("mnemonic"+e,Di.NFKD);return gl(Kn(t,Di.NFKD),r,2048,64,"sha512")}function Bp(t,e){e=bl(e),Yo.checkNormalize();const r=e.split(t);if(r.length%3!==0)throw new Error("invalid mnemonic");const n=ge(new Uint8Array(Math.ceil(11*r.length/8)));let i=0;for(let u=0;u<r.length;u++){let h=e.getWordIndex(r[u].normalize("NFKD"));if(h===-1)throw new Error("invalid mnemonic");for(let p=0;p<11;p++)h&1<<10-p&&(n[i>>3]|=1<<7-i%8),i++}const s=32*r.length/3,a=r.length/3,o=Ip(a);if((ge(Sa(n.slice(0,s/8)))[0]&o)!==(n[n.length-1]&o))throw new Error("invalid checksum");return ke(n.slice(0,s/8))}function ml(t,e){if(e=bl(e),t=ge(t),t.length%4!==0||t.length<16||t.length>32)throw new Error("invalid entropy");const r=[0];let n=11;for(let a=0;a<t.length;a++)n>8?(r[r.length-1]<<=8,r[r.length-1]|=t[a],n-=8):(r[r.length-1]<<=n,r[r.length-1]|=t[a]>>8-n,r.push(t[a]&Pw(8-n)),n+=3);const i=t.length/4,s=ge(Sa(t))[0]&Ip(i);return r[r.length-1]<<=i,r[r.length-1]|=s>>8-i,e.join(r.map(a=>e.getWord(a)))}const Mw="random/5.7.0",Au=new xe(Mw);function Cw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof pu<"u")return pu;throw new Error("unable to locate global object")}const Yd=Cw();let Io=Yd.crypto||Yd.msCrypto;(!Io||!Io.getRandomValues)&&(Au.warn("WARNING: Missing strong random number source"),Io={getRandomValues:function(t){return Au.throwError("no secure random source avaialble",xe.errors.UNSUPPORTED_OPERATION,{operation:"crypto.getRandomValues"})}});function ua(t){(t<=0||t>1024||t%1||t!=t)&&Au.throwArgumentError("invalid length","length",t);const e=new Uint8Array(t);return Io.getRandomValues(e),ge(e)}var Up={exports:{}};(function(t,e){(function(r){function n(b){return parseInt(b)===b}function i(b){if(!n(b.length))return!1;for(var F=0;F<b.length;F++)if(!n(b[F])||b[F]<0||b[F]>255)return!1;return!0}function s(b,F){if(b.buffer&&ArrayBuffer.isView(b)&&b.name==="Uint8Array")return F&&(b.slice?b=b.slice():b=Array.prototype.slice.call(b)),b;if(Array.isArray(b)){if(!i(b))throw new Error("Array contains invalid value: "+b);return new Uint8Array(b)}if(n(b.length)&&i(b))return new Uint8Array(b);throw new Error("unsupported array-like object")}function a(b){return new Uint8Array(b)}function o(b,F,V,K,H){(K!=null||H!=null)&&(b.slice?b=b.slice(K,H):b=Array.prototype.slice.call(b,K,H)),F.set(b,V)}var c=function(){function b(V){var K=[],H=0;for(V=encodeURI(V);H<V.length;){var O=V.charCodeAt(H++);O===37?(K.push(parseInt(V.substr(H,2),16)),H+=2):K.push(O)}return s(K)}function F(V){for(var K=[],H=0;H<V.length;){var O=V[H];O<128?(K.push(String.fromCharCode(O)),H++):O>191&&O<224?(K.push(String.fromCharCode((O&31)<<6|V[H+1]&63)),H+=2):(K.push(String.fromCharCode((O&15)<<12|(V[H+1]&63)<<6|V[H+2]&63)),H+=3)}return K.join("")}return{toBytes:b,fromBytes:F}}(),u=function(){function b(K){for(var H=[],O=0;O<K.length;O+=2)H.push(parseInt(K.substr(O,2),16));return H}var F="0123456789abcdef";function V(K){for(var H=[],O=0;O<K.length;O++){var j=K[O];H.push(F[(j&240)>>4]+F[j&15])}return H.join("")}return{toBytes:b,fromBytes:V}}(),h={16:10,24:12,32:14},p=[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],m=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],P=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],M=[3328402341,4168907908,4000806809,4135287693,4294111757,3597364157,3731845041,2445657428,1613770832,33620227,3462883241,1445669757,3892248089,3050821474,1303096294,3967186586,2412431941,528646813,2311702848,4202528135,4026202645,2992200171,2387036105,4226871307,1101901292,3017069671,1604494077,1169141738,597466303,1403299063,3832705686,2613100635,1974974402,3791519004,1033081774,1277568618,1815492186,2118074177,4126668546,2211236943,1748251740,1369810420,3521504564,4193382664,3799085459,2883115123,1647391059,706024767,134480908,2512897874,1176707941,2646852446,806885416,932615841,168101135,798661301,235341577,605164086,461406363,3756188221,3454790438,1311188841,2142417613,3933566367,302582043,495158174,1479289972,874125870,907746093,3698224818,3025820398,1537253627,2756858614,1983593293,3084310113,2108928974,1378429307,3722699582,1580150641,327451799,2790478837,3117535592,0,3253595436,1075847264,3825007647,2041688520,3059440621,3563743934,2378943302,1740553945,1916352843,2487896798,2555137236,2958579944,2244988746,3151024235,3320835882,1336584933,3992714006,2252555205,2588757463,1714631509,293963156,2319795663,3925473552,67240454,4269768577,2689618160,2017213508,631218106,1269344483,2723238387,1571005438,2151694528,93294474,1066570413,563977660,1882732616,4059428100,1673313503,2008463041,2950355573,1109467491,537923632,3858759450,4260623118,3218264685,2177748300,403442708,638784309,3287084079,3193921505,899127202,2286175436,773265209,2479146071,1437050866,4236148354,2050833735,3362022572,3126681063,840505643,3866325909,3227541664,427917720,2655997905,2749160575,1143087718,1412049534,999329963,193497219,2353415882,3354324521,1807268051,672404540,2816401017,3160301282,369822493,2916866934,3688947771,1681011286,1949973070,336202270,2454276571,201721354,1210328172,3093060836,2680341085,3184776046,1135389935,3294782118,965841320,831886756,3554993207,4068047243,3588745010,2345191491,1849112409,3664604599,26054028,2983581028,2622377682,1235855840,3630984372,2891339514,4092916743,3488279077,3395642799,4101667470,1202630377,268961816,1874508501,4034427016,1243948399,1546530418,941366308,1470539505,1941222599,2546386513,3421038627,2715671932,3899946140,1042226977,2521517021,1639824860,227249030,260737669,3765465232,2084453954,1907733956,3429263018,2420656344,100860677,4160157185,470683154,3261161891,1781871967,2924959737,1773779408,394692241,2579611992,974986535,664706745,3655459128,3958962195,731420851,571543859,3530123707,2849626480,126783113,865375399,765172662,1008606754,361203602,3387549984,2278477385,2857719295,1344809080,2782912378,59542671,1503764984,160008576,437062935,1707065306,3622233649,2218934982,3496503480,2185314755,697932208,1512910199,504303377,2075177163,2824099068,1841019862,739644986],R=[2781242211,2230877308,2582542199,2381740923,234877682,3184946027,2984144751,1418839493,1348481072,50462977,2848876391,2102799147,434634494,1656084439,3863849899,2599188086,1167051466,2636087938,1082771913,2281340285,368048890,3954334041,3381544775,201060592,3963727277,1739838676,4250903202,3930435503,3206782108,4149453988,2531553906,1536934080,3262494647,484572669,2923271059,1783375398,1517041206,1098792767,49674231,1334037708,1550332980,4098991525,886171109,150598129,2481090929,1940642008,1398944049,1059722517,201851908,1385547719,1699095331,1587397571,674240536,2704774806,252314885,3039795866,151914247,908333586,2602270848,1038082786,651029483,1766729511,3447698098,2682942837,454166793,2652734339,1951935532,775166490,758520603,3000790638,4004797018,4217086112,4137964114,1299594043,1639438038,3464344499,2068982057,1054729187,1901997871,2534638724,4121318227,1757008337,0,750906861,1614815264,535035132,3363418545,3988151131,3201591914,1183697867,3647454910,1265776953,3734260298,3566750796,3903871064,1250283471,1807470800,717615087,3847203498,384695291,3313910595,3617213773,1432761139,2484176261,3481945413,283769337,100925954,2180939647,4037038160,1148730428,3123027871,3813386408,4087501137,4267549603,3229630528,2315620239,2906624658,3156319645,1215313976,82966005,3747855548,3245848246,1974459098,1665278241,807407632,451280895,251524083,1841287890,1283575245,337120268,891687699,801369324,3787349855,2721421207,3431482436,959321879,1469301956,4065699751,2197585534,1199193405,2898814052,3887750493,724703513,2514908019,2696962144,2551808385,3516813135,2141445340,1715741218,2119445034,2872807568,2198571144,3398190662,700968686,3547052216,1009259540,2041044702,3803995742,487983883,1991105499,1004265696,1449407026,1316239930,504629770,3683797321,168560134,1816667172,3837287516,1570751170,1857934291,4014189740,2797888098,2822345105,2754712981,936633572,2347923833,852879335,1133234376,1500395319,3084545389,2348912013,1689376213,3533459022,3762923945,3034082412,4205598294,133428468,634383082,2949277029,2398386810,3913789102,403703816,3580869306,2297460856,1867130149,1918643758,607656988,4049053350,3346248884,1368901318,600565992,2090982877,2632479860,557719327,3717614411,3697393085,2249034635,2232388234,2430627952,1115438654,3295786421,2865522278,3633334344,84280067,33027830,303828494,2747425121,1600795957,4188952407,3496589753,2434238086,1486471617,658119965,3106381470,953803233,334231800,3005978776,857870609,3151128937,1890179545,2298973838,2805175444,3056442267,574365214,2450884487,550103529,1233637070,4289353045,2018519080,2057691103,2399374476,4166623649,2148108681,387583245,3664101311,836232934,3330556482,3100665960,3280093505,2955516313,2002398509,287182607,3413881008,4238890068,3597515707,975967766],E=[1671808611,2089089148,2006576759,2072901243,4061003762,1807603307,1873927791,3310653893,810573872,16974337,1739181671,729634347,4263110654,3613570519,2883997099,1989864566,3393556426,2191335298,3376449993,2106063485,4195741690,1508618841,1204391495,4027317232,2917941677,3563566036,2734514082,2951366063,2629772188,2767672228,1922491506,3227229120,3082974647,4246528509,2477669779,644500518,911895606,1061256767,4144166391,3427763148,878471220,2784252325,3845444069,4043897329,1905517169,3631459288,827548209,356461077,67897348,3344078279,593839651,3277757891,405286936,2527147926,84871685,2595565466,118033927,305538066,2157648768,3795705826,3945188843,661212711,2999812018,1973414517,152769033,2208177539,745822252,439235610,455947803,1857215598,1525593178,2700827552,1391895634,994932283,3596728278,3016654259,695947817,3812548067,795958831,2224493444,1408607827,3513301457,0,3979133421,543178784,4229948412,2982705585,1542305371,1790891114,3410398667,3201918910,961245753,1256100938,1289001036,1491644504,3477767631,3496721360,4012557807,2867154858,4212583931,1137018435,1305975373,861234739,2241073541,1171229253,4178635257,33948674,2139225727,1357946960,1011120188,2679776671,2833468328,1374921297,2751356323,1086357568,2408187279,2460827538,2646352285,944271416,4110742005,3168756668,3066132406,3665145818,560153121,271589392,4279952895,4077846003,3530407890,3444343245,202643468,322250259,3962553324,1608629855,2543990167,1154254916,389623319,3294073796,2817676711,2122513534,1028094525,1689045092,1575467613,422261273,1939203699,1621147744,2174228865,1339137615,3699352540,577127458,712922154,2427141008,2290289544,1187679302,3995715566,3100863416,339486740,3732514782,1591917662,186455563,3681988059,3762019296,844522546,978220090,169743370,1239126601,101321734,611076132,1558493276,3260915650,3547250131,2901361580,1655096418,2443721105,2510565781,3828863972,2039214713,3878868455,3359869896,928607799,1840765549,2374762893,3580146133,1322425422,2850048425,1823791212,1459268694,4094161908,3928346602,1706019429,2056189050,2934523822,135794696,3134549946,2022240376,628050469,779246638,472135708,2800834470,3032970164,3327236038,3894660072,3715932637,1956440180,522272287,1272813131,3185336765,2340818315,2323976074,1888542832,1044544574,3049550261,1722469478,1222152264,50660867,4127324150,236067854,1638122081,895445557,1475980887,3117443513,2257655686,3243809217,489110045,2662934430,3778599393,4162055160,2561878936,288563729,1773916777,3648039385,2391345038,2493985684,2612407707,505560094,2274497927,3911240169,3460925390,1442818645,678973480,3749357023,2358182796,2717407649,2306869641,219617805,3218761151,3862026214,1120306242,1756942440,1103331905,2578459033,762796589,252780047,2966125488,1425844308,3151392187,372911126],L=[1667474886,2088535288,2004326894,2071694838,4075949567,1802223062,1869591006,3318043793,808472672,16843522,1734846926,724270422,4278065639,3621216949,2880169549,1987484396,3402253711,2189597983,3385409673,2105378810,4210693615,1499065266,1195886990,4042263547,2913856577,3570689971,2728590687,2947541573,2627518243,2762274643,1920112356,3233831835,3082273397,4261223649,2475929149,640051788,909531756,1061110142,4160160501,3435941763,875846760,2779116625,3857003729,4059105529,1903268834,3638064043,825316194,353713962,67374088,3351728789,589522246,3284360861,404236336,2526454071,84217610,2593830191,117901582,303183396,2155911963,3806477791,3958056653,656894286,2998062463,1970642922,151591698,2206440989,741110872,437923380,454765878,1852748508,1515908788,2694904667,1381168804,993742198,3604373943,3014905469,690584402,3823320797,791638366,2223281939,1398011302,3520161977,0,3991743681,538992704,4244381667,2981218425,1532751286,1785380564,3419096717,3200178535,960056178,1246420628,1280103576,1482221744,3486468741,3503319995,4025428677,2863326543,4227536621,1128514950,1296947098,859002214,2240123921,1162203018,4193849577,33687044,2139062782,1347481760,1010582648,2678045221,2829640523,1364325282,2745433693,1077985408,2408548869,2459086143,2644360225,943212656,4126475505,3166494563,3065430391,3671750063,555836226,269496352,4294908645,4092792573,3537006015,3452783745,202118168,320025894,3974901699,1600119230,2543297077,1145359496,387397934,3301201811,2812801621,2122220284,1027426170,1684319432,1566435258,421079858,1936954854,1616945344,2172753945,1330631070,3705438115,572679748,707427924,2425400123,2290647819,1179044492,4008585671,3099120491,336870440,3739122087,1583276732,185277718,3688593069,3772791771,842159716,976899700,168435220,1229577106,101059084,606366792,1549591736,3267517855,3553849021,2897014595,1650632388,2442242105,2509612081,3840161747,2038008818,3890688725,3368567691,926374254,1835907034,2374863873,3587531953,1313788572,2846482505,1819063512,1448540844,4109633523,3941213647,1701162954,2054852340,2930698567,134748176,3132806511,2021165296,623210314,774795868,471606328,2795958615,3031746419,3334885783,3907527627,3722280097,1953799400,522133822,1263263126,3183336545,2341176845,2324333839,1886425312,1044267644,3048588401,1718004428,1212733584,50529542,4143317495,235803164,1633788866,892690282,1465383342,3115962473,2256965911,3250673817,488449850,2661202215,3789633753,4177007595,2560144171,286339874,1768537042,3654906025,2391705863,2492770099,2610673197,505291324,2273808917,3924369609,3469625735,1431699370,673740880,3755965093,2358021891,2711746649,2307489801,218961690,3217021541,3873845719,1111672452,1751693520,1094828930,2576986153,757954394,252645662,2964376443,1414855848,3149649517,370555436],W=[1374988112,2118214995,437757123,975658646,1001089995,530400753,2902087851,1273168787,540080725,2910219766,2295101073,4110568485,1340463100,3307916247,641025152,3043140495,3736164937,632953703,1172967064,1576976609,3274667266,2169303058,2370213795,1809054150,59727847,361929877,3211623147,2505202138,3569255213,1484005843,1239443753,2395588676,1975683434,4102977912,2572697195,666464733,3202437046,4035489047,3374361702,2110667444,1675577880,3843699074,2538681184,1649639237,2976151520,3144396420,4269907996,4178062228,1883793496,2403728665,2497604743,1383856311,2876494627,1917518562,3810496343,1716890410,3001755655,800440835,2261089178,3543599269,807962610,599762354,33778362,3977675356,2328828971,2809771154,4077384432,1315562145,1708848333,101039829,3509871135,3299278474,875451293,2733856160,92987698,2767645557,193195065,1080094634,1584504582,3178106961,1042385657,2531067453,3711829422,1306967366,2438237621,1908694277,67556463,1615861247,429456164,3602770327,2302690252,1742315127,2968011453,126454664,3877198648,2043211483,2709260871,2084704233,4169408201,0,159417987,841739592,504459436,1817866830,4245618683,260388950,1034867998,908933415,168810852,1750902305,2606453969,607530554,202008497,2472011535,3035535058,463180190,2160117071,1641816226,1517767529,470948374,3801332234,3231722213,1008918595,303765277,235474187,4069246893,766945465,337553864,1475418501,2943682380,4003061179,2743034109,4144047775,1551037884,1147550661,1543208500,2336434550,3408119516,3069049960,3102011747,3610369226,1113818384,328671808,2227573024,2236228733,3535486456,2935566865,3341394285,496906059,3702665459,226906860,2009195472,733156972,2842737049,294930682,1206477858,2835123396,2700099354,1451044056,573804783,2269728455,3644379585,2362090238,2564033334,2801107407,2776292904,3669462566,1068351396,742039012,1350078989,1784663195,1417561698,4136440770,2430122216,775550814,2193862645,2673705150,1775276924,1876241833,3475313331,3366754619,270040487,3902563182,3678124923,3441850377,1851332852,3969562369,2203032232,3868552805,2868897406,566021896,4011190502,3135740889,1248802510,3936291284,699432150,832877231,708780849,3332740144,899835584,1951317047,4236429990,3767586992,866637845,4043610186,1106041591,2144161806,395441711,1984812685,1139781709,3433712980,3835036895,2664543715,1282050075,3240894392,1181045119,2640243204,25965917,4203181171,4211818798,3009879386,2463879762,3910161971,1842759443,2597806476,933301370,1509430414,3943906441,3467192302,3076639029,3776767469,2051518780,2631065433,1441952575,404016761,1942435775,1408749034,1610459739,3745345300,2017778566,3400528769,3110650942,941896748,3265478751,371049330,3168937228,675039627,4279080257,967311729,135050206,3635733660,1683407248,2076935265,3576870512,1215061108,3501741890],z=[1347548327,1400783205,3273267108,2520393566,3409685355,4045380933,2880240216,2471224067,1428173050,4138563181,2441661558,636813900,4233094615,3620022987,2149987652,2411029155,1239331162,1730525723,2554718734,3781033664,46346101,310463728,2743944855,3328955385,3875770207,2501218972,3955191162,3667219033,768917123,3545789473,692707433,1150208456,1786102409,2029293177,1805211710,3710368113,3065962831,401639597,1724457132,3028143674,409198410,2196052529,1620529459,1164071807,3769721975,2226875310,486441376,2499348523,1483753576,428819965,2274680428,3075636216,598438867,3799141122,1474502543,711349675,129166120,53458370,2592523643,2782082824,4063242375,2988687269,3120694122,1559041666,730517276,2460449204,4042459122,2706270690,3446004468,3573941694,533804130,2328143614,2637442643,2695033685,839224033,1973745387,957055980,2856345839,106852767,1371368976,4181598602,1033297158,2933734917,1179510461,3046200461,91341917,1862534868,4284502037,605657339,2547432937,3431546947,2003294622,3182487618,2282195339,954669403,3682191598,1201765386,3917234703,3388507166,0,2198438022,1211247597,2887651696,1315723890,4227665663,1443857720,507358933,657861945,1678381017,560487590,3516619604,975451694,2970356327,261314535,3535072918,2652609425,1333838021,2724322336,1767536459,370938394,182621114,3854606378,1128014560,487725847,185469197,2918353863,3106780840,3356761769,2237133081,1286567175,3152976349,4255350624,2683765030,3160175349,3309594171,878443390,1988838185,3704300486,1756818940,1673061617,3403100636,272786309,1075025698,545572369,2105887268,4174560061,296679730,1841768865,1260232239,4091327024,3960309330,3497509347,1814803222,2578018489,4195456072,575138148,3299409036,446754879,3629546796,4011996048,3347532110,3252238545,4270639778,915985419,3483825537,681933534,651868046,2755636671,3828103837,223377554,2607439820,1649704518,3270937875,3901806776,1580087799,4118987695,3198115200,2087309459,2842678573,3016697106,1003007129,2802849917,1860738147,2077965243,164439672,4100872472,32283319,2827177882,1709610350,2125135846,136428751,3874428392,3652904859,3460984630,3572145929,3593056380,2939266226,824852259,818324884,3224740454,930369212,2801566410,2967507152,355706840,1257309336,4148292826,243256656,790073846,2373340630,1296297904,1422699085,3756299780,3818836405,457992840,3099667487,2135319889,77422314,1560382517,1945798516,788204353,1521706781,1385356242,870912086,325965383,2358957921,2050466060,2388260884,2313884476,4006521127,901210569,3990953189,1014646705,1503449823,1062597235,2031621326,3212035895,3931371469,1533017514,350174575,2256028891,2177544179,1052338372,741876788,1606591296,1914052035,213705253,2334669897,1107234197,1899603969,3725069491,2631447780,2422494913,1635502980,1893020342,1950903388,1120974935],D=[2807058932,1699970625,2764249623,1586903591,1808481195,1173430173,1487645946,59984867,4199882800,1844882806,1989249228,1277555970,3623636965,3419915562,1149249077,2744104290,1514790577,459744698,244860394,3235995134,1963115311,4027744588,2544078150,4190530515,1608975247,2627016082,2062270317,1507497298,2200818878,567498868,1764313568,3359936201,2305455554,2037970062,1047239e3,1910319033,1337376481,2904027272,2892417312,984907214,1243112415,830661914,861968209,2135253587,2011214180,2927934315,2686254721,731183368,1750626376,4246310725,1820824798,4172763771,3542330227,48394827,2404901663,2871682645,671593195,3254988725,2073724613,145085239,2280796200,2779915199,1790575107,2187128086,472615631,3029510009,4075877127,3802222185,4107101658,3201631749,1646252340,4270507174,1402811438,1436590835,3778151818,3950355702,3963161475,4020912224,2667994737,273792366,2331590177,104699613,95345982,3175501286,2377486676,1560637892,3564045318,369057872,4213447064,3919042237,1137477952,2658625497,1119727848,2340947849,1530455833,4007360968,172466556,266959938,516552836,0,2256734592,3980931627,1890328081,1917742170,4294704398,945164165,3575528878,958871085,3647212047,2787207260,1423022939,775562294,1739656202,3876557655,2530391278,2443058075,3310321856,547512796,1265195639,437656594,3121275539,719700128,3762502690,387781147,218828297,3350065803,2830708150,2848461854,428169201,122466165,3720081049,1627235199,648017665,4122762354,1002783846,2117360635,695634755,3336358691,4234721005,4049844452,3704280881,2232435299,574624663,287343814,612205898,1039717051,840019705,2708326185,793451934,821288114,1391201670,3822090177,376187827,3113855344,1224348052,1679968233,2361698556,1058709744,752375421,2431590963,1321699145,3519142200,2734591178,188127444,2177869557,3727205754,2384911031,3215212461,2648976442,2450346104,3432737375,1180849278,331544205,3102249176,4150144569,2952102595,2159976285,2474404304,766078933,313773861,2570832044,2108100632,1668212892,3145456443,2013908262,418672217,3070356634,2594734927,1852171925,3867060991,3473416636,3907448597,2614737639,919489135,164948639,2094410160,2997825956,590424639,2486224549,1723872674,3157750862,3399941250,3501252752,3625268135,2555048196,3673637356,1343127501,4130281361,3599595085,2957853679,1297403050,81781910,3051593425,2283490410,532201772,1367295589,3926170974,895287692,1953757831,1093597963,492483431,3528626907,1446242576,1192455638,1636604631,209336225,344873464,1015671571,669961897,3375740769,3857572124,2973530695,3747192018,1933530610,3464042516,935293895,3454686199,2858115069,1863638845,3683022916,4085369519,3292445032,875313188,1080017571,3279033885,621591778,1233856572,2504130317,24197544,3017672716,3835484340,3247465558,2220981195,3060847922,1551124588,1463996600],U=[4104605777,1097159550,396673818,660510266,2875968315,2638606623,4200115116,3808662347,821712160,1986918061,3430322568,38544885,3856137295,718002117,893681702,1654886325,2975484382,3122358053,3926825029,4274053469,796197571,1290801793,1184342925,3556361835,2405426947,2459735317,1836772287,1381620373,3196267988,1948373848,3764988233,3385345166,3263785589,2390325492,1480485785,3111247143,3780097726,2293045232,548169417,3459953789,3746175075,439452389,1362321559,1400849762,1685577905,1806599355,2174754046,137073913,1214797936,1174215055,3731654548,2079897426,1943217067,1258480242,529487843,1437280870,3945269170,3049390895,3313212038,923313619,679998e3,3215307299,57326082,377642221,3474729866,2041877159,133361907,1776460110,3673476453,96392454,878845905,2801699524,777231668,4082475170,2330014213,4142626212,2213296395,1626319424,1906247262,1846563261,562755902,3708173718,1040559837,3871163981,1418573201,3294430577,114585348,1343618912,2566595609,3186202582,1078185097,3651041127,3896688048,2307622919,425408743,3371096953,2081048481,1108339068,2216610296,0,2156299017,736970802,292596766,1517440620,251657213,2235061775,2933202493,758720310,265905162,1554391400,1532285339,908999204,174567692,1474760595,4002861748,2610011675,3234156416,3693126241,2001430874,303699484,2478443234,2687165888,585122620,454499602,151849742,2345119218,3064510765,514443284,4044981591,1963412655,2581445614,2137062819,19308535,1928707164,1715193156,4219352155,1126790795,600235211,3992742070,3841024952,836553431,1669664834,2535604243,3323011204,1243905413,3141400786,4180808110,698445255,2653899549,2989552604,2253581325,3252932727,3004591147,1891211689,2487810577,3915653703,4237083816,4030667424,2100090966,865136418,1229899655,953270745,3399679628,3557504664,4118925222,2061379749,3079546586,2915017791,983426092,2022837584,1607244650,2118541908,2366882550,3635996816,972512814,3283088770,1568718495,3499326569,3576539503,621982671,2895723464,410887952,2623762152,1002142683,645401037,1494807662,2595684844,1335535747,2507040230,4293295786,3167684641,367585007,3885750714,1865862730,2668221674,2960971305,2763173681,1059270954,2777952454,2724642869,1320957812,2194319100,2429595872,2815956275,77089521,3973773121,3444575871,2448830231,1305906550,4021308739,2857194700,2516901860,3518358430,1787304780,740276417,1699839814,1592394909,2352307457,2272556026,188821243,1729977011,3687994002,274084841,3594982253,3613494426,2701949495,4162096729,322734571,2837966542,1640576439,484830689,1202797690,3537852828,4067639125,349075736,3342319475,4157467219,4255800159,1030690015,1155237496,2951971274,1757691577,607398968,2738905026,499347990,3794078908,1011452712,227885567,2818666809,213114376,3034881240,1455525988,3414450555,850817237,1817998408,3092726480],Y=[0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795],oe=[0,185469197,370938394,487725847,741876788,657861945,975451694,824852259,1483753576,1400783205,1315723890,1164071807,1950903388,2135319889,1649704518,1767536459,2967507152,3152976349,2801566410,2918353863,2631447780,2547432937,2328143614,2177544179,3901806776,3818836405,4270639778,4118987695,3299409036,3483825537,3535072918,3652904859,2077965243,1893020342,1841768865,1724457132,1474502543,1559041666,1107234197,1257309336,598438867,681933534,901210569,1052338372,261314535,77422314,428819965,310463728,3409685355,3224740454,3710368113,3593056380,3875770207,3960309330,4045380933,4195456072,2471224067,2554718734,2237133081,2388260884,3212035895,3028143674,2842678573,2724322336,4138563181,4255350624,3769721975,3955191162,3667219033,3516619604,3431546947,3347532110,2933734917,2782082824,3099667487,3016697106,2196052529,2313884476,2499348523,2683765030,1179510461,1296297904,1347548327,1533017514,1786102409,1635502980,2087309459,2003294622,507358933,355706840,136428751,53458370,839224033,957055980,605657339,790073846,2373340630,2256028891,2607439820,2422494913,2706270690,2856345839,3075636216,3160175349,3573941694,3725069491,3273267108,3356761769,4181598602,4063242375,4011996048,3828103837,1033297158,915985419,730517276,545572369,296679730,446754879,129166120,213705253,1709610350,1860738147,1945798516,2029293177,1239331162,1120974935,1606591296,1422699085,4148292826,4233094615,3781033664,3931371469,3682191598,3497509347,3446004468,3328955385,2939266226,2755636671,3106780840,2988687269,2198438022,2282195339,2501218972,2652609425,1201765386,1286567175,1371368976,1521706781,1805211710,1620529459,2105887268,1988838185,533804130,350174575,164439672,46346101,870912086,954669403,636813900,788204353,2358957921,2274680428,2592523643,2441661558,2695033685,2880240216,3065962831,3182487618,3572145929,3756299780,3270937875,3388507166,4174560061,4091327024,4006521127,3854606378,1014646705,930369212,711349675,560487590,272786309,457992840,106852767,223377554,1678381017,1862534868,1914052035,2031621326,1211247597,1128014560,1580087799,1428173050,32283319,182621114,401639597,486441376,768917123,651868046,1003007129,818324884,1503449823,1385356242,1333838021,1150208456,1973745387,2125135846,1673061617,1756818940,2970356327,3120694122,2802849917,2887651696,2637442643,2520393566,2334669897,2149987652,3917234703,3799141122,4284502037,4100872472,3309594171,3460984630,3545789473,3629546796,2050466060,1899603969,1814803222,1730525723,1443857720,1560382517,1075025698,1260232239,575138148,692707433,878443390,1062597235,243256656,91341917,409198410,325965383,3403100636,3252238545,3704300486,3620022987,3874428392,3990953189,4042459122,4227665663,2460449204,2578018489,2226875310,2411029155,3198115200,3046200461,2827177882,2743944855],X=[0,218828297,437656594,387781147,875313188,958871085,775562294,590424639,1750626376,1699970625,1917742170,2135253587,1551124588,1367295589,1180849278,1265195639,3501252752,3720081049,3399941250,3350065803,3835484340,3919042237,4270507174,4085369519,3102249176,3051593425,2734591178,2952102595,2361698556,2177869557,2530391278,2614737639,3145456443,3060847922,2708326185,2892417312,2404901663,2187128086,2504130317,2555048196,3542330227,3727205754,3375740769,3292445032,3876557655,3926170974,4246310725,4027744588,1808481195,1723872674,1910319033,2094410160,1608975247,1391201670,1173430173,1224348052,59984867,244860394,428169201,344873464,935293895,984907214,766078933,547512796,1844882806,1627235199,2011214180,2062270317,1507497298,1423022939,1137477952,1321699145,95345982,145085239,532201772,313773861,830661914,1015671571,731183368,648017665,3175501286,2957853679,2807058932,2858115069,2305455554,2220981195,2474404304,2658625497,3575528878,3625268135,3473416636,3254988725,3778151818,3963161475,4213447064,4130281361,3599595085,3683022916,3432737375,3247465558,3802222185,4020912224,4172763771,4122762354,3201631749,3017672716,2764249623,2848461854,2331590177,2280796200,2431590963,2648976442,104699613,188127444,472615631,287343814,840019705,1058709744,671593195,621591778,1852171925,1668212892,1953757831,2037970062,1514790577,1463996600,1080017571,1297403050,3673637356,3623636965,3235995134,3454686199,4007360968,3822090177,4107101658,4190530515,2997825956,3215212461,2830708150,2779915199,2256734592,2340947849,2627016082,2443058075,172466556,122466165,273792366,492483431,1047239e3,861968209,612205898,695634755,1646252340,1863638845,2013908262,1963115311,1446242576,1530455833,1277555970,1093597963,1636604631,1820824798,2073724613,1989249228,1436590835,1487645946,1337376481,1119727848,164948639,81781910,331544205,516552836,1039717051,821288114,669961897,719700128,2973530695,3157750862,2871682645,2787207260,2232435299,2283490410,2667994737,2450346104,3647212047,3564045318,3279033885,3464042516,3980931627,3762502690,4150144569,4199882800,3070356634,3121275539,2904027272,2686254721,2200818878,2384911031,2570832044,2486224549,3747192018,3528626907,3310321856,3359936201,3950355702,3867060991,4049844452,4234721005,1739656202,1790575107,2108100632,1890328081,1402811438,1586903591,1233856572,1149249077,266959938,48394827,369057872,418672217,1002783846,919489135,567498868,752375421,209336225,24197544,376187827,459744698,945164165,895287692,574624663,793451934,1679968233,1764313568,2117360635,1933530610,1343127501,1560637892,1243112415,1192455638,3704280881,3519142200,3336358691,3419915562,3907448597,3857572124,4075877127,4294704398,3029510009,3113855344,2927934315,2744104290,2159976285,2377486676,2594734927,2544078150],ee=[0,151849742,303699484,454499602,607398968,758720310,908999204,1059270954,1214797936,1097159550,1517440620,1400849762,1817998408,1699839814,2118541908,2001430874,2429595872,2581445614,2194319100,2345119218,3034881240,3186202582,2801699524,2951971274,3635996816,3518358430,3399679628,3283088770,4237083816,4118925222,4002861748,3885750714,1002142683,850817237,698445255,548169417,529487843,377642221,227885567,77089521,1943217067,2061379749,1640576439,1757691577,1474760595,1592394909,1174215055,1290801793,2875968315,2724642869,3111247143,2960971305,2405426947,2253581325,2638606623,2487810577,3808662347,3926825029,4044981591,4162096729,3342319475,3459953789,3576539503,3693126241,1986918061,2137062819,1685577905,1836772287,1381620373,1532285339,1078185097,1229899655,1040559837,923313619,740276417,621982671,439452389,322734571,137073913,19308535,3871163981,4021308739,4104605777,4255800159,3263785589,3414450555,3499326569,3651041127,2933202493,2815956275,3167684641,3049390895,2330014213,2213296395,2566595609,2448830231,1305906550,1155237496,1607244650,1455525988,1776460110,1626319424,2079897426,1928707164,96392454,213114376,396673818,514443284,562755902,679998e3,865136418,983426092,3708173718,3557504664,3474729866,3323011204,4180808110,4030667424,3945269170,3794078908,2507040230,2623762152,2272556026,2390325492,2975484382,3092726480,2738905026,2857194700,3973773121,3856137295,4274053469,4157467219,3371096953,3252932727,3673476453,3556361835,2763173681,2915017791,3064510765,3215307299,2156299017,2307622919,2459735317,2610011675,2081048481,1963412655,1846563261,1729977011,1480485785,1362321559,1243905413,1126790795,878845905,1030690015,645401037,796197571,274084841,425408743,38544885,188821243,3613494426,3731654548,3313212038,3430322568,4082475170,4200115116,3780097726,3896688048,2668221674,2516901860,2366882550,2216610296,3141400786,2989552604,2837966542,2687165888,1202797690,1320957812,1437280870,1554391400,1669664834,1787304780,1906247262,2022837584,265905162,114585348,499347990,349075736,736970802,585122620,972512814,821712160,2595684844,2478443234,2293045232,2174754046,3196267988,3079546586,2895723464,2777952454,3537852828,3687994002,3234156416,3385345166,4142626212,4293295786,3841024952,3992742070,174567692,57326082,410887952,292596766,777231668,660510266,1011452712,893681702,1108339068,1258480242,1343618912,1494807662,1715193156,1865862730,1948373848,2100090966,2701949495,2818666809,3004591147,3122358053,2235061775,2352307457,2535604243,2653899549,3915653703,3764988233,4219352155,4067639125,3444575871,3294430577,3746175075,3594982253,836553431,953270745,600235211,718002117,367585007,484830689,133361907,251657213,2041877159,1891211689,1806599355,1654886325,1568718495,1418573201,1335535747,1184342925];function se(b){for(var F=[],V=0;V<b.length;V+=4)F.push(b[V]<<24|b[V+1]<<16|b[V+2]<<8|b[V+3]);return F}var T=function(b){if(!(this instanceof T))throw Error("AES must be instanitated with `new`");Object.defineProperty(this,"key",{value:s(b,!0)}),this._prepare()};T.prototype._prepare=function(){var b=h[this.key.length];if(b==null)throw new Error("invalid key size (must be 16, 24 or 32 bytes)");this._Ke=[],this._Kd=[];for(var F=0;F<=b;F++)this._Ke.push([0,0,0,0]),this._Kd.push([0,0,0,0]);for(var V=(b+1)*4,K=this.key.length/4,H=se(this.key),O,F=0;F<K;F++)O=F>>2,this._Ke[O][F%4]=H[F],this._Kd[b-O][F%4]=H[F];for(var j=0,re=K,ie;re<V;){if(ie=H[K-1],H[0]^=m[ie>>16&255]<<24^m[ie>>8&255]<<16^m[ie&255]<<8^m[ie>>24&255]^p[j]<<24,j+=1,K!=8)for(var F=1;F<K;F++)H[F]^=H[F-1];else{for(var F=1;F<K/2;F++)H[F]^=H[F-1];ie=H[K/2-1],H[K/2]^=m[ie&255]^m[ie>>8&255]<<8^m[ie>>16&255]<<16^m[ie>>24&255]<<24;for(var F=K/2+1;F<K;F++)H[F]^=H[F-1]}for(var F=0,ye,I;F<K&&re<V;)ye=re>>2,I=re%4,this._Ke[ye][I]=H[F],this._Kd[b-ye][I]=H[F++],re++}for(var ye=1;ye<b;ye++)for(var I=0;I<4;I++)ie=this._Kd[ye][I],this._Kd[ye][I]=Y[ie>>24&255]^oe[ie>>16&255]^X[ie>>8&255]^ee[ie&255]},T.prototype.encrypt=function(b){if(b.length!=16)throw new Error("invalid plaintext size (must be 16 bytes)");for(var F=this._Ke.length-1,V=[0,0,0,0],K=se(b),H=0;H<4;H++)K[H]^=this._Ke[0][H];for(var O=1;O<F;O++){for(var H=0;H<4;H++)V[H]=M[K[H]>>24&255]^R[K[(H+1)%4]>>16&255]^E[K[(H+2)%4]>>8&255]^L[K[(H+3)%4]&255]^this._Ke[O][H];K=V.slice()}for(var j=a(16),re,H=0;H<4;H++)re=this._Ke[F][H],j[4*H]=(m[K[H]>>24&255]^re>>24)&255,j[4*H+1]=(m[K[(H+1)%4]>>16&255]^re>>16)&255,j[4*H+2]=(m[K[(H+2)%4]>>8&255]^re>>8)&255,j[4*H+3]=(m[K[(H+3)%4]&255]^re)&255;return j},T.prototype.decrypt=function(b){if(b.length!=16)throw new Error("invalid ciphertext size (must be 16 bytes)");for(var F=this._Kd.length-1,V=[0,0,0,0],K=se(b),H=0;H<4;H++)K[H]^=this._Kd[0][H];for(var O=1;O<F;O++){for(var H=0;H<4;H++)V[H]=W[K[H]>>24&255]^z[K[(H+3)%4]>>16&255]^D[K[(H+2)%4]>>8&255]^U[K[(H+1)%4]&255]^this._Kd[O][H];K=V.slice()}for(var j=a(16),re,H=0;H<4;H++)re=this._Kd[F][H],j[4*H]=(P[K[H]>>24&255]^re>>24)&255,j[4*H+1]=(P[K[(H+3)%4]>>16&255]^re>>16)&255,j[4*H+2]=(P[K[(H+2)%4]>>8&255]^re>>8)&255,j[4*H+3]=(P[K[(H+1)%4]&255]^re)&255;return j};var f=function(b){if(!(this instanceof f))throw Error("AES must be instanitated with `new`");this.description="Electronic Code Block",this.name="ecb",this._aes=new T(b)};f.prototype.encrypt=function(b){if(b=s(b),b.length%16!==0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var F=a(b.length),V=a(16),K=0;K<b.length;K+=16)o(b,V,0,K,K+16),V=this._aes.encrypt(V),o(V,F,K);return F},f.prototype.decrypt=function(b){if(b=s(b),b.length%16!==0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var F=a(b.length),V=a(16),K=0;K<b.length;K+=16)o(b,V,0,K,K+16),V=this._aes.decrypt(V),o(V,F,K);return F};var d=function(b,F){if(!(this instanceof d))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Block Chaining",this.name="cbc",!F)F=a(16);else if(F.length!=16)throw new Error("invalid initialation vector size (must be 16 bytes)");this._lastCipherblock=s(F,!0),this._aes=new T(b)};d.prototype.encrypt=function(b){if(b=s(b),b.length%16!==0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var F=a(b.length),V=a(16),K=0;K<b.length;K+=16){o(b,V,0,K,K+16);for(var H=0;H<16;H++)V[H]^=this._lastCipherblock[H];this._lastCipherblock=this._aes.encrypt(V),o(this._lastCipherblock,F,K)}return F},d.prototype.decrypt=function(b){if(b=s(b),b.length%16!==0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var F=a(b.length),V=a(16),K=0;K<b.length;K+=16){o(b,V,0,K,K+16),V=this._aes.decrypt(V);for(var H=0;H<16;H++)F[K+H]=V[H]^this._lastCipherblock[H];o(b,this._lastCipherblock,0,K,K+16)}return F};var y=function(b,F,V){if(!(this instanceof y))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Feedback",this.name="cfb",!F)F=a(16);else if(F.length!=16)throw new Error("invalid initialation vector size (must be 16 size)");V||(V=1),this.segmentSize=V,this._shiftRegister=s(F,!0),this._aes=new T(b)};y.prototype.encrypt=function(b){if(b.length%this.segmentSize!=0)throw new Error("invalid plaintext size (must be segmentSize bytes)");for(var F=s(b,!0),V,K=0;K<F.length;K+=this.segmentSize){V=this._aes.encrypt(this._shiftRegister);for(var H=0;H<this.segmentSize;H++)F[K+H]^=V[H];o(this._shiftRegister,this._shiftRegister,0,this.segmentSize),o(F,this._shiftRegister,16-this.segmentSize,K,K+this.segmentSize)}return F},y.prototype.decrypt=function(b){if(b.length%this.segmentSize!=0)throw new Error("invalid ciphertext size (must be segmentSize bytes)");for(var F=s(b,!0),V,K=0;K<F.length;K+=this.segmentSize){V=this._aes.encrypt(this._shiftRegister);for(var H=0;H<this.segmentSize;H++)F[K+H]^=V[H];o(this._shiftRegister,this._shiftRegister,0,this.segmentSize),o(b,this._shiftRegister,16-this.segmentSize,K,K+this.segmentSize)}return F};var w=function(b,F){if(!(this instanceof w))throw Error("AES must be instanitated with `new`");if(this.description="Output Feedback",this.name="ofb",!F)F=a(16);else if(F.length!=16)throw new Error("invalid initialation vector size (must be 16 bytes)");this._lastPrecipher=s(F,!0),this._lastPrecipherIndex=16,this._aes=new T(b)};w.prototype.encrypt=function(b){for(var F=s(b,!0),V=0;V<F.length;V++)this._lastPrecipherIndex===16&&(this._lastPrecipher=this._aes.encrypt(this._lastPrecipher),this._lastPrecipherIndex=0),F[V]^=this._lastPrecipher[this._lastPrecipherIndex++];return F},w.prototype.decrypt=w.prototype.encrypt;var S=function(b){if(!(this instanceof S))throw Error("Counter must be instanitated with `new`");b!==0&&!b&&(b=1),typeof b=="number"?(this._counter=a(16),this.setValue(b)):this.setBytes(b)};S.prototype.setValue=function(b){if(typeof b!="number"||parseInt(b)!=b)throw new Error("invalid counter value (must be an integer)");for(var F=15;F>=0;--F)this._counter[F]=b%256,b=b>>8},S.prototype.setBytes=function(b){if(b=s(b,!0),b.length!=16)throw new Error("invalid counter bytes size (must be 16 bytes)");this._counter=b},S.prototype.increment=function(){for(var b=15;b>=0;b--)if(this._counter[b]===255)this._counter[b]=0;else{this._counter[b]++;break}};var B=function(b,F){if(!(this instanceof B))throw Error("AES must be instanitated with `new`");this.description="Counter",this.name="ctr",F instanceof S||(F=new S(F)),this._counter=F,this._remainingCounter=null,this._remainingCounterIndex=16,this._aes=new T(b)};B.prototype.encrypt=function(b){for(var F=s(b,!0),V=0;V<F.length;V++)this._remainingCounterIndex===16&&(this._remainingCounter=this._aes.encrypt(this._counter._counter),this._remainingCounterIndex=0,this._counter.increment()),F[V]^=this._remainingCounter[this._remainingCounterIndex++];return F},B.prototype.decrypt=B.prototype.encrypt;function $(b){b=s(b,!0);var F=16-b.length%16,V=a(b.length+F);o(b,V);for(var K=b.length;K<V.length;K++)V[K]=F;return V}function k(b){if(b=s(b,!0),b.length<16)throw new Error("PKCS#7 invalid length");var F=b[b.length-1];if(F>16)throw new Error("PKCS#7 padding byte out of range");for(var V=b.length-F,K=0;K<F;K++)if(b[V+K]!==F)throw new Error("PKCS#7 invalid padding byte");var H=a(V);return o(b,H,0,0,V),H}var x={AES:T,Counter:S,ModeOfOperation:{ecb:f,cbc:d,cfb:y,ofb:w,ctr:B},utils:{hex:u,utf8:c},padding:{pkcs7:{pad:$,strip:k}},_arrayTest:{coerceArray:s,createArray:a,copyArray:o}};t.exports=x})()})(Up);var Iw=Up.exports;const qn=pn(Iw),Op="json-wallets/5.7.0";function Bi(t){return typeof t=="string"&&t.substring(0,2)!=="0x"&&(t="0x"+t),ge(t)}function na(t,e){for(t=String(t);t.length<e;)t="0"+t;return t}function wl(t){return typeof t=="string"?Kn(t,Di.NFKC):ge(t)}function tr(t,e){let r=t;const n=e.toLowerCase().split("/");for(let i=0;i<n.length;i++){let s=null;for(const a in r)if(a.toLowerCase()===n[i]){s=r[a];break}if(s===null)return null;r=s}return r}function Bw(t){const e=ge(t);e[6]=e[6]&15|64,e[8]=e[8]&63|128;const r=ke(e);return[r.substring(2,10),r.substring(10,14),r.substring(14,18),r.substring(18,22),r.substring(22,34)].join("-")}const Uw=new xe(Op);class Ow extends Hs{isCrowdsaleAccount(e){return!!(e&&e._isCrowdsaleAccount)}}function Np(t,e){const r=JSON.parse(t);e=wl(e);const n=fr(tr(r,"ethaddr")),i=Bi(tr(r,"encseed"));(!i||i.length%16!==0)&&Uw.throwArgumentError("invalid encseed","json",t);const s=ge(gl(e,e,2e3,32,"sha256")).slice(0,16),a=i.slice(0,16),o=i.slice(16),c=new qn.ModeOfOperation.cbc(s,a),u=qn.padding.pkcs7.strip(ge(c.decrypt(o)));let h="";for(let P=0;P<u.length;P++)h+=String.fromCharCode(u[P]);const p=Kn(h),m=hr(p);return new Ow({_isCrowdsaleAccount:!0,address:n,privateKey:m})}function Dp(t){let e=null;try{e=JSON.parse(t)}catch{return!1}return e.encseed&&e.ethaddr}function Lp(t){let e=null;try{e=JSON.parse(t)}catch{return!1}return!(!e.version||parseInt(e.version)!==e.version||parseInt(e.version)!==3)}var $p={exports:{}};(function(t,e){(function(r){function i(R){const E=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);let L=1779033703,W=3144134277,z=1013904242,D=2773480762,U=1359893119,Y=2600822924,oe=528734635,X=1541459225;const ee=new Uint32Array(64);function se(B){let $=0,k=B.length;for(;k>=64;){let x=L,b=W,F=z,V=D,K=U,H=Y,O=oe,j=X,re,ie,ye,I,C;for(ie=0;ie<16;ie++)ye=$+ie*4,ee[ie]=(B[ye]&255)<<24|(B[ye+1]&255)<<16|(B[ye+2]&255)<<8|B[ye+3]&255;for(ie=16;ie<64;ie++)re=ee[ie-2],I=(re>>>17|re<<15)^(re>>>19|re<<13)^re>>>10,re=ee[ie-15],C=(re>>>7|re<<25)^(re>>>18|re<<14)^re>>>3,ee[ie]=(I+ee[ie-7]|0)+(C+ee[ie-16]|0)|0;for(ie=0;ie<64;ie++)I=(((K>>>6|K<<26)^(K>>>11|K<<21)^(K>>>25|K<<7))+(K&H^~K&O)|0)+(j+(E[ie]+ee[ie]|0)|0)|0,C=((x>>>2|x<<30)^(x>>>13|x<<19)^(x>>>22|x<<10))+(x&b^x&F^b&F)|0,j=O,O=H,H=K,K=V+I|0,V=F,F=b,b=x,x=I+C|0;L=L+x|0,W=W+b|0,z=z+F|0,D=D+V|0,U=U+K|0,Y=Y+H|0,oe=oe+O|0,X=X+j|0,$+=64,k-=64}}se(R);let T,f=R.length%64,d=R.length/536870912|0,y=R.length<<3,w=f<56?56:120,S=R.slice(R.length-f,R.length);for(S.push(128),T=f+1;T<w;T++)S.push(0);return S.push(d>>>24&255),S.push(d>>>16&255),S.push(d>>>8&255),S.push(d>>>0&255),S.push(y>>>24&255),S.push(y>>>16&255),S.push(y>>>8&255),S.push(y>>>0&255),se(S),[L>>>24&255,L>>>16&255,L>>>8&255,L>>>0&255,W>>>24&255,W>>>16&255,W>>>8&255,W>>>0&255,z>>>24&255,z>>>16&255,z>>>8&255,z>>>0&255,D>>>24&255,D>>>16&255,D>>>8&255,D>>>0&255,U>>>24&255,U>>>16&255,U>>>8&255,U>>>0&255,Y>>>24&255,Y>>>16&255,Y>>>8&255,Y>>>0&255,oe>>>24&255,oe>>>16&255,oe>>>8&255,oe>>>0&255,X>>>24&255,X>>>16&255,X>>>8&255,X>>>0&255]}function s(R,E,L){R=R.length<=64?R:i(R);const W=64+E.length+4,z=new Array(W),D=new Array(64);let U,Y=[];for(U=0;U<64;U++)z[U]=54;for(U=0;U<R.length;U++)z[U]^=R[U];for(U=0;U<E.length;U++)z[64+U]=E[U];for(U=W-4;U<W;U++)z[U]=0;for(U=0;U<64;U++)D[U]=92;for(U=0;U<R.length;U++)D[U]^=R[U];function oe(){for(let X=W-1;X>=W-4;X--){if(z[X]++,z[X]<=255)return;z[X]=0}}for(;L>=32;)oe(),Y=Y.concat(i(D.concat(i(z)))),L-=32;return L>0&&(oe(),Y=Y.concat(i(D.concat(i(z))).slice(0,L))),Y}function a(R,E,L,W,z){let D;for(h(R,(2*L-1)*16,z,0,16),D=0;D<2*L;D++)u(R,D*16,z,16),c(z,W),h(z,0,R,E+D*16,16);for(D=0;D<L;D++)h(R,E+D*2*16,R,D*16,16);for(D=0;D<L;D++)h(R,E+(D*2+1)*16,R,(D+L)*16,16)}function o(R,E){return R<<E|R>>>32-E}function c(R,E){h(R,0,E,0,16);for(let L=8;L>0;L-=2)E[4]^=o(E[0]+E[12],7),E[8]^=o(E[4]+E[0],9),E[12]^=o(E[8]+E[4],13),E[0]^=o(E[12]+E[8],18),E[9]^=o(E[5]+E[1],7),E[13]^=o(E[9]+E[5],9),E[1]^=o(E[13]+E[9],13),E[5]^=o(E[1]+E[13],18),E[14]^=o(E[10]+E[6],7),E[2]^=o(E[14]+E[10],9),E[6]^=o(E[2]+E[14],13),E[10]^=o(E[6]+E[2],18),E[3]^=o(E[15]+E[11],7),E[7]^=o(E[3]+E[15],9),E[11]^=o(E[7]+E[3],13),E[15]^=o(E[11]+E[7],18),E[1]^=o(E[0]+E[3],7),E[2]^=o(E[1]+E[0],9),E[3]^=o(E[2]+E[1],13),E[0]^=o(E[3]+E[2],18),E[6]^=o(E[5]+E[4],7),E[7]^=o(E[6]+E[5],9),E[4]^=o(E[7]+E[6],13),E[5]^=o(E[4]+E[7],18),E[11]^=o(E[10]+E[9],7),E[8]^=o(E[11]+E[10],9),E[9]^=o(E[8]+E[11],13),E[10]^=o(E[9]+E[8],18),E[12]^=o(E[15]+E[14],7),E[13]^=o(E[12]+E[15],9),E[14]^=o(E[13]+E[12],13),E[15]^=o(E[14]+E[13],18);for(let L=0;L<16;++L)R[L]+=E[L]}function u(R,E,L,W){for(let z=0;z<W;z++)L[z]^=R[E+z]}function h(R,E,L,W,z){for(;z--;)L[W++]=R[E++]}function p(R){if(!R||typeof R.length!="number")return!1;for(let E=0;E<R.length;E++){const L=R[E];if(typeof L!="number"||L%1||L<0||L>=256)return!1}return!0}function m(R,E){if(typeof R!="number"||R%1)throw new Error("invalid "+E);return R}function P(R,E,L,W,z,D,U){if(L=m(L,"N"),W=m(W,"r"),z=m(z,"p"),D=m(D,"dkLen"),L===0||L&L-1)throw new Error("N must be power of 2");if(L>2147483647/128/W)throw new Error("N too large");if(W>2147483647/128/z)throw new Error("r too large");if(!p(R))throw new Error("password must be an array or buffer");if(R=Array.prototype.slice.call(R),!p(E))throw new Error("salt must be an array or buffer");E=Array.prototype.slice.call(E);let Y=s(R,E,z*128*W);const oe=new Uint32Array(z*32*W);for(let K=0;K<oe.length;K++){const H=K*4;oe[K]=(Y[H+3]&255)<<24|(Y[H+2]&255)<<16|(Y[H+1]&255)<<8|(Y[H+0]&255)<<0}const X=new Uint32Array(64*W),ee=new Uint32Array(32*W*L),se=32*W,T=new Uint32Array(16),f=new Uint32Array(16),d=z*L*2;let y=0,w=null,S=!1,B=0,$=0,k,x;const b=U?parseInt(1e3/W):4294967295,F=typeof setImmediate<"u"?setImmediate:setTimeout,V=function(){if(S)return U(new Error("cancelled"),y/d);let K;switch(B){case 0:x=$*32*W,h(oe,x,X,0,se),B=1,k=0;case 1:K=L-k,K>b&&(K=b);for(let O=0;O<K;O++)h(X,0,ee,(k+O)*se,se),a(X,se,W,T,f);if(k+=K,y+=K,U){const O=parseInt(1e3*y/d);if(O!==w){if(S=U(null,y/d),S)break;w=O}}if(k<L)break;k=0,B=2;case 2:K=L-k,K>b&&(K=b);for(let O=0;O<K;O++){const j=(2*W-1)*16,re=X[j]&L-1;u(ee,re*se,X,se),a(X,se,W,T,f)}if(k+=K,y+=K,U){const O=parseInt(1e3*y/d);if(O!==w){if(S=U(null,y/d),S)break;w=O}}if(k<L)break;if(h(X,0,oe,x,se),$++,$<z){B=0;break}Y=[];for(let O=0;O<oe.length;O++)Y.push(oe[O]>>0&255),Y.push(oe[O]>>8&255),Y.push(oe[O]>>16&255),Y.push(oe[O]>>24&255);const H=s(R,Y,D);return U&&U(null,1,H),H}U&&F(V)};if(!U)for(;;){const K=V();if(K!=null)return K}V()}const M={scrypt:function(R,E,L,W,z,D,U){return new Promise(function(Y,oe){let X=0;U&&U(0),P(R,E,L,W,z,D,function(ee,se,T){if(ee)oe(ee);else if(T)U&&X!==1&&U(1),Y(new Uint8Array(T));else if(U&&se!==X)return X=se,U(se)})})},syncScrypt:function(R,E,L,W,z,D){return new Uint8Array(P(R,E,L,W,z,D))}};t.exports=M})()})($p);var Nw=$p.exports;const vl=pn(Nw);var Dw=function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(h){try{u(n.next(h))}catch(p){a(p)}}function c(h){try{u(n.throw(h))}catch(p){a(p)}}function u(h){h.done?s(h.value):i(h.value).then(o,c)}u((n=n.apply(t,e||[])).next())})};const Tu=new xe(Op);function Xd(t){return t!=null&&t.mnemonic&&t.mnemonic.phrase}class Lw extends Hs{isKeystoreAccount(e){return!!(e&&e._isKeystoreAccount)}}function $w(t,e,r){if(tr(t,"crypto/cipher")==="aes-128-ctr"){const i=Bi(tr(t,"crypto/cipherparams/iv")),s=new qn.Counter(i),a=new qn.ModeOfOperation.ctr(e,s);return ge(a.decrypt(r))}return null}function qp(t,e){const r=Bi(tr(t,"crypto/ciphertext"));if(ke(hr(Br([e.slice(16,32),r]))).substring(2)!==tr(t,"crypto/mac").toLowerCase())throw new Error("invalid password");const i=$w(t,e.slice(0,16),r);i||Tu.throwError("unsupported cipher",xe.errors.UNSUPPORTED_OPERATION,{operation:"decrypt"});const s=e.slice(32,64),a=vi(i);if(t.address){let c=t.address.toLowerCase();if(c.substring(0,2)!=="0x"&&(c="0x"+c),fr(c)!==a)throw new Error("address mismatch")}const o={_isKeystoreAccount:!0,address:a,privateKey:ke(i)};if(tr(t,"x-ethers/version")==="0.1"){const c=Bi(tr(t,"x-ethers/mnemonicCiphertext")),u=Bi(tr(t,"x-ethers/mnemonicCounter")),h=new qn.Counter(u),p=new qn.ModeOfOperation.ctr(s,h),m=tr(t,"x-ethers/path")||Aa,P=tr(t,"x-ethers/locale")||"en",M=ge(p.decrypt(c));try{const R=ml(M,P),E=nn.fromMnemonic(R,null,P).derivePath(m);if(E.privateKey!=o.privateKey)throw new Error("mnemonic mismatch");o.mnemonic=E.mnemonic}catch(R){if(R.code!==xe.errors.INVALID_ARGUMENT||R.argument!=="wordlist")throw R}}return new Lw(o)}function Fp(t,e,r,n,i){return ge(gl(t,e,r,n,i))}function qw(t,e,r,n,i){return Promise.resolve(Fp(t,e,r,n,i))}function Hp(t,e,r,n,i){const s=wl(e),a=tr(t,"crypto/kdf");if(a&&typeof a=="string"){const o=function(c,u){return Tu.throwArgumentError("invalid key-derivation function parameters",c,u)};if(a.toLowerCase()==="scrypt"){const c=Bi(tr(t,"crypto/kdfparams/salt")),u=parseInt(tr(t,"crypto/kdfparams/n")),h=parseInt(tr(t,"crypto/kdfparams/r")),p=parseInt(tr(t,"crypto/kdfparams/p"));(!u||!h||!p)&&o("kdf",a),u&u-1&&o("N",u);const m=parseInt(tr(t,"crypto/kdfparams/dklen"));return m!==32&&o("dklen",m),n(s,c,u,h,p,64,i)}else if(a.toLowerCase()==="pbkdf2"){const c=Bi(tr(t,"crypto/kdfparams/salt"));let u=null;const h=tr(t,"crypto/kdfparams/prf");h==="hmac-sha256"?u="sha256":h==="hmac-sha512"?u="sha512":o("prf",h);const p=parseInt(tr(t,"crypto/kdfparams/c")),m=parseInt(tr(t,"crypto/kdfparams/dklen"));return m!==32&&o("dklen",m),r(s,c,p,m,u)}}return Tu.throwArgumentError("unsupported key-derivation function","kdf",a)}function Fw(t,e){const r=JSON.parse(t),n=Hp(r,e,Fp,vl.syncScrypt);return qp(r,n)}function Hw(t,e,r){return Dw(this,void 0,void 0,function*(){const n=JSON.parse(t),i=yield Hp(n,e,qw,vl.scrypt,r);return qp(n,i)})}function Kw(t,e,r,n){try{if(fr(t.address)!==vi(t.privateKey))throw new Error("address/privateKey mismatch");if(Xd(t)){const E=t.mnemonic;if(nn.fromMnemonic(E.phrase,null,E.locale).derivePath(E.path||Aa).privateKey!=t.privateKey)throw new Error("mnemonic mismatch")}}catch(E){return Promise.reject(E)}typeof r=="function"&&!n&&(n=r,r={}),r||(r={});const i=ge(t.privateKey),s=wl(e);let a=null,o=null,c=null;if(Xd(t)){const E=t.mnemonic;a=ge(Bp(E.phrase,E.locale||"en")),o=E.path||Aa,c=E.locale||"en"}let u=r.client;u||(u="ethers.js");let h=null;r.salt?h=ge(r.salt):h=ua(32);let p=null;if(r.iv){if(p=ge(r.iv),p.length!==16)throw new Error("invalid iv")}else p=ua(16);let m=null;if(r.uuid){if(m=ge(r.uuid),m.length!==16)throw new Error("invalid uuid")}else m=ua(16);let P=1<<17,M=8,R=1;return r.scrypt&&(r.scrypt.N&&(P=r.scrypt.N),r.scrypt.r&&(M=r.scrypt.r),r.scrypt.p&&(R=r.scrypt.p)),vl.scrypt(s,h,P,M,R,64,n).then(E=>{E=ge(E);const L=E.slice(0,16),W=E.slice(16,32),z=E.slice(32,64),D=new qn.Counter(p),U=new qn.ModeOfOperation.ctr(L,D),Y=ge(U.encrypt(i)),oe=hr(Br([W,Y])),X={address:t.address.substring(2).toLowerCase(),id:Bw(m),version:3,crypto:{cipher:"aes-128-ctr",cipherparams:{iv:ke(p).substring(2)},ciphertext:ke(Y).substring(2),kdf:"scrypt",kdfparams:{salt:ke(h).substring(2),n:P,dklen:32,p:R,r:M},mac:oe.substring(2)}};if(a){const ee=ua(16),se=new qn.Counter(ee),T=new qn.ModeOfOperation.ctr(z,se),f=ge(T.encrypt(a)),d=new Date,y=d.getUTCFullYear()+"-"+na(d.getUTCMonth()+1,2)+"-"+na(d.getUTCDate(),2)+"T"+na(d.getUTCHours(),2)+"-"+na(d.getUTCMinutes(),2)+"-"+na(d.getUTCSeconds(),2)+".0Z";X["x-ethers"]={client:u,gethFilename:"UTC--"+y+"--"+X.address,mnemonicCounter:ke(ee).substring(2),mnemonicCiphertext:ke(f).substring(2),path:o,locale:c,version:"0.1"}}return JSON.stringify(X)})}function zw(t,e,r){if(Dp(t)){r&&r(0);const n=Np(t,e);return r&&r(1),Promise.resolve(n)}return Lp(t)?Hw(t,e,r):Promise.reject(new Error("invalid JSON wallet"))}function jw(t,e){if(Dp(t))return Np(t,e);if(Lp(t))return Fw(t,e);throw new Error("invalid JSON wallet")}const Gw="wallet/5.7.0";var Zd=function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(h){try{u(n.next(h))}catch(p){a(p)}}function c(h){try{u(n.throw(h))}catch(p){a(p)}}function u(h){h.done?s(h.value):i(h.value).then(o,c)}u((n=n.apply(t,e||[])).next())})};const ns=new xe(Gw);function Ww(t){return t!=null&&ir(t.privateKey,32)&&t.address!=null}function Vw(t){const e=t.mnemonic;return e&&e.phrase}class bi extends Ka{constructor(e,r){if(super(),Ww(e)){const n=new ws(e.privateKey);if(he(this,"_signingKey",()=>n),he(this,"address",vi(this.publicKey)),this.address!==fr(e.address)&&ns.throwArgumentError("privateKey/address mismatch","privateKey","[REDACTED]"),Vw(e)){const i=e.mnemonic;he(this,"_mnemonic",()=>({phrase:i.phrase,path:i.path||Aa,locale:i.locale||"en"}));const s=this.mnemonic,a=nn.fromMnemonic(s.phrase,null,s.locale).derivePath(s.path);vi(a.privateKey)!==this.address&&ns.throwArgumentError("mnemonic/address mismatch","privateKey","[REDACTED]")}else he(this,"_mnemonic",()=>null)}else{if(ws.isSigningKey(e))e.curve!=="secp256k1"&&ns.throwArgumentError("unsupported curve; must be secp256k1","privateKey","[REDACTED]"),he(this,"_signingKey",()=>e);else{typeof e=="string"&&e.match(/^[0-9a-f]*$/i)&&e.length===64&&(e="0x"+e);const n=new ws(e);he(this,"_signingKey",()=>n)}he(this,"_mnemonic",()=>null),he(this,"address",vi(this.publicKey))}r&&!Rp.isProvider(r)&&ns.throwArgumentError("invalid provider","provider",r),he(this,"provider",r||null)}get mnemonic(){return this._mnemonic()}get privateKey(){return this._signingKey().privateKey}get publicKey(){return this._signingKey().publicKey}getAddress(){return Promise.resolve(this.address)}connect(e){return new bi(this,e)}signTransaction(e){return Xn(e).then(r=>{r.from!=null&&(fr(r.from)!==this.address&&ns.throwArgumentError("transaction from address mismatch","transaction.from",e.from),delete r.from);const n=this._signingKey().signDigest(hr(Gd(r)));return Gd(r,n)})}signMessage(e){return Zd(this,void 0,void 0,function*(){return Rd(this._signingKey().signDigest(vc(e)))})}_signTypedData(e,r,n){return Zd(this,void 0,void 0,function*(){const i=yield Ir.resolveNames(e,r,n,s=>(this.provider==null&&ns.throwError("cannot resolve ENS names without a provider",xe.errors.UNSUPPORTED_OPERATION,{operation:"resolveName",value:s}),this.provider.resolveName(s)));return Rd(this._signingKey().signDigest(Ir.hash(i.domain,r,i.value)))})}encrypt(e,r,n){if(typeof r=="function"&&!n&&(n=r,r={}),n&&typeof n!="function")throw new Error("invalid callback");return r||(r={}),Kw(this,e,r,n)}static createRandom(e){let r=ua(16);e||(e={}),e.extraEntropy&&(r=ge(Ni(hr(Br([r,e.extraEntropy])),0,16)));const n=ml(r,e.locale);return bi.fromMnemonic(n,e.path,e.locale)}static fromEncryptedJson(e,r,n){return zw(e,r,n).then(i=>new bi(i))}static fromEncryptedJsonSync(e,r){return new bi(jw(e,r))}static fromMnemonic(e,r,n){return r||(r=Aa),new bi(nn.fromMnemonic(e,null,n).derivePath(r))}}function Jw(t,e){return Sp(vc(t),e)}function Kp(t,e,r,n){return Sp(Ir.hash(t,e,r),n)}class Yw{constructor(e){N(this,"signer");N(this,"publicKey");N(this,"ownerLength",zt[at.ETHEREUM].pubLength);N(this,"signatureLength",zt[at.ETHEREUM].sigLength);N(this,"signatureType",at.ETHEREUM);this.signer=e.getSigner()}async setPublicKey(){const e="sign this message to connect to Bundlr.Network",r=await this.signer.signMessage(e),n=await vc(e),i=_p(ge(n),r);this.publicKey=ue.from(ge(i))}async sign(e){this.publicKey||await this.setPublicKey();const r=await this.signer.signMessage(e);return ue.from(r.slice(2),"hex")}static verify(e,r,n){const i=vi(e);return Jw(r,n)===i}}class _l extends Fa{get publicKey(){return ea.decode(this.pk)}get key(){return ea.decode(this._key)}constructor(e){const r=ea.decode(e);super(ea.encode(r.subarray(0,32)),ea.encode(r.subarray(32,64)))}}const mt={IMPOSSIBLE_CASE:"Impossible case. Please create issue.",TWEAK_ADD:"The tweak was out of range or the resulted private key is invalid",TWEAK_MUL:"The tweak was out of range or equal to zero",CONTEXT_RANDOMIZE_UNKNOW:"Unknow error on context randomization",SECKEY_INVALID:"Private Key is invalid",PUBKEY_PARSE:"Public Key could not be parsed",PUBKEY_SERIALIZE:"Public Key serialization error",PUBKEY_COMBINE:"The sum of the public keys is not valid",SIG_PARSE:"Signature could not be parsed",SIGN:"The nonce generation function failed, or the private key was invalid",RECOVER:"Public key could not be recover",ECDH:"Scalar was invalid (zero or overflow)"};function rn(t,e){if(!t)throw new Error(e)}function lt(t,e,r){if(rn(e instanceof Uint8Array,`Expected ${t} to be an Uint8Array`),r!==void 0)if(Array.isArray(r)){const n=r.join(", "),i=`Expected ${t} to be an Uint8Array with length [${n}]`;rn(r.includes(e.length),i)}else{const n=`Expected ${t} to be an Uint8Array with length ${r}`;rn(e.length===r,n)}}function ki(t){rn(us(t)==="Boolean","Expected compressed to be a Boolean")}function vn(t=r=>new Uint8Array(r),e){return typeof t=="function"&&(t=t(e)),lt("output",t,e),t}function us(t){return Object.prototype.toString.call(t).slice(8,-1)}var Xw=t=>({contextRandomize(e){switch(rn(e===null||e instanceof Uint8Array,"Expected seed to be an Uint8Array or null"),e!==null&&lt("seed",e,32),t.contextRandomize(e)){case 1:throw new Error(mt.CONTEXT_RANDOMIZE_UNKNOW)}},privateKeyVerify(e){return lt("private key",e,32),t.privateKeyVerify(e)===0},privateKeyNegate(e){switch(lt("private key",e,32),t.privateKeyNegate(e)){case 0:return e;case 1:throw new Error(mt.IMPOSSIBLE_CASE)}},privateKeyTweakAdd(e,r){switch(lt("private key",e,32),lt("tweak",r,32),t.privateKeyTweakAdd(e,r)){case 0:return e;case 1:throw new Error(mt.TWEAK_ADD)}},privateKeyTweakMul(e,r){switch(lt("private key",e,32),lt("tweak",r,32),t.privateKeyTweakMul(e,r)){case 0:return e;case 1:throw new Error(mt.TWEAK_MUL)}},publicKeyVerify(e){return lt("public key",e,[33,65]),t.publicKeyVerify(e)===0},publicKeyCreate(e,r=!0,n){switch(lt("private key",e,32),ki(r),n=vn(n,r?33:65),t.publicKeyCreate(n,e)){case 0:return n;case 1:throw new Error(mt.SECKEY_INVALID);case 2:throw new Error(mt.PUBKEY_SERIALIZE)}},publicKeyConvert(e,r=!0,n){switch(lt("public key",e,[33,65]),ki(r),n=vn(n,r?33:65),t.publicKeyConvert(n,e)){case 0:return n;case 1:throw new Error(mt.PUBKEY_PARSE);case 2:throw new Error(mt.PUBKEY_SERIALIZE)}},publicKeyNegate(e,r=!0,n){switch(lt("public key",e,[33,65]),ki(r),n=vn(n,r?33:65),t.publicKeyNegate(n,e)){case 0:return n;case 1:throw new Error(mt.PUBKEY_PARSE);case 2:throw new Error(mt.IMPOSSIBLE_CASE);case 3:throw new Error(mt.PUBKEY_SERIALIZE)}},publicKeyCombine(e,r=!0,n){rn(Array.isArray(e),"Expected public keys to be an Array"),rn(e.length>0,"Expected public keys array will have more than zero items");for(const i of e)lt("public key",i,[33,65]);switch(ki(r),n=vn(n,r?33:65),t.publicKeyCombine(n,e)){case 0:return n;case 1:throw new Error(mt.PUBKEY_PARSE);case 2:throw new Error(mt.PUBKEY_COMBINE);case 3:throw new Error(mt.PUBKEY_SERIALIZE)}},publicKeyTweakAdd(e,r,n=!0,i){switch(lt("public key",e,[33,65]),lt("tweak",r,32),ki(n),i=vn(i,n?33:65),t.publicKeyTweakAdd(i,e,r)){case 0:return i;case 1:throw new Error(mt.PUBKEY_PARSE);case 2:throw new Error(mt.TWEAK_ADD)}},publicKeyTweakMul(e,r,n=!0,i){switch(lt("public key",e,[33,65]),lt("tweak",r,32),ki(n),i=vn(i,n?33:65),t.publicKeyTweakMul(i,e,r)){case 0:return i;case 1:throw new Error(mt.PUBKEY_PARSE);case 2:throw new Error(mt.TWEAK_MUL)}},signatureNormalize(e){switch(lt("signature",e,64),t.signatureNormalize(e)){case 0:return e;case 1:throw new Error(mt.SIG_PARSE)}},signatureExport(e,r){lt("signature",e,64),r=vn(r,72);const n={output:r,outputlen:72};switch(t.signatureExport(n,e)){case 0:return r.slice(0,n.outputlen);case 1:throw new Error(mt.SIG_PARSE);case 2:throw new Error(mt.IMPOSSIBLE_CASE)}},signatureImport(e,r){switch(lt("signature",e),r=vn(r,64),t.signatureImport(r,e)){case 0:return r;case 1:throw new Error(mt.SIG_PARSE);case 2:throw new Error(mt.IMPOSSIBLE_CASE)}},ecdsaSign(e,r,n={},i){lt("message",e,32),lt("private key",r,32),rn(us(n)==="Object","Expected options to be an Object"),n.data!==void 0&&lt("options.data",n.data),n.noncefn!==void 0&&rn(us(n.noncefn)==="Function","Expected options.noncefn to be a Function"),i=vn(i,64);const s={signature:i,recid:null};switch(t.ecdsaSign(s,e,r,n.data,n.noncefn)){case 0:return s;case 1:throw new Error(mt.SIGN);case 2:throw new Error(mt.IMPOSSIBLE_CASE)}},ecdsaVerify(e,r,n){switch(lt("signature",e,64),lt("message",r,32),lt("public key",n,[33,65]),t.ecdsaVerify(e,r,n)){case 0:return!0;case 3:return!1;case 1:throw new Error(mt.SIG_PARSE);case 2:throw new Error(mt.PUBKEY_PARSE)}},ecdsaRecover(e,r,n,i=!0,s){switch(lt("signature",e,64),rn(us(r)==="Number"&&r>=0&&r<=3,"Expected recovery id to be a Number within interval [0, 3]"),lt("message",n,32),ki(i),s=vn(s,i?33:65),t.ecdsaRecover(s,e,r,n)){case 0:return s;case 1:throw new Error(mt.SIG_PARSE);case 2:throw new Error(mt.RECOVER);case 3:throw new Error(mt.IMPOSSIBLE_CASE)}},ecdh(e,r,n={},i){switch(lt("public key",e,[33,65]),lt("private key",r,32),rn(us(n)==="Object","Expected options to be an Object"),n.data!==void 0&&lt("options.data",n.data),n.hashfn!==void 0?(rn(us(n.hashfn)==="Function","Expected options.hashfn to be a Function"),n.xbuf!==void 0&&lt("options.xbuf",n.xbuf,32),n.ybuf!==void 0&&lt("options.ybuf",n.ybuf,32),lt("output",i)):i=vn(i,32),t.ecdh(i,e,r,n.data,n.hashfn,n.xbuf,n.ybuf)){case 0:return i;case 1:throw new Error(mt.PUBKEY_PARSE);case 2:throw new Error(mt.ECDH)}}});const Zw=Rg().ec,Un=new Zw("secp256k1"),it=Un.curve,$t=it.n.constructor;function Qw(t,e){let r=new $t(e);if(r.cmp(it.p)>=0)return null;r=r.toRed(it.red);let n=r.redSqr().redIMul(r).redIAdd(it.b).redSqrt();return t===3!==n.isOdd()&&(n=n.redNeg()),Un.keyPair({pub:{x:r,y:n}})}function e2(t,e,r){let n=new $t(e),i=new $t(r);if(n.cmp(it.p)>=0||i.cmp(it.p)>=0||(n=n.toRed(it.red),i=i.toRed(it.red),(t===6||t===7)&&i.isOdd()!==(t===7)))return null;const s=n.redSqr().redIMul(n);return i.redSqr().redISub(s.redIAdd(it.b)).isZero()?Un.keyPair({pub:{x:n,y:i}}):null}function ci(t){const e=t[0];switch(e){case 2:case 3:return t.length!==33?null:Qw(e,t.subarray(1,33));case 4:case 6:case 7:return t.length!==65?null:e2(e,t.subarray(1,33),t.subarray(33,65));default:return null}}function Mi(t,e){const r=e.encode(null,t.length===33);for(let n=0;n<t.length;++n)t[n]=r[n]}var t2={contextRandomize(){return 0},privateKeyVerify(t){const e=new $t(t);return e.cmp(it.n)<0&&!e.isZero()?0:1},privateKeyNegate(t){const e=new $t(t),r=it.n.sub(e).umod(it.n).toArrayLike(Uint8Array,"be",32);return t.set(r),0},privateKeyTweakAdd(t,e){const r=new $t(e);if(r.cmp(it.n)>=0||(r.iadd(new $t(t)),r.cmp(it.n)>=0&&r.isub(it.n),r.isZero()))return 1;const n=r.toArrayLike(Uint8Array,"be",32);return t.set(n),0},privateKeyTweakMul(t,e){let r=new $t(e);if(r.cmp(it.n)>=0||r.isZero())return 1;r.imul(new $t(t)),r.cmp(it.n)>=0&&(r=r.umod(it.n));const n=r.toArrayLike(Uint8Array,"be",32);return t.set(n),0},publicKeyVerify(t){return ci(t)===null?1:0},publicKeyCreate(t,e){const r=new $t(e);if(r.cmp(it.n)>=0||r.isZero())return 1;const n=Un.keyFromPrivate(e).getPublic();return Mi(t,n),0},publicKeyConvert(t,e){const r=ci(e);if(r===null)return 1;const n=r.getPublic();return Mi(t,n),0},publicKeyNegate(t,e){const r=ci(e);if(r===null)return 1;const n=r.getPublic();return n.y=n.y.redNeg(),Mi(t,n),0},publicKeyCombine(t,e){const r=new Array(e.length);for(let i=0;i<e.length;++i)if(r[i]=ci(e[i]),r[i]===null)return 1;let n=r[0].getPublic();for(let i=1;i<r.length;++i)n=n.add(r[i].pub);return n.isInfinity()?2:(Mi(t,n),0)},publicKeyTweakAdd(t,e,r){const n=ci(e);if(n===null)return 1;if(r=new $t(r),r.cmp(it.n)>=0)return 2;const i=n.getPublic().add(it.g.mul(r));return i.isInfinity()?2:(Mi(t,i),0)},publicKeyTweakMul(t,e,r){const n=ci(e);if(n===null)return 1;if(r=new $t(r),r.cmp(it.n)>=0||r.isZero())return 2;const i=n.getPublic().mul(r);return Mi(t,i),0},signatureNormalize(t){const e=new $t(t.subarray(0,32)),r=new $t(t.subarray(32,64));return e.cmp(it.n)>=0||r.cmp(it.n)>=0?1:(r.cmp(Un.nh)===1&&t.set(it.n.sub(r).toArrayLike(Uint8Array,"be",32),32),0)},signatureExport(t,e){const r=e.subarray(0,32),n=e.subarray(32,64);if(new $t(r).cmp(it.n)>=0||new $t(n).cmp(it.n)>=0)return 1;const{output:i}=t;let s=i.subarray(4,37);s[0]=0,s.set(r,1);let a=33,o=0;for(;a>1&&s[o]===0&&!(s[o+1]&128);--a,++o);if(s=s.subarray(o),s[0]&128||a>1&&s[0]===0&&!(s[1]&128))return 1;let c=i.subarray(39,72);c[0]=0,c.set(n,1);let u=33,h=0;for(;u>1&&c[h]===0&&!(c[h+1]&128);--u,++h);return c=c.subarray(h),c[0]&128||u>1&&c[0]===0&&!(c[1]&128)?1:(t.outputlen=6+a+u,i[0]=48,i[1]=t.outputlen-2,i[2]=2,i[3]=s.length,i.set(s,4),i[4+a]=2,i[5+a]=c.length,i.set(c,6+a),0)},signatureImport(t,e){if(e.length<8||e.length>72||e[0]!==48||e[1]!==e.length-2||e[2]!==2)return 1;const r=e[3];if(r===0||5+r>=e.length||e[4+r]!==2)return 1;const n=e[5+r];if(n===0||6+r+n!==e.length||e[4]&128||r>1&&e[4]===0&&!(e[5]&128)||e[r+6]&128||n>1&&e[r+6]===0&&!(e[r+7]&128))return 1;let i=e.subarray(4,4+r);if(i.length===33&&i[0]===0&&(i=i.subarray(1)),i.length>32)return 1;let s=e.subarray(6+r);if(s.length===33&&s[0]===0&&(s=s.slice(1)),s.length>32)throw new Error("S length is too long");let a=new $t(i);a.cmp(it.n)>=0&&(a=new $t(0));let o=new $t(e.subarray(6+r));return o.cmp(it.n)>=0&&(o=new $t(0)),t.set(a.toArrayLike(Uint8Array,"be",32),0),t.set(o.toArrayLike(Uint8Array,"be",32),32),0},ecdsaSign(t,e,r,n,i){if(i){const o=i;i=c=>{const u=o(e,r,null,n,c);if(!(u instanceof Uint8Array&&u.length===32))throw new Error("This is the way");return new $t(u)}}const s=new $t(r);if(s.cmp(it.n)>=0||s.isZero())return 1;let a;try{a=Un.sign(e,r,{canonical:!0,k:i,pers:n})}catch{return 1}return t.signature.set(a.r.toArrayLike(Uint8Array,"be",32),0),t.signature.set(a.s.toArrayLike(Uint8Array,"be",32),32),t.recid=a.recoveryParam,0},ecdsaVerify(t,e,r){const n={r:t.subarray(0,32),s:t.subarray(32,64)},i=new $t(n.r),s=new $t(n.s);if(i.cmp(it.n)>=0||s.cmp(it.n)>=0)return 1;if(s.cmp(Un.nh)===1||i.isZero()||s.isZero())return 3;const a=ci(r);if(a===null)return 2;const o=a.getPublic();return Un.verify(e,n,o)?0:3},ecdsaRecover(t,e,r,n){const i={r:e.slice(0,32),s:e.slice(32,64)},s=new $t(i.r),a=new $t(i.s);if(s.cmp(it.n)>=0||a.cmp(it.n)>=0)return 1;if(s.isZero()||a.isZero())return 2;let o;try{o=Un.recoverPubKey(n,i,r)}catch{return 2}return Mi(t,o),0},ecdh(t,e,r,n,i,s,a){const o=ci(e);if(o===null)return 1;const c=new $t(r);if(c.cmp(it.n)>=0||c.isZero())return 2;const u=o.getPublic().mul(c);if(i===void 0){const h=u.encode(null,!0),p=Un.hash().update(h).digest();for(let m=0;m<32;++m)t[m]=p[m]}else{s||(s=new Uint8Array(32));const h=u.getX().toArray("be",32);for(let M=0;M<32;++M)s[M]=h[M];a||(a=new Uint8Array(32));const p=u.getY().toArray("be",32);for(let M=0;M<32;++M)a[M]=p[M];const m=i(s,a,n);if(!(m instanceof Uint8Array&&m.length===t.length))return 2;t.set(m)}return 0}},r2=Xw(t2);const Xo=pn(r2);var Ru={exports:{}},zp=Ku.EventEmitter,Of,Qd;function n2(){if(Qd)return Of;Qd=1;function t(M,R){var E=Object.keys(M);if(Object.getOwnPropertySymbols){var L=Object.getOwnPropertySymbols(M);R&&(L=L.filter(function(W){return Object.getOwnPropertyDescriptor(M,W).enumerable})),E.push.apply(E,L)}return E}function e(M){for(var R=1;R<arguments.length;R++){var E=arguments[R]!=null?arguments[R]:{};R%2?t(Object(E),!0).forEach(function(L){r(M,L,E[L])}):Object.getOwnPropertyDescriptors?Object.defineProperties(M,Object.getOwnPropertyDescriptors(E)):t(Object(E)).forEach(function(L){Object.defineProperty(M,L,Object.getOwnPropertyDescriptor(E,L))})}return M}function r(M,R,E){return R=a(R),R in M?Object.defineProperty(M,R,{value:E,enumerable:!0,configurable:!0,writable:!0}):M[R]=E,M}function n(M,R){if(!(M instanceof R))throw new TypeError("Cannot call a class as a function")}function i(M,R){for(var E=0;E<R.length;E++){var L=R[E];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(M,a(L.key),L)}}function s(M,R,E){return R&&i(M.prototype,R),E&&i(M,E),Object.defineProperty(M,"prototype",{writable:!1}),M}function a(M){var R=o(M,"string");return typeof R=="symbol"?R:String(R)}function o(M,R){if(typeof M!="object"||M===null)return M;var E=M[Symbol.toPrimitive];if(E!==void 0){var L=E.call(M,R||"default");if(typeof L!="object")return L;throw new TypeError("@@toPrimitive must return a primitive value.")}return(R==="string"?String:Number)(M)}var c=Na,u=c.Buffer,h=uh,p=h.inspect,m=p&&p.custom||"inspect";function P(M,R,E){u.prototype.copy.call(M,R,E)}return Of=function(){function M(){n(this,M),this.head=null,this.tail=null,this.length=0}return s(M,[{key:"push",value:function(E){var L={data:E,next:null};this.length>0?this.tail.next=L:this.head=L,this.tail=L,++this.length}},{key:"unshift",value:function(E){var L={data:E,next:this.head};this.length===0&&(this.tail=L),this.head=L,++this.length}},{key:"shift",value:function(){if(this.length!==0){var E=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,E}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(E){if(this.length===0)return"";for(var L=this.head,W=""+L.data;L=L.next;)W+=E+L.data;return W}},{key:"concat",value:function(E){if(this.length===0)return u.alloc(0);for(var L=u.allocUnsafe(E>>>0),W=this.head,z=0;W;)P(W.data,L,z),z+=W.data.length,W=W.next;return L}},{key:"consume",value:function(E,L){var W;return E<this.head.data.length?(W=this.head.data.slice(0,E),this.head.data=this.head.data.slice(E)):E===this.head.data.length?W=this.shift():W=L?this._getString(E):this._getBuffer(E),W}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(E){var L=this.head,W=1,z=L.data;for(E-=z.length;L=L.next;){var D=L.data,U=E>D.length?D.length:E;if(U===D.length?z+=D:z+=D.slice(0,E),E-=U,E===0){U===D.length?(++W,L.next?this.head=L.next:this.head=this.tail=null):(this.head=L,L.data=D.slice(U));break}++W}return this.length-=W,z}},{key:"_getBuffer",value:function(E){var L=u.allocUnsafe(E),W=this.head,z=1;for(W.data.copy(L),E-=W.data.length;W=W.next;){var D=W.data,U=E>D.length?D.length:E;if(D.copy(L,L.length-E,0,U),E-=U,E===0){U===D.length?(++z,W.next?this.head=W.next:this.head=this.tail=null):(this.head=W,W.data=D.slice(U));break}++z}return this.length-=z,L}},{key:m,value:function(E,L){return p(this,e(e({},L),{},{depth:0,customInspect:!1}))}}]),M}(),Of}function i2(t,e){var r=this,n=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return n||i?(e?e(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,Rt.nextTick(Pu,this,t)):Rt.nextTick(Pu,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(s){!e&&s?r._writableState?r._writableState.errorEmitted?Rt.nextTick(Bo,r):(r._writableState.errorEmitted=!0,Rt.nextTick(e0,r,s)):Rt.nextTick(e0,r,s):e?(Rt.nextTick(Bo,r),e(s)):Rt.nextTick(Bo,r)}),this)}function e0(t,e){Pu(t,e),Bo(t)}function Bo(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function s2(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function Pu(t,e){t.emit("error",e)}function a2(t,e){var r=t._readableState,n=t._writableState;r&&r.autoDestroy||n&&n.autoDestroy?t.destroy(e):t.emit("error",e)}var jp={destroy:i2,undestroy:s2,errorOrDestroy:a2},Gi={};function o2(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var Gp={};function mn(t,e,r){r||(r=Error);function n(s,a,o){return typeof e=="string"?e:e(s,a,o)}var i=function(s){o2(a,s);function a(o,c,u){return s.call(this,n(o,c,u))||this}return a}(r);i.prototype.name=r.name,i.prototype.code=t,Gp[t]=i}function t0(t,e){if(Array.isArray(t)){var r=t.length;return t=t.map(function(n){return String(n)}),r>2?"one of ".concat(e," ").concat(t.slice(0,r-1).join(", "),", or ")+t[r-1]:r===2?"one of ".concat(e," ").concat(t[0]," or ").concat(t[1]):"of ".concat(e," ").concat(t[0])}else return"of ".concat(e," ").concat(String(t))}function c2(t,e,r){return t.substr(!r||r<0?0:+r,e.length)===e}function f2(t,e,r){return(r===void 0||r>t.length)&&(r=t.length),t.substring(r-e.length,r)===e}function u2(t,e,r){return typeof r!="number"&&(r=0),r+e.length>t.length?!1:t.indexOf(e,r)!==-1}mn("ERR_INVALID_OPT_VALUE",function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'},TypeError);mn("ERR_INVALID_ARG_TYPE",function(t,e,r){var n;typeof e=="string"&&c2(e,"not ")?(n="must not be",e=e.replace(/^not /,"")):n="must be";var i;if(f2(t," argument"))i="The ".concat(t," ").concat(n," ").concat(t0(e,"type"));else{var s=u2(t,".")?"property":"argument";i='The "'.concat(t,'" ').concat(s," ").concat(n," ").concat(t0(e,"type"))}return i+=". Received type ".concat(typeof r),i},TypeError);mn("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");mn("ERR_METHOD_NOT_IMPLEMENTED",function(t){return"The "+t+" method is not implemented"});mn("ERR_STREAM_PREMATURE_CLOSE","Premature close");mn("ERR_STREAM_DESTROYED",function(t){return"Cannot call "+t+" after a stream was destroyed"});mn("ERR_MULTIPLE_CALLBACK","Callback called multiple times");mn("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");mn("ERR_STREAM_WRITE_AFTER_END","write after end");mn("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);mn("ERR_UNKNOWN_ENCODING",function(t){return"Unknown encoding: "+t},TypeError);mn("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");Gi.codes=Gp;var l2=Gi.codes.ERR_INVALID_OPT_VALUE;function d2(t,e,r){return t.highWaterMark!=null?t.highWaterMark:e?t[r]:null}function h2(t,e,r,n){var i=d2(e,n,r);if(i!=null){if(!(isFinite(i)&&Math.floor(i)===i)||i<0){var s=n?r:"highWaterMark";throw new l2(s,i)}return Math.floor(i)}return t.objectMode?16:16*1024}var Wp={getHighWaterMark:h2},Nf,r0;function Vp(){if(r0)return Nf;r0=1,Nf=X;function t(O){var j=this;this.next=null,this.entry=null,this.finish=function(){H(j,O)}}var e;X.WritableState=Y;var r={deprecate:Pg()},n=zp,i=Na.Buffer,s=(typeof Ze<"u"?Ze:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function a(O){return i.from(O)}function o(O){return i.isBuffer(O)||O instanceof s}var c=jp,u=Wp,h=u.getHighWaterMark,p=Gi.codes,m=p.ERR_INVALID_ARG_TYPE,P=p.ERR_METHOD_NOT_IMPLEMENTED,M=p.ERR_MULTIPLE_CALLBACK,R=p.ERR_STREAM_CANNOT_PIPE,E=p.ERR_STREAM_DESTROYED,L=p.ERR_STREAM_NULL_VALUES,W=p.ERR_STREAM_WRITE_AFTER_END,z=p.ERR_UNKNOWN_ENCODING,D=c.errorOrDestroy;xn(X,n);function U(){}function Y(O,j,re){e=e||ks(),O=O||{},typeof re!="boolean"&&(re=j instanceof e),this.objectMode=!!O.objectMode,re&&(this.objectMode=this.objectMode||!!O.writableObjectMode),this.highWaterMark=h(this,O,"writableHighWaterMark",re),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var ie=O.decodeStrings===!1;this.decodeStrings=!ie,this.defaultEncoding=O.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(ye){S(j,ye)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=O.emitClose!==!1,this.autoDestroy=!!O.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new t(this)}Y.prototype.getBuffer=function(){for(var j=this.bufferedRequest,re=[];j;)re.push(j),j=j.next;return re},function(){try{Object.defineProperty(Y.prototype,"buffer",{get:r.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var oe;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(oe=Function.prototype[Symbol.hasInstance],Object.defineProperty(X,Symbol.hasInstance,{value:function(j){return oe.call(this,j)?!0:this!==X?!1:j&&j._writableState instanceof Y}})):oe=function(j){return j instanceof this};function X(O){e=e||ks();var j=this instanceof e;if(!j&&!oe.call(X,this))return new X(O);this._writableState=new Y(O,this,j),this.writable=!0,O&&(typeof O.write=="function"&&(this._write=O.write),typeof O.writev=="function"&&(this._writev=O.writev),typeof O.destroy=="function"&&(this._destroy=O.destroy),typeof O.final=="function"&&(this._final=O.final)),n.call(this)}X.prototype.pipe=function(){D(this,new R)};function ee(O,j){var re=new W;D(O,re),Rt.nextTick(j,re)}function se(O,j,re,ie){var ye;return re===null?ye=new L:typeof re!="string"&&!j.objectMode&&(ye=new m("chunk",["string","Buffer"],re)),ye?(D(O,ye),Rt.nextTick(ie,ye),!1):!0}X.prototype.write=function(O,j,re){var ie=this._writableState,ye=!1,I=!ie.objectMode&&o(O);return I&&!i.isBuffer(O)&&(O=a(O)),typeof j=="function"&&(re=j,j=null),I?j="buffer":j||(j=ie.defaultEncoding),typeof re!="function"&&(re=U),ie.ending?ee(this,re):(I||se(this,ie,O,re))&&(ie.pendingcb++,ye=f(this,ie,I,O,j,re)),ye},X.prototype.cork=function(){this._writableState.corked++},X.prototype.uncork=function(){var O=this._writableState;O.corked&&(O.corked--,!O.writing&&!O.corked&&!O.bufferProcessing&&O.bufferedRequest&&k(this,O))},X.prototype.setDefaultEncoding=function(j){if(typeof j=="string"&&(j=j.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((j+"").toLowerCase())>-1))throw new z(j);return this._writableState.defaultEncoding=j,this},Object.defineProperty(X.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function T(O,j,re){return!O.objectMode&&O.decodeStrings!==!1&&typeof j=="string"&&(j=i.from(j,re)),j}Object.defineProperty(X.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function f(O,j,re,ie,ye,I){if(!re){var C=T(j,ie,ye);ie!==C&&(re=!0,ye="buffer",ie=C)}var ne=j.objectMode?1:ie.length;j.length+=ne;var Ee=j.length<j.highWaterMark;if(Ee||(j.needDrain=!0),j.writing||j.corked){var Le=j.lastBufferedRequest;j.lastBufferedRequest={chunk:ie,encoding:ye,isBuf:re,callback:I,next:null},Le?Le.next=j.lastBufferedRequest:j.bufferedRequest=j.lastBufferedRequest,j.bufferedRequestCount+=1}else d(O,j,!1,ne,ie,ye,I);return Ee}function d(O,j,re,ie,ye,I,C){j.writelen=ie,j.writecb=C,j.writing=!0,j.sync=!0,j.destroyed?j.onwrite(new E("write")):re?O._writev(ye,j.onwrite):O._write(ye,I,j.onwrite),j.sync=!1}function y(O,j,re,ie,ye){--j.pendingcb,re?(Rt.nextTick(ye,ie),Rt.nextTick(V,O,j),O._writableState.errorEmitted=!0,D(O,ie)):(ye(ie),O._writableState.errorEmitted=!0,D(O,ie),V(O,j))}function w(O){O.writing=!1,O.writecb=null,O.length-=O.writelen,O.writelen=0}function S(O,j){var re=O._writableState,ie=re.sync,ye=re.writecb;if(typeof ye!="function")throw new M;if(w(re),j)y(O,re,ie,j,ye);else{var I=x(re)||O.destroyed;!I&&!re.corked&&!re.bufferProcessing&&re.bufferedRequest&&k(O,re),ie?Rt.nextTick(B,O,re,I,ye):B(O,re,I,ye)}}function B(O,j,re,ie){re||$(O,j),j.pendingcb--,ie(),V(O,j)}function $(O,j){j.length===0&&j.needDrain&&(j.needDrain=!1,O.emit("drain"))}function k(O,j){j.bufferProcessing=!0;var re=j.bufferedRequest;if(O._writev&&re&&re.next){var ie=j.bufferedRequestCount,ye=new Array(ie),I=j.corkedRequestsFree;I.entry=re;for(var C=0,ne=!0;re;)ye[C]=re,re.isBuf||(ne=!1),re=re.next,C+=1;ye.allBuffers=ne,d(O,j,!0,j.length,ye,"",I.finish),j.pendingcb++,j.lastBufferedRequest=null,I.next?(j.corkedRequestsFree=I.next,I.next=null):j.corkedRequestsFree=new t(j),j.bufferedRequestCount=0}else{for(;re;){var Ee=re.chunk,Le=re.encoding,Pe=re.callback,rt=j.objectMode?1:Ee.length;if(d(O,j,!1,rt,Ee,Le,Pe),re=re.next,j.bufferedRequestCount--,j.writing)break}re===null&&(j.lastBufferedRequest=null)}j.bufferedRequest=re,j.bufferProcessing=!1}X.prototype._write=function(O,j,re){re(new P("_write()"))},X.prototype._writev=null,X.prototype.end=function(O,j,re){var ie=this._writableState;return typeof O=="function"?(re=O,O=null,j=null):typeof j=="function"&&(re=j,j=null),O!=null&&this.write(O,j),ie.corked&&(ie.corked=1,this.uncork()),ie.ending||K(this,ie,re),this},Object.defineProperty(X.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function x(O){return O.ending&&O.length===0&&O.bufferedRequest===null&&!O.finished&&!O.writing}function b(O,j){O._final(function(re){j.pendingcb--,re&&D(O,re),j.prefinished=!0,O.emit("prefinish"),V(O,j)})}function F(O,j){!j.prefinished&&!j.finalCalled&&(typeof O._final=="function"&&!j.destroyed?(j.pendingcb++,j.finalCalled=!0,Rt.nextTick(b,O,j)):(j.prefinished=!0,O.emit("prefinish")))}function V(O,j){var re=x(j);if(re&&(F(O,j),j.pendingcb===0&&(j.finished=!0,O.emit("finish"),j.autoDestroy))){var ie=O._readableState;(!ie||ie.autoDestroy&&ie.endEmitted)&&O.destroy()}return re}function K(O,j,re){j.ending=!0,V(O,j),re&&(j.finished?Rt.nextTick(re):O.once("finish",re)),j.ended=!0,O.writable=!1}function H(O,j,re){var ie=O.entry;for(O.entry=null;ie;){var ye=ie.callback;j.pendingcb--,ye(re),ie=ie.next}j.corkedRequestsFree.next=O}return Object.defineProperty(X.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(j){this._writableState&&(this._writableState.destroyed=j)}}),X.prototype.destroy=c.destroy,X.prototype._undestroy=c.undestroy,X.prototype._destroy=function(O,j){j(O)},Nf}var Df,n0;function ks(){if(n0)return Df;n0=1;var t=Object.keys||function(u){var h=[];for(var p in u)h.push(p);return h};Df=a;var e=Yp(),r=Vp();xn(a,e);for(var n=t(r.prototype),i=0;i<n.length;i++){var s=n[i];a.prototype[s]||(a.prototype[s]=r.prototype[s])}function a(u){if(!(this instanceof a))return new a(u);e.call(this,u),r.call(this,u),this.allowHalfOpen=!0,u&&(u.readable===!1&&(this.readable=!1),u.writable===!1&&(this.writable=!1),u.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",o)))}Object.defineProperty(a.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(a.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(a.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function o(){this._writableState.ended||Rt.nextTick(c,this)}function c(u){u.end()}return Object.defineProperty(a.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(h){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=h,this._writableState.destroyed=h)}}),Df}var i0=Gi.codes.ERR_STREAM_PREMATURE_CLOSE;function p2(t){var e=!1;return function(){if(!e){e=!0;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];t.apply(this,n)}}}function x2(){}function y2(t){return t.setHeader&&typeof t.abort=="function"}function Jp(t,e,r){if(typeof e=="function")return Jp(t,null,e);e||(e={}),r=p2(r||x2);var n=e.readable||e.readable!==!1&&t.readable,i=e.writable||e.writable!==!1&&t.writable,s=function(){t.writable||o()},a=t._writableState&&t._writableState.finished,o=function(){i=!1,a=!0,n||r.call(t)},c=t._readableState&&t._readableState.endEmitted,u=function(){n=!1,c=!0,i||r.call(t)},h=function(M){r.call(t,M)},p=function(){var M;if(n&&!c)return(!t._readableState||!t._readableState.ended)&&(M=new i0),r.call(t,M);if(i&&!a)return(!t._writableState||!t._writableState.ended)&&(M=new i0),r.call(t,M)},m=function(){t.req.on("finish",o)};return y2(t)?(t.on("complete",o),t.on("abort",p),t.req?m():t.on("request",m)):i&&!t._writableState&&(t.on("end",s),t.on("close",s)),t.on("end",u),t.on("finish",o),e.error!==!1&&t.on("error",h),t.on("close",p),function(){t.removeListener("complete",o),t.removeListener("abort",p),t.removeListener("request",m),t.req&&t.req.removeListener("finish",o),t.removeListener("end",s),t.removeListener("close",s),t.removeListener("finish",o),t.removeListener("end",u),t.removeListener("error",h),t.removeListener("close",p)}}var El=Jp,Lf,s0;function g2(){if(s0)return Lf;s0=1;var t;function e(z,D,U){return D=r(D),D in z?Object.defineProperty(z,D,{value:U,enumerable:!0,configurable:!0,writable:!0}):z[D]=U,z}function r(z){var D=n(z,"string");return typeof D=="symbol"?D:String(D)}function n(z,D){if(typeof z!="object"||z===null)return z;var U=z[Symbol.toPrimitive];if(U!==void 0){var Y=U.call(z,D||"default");if(typeof Y!="object")return Y;throw new TypeError("@@toPrimitive must return a primitive value.")}return(D==="string"?String:Number)(z)}var i=El,s=Symbol("lastResolve"),a=Symbol("lastReject"),o=Symbol("error"),c=Symbol("ended"),u=Symbol("lastPromise"),h=Symbol("handlePromise"),p=Symbol("stream");function m(z,D){return{value:z,done:D}}function P(z){var D=z[s];if(D!==null){var U=z[p].read();U!==null&&(z[u]=null,z[s]=null,z[a]=null,D(m(U,!1)))}}function M(z){Rt.nextTick(P,z)}function R(z,D){return function(U,Y){z.then(function(){if(D[c]){U(m(void 0,!0));return}D[h](U,Y)},Y)}}var E=Object.getPrototypeOf(function(){}),L=Object.setPrototypeOf((t={get stream(){return this[p]},next:function(){var D=this,U=this[o];if(U!==null)return Promise.reject(U);if(this[c])return Promise.resolve(m(void 0,!0));if(this[p].destroyed)return new Promise(function(ee,se){Rt.nextTick(function(){D[o]?se(D[o]):ee(m(void 0,!0))})});var Y=this[u],oe;if(Y)oe=new Promise(R(Y,this));else{var X=this[p].read();if(X!==null)return Promise.resolve(m(X,!1));oe=new Promise(this[h])}return this[u]=oe,oe}},e(t,Symbol.asyncIterator,function(){return this}),e(t,"return",function(){var D=this;return new Promise(function(U,Y){D[p].destroy(null,function(oe){if(oe){Y(oe);return}U(m(void 0,!0))})})}),t),E),W=function(D){var U,Y=Object.create(L,(U={},e(U,p,{value:D,writable:!0}),e(U,s,{value:null,writable:!0}),e(U,a,{value:null,writable:!0}),e(U,o,{value:null,writable:!0}),e(U,c,{value:D._readableState.endEmitted,writable:!0}),e(U,h,{value:function(X,ee){var se=Y[p].read();se?(Y[u]=null,Y[s]=null,Y[a]=null,X(m(se,!1))):(Y[s]=X,Y[a]=ee)},writable:!0}),U));return Y[u]=null,i(D,function(oe){if(oe&&oe.code!=="ERR_STREAM_PREMATURE_CLOSE"){var X=Y[a];X!==null&&(Y[u]=null,Y[s]=null,Y[a]=null,X(oe)),Y[o]=oe;return}var ee=Y[s];ee!==null&&(Y[u]=null,Y[s]=null,Y[a]=null,ee(m(void 0,!0))),Y[c]=!0}),D.on("readable",M.bind(null,Y)),Y};return Lf=W,Lf}var $f,a0;function b2(){return a0||(a0=1,$f=function(){throw new Error("Readable.from is not available in the browser")}),$f}var qf,o0;function Yp(){if(o0)return qf;o0=1,qf=ee;var t;ee.ReadableState=X,Ku.EventEmitter;var e=function(C,ne){return C.listeners(ne).length},r=zp,n=Na.Buffer,i=(typeof Ze<"u"?Ze:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function s(I){return n.from(I)}function a(I){return n.isBuffer(I)||I instanceof i}var o=uh,c;o&&o.debuglog?c=o.debuglog("stream"):c=function(){};var u=n2(),h=jp,p=Wp,m=p.getHighWaterMark,P=Gi.codes,M=P.ERR_INVALID_ARG_TYPE,R=P.ERR_STREAM_PUSH_AFTER_EOF,E=P.ERR_METHOD_NOT_IMPLEMENTED,L=P.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,W,z,D;xn(ee,r);var U=h.errorOrDestroy,Y=["error","close","destroy","pause","resume"];function oe(I,C,ne){if(typeof I.prependListener=="function")return I.prependListener(C,ne);!I._events||!I._events[C]?I.on(C,ne):Array.isArray(I._events[C])?I._events[C].unshift(ne):I._events[C]=[ne,I._events[C]]}function X(I,C,ne){t=t||ks(),I=I||{},typeof ne!="boolean"&&(ne=C instanceof t),this.objectMode=!!I.objectMode,ne&&(this.objectMode=this.objectMode||!!I.readableObjectMode),this.highWaterMark=m(this,I,"readableHighWaterMark",ne),this.buffer=new u,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=I.emitClose!==!1,this.autoDestroy=!!I.autoDestroy,this.destroyed=!1,this.defaultEncoding=I.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,I.encoding&&(W||(W=ad.StringDecoder),this.decoder=new W(I.encoding),this.encoding=I.encoding)}function ee(I){if(t=t||ks(),!(this instanceof ee))return new ee(I);var C=this instanceof t;this._readableState=new X(I,this,C),this.readable=!0,I&&(typeof I.read=="function"&&(this._read=I.read),typeof I.destroy=="function"&&(this._destroy=I.destroy)),r.call(this)}Object.defineProperty(ee.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(C){this._readableState&&(this._readableState.destroyed=C)}}),ee.prototype.destroy=h.destroy,ee.prototype._undestroy=h.undestroy,ee.prototype._destroy=function(I,C){C(I)},ee.prototype.push=function(I,C){var ne=this._readableState,Ee;return ne.objectMode?Ee=!0:typeof I=="string"&&(C=C||ne.defaultEncoding,C!==ne.encoding&&(I=n.from(I,C),C=""),Ee=!0),se(this,I,C,!1,Ee)},ee.prototype.unshift=function(I){return se(this,I,null,!0,!1)};function se(I,C,ne,Ee,Le){c("readableAddChunk",C);var Pe=I._readableState;if(C===null)Pe.reading=!1,S(I,Pe);else{var rt;if(Le||(rt=f(Pe,C)),rt)U(I,rt);else if(Pe.objectMode||C&&C.length>0)if(typeof C!="string"&&!Pe.objectMode&&Object.getPrototypeOf(C)!==n.prototype&&(C=s(C)),Ee)Pe.endEmitted?U(I,new L):T(I,Pe,C,!0);else if(Pe.ended)U(I,new R);else{if(Pe.destroyed)return!1;Pe.reading=!1,Pe.decoder&&!ne?(C=Pe.decoder.write(C),Pe.objectMode||C.length!==0?T(I,Pe,C,!1):k(I,Pe)):T(I,Pe,C,!1)}else Ee||(Pe.reading=!1,k(I,Pe))}return!Pe.ended&&(Pe.length<Pe.highWaterMark||Pe.length===0)}function T(I,C,ne,Ee){C.flowing&&C.length===0&&!C.sync?(C.awaitDrain=0,I.emit("data",ne)):(C.length+=C.objectMode?1:ne.length,Ee?C.buffer.unshift(ne):C.buffer.push(ne),C.needReadable&&B(I)),k(I,C)}function f(I,C){var ne;return!a(C)&&typeof C!="string"&&C!==void 0&&!I.objectMode&&(ne=new M("chunk",["string","Buffer","Uint8Array"],C)),ne}ee.prototype.isPaused=function(){return this._readableState.flowing===!1},ee.prototype.setEncoding=function(I){W||(W=ad.StringDecoder);var C=new W(I);this._readableState.decoder=C,this._readableState.encoding=this._readableState.decoder.encoding;for(var ne=this._readableState.buffer.head,Ee="";ne!==null;)Ee+=C.write(ne.data),ne=ne.next;return this._readableState.buffer.clear(),Ee!==""&&this._readableState.buffer.push(Ee),this._readableState.length=Ee.length,this};var d=1073741824;function y(I){return I>=d?I=d:(I--,I|=I>>>1,I|=I>>>2,I|=I>>>4,I|=I>>>8,I|=I>>>16,I++),I}function w(I,C){return I<=0||C.length===0&&C.ended?0:C.objectMode?1:I!==I?C.flowing&&C.length?C.buffer.head.data.length:C.length:(I>C.highWaterMark&&(C.highWaterMark=y(I)),I<=C.length?I:C.ended?C.length:(C.needReadable=!0,0))}ee.prototype.read=function(I){c("read",I),I=parseInt(I,10);var C=this._readableState,ne=I;if(I!==0&&(C.emittedReadable=!1),I===0&&C.needReadable&&((C.highWaterMark!==0?C.length>=C.highWaterMark:C.length>0)||C.ended))return c("read: emitReadable",C.length,C.ended),C.length===0&&C.ended?re(this):B(this),null;if(I=w(I,C),I===0&&C.ended)return C.length===0&&re(this),null;var Ee=C.needReadable;c("need readable",Ee),(C.length===0||C.length-I<C.highWaterMark)&&(Ee=!0,c("length less than watermark",Ee)),C.ended||C.reading?(Ee=!1,c("reading or ended",Ee)):Ee&&(c("do read"),C.reading=!0,C.sync=!0,C.length===0&&(C.needReadable=!0),this._read(C.highWaterMark),C.sync=!1,C.reading||(I=w(ne,C)));var Le;return I>0?Le=j(I,C):Le=null,Le===null?(C.needReadable=C.length<=C.highWaterMark,I=0):(C.length-=I,C.awaitDrain=0),C.length===0&&(C.ended||(C.needReadable=!0),ne!==I&&C.ended&&re(this)),Le!==null&&this.emit("data",Le),Le};function S(I,C){if(c("onEofChunk"),!C.ended){if(C.decoder){var ne=C.decoder.end();ne&&ne.length&&(C.buffer.push(ne),C.length+=C.objectMode?1:ne.length)}C.ended=!0,C.sync?B(I):(C.needReadable=!1,C.emittedReadable||(C.emittedReadable=!0,$(I)))}}function B(I){var C=I._readableState;c("emitReadable",C.needReadable,C.emittedReadable),C.needReadable=!1,C.emittedReadable||(c("emitReadable",C.flowing),C.emittedReadable=!0,Rt.nextTick($,I))}function $(I){var C=I._readableState;c("emitReadable_",C.destroyed,C.length,C.ended),!C.destroyed&&(C.length||C.ended)&&(I.emit("readable"),C.emittedReadable=!1),C.needReadable=!C.flowing&&!C.ended&&C.length<=C.highWaterMark,O(I)}function k(I,C){C.readingMore||(C.readingMore=!0,Rt.nextTick(x,I,C))}function x(I,C){for(;!C.reading&&!C.ended&&(C.length<C.highWaterMark||C.flowing&&C.length===0);){var ne=C.length;if(c("maybeReadMore read 0"),I.read(0),ne===C.length)break}C.readingMore=!1}ee.prototype._read=function(I){U(this,new E("_read()"))},ee.prototype.pipe=function(I,C){var ne=this,Ee=this._readableState;switch(Ee.pipesCount){case 0:Ee.pipes=I;break;case 1:Ee.pipes=[Ee.pipes,I];break;default:Ee.pipes.push(I);break}Ee.pipesCount+=1,c("pipe count=%d opts=%j",Ee.pipesCount,C);var Le=(!C||C.end!==!1)&&I!==Rt.stdout&&I!==Rt.stderr,Pe=Le?ht:wr;Ee.endEmitted?Rt.nextTick(Pe):ne.once("end",Pe),I.on("unpipe",rt);function rt(ct,nt){c("onunpipe"),ct===ne&&nt&&nt.hasUnpiped===!1&&(nt.hasUnpiped=!0,It())}function ht(){c("onend"),I.end()}var et=b(ne);I.on("drain",et);var Nr=!1;function It(){c("cleanup"),I.removeListener("close",gt),I.removeListener("finish",vt),I.removeListener("drain",et),I.removeListener("error",Dr),I.removeListener("unpipe",rt),ne.removeListener("end",ht),ne.removeListener("end",wr),ne.removeListener("data",Et),Nr=!0,Ee.awaitDrain&&(!I._writableState||I._writableState.needDrain)&&et()}ne.on("data",Et);function Et(ct){c("ondata");var nt=I.write(ct);c("dest.write",nt),nt===!1&&((Ee.pipesCount===1&&Ee.pipes===I||Ee.pipesCount>1&&ye(Ee.pipes,I)!==-1)&&!Nr&&(c("false write response, pause",Ee.awaitDrain),Ee.awaitDrain++),ne.pause())}function Dr(ct){c("onerror",ct),wr(),I.removeListener("error",Dr),e(I,"error")===0&&U(I,ct)}oe(I,"error",Dr);function gt(){I.removeListener("finish",vt),wr()}I.once("close",gt);function vt(){c("onfinish"),I.removeListener("close",gt),wr()}I.once("finish",vt);function wr(){c("unpipe"),ne.unpipe(I)}return I.emit("pipe",ne),Ee.flowing||(c("pipe resume"),ne.resume()),I};function b(I){return function(){var ne=I._readableState;c("pipeOnDrain",ne.awaitDrain),ne.awaitDrain&&ne.awaitDrain--,ne.awaitDrain===0&&e(I,"data")&&(ne.flowing=!0,O(I))}}ee.prototype.unpipe=function(I){var C=this._readableState,ne={hasUnpiped:!1};if(C.pipesCount===0)return this;if(C.pipesCount===1)return I&&I!==C.pipes?this:(I||(I=C.pipes),C.pipes=null,C.pipesCount=0,C.flowing=!1,I&&I.emit("unpipe",this,ne),this);if(!I){var Ee=C.pipes,Le=C.pipesCount;C.pipes=null,C.pipesCount=0,C.flowing=!1;for(var Pe=0;Pe<Le;Pe++)Ee[Pe].emit("unpipe",this,{hasUnpiped:!1});return this}var rt=ye(C.pipes,I);return rt===-1?this:(C.pipes.splice(rt,1),C.pipesCount-=1,C.pipesCount===1&&(C.pipes=C.pipes[0]),I.emit("unpipe",this,ne),this)},ee.prototype.on=function(I,C){var ne=r.prototype.on.call(this,I,C),Ee=this._readableState;return I==="data"?(Ee.readableListening=this.listenerCount("readable")>0,Ee.flowing!==!1&&this.resume()):I==="readable"&&!Ee.endEmitted&&!Ee.readableListening&&(Ee.readableListening=Ee.needReadable=!0,Ee.flowing=!1,Ee.emittedReadable=!1,c("on readable",Ee.length,Ee.reading),Ee.length?B(this):Ee.reading||Rt.nextTick(V,this)),ne},ee.prototype.addListener=ee.prototype.on,ee.prototype.removeListener=function(I,C){var ne=r.prototype.removeListener.call(this,I,C);return I==="readable"&&Rt.nextTick(F,this),ne},ee.prototype.removeAllListeners=function(I){var C=r.prototype.removeAllListeners.apply(this,arguments);return(I==="readable"||I===void 0)&&Rt.nextTick(F,this),C};function F(I){var C=I._readableState;C.readableListening=I.listenerCount("readable")>0,C.resumeScheduled&&!C.paused?C.flowing=!0:I.listenerCount("data")>0&&I.resume()}function V(I){c("readable nexttick read 0"),I.read(0)}ee.prototype.resume=function(){var I=this._readableState;return I.flowing||(c("resume"),I.flowing=!I.readableListening,K(this,I)),I.paused=!1,this};function K(I,C){C.resumeScheduled||(C.resumeScheduled=!0,Rt.nextTick(H,I,C))}function H(I,C){c("resume",C.reading),C.reading||I.read(0),C.resumeScheduled=!1,I.emit("resume"),O(I),C.flowing&&!C.reading&&I.read(0)}ee.prototype.pause=function(){return c("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(c("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function O(I){var C=I._readableState;for(c("flow",C.flowing);C.flowing&&I.read()!==null;);}ee.prototype.wrap=function(I){var C=this,ne=this._readableState,Ee=!1;I.on("end",function(){if(c("wrapped end"),ne.decoder&&!ne.ended){var rt=ne.decoder.end();rt&&rt.length&&C.push(rt)}C.push(null)}),I.on("data",function(rt){if(c("wrapped data"),ne.decoder&&(rt=ne.decoder.write(rt)),!(ne.objectMode&&rt==null)&&!(!ne.objectMode&&(!rt||!rt.length))){var ht=C.push(rt);ht||(Ee=!0,I.pause())}});for(var Le in I)this[Le]===void 0&&typeof I[Le]=="function"&&(this[Le]=function(ht){return function(){return I[ht].apply(I,arguments)}}(Le));for(var Pe=0;Pe<Y.length;Pe++)I.on(Y[Pe],this.emit.bind(this,Y[Pe]));return this._read=function(rt){c("wrapped _read",rt),Ee&&(Ee=!1,I.resume())},this},typeof Symbol=="function"&&(ee.prototype[Symbol.asyncIterator]=function(){return z===void 0&&(z=g2()),z(this)}),Object.defineProperty(ee.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(ee.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(ee.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(C){this._readableState&&(this._readableState.flowing=C)}}),ee._fromList=j,Object.defineProperty(ee.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function j(I,C){if(C.length===0)return null;var ne;return C.objectMode?ne=C.buffer.shift():!I||I>=C.length?(C.decoder?ne=C.buffer.join(""):C.buffer.length===1?ne=C.buffer.first():ne=C.buffer.concat(C.length),C.buffer.clear()):ne=C.buffer.consume(I,C.decoder),ne}function re(I){var C=I._readableState;c("endReadable",C.endEmitted),C.endEmitted||(C.ended=!0,Rt.nextTick(ie,C,I))}function ie(I,C){if(c("endReadableNT",I.endEmitted,I.length),!I.endEmitted&&I.length===0&&(I.endEmitted=!0,C.readable=!1,C.emit("end"),I.autoDestroy)){var ne=C._writableState;(!ne||ne.autoDestroy&&ne.finished)&&C.destroy()}}typeof Symbol=="function"&&(ee.from=function(I,C){return D===void 0&&(D=b2()),D(ee,I,C)});function ye(I,C){for(var ne=0,Ee=I.length;ne<Ee;ne++)if(I[ne]===C)return ne;return-1}return qf}var Xp=ri,Sc=Gi.codes,m2=Sc.ERR_METHOD_NOT_IMPLEMENTED,w2=Sc.ERR_MULTIPLE_CALLBACK,v2=Sc.ERR_TRANSFORM_ALREADY_TRANSFORMING,_2=Sc.ERR_TRANSFORM_WITH_LENGTH_0,Ac=ks();xn(ri,Ac);function E2(t,e){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(n===null)return this.emit("error",new w2);r.writechunk=null,r.writecb=null,e!=null&&this.push(e),n(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function ri(t){if(!(this instanceof ri))return new ri(t);Ac.call(this,t),this._transformState={afterTransform:E2.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",S2)}function S2(){var t=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(e,r){c0(t,e,r)}):c0(this,null,null)}ri.prototype.push=function(t,e){return this._transformState.needTransform=!1,Ac.prototype.push.call(this,t,e)};ri.prototype._transform=function(t,e,r){r(new m2("_transform()"))};ri.prototype._write=function(t,e,r){var n=this._transformState;if(n.writecb=r,n.writechunk=t,n.writeencoding=e,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}};ri.prototype._read=function(t){var e=this._transformState;e.writechunk!==null&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0};ri.prototype._destroy=function(t,e){Ac.prototype._destroy.call(this,t,function(r){e(r)})};function c0(t,e,r){if(e)return t.emit("error",e);if(r!=null&&t.push(r),t._writableState.length)throw new _2;if(t._transformState.transforming)throw new v2;return t.push(null)}var A2=Ta,Zp=Xp;xn(Ta,Zp);function Ta(t){if(!(this instanceof Ta))return new Ta(t);Zp.call(this,t)}Ta.prototype._transform=function(t,e,r){r(null,t)};var Ff;function T2(t){var e=!1;return function(){e||(e=!0,t.apply(void 0,arguments))}}var Qp=Gi.codes,R2=Qp.ERR_MISSING_ARGS,P2=Qp.ERR_STREAM_DESTROYED;function f0(t){if(t)throw t}function k2(t){return t.setHeader&&typeof t.abort=="function"}function M2(t,e,r,n){n=T2(n);var i=!1;t.on("close",function(){i=!0}),Ff===void 0&&(Ff=El),Ff(t,{readable:e,writable:r},function(a){if(a)return n(a);i=!0,n()});var s=!1;return function(a){if(!i&&!s){if(s=!0,k2(t))return t.abort();if(typeof t.destroy=="function")return t.destroy();n(a||new P2("pipe"))}}}function u0(t){t()}function C2(t,e){return t.pipe(e)}function I2(t){return!t.length||typeof t[t.length-1]!="function"?f0:t.pop()}function B2(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n=I2(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new R2("streams");var i,s=e.map(function(a,o){var c=o<e.length-1,u=o>0;return M2(a,c,u,function(h){i||(i=h),h&&s.forEach(u0),!c&&(s.forEach(u0),n(i))})});return e.reduce(C2)}var U2=B2;(function(t,e){e=t.exports=Yp(),e.Stream=e,e.Readable=e,e.Writable=Vp(),e.Duplex=ks(),e.Transform=Xp,e.PassThrough=A2,e.finished=El,e.pipeline=U2})(Ru,Ru.exports);var ex=Ru.exports;const{Transform:O2}=ex;var N2=t=>class tx extends O2{constructor(r,n,i,s,a){super(a),this._rate=r,this._capacity=n,this._delimitedSuffix=i,this._hashBitLength=s,this._options=a,this._state=new t,this._state.initialize(r,n),this._finalized=!1}_transform(r,n,i){let s=null;try{this.update(r,n)}catch(a){s=a}i(s)}_flush(r){let n=null;try{this.push(this.digest())}catch(i){n=i}r(n)}update(r,n){if(!ue.isBuffer(r)&&typeof r!="string")throw new TypeError("Data must be a string or a buffer");if(this._finalized)throw new Error("Digest already called");return ue.isBuffer(r)||(r=ue.from(r,n)),this._state.absorb(r),this}digest(r){if(this._finalized)throw new Error("Digest already called");this._finalized=!0,this._delimitedSuffix&&this._state.absorbLastFewBits(this._delimitedSuffix);let n=this._state.squeeze(this._hashBitLength/8);return r!==void 0&&(n=n.toString(r)),this._resetState(),n}_resetState(){return this._state.initialize(this._rate,this._capacity),this}_clone(){const r=new tx(this._rate,this._capacity,this._delimitedSuffix,this._hashBitLength,this._options);return this._state.copy(r._state),r._finalized=this._finalized,r}};const{Transform:D2}=ex;var L2=t=>class rx extends D2{constructor(r,n,i,s){super(s),this._rate=r,this._capacity=n,this._delimitedSuffix=i,this._options=s,this._state=new t,this._state.initialize(r,n),this._finalized=!1}_transform(r,n,i){let s=null;try{this.update(r,n)}catch(a){s=a}i(s)}_flush(){}_read(r){this.push(this.squeeze(r))}update(r,n){if(!ue.isBuffer(r)&&typeof r!="string")throw new TypeError("Data must be a string or a buffer");if(this._finalized)throw new Error("Squeeze already called");return ue.isBuffer(r)||(r=ue.from(r,n)),this._state.absorb(r),this}squeeze(r,n){this._finalized||(this._finalized=!0,this._state.absorbLastFewBits(this._delimitedSuffix));let i=this._state.squeeze(r);return n!==void 0&&(i=i.toString(n)),i}_resetState(){return this._state.initialize(this._rate,this._capacity),this}_clone(){const r=new rx(this._rate,this._capacity,this._delimitedSuffix,this._options);return this._state.copy(r._state),r._finalized=this._finalized,r}};const $2=N2,q2=L2;var F2=function(t){const e=$2(t),r=q2(t);return function(n,i){switch(typeof n=="string"?n.toLowerCase():n){case"keccak224":return new e(1152,448,null,224,i);case"keccak256":return new e(1088,512,null,256,i);case"keccak384":return new e(832,768,null,384,i);case"keccak512":return new e(576,1024,null,512,i);case"sha3-224":return new e(1152,448,6,224,i);case"sha3-256":return new e(1088,512,6,256,i);case"sha3-384":return new e(832,768,6,384,i);case"sha3-512":return new e(576,1024,6,512,i);case"shake128":return new r(1344,256,31,i);case"shake256":return new r(1088,512,31,i);default:throw new Error("Invald algorithm: "+n)}}},nx={};const l0=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648];nx.p1600=function(t){for(let e=0;e<24;++e){const r=t[0]^t[10]^t[20]^t[30]^t[40],n=t[1]^t[11]^t[21]^t[31]^t[41],i=t[2]^t[12]^t[22]^t[32]^t[42],s=t[3]^t[13]^t[23]^t[33]^t[43],a=t[4]^t[14]^t[24]^t[34]^t[44],o=t[5]^t[15]^t[25]^t[35]^t[45],c=t[6]^t[16]^t[26]^t[36]^t[46],u=t[7]^t[17]^t[27]^t[37]^t[47],h=t[8]^t[18]^t[28]^t[38]^t[48],p=t[9]^t[19]^t[29]^t[39]^t[49];let m=h^(i<<1|s>>>31),P=p^(s<<1|i>>>31);const M=t[0]^m,R=t[1]^P,E=t[10]^m,L=t[11]^P,W=t[20]^m,z=t[21]^P,D=t[30]^m,U=t[31]^P,Y=t[40]^m,oe=t[41]^P;m=r^(a<<1|o>>>31),P=n^(o<<1|a>>>31);const X=t[2]^m,ee=t[3]^P,se=t[12]^m,T=t[13]^P,f=t[22]^m,d=t[23]^P,y=t[32]^m,w=t[33]^P,S=t[42]^m,B=t[43]^P;m=i^(c<<1|u>>>31),P=s^(u<<1|c>>>31);const $=t[4]^m,k=t[5]^P,x=t[14]^m,b=t[15]^P,F=t[24]^m,V=t[25]^P,K=t[34]^m,H=t[35]^P,O=t[44]^m,j=t[45]^P;m=a^(h<<1|p>>>31),P=o^(p<<1|h>>>31);const re=t[6]^m,ie=t[7]^P,ye=t[16]^m,I=t[17]^P,C=t[26]^m,ne=t[27]^P,Ee=t[36]^m,Le=t[37]^P,Pe=t[46]^m,rt=t[47]^P;m=c^(r<<1|n>>>31),P=u^(n<<1|r>>>31);const ht=t[8]^m,et=t[9]^P,Nr=t[18]^m,It=t[19]^P,Et=t[28]^m,Dr=t[29]^P,gt=t[38]^m,vt=t[39]^P,wr=t[48]^m,ct=t[49]^P,nt=M,Gn=R,qt=L<<4|E>>>28,Bt=E<<4|L>>>28,Mn=W<<3|z>>>29,kt=z<<3|W>>>29,St=U<<9|D>>>23,Lr=D<<9|U>>>23,At=Y<<18|oe>>>14,Mt=oe<<18|Y>>>14,Jr=X<<1|ee>>>31,Tt=ee<<1|X>>>31,Ut=T<<12|se>>>20,Wn=se<<12|T>>>20,Ft=f<<10|d>>>22,Ht=d<<10|f>>>22,vr=w<<13|y>>>19,bt=y<<13|w>>>19,_t=S<<2|B>>>30,Cn=B<<2|S>>>30,Ot=k<<30|$>>>2,Dt=$<<30|k>>>2,si=x<<6|b>>>26,Qe=b<<6|x>>>26,Lt=V<<11|F>>>21,g=F<<11|V>>>21,_=K<<15|H>>>17,v=H<<15|K>>>17,l=j<<29|O>>>3,A=O<<29|j>>>3,G=re<<28|ie>>>4,J=ie<<28|re>>>4,te=I<<23|ye>>>9,ae=ye<<23|I>>>9,Te=C<<25|ne>>>7,be=ne<<25|C>>>7,Ge=Ee<<21|Le>>>11,ve=Le<<21|Ee>>>11,Me=rt<<24|Pe>>>8,Ce=Pe<<24|rt>>>8,De=ht<<27|et>>>5,Ne=et<<27|ht>>>5,Ie=Nr<<20|It>>>12,Ue=It<<20|Nr>>>12,Be=Dr<<7|Et>>>25,_e=Et<<7|Dr>>>25,Re=gt<<8|vt>>>24,me=vt<<8|gt>>>24,Se=wr<<14|ct>>>18,Ae=ct<<14|wr>>>18;t[0]=nt^~Ut&Lt,t[1]=Gn^~Wn&g,t[10]=G^~Ie&Mn,t[11]=J^~Ue&kt,t[20]=Jr^~si&Te,t[21]=Tt^~Qe&be,t[30]=De^~qt&Ft,t[31]=Ne^~Bt&Ht,t[40]=Ot^~te&Be,t[41]=Dt^~ae&_e,t[2]=Ut^~Lt&Ge,t[3]=Wn^~g&ve,t[12]=Ie^~Mn&vr,t[13]=Ue^~kt&bt,t[22]=si^~Te&Re,t[23]=Qe^~be&me,t[32]=qt^~Ft&_,t[33]=Bt^~Ht&v,t[42]=te^~Be&St,t[43]=ae^~_e&Lr,t[4]=Lt^~Ge&Se,t[5]=g^~ve&Ae,t[14]=Mn^~vr&l,t[15]=kt^~bt&A,t[24]=Te^~Re&At,t[25]=be^~me&Mt,t[34]=Ft^~_&Me,t[35]=Ht^~v&Ce,t[44]=Be^~St&_t,t[45]=_e^~Lr&Cn,t[6]=Ge^~Se&nt,t[7]=ve^~Ae&Gn,t[16]=vr^~l&G,t[17]=bt^~A&J,t[26]=Re^~At&Jr,t[27]=me^~Mt&Tt,t[36]=_^~Me&De,t[37]=v^~Ce&Ne,t[46]=St^~_t&Ot,t[47]=Lr^~Cn&Dt,t[8]=Se^~nt&Ut,t[9]=Ae^~Gn&Wn,t[18]=l^~G&Ie,t[19]=A^~J&Ue,t[28]=At^~Jr&si,t[29]=Mt^~Tt&Qe,t[38]=Me^~De&qt,t[39]=Ce^~Ne&Bt,t[48]=_t^~Ot&te,t[49]=Cn^~Dt&ae,t[0]^=l0[e*2],t[1]^=l0[e*2+1]}};const Zo=nx;function zs(){this.state=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.blockSize=null,this.count=0,this.squeezing=!1}zs.prototype.initialize=function(t,e){for(let r=0;r<50;++r)this.state[r]=0;this.blockSize=t/8,this.count=0,this.squeezing=!1};zs.prototype.absorb=function(t){for(let e=0;e<t.length;++e)this.state[~~(this.count/4)]^=t[e]<<8*(this.count%4),this.count+=1,this.count===this.blockSize&&(Zo.p1600(this.state),this.count=0)};zs.prototype.absorbLastFewBits=function(t){this.state[~~(this.count/4)]^=t<<8*(this.count%4),t&128&&this.count===this.blockSize-1&&Zo.p1600(this.state),this.state[~~((this.blockSize-1)/4)]^=128<<8*((this.blockSize-1)%4),Zo.p1600(this.state),this.count=0,this.squeezing=!0};zs.prototype.squeeze=function(t){this.squeezing||this.absorbLastFewBits(1);const e=ue.alloc(t);for(let r=0;r<t;++r)e[r]=this.state[~~(this.count/4)]>>>8*(this.count%4)&255,this.count+=1,this.count===this.blockSize&&(Zo.p1600(this.state),this.count=0);return e};zs.prototype.copy=function(t){for(let e=0;e<50;++e)t.state[e]=this.state[e];t.blockSize=this.blockSize,t.count=this.count,t.squeezing=this.squeezing};var H2=zs,K2=F2(H2);const z2=pn(K2);function Ra(t){return t=ix(t),z2("keccak256").update(t).digest()}function ix(t){if(!Fr.isBuffer(t))if(Array.isArray(t))t=Fr.from(t);else if(typeof t=="string")sx(t)?t=Fr.from(Sl(ax(t)),"hex"):t=Fr.from(t);else if(typeof t=="number")t=cx(t);else if(t==null)t=Fr.allocUnsafe(0);else if(Ke.isBN(t))t=t.toArrayLike(Fr);else if(t.toArray)t=Fr.from(t.toArray());else throw new Error("invalid type");return t}function sx(t,e){return!(typeof t!="string"||!t.match(/^0x[0-9A-Fa-f]*$/)||e&&t.length!==2+2*e)}function Sl(t){if(typeof t!="string")throw new Error(`while padding to even, value must be string, is currently ${typeof t}, while padToEven.`);return t.length%2&&(t=`0${t}`),t}function ax(t){return typeof t!="string"?t:ox(t)?t.slice(2):t}function ox(t){if(typeof t!="string")throw new Error("value must be type 'string', is currently type "+typeof t+", while checking isHexPrefixed.");return t.startsWith("0x")}function cx(t){const e=fx(t);return Fr.from(Sl(e.slice(2)),"hex")}function fx(t){return`0x${t.toString(16)}`}typeof window<"u"&&(window.keccak256=Ra);const j2={intToBuffer:cx,intToHex:fx,isHexPrefixed:ox,stripHexPrefix:ax,padToEven:Sl,isHexString:sx,toBuffer:ix};class ux{constructor(e,r){N(this,"_key");N(this,"ownerLength",zt[at.ETHEREUM].pubLength);N(this,"signatureLength",zt[at.ETHEREUM].sigLength);N(this,"signatureType",at.ETHEREUM);N(this,"pk");this._key=e,this.pk=r.toString("hex")}get publicKey(){throw new Error("You must implement `publicKey`")}get key(){return ue.from(this._key,"hex")}static async verify(e,r,n){let i=e;typeof e=="string"&&(i=Xe.toBuffer(e));let s=!1;try{s=Xo.ecdsaVerify(n,Ra(ue.from(r)),i)}catch{}return s}async sign(e){return Xo.ecdsaSign(Ra(ue.from(e)),ue.from(this.key)).signature}}class Tc extends ux{get publicKey(){return ue.from(this.pk,"hex")}constructor(e){e.startsWith("0x")&&(e=e.slice(2));const r=ue.from(e,"hex"),n=Xo.publicKeyCreate(r,!1);super(e,ue.from(n))}async sign(e){return new bi(this._key).signMessage(e).then(n=>ue.from(n.slice(2),"hex"))}static async verify(e,r,n){return Xo.ecdsaVerify(n.length===65?n.slice(0,-1):n,ge(vc(r)),typeof e=="string"?Xe.toBuffer(e):e)}}class G2 extends Tc{}class ku extends _l{constructor(e){super(e.replace("ed25519:",""))}}class W2 extends Fa{get publicKey(){return ue.from(this.pk)}get key(){return ue.from(this._key)}constructor(e,r){super(e.subarray(0,32),r)}}let Qo=class extends lp{constructor(r){super(r);N(this,"signatureType",4)}async sign(r){return super.sign(ue.from(ue.from(r).toString("hex")))}static async verify(r,n,i){return super.verify(r,ue.from(ue.from(n).toString("hex")),i)}};class V2 extends _l{constructor(r){super(r);N(this,"signatureType",4)}async sign(r){return super.sign(ue.from(ue.from(r).toString("hex")))}static async verify(r,n,i){return super.verify(r,ue.from(ue.from(n).toString("hex")),i)}}class J2 extends Fa{constructor(e,r){super(e,r)}get publicKey(){return ue.from(this.pk.slice(2),"hex")}get key(){return ue.from(this._key.slice(2),"hex")}}class ec{constructor(e,r){N(this,"_publicKey");N(this,"ownerLength",zt[at.INJECTEDAPTOS].pubLength);N(this,"signatureLength",zt[at.INJECTEDAPTOS].sigLength);N(this,"signatureType",at.INJECTEDAPTOS);N(this,"pem");N(this,"provider");this.provider=e,this._publicKey=r}get publicKey(){return this._publicKey}async sign(e){if(!this.provider.signMessage)throw new Error("Selected Wallet does not support message signing");const r=await this.provider.signMessage({message:ue.from(e).toString("hex"),nonce:"bundlr"});return ue.from(r.signature,"hex")}static async verify(e,r,n){const i=e;return dc(ue.from(n),ue.from(`APTOS
message: ${ue.from(r).toString("hex")}
nonce: bundlr`),ue.from(i))}}class lx{constructor(e,r){N(this,"_publicKey");N(this,"ownerLength",zt[at.MULTIAPTOS].pubLength);N(this,"signatureLength",zt[at.MULTIAPTOS].sigLength);N(this,"signatureType",at.MULTIAPTOS);N(this,"collectSignatures");N(this,"provider");this._publicKey=e,this.collectSignatures=r}get publicKey(){return this._publicKey}async sign(e){const{signatures:r,bitmap:n}=await this.collectSignatures(e),i=128,s=new Uint8Array([0,0,0,0]),a=new Set;n.forEach(u=>{if(u>=32)throw new Error(`Invalid bit value ${u}.`);if(a.has(u))throw new Error("Duplicated bits detected.");a.add(u);const h=Math.floor(u/8);let p=s[h];p|=i>>u%8,s[h]=p});const o=ue.alloc(this.signatureLength);let c=0;for(let u=0;u<32;u++)n.includes(u)&&o.set(r[c++],u*64);return o.set(s,this.signatureLength-4),o}static async verify(e,r,n){const s=zt[at.MULTIAPTOS].sigLength-4,a=n.slice(0,s),o=n.slice(s);let c=!1;for(let u=0;u<32;u++){const h=Math.floor(u/8),p=u-h*8;if((o[h]&128>>p)!==0){const P=a.slice(u*64,(u+1)*64),M=e.slice(u*32,(u+1)*32);await dc(ue.from(P),ue.from(r),ue.from(M))||(c=!0)}}return!c}}class dx extends Tc{constructor(r){super(r);N(this,"ownerLength",zt[at.TYPEDETHEREUM].pubLength);N(this,"signatureLength",zt[at.TYPEDETHEREUM].sigLength);N(this,"signatureType",at.TYPEDETHEREUM);N(this,"address");N(this,"signer");this.address="0x"+Ra(super.publicKey.slice(1)).slice(-20).toString("hex"),this.signer=new bi(r)}get publicKey(){return ue.from(this.address)}async sign(r){const n=await this.signer._signTypedData(tc,rc,{address:this.address,"Transaction hash":r});return ue.from(n.slice(2),"hex")}static async verify(r,n,i){const s=r.toString(),a=Kp(tc,rc,{address:s,"Transaction hash":n},i);return s.toLowerCase()===a.toLowerCase()}}const tc={name:"Bundlr",version:"1"},rc={Bundlr:[{name:"Transaction hash",type:"bytes"},{name:"address",type:"address"}]};class Al{constructor(e){N(this,"ownerLength",zt[at.TYPEDETHEREUM].pubLength);N(this,"signatureLength",zt[at.TYPEDETHEREUM].sigLength);N(this,"signatureType",at.TYPEDETHEREUM);N(this,"address");N(this,"signer");N(this,"publicKey");this.signer=e.getSigner()}async ready(){this.address=(await this.signer.getAddress()).toString().toLowerCase(),this.publicKey=ue.from(this.address)}async sign(e){const r=await this.signer._signTypedData(tc,rc,{address:this.address,"Transaction hash":e});return ue.from(r.slice(2),"hex")}static verify(e,r,n){const i=e.toString(),s=Kp(tc,rc,{address:i,"Transaction hash":r},n);return i.toLowerCase()===s.toLowerCase()}}class Y2{constructor(e,r){N(this,"signer");N(this,"publicKey");N(this,"ownerLength",zt[at.ARWEAVE].pubLength);N(this,"signatureLength",zt[at.ARWEAVE].sigLength);N(this,"signatureType",at.ARWEAVE);N(this,"arweave");this.signer=e,this.arweave=r}async setPublicKey(){const e=await this.signer.getActivePublicKey();this.publicKey=Xe.toBuffer(e)}async sign(e){this.publicKey||await this.setPublicKey();const r={name:"RSA-PSS",saltLength:32},n=await this.signer.signature(e,r);return new Uint8Array(Object.values(n).map(s=>+s))}static async verify(e,r,n){return await xr().verify(e,r,n)}}const Tl={1:wc,2:Fa,3:Tc,4:Qo,5:ec,6:lx,7:dx};async function Mu(t){return Fs([yt("dataitem"),yt("1"),yt(t.signatureType.toString()),t.rawOwner,t.rawTarget,t.rawAnchor,t.rawTags,t.rawData])}function ja(t,e){const r=new Uint8Array(t);if(e<0)throw new Error("Array is unsigned, cannot represent -ve numbers");if(e>2**(t*8)-1)throw new Error(`Number ${e} is too large for an array of ${t} bytes`);for(let n=0;n<r.length;n++){const i=e&255;r[n]=i,e=(e-i)/256}return r}function Cu(t){return ja(8,t)}function hx(t){return ja(2,t)}function X2(t){return ja(16,t)}function Iu(t){return ja(32,t)}function cr(t){let e=0;for(let r=t.length-1;r>=0;r--)e=e*256+t[r];return e}class Rl{constructor(e=ue.alloc(kl),r=0){N(this,"buf");N(this,"pos");this.buf=e,this.pos=r}writeTags(e){if(!Array.isArray(e))throw new Error("input must be array");const r=e.length;let n;if(r)for(this.writeLong(r),n=0;n<r;n++){const i=e[n];if(typeof(i==null?void 0:i.name)!="string"||typeof(i==null?void 0:i.value)!="string")throw new Error(`Invalid tag format for ${i}, expected {name:string, value: string}`);this.writeString(i.name),this.writeString(i.value)}this.writeLong(0)}toBuffer(){const e=ue.alloc(this.pos);if(this.pos>this.buf.length)throw new Error(`Too many tag bytes (${this.pos} > ${this.buf.length})`);return this.buf.copy(e,0,0,this.pos),e}writeLong(e){const r=this.buf;let n,i;if(e>=-1073741824&&e<1073741824){i=e>=0?e<<1:~e<<1|1;do r[this.pos]=i&127,i>>=7;while(i&&(r[this.pos++]|=128))}else{n=e>=0?e*2:-e*2-1;do r[this.pos]=n&127,n/=128;while(n>=1&&(r[this.pos++]|=128))}this.pos++,this.buf=r}writeString(e){const r=ue.byteLength(e),n=this.buf;this.writeLong(r);let i=this.pos;if(this.pos+=r,!(this.pos>n.length)){if(r>64)this.buf.write(e,this.pos-r,r,"utf8");else{let s,a,o,c;for(s=0,a=r;s<a;s++)o=e.charCodeAt(s),o<128?n[i++]=o:o<2048?(n[i++]=o>>6|192,n[i++]=o&63|128):(o&64512)===55296&&((c=e.charCodeAt(s+1))&64512)===56320?(o=65536+((o&1023)<<10)+(c&1023),s++,n[i++]=o>>18|240,n[i++]=o>>12&63|128,n[i++]=o>>6&63|128,n[i++]=o&63|128):(n[i++]=o>>12|224,n[i++]=o>>6&63|128,n[i++]=o&63|128)}this.buf=n}}readLong(){let e=0,r=0;const n=this.buf;let i,s,a,o;do i=n[this.pos++],s=i&128,e|=(i&127)<<r,r+=7;while(s&&r<28);if(s){a=e,o=268435456;do i=n[this.pos++],a+=(i&127)*o,o*=128;while(i&128);return(a%2?-(a+1):a)/2}return e>>1^-(e&1)}skipLong(){const e=this.buf;for(;e[this.pos++]&128;);}readTags(){const e=[];let r;for(;r=this.readLong();)for(r<0&&(r=-r,this.skipLong());r--;){const n=this.readString(),i=this.readString();e.push({name:n,value:i})}return e}readString(){const e=this.readLong(),r=this.pos,n=this.buf;if(this.pos+=e,this.pos>n.length)throw new Error("TAP Position out of range");return this.buf.slice(r,r+e).toString()}}function px(t){if((t==null?void 0:t.length)===0)return ue.allocUnsafe(0);const e=new Rl;return e.writeTags(t),e.toBuffer()}function nc(t){return new Rl(t).readTags()}const Pl=80,kl=4096;class ti{constructor(e){N(this,"binary");N(this,"_id");this.binary=e}static isDataItem(e){return e.binary!==void 0}get signatureType(){const e=cr(this.binary.subarray(0,2));if((at==null?void 0:at[e])!==void 0)return e;throw new Error("Unknown signature type: "+e)}async isValid(){return ti.verify(this.binary)}get id(){return Xe.encode(this.rawId)}set id(e){this._id=Xe.toBuffer(e)}get rawId(){return Oi.createHash("sha256").update(this.rawSignature).digest()}set rawId(e){this._id=e}get rawSignature(){return this.binary.subarray(2,2+this.signatureLength)}get signature(){return Xe.encode(this.rawSignature)}set rawOwner(e){if(e.byteLength!=this.ownerLength)throw new Error(`Expected raw owner (pubkey) to be ${this.ownerLength} bytes, got ${e.byteLength} bytes.`);this.binary.set(e,2+this.signatureLength)}get rawOwner(){return this.binary.subarray(2+this.signatureLength,2+this.signatureLength+this.ownerLength)}get signatureLength(){return zt[this.signatureType].sigLength}get owner(){return Xe.encode(this.rawOwner)}get ownerLength(){return zt[this.signatureType].pubLength}get rawTarget(){const e=this.getTargetStart();return this.binary[e]==1?this.binary.subarray(e+1,e+33):Fr.alloc(0)}get target(){return Xe.encode(this.rawTarget)}get rawAnchor(){const e=this.getAnchorStart();return this.binary[e]==1?this.binary.subarray(e+1,e+33):Fr.alloc(0)}get anchor(){return this.rawAnchor.toString()}get rawTags(){const e=this.getTagsStart(),r=cr(this.binary.subarray(e+8,e+16));return this.binary.subarray(e+16,e+16+r)}get tags(){const e=this.getTagsStart();if(cr(this.binary.subarray(e,e+8))==0)return[];const n=cr(this.binary.subarray(e+8,e+16));return nc(Fr.from(this.binary.subarray(e+16,e+16+n)))}get tagsB64Url(){return this.tags.map(r=>({name:Xe.encode(r.name),value:Xe.encode(r.value)}))}getStartOfData(){const e=this.getTagsStart(),r=this.binary.subarray(e+8,e+16),n=cr(r);return e+16+n}get rawData(){const e=this.getTagsStart(),r=this.binary.subarray(e+8,e+16),n=cr(r),i=e+16+n;return this.binary.subarray(i,this.binary.length)}get data(){return Xe.encode(this.rawData)}getRaw(){return this.binary}async sign(e){return this._id=await Cl(this,e),this.rawId}async setSignature(e){this.binary.set(e,2),this._id=Fr.from(await xr().hash(e))}isSigned(){var e;return(((e=this._id)==null?void 0:e.length)??0)>0}toJSON(){return{signature:this.signature,owner:this.owner,target:this.target,tags:this.tags.map(e=>({name:Xe.encode(e.name),value:Xe.encode(e.value)})),data:this.data}}static async verify(e){if(e.byteLength<Pl)return!1;const r=new ti(e),n=r.signatureType,i=r.getTagsStart(),s=cr(e.subarray(i,i+8)),a=e.subarray(i+8,i+16),o=cr(a);if(o>kl)return!1;if(s>0)try{if(nc(Fr.from(e.subarray(i+16,i+16+o))).length!==s)return!1}catch{return!1}const c=Tl[n],u=await Mu(r);return await c.verify(r.rawOwner,u,r.rawSignature)}async getSignatureData(){return Mu(this)}getTagsStart(){const e=this.getTargetStart(),r=this.binary[e]==1;let n=e+(r?33:1);const i=this.binary[n]==1;return n+=i?33:1,n}getTargetStart(){return 2+this.signatureLength+this.ownerLength}getAnchorStart(){let e=this.getTargetStart()+1;const r=this.binary[this.getTargetStart()]==1;return e+=r?32:0,e}}const In=32;class Ml{constructor(e){N(this,"length");N(this,"items");N(this,"binary");this.binary=e,this.length=this.getDataItemCount(),this.items=this.getItems()}getRaw(){return this.binary}get(e){if(typeof e=="number"){if(e>=this.length)throw new RangeError("Index out of range");return this.getByIndex(e)}else return this.getById(e)}getSizes(){const e=[];for(let r=In;r<In+64*this.length;r+=64)e.push(cr(this.binary.subarray(r,r+32)));return e}getIds(){const e=[];for(let r=In;r<In+64*this.length;r+=64){const n=this.binary.subarray(r+32,r+64);if(n.length===0)throw new Error("Invalid bundle, id specified in headers doesn't exist");e.push(Xe.encode(n))}return e}getIdBy(e){if(e>this.length-1)throw new RangeError("Index of bundle out of range");const r=64+64*e;return Xe.encode(this.binary.subarray(r,r+32))}async toTransaction(e,r,n){const i=await r.createTransaction({data:this.binary,...e},n);return i.addTag("Bundle-Format","binary"),i.addTag("Bundle-Version","2.0.0"),i}async verify(){for(const e of this.items){const r=await e.isValid(),n=Xe(Oi.createHash("sha256").update(e.rawSignature).digest());if(!(r&&e.id===n))return!1}return!0}getOffset(e){let r=0;for(let n=In;n<In+64*this.length;n+=64){const i=cr(this.binary.subarray(n,n+32));r+=i;const s=this.binary.subarray(n+32,n+64);if(ue.compare(s,e)===0)return{startOffset:r,size:i}}return{startOffset:-1,size:-1}}getByIndex(e){let r=0;const n=this.getBundleStart();let i=0,s,a;for(let h=In;h<In+64*this.length;h+=64){if(s=cr(this.binary.subarray(h,h+32)),i++===e){a=this.binary.subarray(h+32,h+64);break}r+=s}const o=n+r,c=this.binary.subarray(o,o+s),u=new ti(c);return u.rawId=a,u}getById(e){const r=Xe.toBuffer(e),n=this.getOffset(r);if(n.startOffset===-1)throw new Error("Transaction not found");const s=this.getBundleStart()+n.startOffset;return new ti(this.binary.subarray(s,s+n.size))}getDataItemCount(){return cr(this.binary.subarray(0,32))}getBundleStart(){return 32+64*this.length}getItems(){const e=new Array(this.length);let r=0;const n=this.getBundleStart();let i=0;for(let s=In;s<In+64*this.length;s+=64){const a=cr(this.binary.subarray(s,s+32)),o=this.binary.subarray(s+32,s+64);if(o.length===0)throw new Error("Invalid bundle, id specified in headers doesn't exist");const c=n+r,u=this.binary.subarray(c,c+a);r+=a;const h=new ti(u);h.rawId=o,e[i]=h,i++}return e}}function Z2(t){return new Ml(t)}async function xx(t,e){const r=new Uint8Array(64*t.length),n=await Promise.all(t.map(async(s,a)=>{const o=s.isSigned()?s.rawId:await Cl(s,e),c=new Uint8Array(64);return c.set(Iu(s.getRaw().byteLength),0),c.set(o,32),r.set(c,64*a),s.getRaw()})).then(s=>ue.concat(s)),i=ue.concat([ue.from(Iu(t.length)),ue.from(r),n]);return new Ml(i)}async function yx(t,e){const r=await Mu(t),n=await e.sign(r),i=await xr().hash(n);return{signature:ue.from(n),id:ue.from(i)}}async function Cl(t,e){const{signature:r,id:n}=await yx(t,e);return t.getRaw().set(r,2),n}function Il(t,e,r){var z,D;const n=e.publicKey,i=r!=null&&r.target?Xe.toBuffer(r.target):null,s=1+((i==null?void 0:i.byteLength)??0),a=r!=null&&r.anchor?ue.from(r.anchor):null,o=1+((a==null?void 0:a.byteLength)??0),c=(((z=r==null?void 0:r.tags)==null?void 0:z.length)??0)>0?px(r==null?void 0:r.tags):null,u=16+(c?c.byteLength:0),h=typeof t=="string"?ue.from(t):ue.from(t),p=h.byteLength,m=2+e.signatureLength+e.ownerLength+s+o+u+p,P=ue.alloc(m);if(P.set(hx(e.signatureType),0),P.set(new Uint8Array(e.signatureLength).fill(0),2),n.byteLength!==e.ownerLength)throw new Error(`Owner must be ${e.ownerLength} bytes, but was incorrectly ${n.byteLength}`);P.set(n,2+e.signatureLength);const M=2+e.signatureLength+e.ownerLength;if(P[M]=i?1:0,i){if(i.byteLength!==32)throw new Error(`Target must be 32 bytes but was incorrectly ${i.byteLength}`);P.set(i,M+1)}const R=M+s;let E=R+1;if(P[R]=a?1:0,a){if(E+=a.byteLength,a.byteLength!==32)throw new Error("Anchor must be 32 bytes");P.set(a,R+1)}P.set(Cu(((D=r==null?void 0:r.tags)==null?void 0:D.length)??0),E);const L=Cu((c==null?void 0:c.byteLength)??0);P.set(L,E+8),c&&P.set(c,E+16);const W=E+u;return P.set(h,W),new ti(P)}class Q2{constructor(){N(this,"signatureType");N(this,"rawSignature");N(this,"signature");N(this,"signatureLength");N(this,"rawOwner");N(this,"owner");N(this,"ownerLength");N(this,"rawTarget");N(this,"target");N(this,"rawAnchor");N(this,"anchor");N(this,"rawTags");N(this,"tags");N(this,"rawData");N(this,"data")}static async verify(...e){throw new Error("You must implement `verify`")}}const ev=Object.freeze(Object.defineProperty({__proto__:null,AVSCTap:Rl,AlgorandSigner:W2,AptosSigner:J2,ArconnectSigner:Y2,Arweave:rl,ArweaveSigner:wc,Bundle:Ml,BundleItem:Q2,CryptoDriver:Wh,Curve25519:Fa,DataItem:ti,EthereumSigner:Tc,HexInjectedSolanaSigner:Qo,HexSolanaSigner:V2,InjectedAptosSigner:ec,InjectedEthereumSigner:Yw,InjectedSolanaSigner:lp,InjectedTypedEthereumSigner:Al,MAX_TAG_BYTES:kl,MIN_BINARY_SIZE:Pl,MultiSignatureAptosSigner:lx,NearSigner:ku,PolygonSigner:G2,Rsa4096:Vh,SIG_CONFIG:zt,get SignatureConfig(){return at},Signer:P1,SolanaSigner:_l,TypedEthereumSigner:dx,bundleAndSignData:xx,byteArrayToLong:cr,concatBuffers:Pr,createData:Il,deepHash:Fs,deserializeTags:nc,exportForTesting:j2,getCryptoDriver:xr,getSignatureAndId:yx,indexToType:Tl,keccak256:Ra,longTo16ByteArray:X2,longTo32ByteArray:Iu,longTo8ByteArray:Cu,longToNByteArray:ja,secp256k1:ux,serializeTags:px,shortTo2ByteArray:hx,sign:Cl,stringToBuffer:yt,unbundleData:Z2},Symbol.toStringTag,{value:"Module"}));async function d0(t){const e=gx(t);let r=(await e.next()).value;r=await Rr(e,r,32);const n=cr(r.subarray(0,32));r=r.subarray(32);const i=64*n;r=await Rr(e,r,i);const s=new Array(n);for(let c=0;c<i;c+=64)s[c/64]=[cr(r.subarray(c,c+32)),Xe(ue.from(r.subarray(c+32,c+64)))];r=r.subarray(i);let a=32+i;const o=[];for(const[c,u]of s){r=await Rr(e,r,Pl),r=await Rr(e,r,2);const h=cr(r.subarray(0,2));r=r.subarray(2);const{sigLength:p,pubLength:m,sigName:P}=zt[h];r=await Rr(e,r,p);const M=r.subarray(0,p);r=r.subarray(p),r=await Rr(e,r,m);const R=r.subarray(0,m);r=r.subarray(m),r=await Rr(e,r,1);const E=r[0]===1;E&&(r=await Rr(e,r,33));const L=E?r.subarray(1,33):ue.allocUnsafe(0);r=r.subarray(E?33:1),r=await Rr(e,r,1);const W=r[0]===1;W&&(r=await Rr(e,r,33));const z=W?r.subarray(1,33):ue.allocUnsafe(0);r=r.subarray(W?33:1),r=await Rr(e,r,8);const D=cr(r.subarray(0,8));r=r.subarray(8),r=await Rr(e,r,8);const U=cr(r.subarray(0,8));r=r.subarray(8),r=await Rr(e,r,U);const Y=r.subarray(0,U),oe=D!==0&&U!==0?nc(ue.from(Y)):[];if(oe.length!==D)throw new Error("Tags lengths don't match");r=r.subarray(U);const X=new ma.Transform;X._transform=function(d,y,w){this.push(d),w()};const ee=Fs([yt("dataitem"),yt("1"),yt(h.toString()),R,L,z,Y,X]),se=2+p+m+(E?33:1)+(W?33:1)+16+U,T=c-se;if(r.byteLength>T)X.write(r.subarray(0,T)),r=r.subarray(T);else{let d=r.byteLength;for(X.write(r);T>d;){if(r=(await e.next()).value,!r)throw new Error(`Not enough data bytes  expected: ${T} received: ${d}`);d+=r.byteLength,d>T?X.write(r.subarray(0,r.byteLength-(d-T))):X.write(r)}r=r.subarray(r.byteLength-(d-T))}if(X.end(),u!==Xe(Oi.createHash("sha256").update(M).digest()))throw new Error("ID doesn't match signature");if(!await Tl[h].verify(R,await ee,M))throw new Error("Invalid signature");o.push({id:u,sigName:P,signature:Xe(ue.from(M)),target:Xe(ue.from(L)),anchor:Xe(ue.from(z)),owner:Xe(ue.from(R)),tags:oe,dataOffset:a+se,dataSize:T}),a+=se+T}return o}async function tv(t,e,r,n){const i=Il("",r,n),s=new ma.PassThrough,a=[yt("dataitem"),yt("1"),yt(i.signatureType.toString()),i.rawOwner,i.rawTarget,i.rawAnchor,i.rawTags,t],o=await Fs(a),c=ue.from(await r.sign(o));return i.setSignature(c),s.write(i.getRaw()),e.pipe(s)}async function Rr(t,e,r){if(e.byteLength>=r)return e;const{done:n,value:i}=await t.next();if(n&&!i)throw new Error("Invalid buffer");return Rr(t,ue.concat([ue.from(e),ue.from(i)]),r)}async function*gx(t){for await(const e of t)yield e}const rv={readBytes:Rr,getReader:gx},nv=Object.freeze(Object.defineProperty({__proto__:null,default:d0,processStream:d0,streamExportForTesting:rv,streamSigner:tv},Symbol.toStringTag,{value:"Module"})),iv={...ev,stream:nv};globalThis.arbundles??(globalThis.arbundles=iv);const sv=Object.freeze(Object.defineProperty({__proto__:null,DataItem:ti,bundleAndSignData:xx,createData:Il,deepHash:Fs,getCryptoDriver:xr,stringToBuffer:yt},Symbol.toStringTag,{value:"Module"}));class Rc{constructor(e){N(this,"base");N(this,"wallet");N(this,"_address");N(this,"providerUrl");N(this,"providerInstance");N(this,"ticker");N(this,"name");N(this,"irys");N(this,"minConfirm",5);N(this,"isSlow",!1);N(this,"needsFee",!0);N(this,"inheritsRPC",!1);Object.assign(this,e)}get address(){return this._address}async ready(){this._address=this.wallet?this.ownerToAddress(await this.getPublicKey()):void 0}async getId(e){return Xe.encode(ue.from(await xr().hash(await e.rawSignature())))}async price(){return bx(this.ticker)}}async function bx(t){const e=await jt.get(`https://api.redstone.finance/prices?symbol=${t}&provider=redstone&limit=1`);return await yr.checkAndThrow(e,"Getting price data"),e.data[0].value}const av=Al;class Pc extends Rc{constructor(r){super(r);N(this,"signer");N(this,"w3signer");N(this,"inheritsRPC",!0);this.base=["wei",1e18]}async getTx(r){const i=await this.providerInstance.getTransaction(r);if(!i)throw new Error("Tx doesn't exist");if(!i.to)throw new Error(`Unable to resolve transactions ${r} receiver`);return{from:i.from,to:i.to,blockHeight:i.blockNumber?new qe(i.blockNumber):void 0,amount:new qe(i.value.toHexString(),16),pending:!i.blockNumber,confirmed:i.confirmations>=this.minConfirm}}ownerToAddress(r){return r.toString().toLowerCase()}async sign(r){return(await this.getSigner()).sign(r)}getSigner(){return this.signer||(this.signer=new Al(this.wallet)),this.signer}async verify(r,n,i){return av.verify(r,n,i)}async getCurrentHeight(){const n=await this.providerInstance.send("eth_blockNumber",[]);return new qe(n,16)}async getFee(r,n){const i=this.providerInstance,s={to:n,from:this.address,value:"0x"+new qe(r).toString(16)},a=await i.estimateGas(s),o=await i.getGasPrice();return new qe(a.mul(o).toString())}async sendTx(r){const i=await this.w3signer.sendTransaction(r);return i?i.hash:void 0}async createTx(r,n,i){const s=$e.from(new qe(r).toFixed()),a=this.w3signer,o=await a.estimateGas({to:n,from:this.address,value:s.toHexString()});let c=await a.getGasPrice();return this.name==="matic"&&(c=$e.from(new qe(c.toString()).multipliedBy(10).decimalPlaces(0).toString())),{txId:void 0,tx:await a.populateTransaction({to:n,from:this.address,value:s.toHexString(),gasPrice:c,gasLimit:o})}}async getPublicKey(){return this.address}async ready(){var r,n;this.w3signer=await this.wallet.getSigner(),this._address=(await this.w3signer.getAddress()).toString().toLowerCase(),await this.getSigner().ready(),this.providerInstance=this.wallet,await((n=(r=this.providerInstance)==null?void 0:r._ready)==null?void 0:n.call(r))}}var kc={},Mc={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.KeyType=void 0,function(e){e[e.ED25519=0]="ED25519"}(t.KeyType||(t.KeyType={}))})(Mc);var Cc={},Ga={};Object.defineProperty(Ga,"__esModule",{value:!0});Ga.KeyPairBase=void 0;let ov=class{};Ga.KeyPairBase=ov;var Wa={},mx={exports:{}};(function(t){(function(e){var r=function(g){var _,v=new Float64Array(16);if(g)for(_=0;_<g.length;_++)v[_]=g[_];return v},n=function(){throw new Error("no PRNG")},i=new Uint8Array(16),s=new Uint8Array(32);s[0]=9;var a=r(),o=r([1]),c=r([56129,1]),u=r([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),h=r([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),p=r([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),m=r([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),P=r([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function M(g,_,v,l){g[_]=v>>24&255,g[_+1]=v>>16&255,g[_+2]=v>>8&255,g[_+3]=v&255,g[_+4]=l>>24&255,g[_+5]=l>>16&255,g[_+6]=l>>8&255,g[_+7]=l&255}function R(g,_,v,l,A){var G,J=0;for(G=0;G<A;G++)J|=g[_+G]^v[l+G];return(1&J-1>>>8)-1}function E(g,_,v,l){return R(g,_,v,l,16)}function L(g,_,v,l){return R(g,_,v,l,32)}function W(g,_,v,l){for(var A=l[0]&255|(l[1]&255)<<8|(l[2]&255)<<16|(l[3]&255)<<24,G=v[0]&255|(v[1]&255)<<8|(v[2]&255)<<16|(v[3]&255)<<24,J=v[4]&255|(v[5]&255)<<8|(v[6]&255)<<16|(v[7]&255)<<24,te=v[8]&255|(v[9]&255)<<8|(v[10]&255)<<16|(v[11]&255)<<24,ae=v[12]&255|(v[13]&255)<<8|(v[14]&255)<<16|(v[15]&255)<<24,Te=l[4]&255|(l[5]&255)<<8|(l[6]&255)<<16|(l[7]&255)<<24,be=_[0]&255|(_[1]&255)<<8|(_[2]&255)<<16|(_[3]&255)<<24,Ge=_[4]&255|(_[5]&255)<<8|(_[6]&255)<<16|(_[7]&255)<<24,ve=_[8]&255|(_[9]&255)<<8|(_[10]&255)<<16|(_[11]&255)<<24,Me=_[12]&255|(_[13]&255)<<8|(_[14]&255)<<16|(_[15]&255)<<24,Ce=l[8]&255|(l[9]&255)<<8|(l[10]&255)<<16|(l[11]&255)<<24,De=v[16]&255|(v[17]&255)<<8|(v[18]&255)<<16|(v[19]&255)<<24,Ne=v[20]&255|(v[21]&255)<<8|(v[22]&255)<<16|(v[23]&255)<<24,Ie=v[24]&255|(v[25]&255)<<8|(v[26]&255)<<16|(v[27]&255)<<24,Ue=v[28]&255|(v[29]&255)<<8|(v[30]&255)<<16|(v[31]&255)<<24,Be=l[12]&255|(l[13]&255)<<8|(l[14]&255)<<16|(l[15]&255)<<24,_e=A,Re=G,me=J,Se=te,Ae=ae,we=Te,Z=be,Q=Ge,de=ve,fe=Me,le=Ce,pe=De,Oe=Ne,ze=Ie,We=Ue,je=Be,q,Ye=0;Ye<20;Ye+=2)q=_e+Oe|0,Ae^=q<<7|q>>>25,q=Ae+_e|0,de^=q<<9|q>>>23,q=de+Ae|0,Oe^=q<<13|q>>>19,q=Oe+de|0,_e^=q<<18|q>>>14,q=we+Re|0,fe^=q<<7|q>>>25,q=fe+we|0,ze^=q<<9|q>>>23,q=ze+fe|0,Re^=q<<13|q>>>19,q=Re+ze|0,we^=q<<18|q>>>14,q=le+Z|0,We^=q<<7|q>>>25,q=We+le|0,me^=q<<9|q>>>23,q=me+We|0,Z^=q<<13|q>>>19,q=Z+me|0,le^=q<<18|q>>>14,q=je+pe|0,Se^=q<<7|q>>>25,q=Se+je|0,Q^=q<<9|q>>>23,q=Q+Se|0,pe^=q<<13|q>>>19,q=pe+Q|0,je^=q<<18|q>>>14,q=_e+Se|0,Re^=q<<7|q>>>25,q=Re+_e|0,me^=q<<9|q>>>23,q=me+Re|0,Se^=q<<13|q>>>19,q=Se+me|0,_e^=q<<18|q>>>14,q=we+Ae|0,Z^=q<<7|q>>>25,q=Z+we|0,Q^=q<<9|q>>>23,q=Q+Z|0,Ae^=q<<13|q>>>19,q=Ae+Q|0,we^=q<<18|q>>>14,q=le+fe|0,pe^=q<<7|q>>>25,q=pe+le|0,de^=q<<9|q>>>23,q=de+pe|0,fe^=q<<13|q>>>19,q=fe+de|0,le^=q<<18|q>>>14,q=je+We|0,Oe^=q<<7|q>>>25,q=Oe+je|0,ze^=q<<9|q>>>23,q=ze+Oe|0,We^=q<<13|q>>>19,q=We+ze|0,je^=q<<18|q>>>14;_e=_e+A|0,Re=Re+G|0,me=me+J|0,Se=Se+te|0,Ae=Ae+ae|0,we=we+Te|0,Z=Z+be|0,Q=Q+Ge|0,de=de+ve|0,fe=fe+Me|0,le=le+Ce|0,pe=pe+De|0,Oe=Oe+Ne|0,ze=ze+Ie|0,We=We+Ue|0,je=je+Be|0,g[0]=_e>>>0&255,g[1]=_e>>>8&255,g[2]=_e>>>16&255,g[3]=_e>>>24&255,g[4]=Re>>>0&255,g[5]=Re>>>8&255,g[6]=Re>>>16&255,g[7]=Re>>>24&255,g[8]=me>>>0&255,g[9]=me>>>8&255,g[10]=me>>>16&255,g[11]=me>>>24&255,g[12]=Se>>>0&255,g[13]=Se>>>8&255,g[14]=Se>>>16&255,g[15]=Se>>>24&255,g[16]=Ae>>>0&255,g[17]=Ae>>>8&255,g[18]=Ae>>>16&255,g[19]=Ae>>>24&255,g[20]=we>>>0&255,g[21]=we>>>8&255,g[22]=we>>>16&255,g[23]=we>>>24&255,g[24]=Z>>>0&255,g[25]=Z>>>8&255,g[26]=Z>>>16&255,g[27]=Z>>>24&255,g[28]=Q>>>0&255,g[29]=Q>>>8&255,g[30]=Q>>>16&255,g[31]=Q>>>24&255,g[32]=de>>>0&255,g[33]=de>>>8&255,g[34]=de>>>16&255,g[35]=de>>>24&255,g[36]=fe>>>0&255,g[37]=fe>>>8&255,g[38]=fe>>>16&255,g[39]=fe>>>24&255,g[40]=le>>>0&255,g[41]=le>>>8&255,g[42]=le>>>16&255,g[43]=le>>>24&255,g[44]=pe>>>0&255,g[45]=pe>>>8&255,g[46]=pe>>>16&255,g[47]=pe>>>24&255,g[48]=Oe>>>0&255,g[49]=Oe>>>8&255,g[50]=Oe>>>16&255,g[51]=Oe>>>24&255,g[52]=ze>>>0&255,g[53]=ze>>>8&255,g[54]=ze>>>16&255,g[55]=ze>>>24&255,g[56]=We>>>0&255,g[57]=We>>>8&255,g[58]=We>>>16&255,g[59]=We>>>24&255,g[60]=je>>>0&255,g[61]=je>>>8&255,g[62]=je>>>16&255,g[63]=je>>>24&255}function z(g,_,v,l){for(var A=l[0]&255|(l[1]&255)<<8|(l[2]&255)<<16|(l[3]&255)<<24,G=v[0]&255|(v[1]&255)<<8|(v[2]&255)<<16|(v[3]&255)<<24,J=v[4]&255|(v[5]&255)<<8|(v[6]&255)<<16|(v[7]&255)<<24,te=v[8]&255|(v[9]&255)<<8|(v[10]&255)<<16|(v[11]&255)<<24,ae=v[12]&255|(v[13]&255)<<8|(v[14]&255)<<16|(v[15]&255)<<24,Te=l[4]&255|(l[5]&255)<<8|(l[6]&255)<<16|(l[7]&255)<<24,be=_[0]&255|(_[1]&255)<<8|(_[2]&255)<<16|(_[3]&255)<<24,Ge=_[4]&255|(_[5]&255)<<8|(_[6]&255)<<16|(_[7]&255)<<24,ve=_[8]&255|(_[9]&255)<<8|(_[10]&255)<<16|(_[11]&255)<<24,Me=_[12]&255|(_[13]&255)<<8|(_[14]&255)<<16|(_[15]&255)<<24,Ce=l[8]&255|(l[9]&255)<<8|(l[10]&255)<<16|(l[11]&255)<<24,De=v[16]&255|(v[17]&255)<<8|(v[18]&255)<<16|(v[19]&255)<<24,Ne=v[20]&255|(v[21]&255)<<8|(v[22]&255)<<16|(v[23]&255)<<24,Ie=v[24]&255|(v[25]&255)<<8|(v[26]&255)<<16|(v[27]&255)<<24,Ue=v[28]&255|(v[29]&255)<<8|(v[30]&255)<<16|(v[31]&255)<<24,Be=l[12]&255|(l[13]&255)<<8|(l[14]&255)<<16|(l[15]&255)<<24,_e=A,Re=G,me=J,Se=te,Ae=ae,we=Te,Z=be,Q=Ge,de=ve,fe=Me,le=Ce,pe=De,Oe=Ne,ze=Ie,We=Ue,je=Be,q,Ye=0;Ye<20;Ye+=2)q=_e+Oe|0,Ae^=q<<7|q>>>25,q=Ae+_e|0,de^=q<<9|q>>>23,q=de+Ae|0,Oe^=q<<13|q>>>19,q=Oe+de|0,_e^=q<<18|q>>>14,q=we+Re|0,fe^=q<<7|q>>>25,q=fe+we|0,ze^=q<<9|q>>>23,q=ze+fe|0,Re^=q<<13|q>>>19,q=Re+ze|0,we^=q<<18|q>>>14,q=le+Z|0,We^=q<<7|q>>>25,q=We+le|0,me^=q<<9|q>>>23,q=me+We|0,Z^=q<<13|q>>>19,q=Z+me|0,le^=q<<18|q>>>14,q=je+pe|0,Se^=q<<7|q>>>25,q=Se+je|0,Q^=q<<9|q>>>23,q=Q+Se|0,pe^=q<<13|q>>>19,q=pe+Q|0,je^=q<<18|q>>>14,q=_e+Se|0,Re^=q<<7|q>>>25,q=Re+_e|0,me^=q<<9|q>>>23,q=me+Re|0,Se^=q<<13|q>>>19,q=Se+me|0,_e^=q<<18|q>>>14,q=we+Ae|0,Z^=q<<7|q>>>25,q=Z+we|0,Q^=q<<9|q>>>23,q=Q+Z|0,Ae^=q<<13|q>>>19,q=Ae+Q|0,we^=q<<18|q>>>14,q=le+fe|0,pe^=q<<7|q>>>25,q=pe+le|0,de^=q<<9|q>>>23,q=de+pe|0,fe^=q<<13|q>>>19,q=fe+de|0,le^=q<<18|q>>>14,q=je+We|0,Oe^=q<<7|q>>>25,q=Oe+je|0,ze^=q<<9|q>>>23,q=ze+Oe|0,We^=q<<13|q>>>19,q=We+ze|0,je^=q<<18|q>>>14;g[0]=_e>>>0&255,g[1]=_e>>>8&255,g[2]=_e>>>16&255,g[3]=_e>>>24&255,g[4]=we>>>0&255,g[5]=we>>>8&255,g[6]=we>>>16&255,g[7]=we>>>24&255,g[8]=le>>>0&255,g[9]=le>>>8&255,g[10]=le>>>16&255,g[11]=le>>>24&255,g[12]=je>>>0&255,g[13]=je>>>8&255,g[14]=je>>>16&255,g[15]=je>>>24&255,g[16]=Z>>>0&255,g[17]=Z>>>8&255,g[18]=Z>>>16&255,g[19]=Z>>>24&255,g[20]=Q>>>0&255,g[21]=Q>>>8&255,g[22]=Q>>>16&255,g[23]=Q>>>24&255,g[24]=de>>>0&255,g[25]=de>>>8&255,g[26]=de>>>16&255,g[27]=de>>>24&255,g[28]=fe>>>0&255,g[29]=fe>>>8&255,g[30]=fe>>>16&255,g[31]=fe>>>24&255}function D(g,_,v,l){W(g,_,v,l)}function U(g,_,v,l){z(g,_,v,l)}var Y=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function oe(g,_,v,l,A,G,J){var te=new Uint8Array(16),ae=new Uint8Array(64),Te,be;for(be=0;be<16;be++)te[be]=0;for(be=0;be<8;be++)te[be]=G[be];for(;A>=64;){for(D(ae,te,J,Y),be=0;be<64;be++)g[_+be]=v[l+be]^ae[be];for(Te=1,be=8;be<16;be++)Te=Te+(te[be]&255)|0,te[be]=Te&255,Te>>>=8;A-=64,_+=64,l+=64}if(A>0)for(D(ae,te,J,Y),be=0;be<A;be++)g[_+be]=v[l+be]^ae[be];return 0}function X(g,_,v,l,A){var G=new Uint8Array(16),J=new Uint8Array(64),te,ae;for(ae=0;ae<16;ae++)G[ae]=0;for(ae=0;ae<8;ae++)G[ae]=l[ae];for(;v>=64;){for(D(J,G,A,Y),ae=0;ae<64;ae++)g[_+ae]=J[ae];for(te=1,ae=8;ae<16;ae++)te=te+(G[ae]&255)|0,G[ae]=te&255,te>>>=8;v-=64,_+=64}if(v>0)for(D(J,G,A,Y),ae=0;ae<v;ae++)g[_+ae]=J[ae];return 0}function ee(g,_,v,l,A){var G=new Uint8Array(32);U(G,l,A,Y);for(var J=new Uint8Array(8),te=0;te<8;te++)J[te]=l[te+16];return X(g,_,v,J,G)}function se(g,_,v,l,A,G,J){var te=new Uint8Array(32);U(te,G,J,Y);for(var ae=new Uint8Array(8),Te=0;Te<8;Te++)ae[Te]=G[Te+16];return oe(g,_,v,l,A,ae,te)}var T=function(g){this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0;var _,v,l,A,G,J,te,ae;_=g[0]&255|(g[1]&255)<<8,this.r[0]=_&8191,v=g[2]&255|(g[3]&255)<<8,this.r[1]=(_>>>13|v<<3)&8191,l=g[4]&255|(g[5]&255)<<8,this.r[2]=(v>>>10|l<<6)&7939,A=g[6]&255|(g[7]&255)<<8,this.r[3]=(l>>>7|A<<9)&8191,G=g[8]&255|(g[9]&255)<<8,this.r[4]=(A>>>4|G<<12)&255,this.r[5]=G>>>1&8190,J=g[10]&255|(g[11]&255)<<8,this.r[6]=(G>>>14|J<<2)&8191,te=g[12]&255|(g[13]&255)<<8,this.r[7]=(J>>>11|te<<5)&8065,ae=g[14]&255|(g[15]&255)<<8,this.r[8]=(te>>>8|ae<<8)&8191,this.r[9]=ae>>>5&127,this.pad[0]=g[16]&255|(g[17]&255)<<8,this.pad[1]=g[18]&255|(g[19]&255)<<8,this.pad[2]=g[20]&255|(g[21]&255)<<8,this.pad[3]=g[22]&255|(g[23]&255)<<8,this.pad[4]=g[24]&255|(g[25]&255)<<8,this.pad[5]=g[26]&255|(g[27]&255)<<8,this.pad[6]=g[28]&255|(g[29]&255)<<8,this.pad[7]=g[30]&255|(g[31]&255)<<8};T.prototype.blocks=function(g,_,v){for(var l=this.fin?0:2048,A,G,J,te,ae,Te,be,Ge,ve,Me,Ce,De,Ne,Ie,Ue,Be,_e,Re,me,Se=this.h[0],Ae=this.h[1],we=this.h[2],Z=this.h[3],Q=this.h[4],de=this.h[5],fe=this.h[6],le=this.h[7],pe=this.h[8],Oe=this.h[9],ze=this.r[0],We=this.r[1],je=this.r[2],q=this.r[3],Ye=this.r[4],pt=this.r[5],xt=this.r[6],Ve=this.r[7],ft=this.r[8],ut=this.r[9];v>=16;)A=g[_+0]&255|(g[_+1]&255)<<8,Se+=A&8191,G=g[_+2]&255|(g[_+3]&255)<<8,Ae+=(A>>>13|G<<3)&8191,J=g[_+4]&255|(g[_+5]&255)<<8,we+=(G>>>10|J<<6)&8191,te=g[_+6]&255|(g[_+7]&255)<<8,Z+=(J>>>7|te<<9)&8191,ae=g[_+8]&255|(g[_+9]&255)<<8,Q+=(te>>>4|ae<<12)&8191,de+=ae>>>1&8191,Te=g[_+10]&255|(g[_+11]&255)<<8,fe+=(ae>>>14|Te<<2)&8191,be=g[_+12]&255|(g[_+13]&255)<<8,le+=(Te>>>11|be<<5)&8191,Ge=g[_+14]&255|(g[_+15]&255)<<8,pe+=(be>>>8|Ge<<8)&8191,Oe+=Ge>>>5|l,ve=0,Me=ve,Me+=Se*ze,Me+=Ae*(5*ut),Me+=we*(5*ft),Me+=Z*(5*Ve),Me+=Q*(5*xt),ve=Me>>>13,Me&=8191,Me+=de*(5*pt),Me+=fe*(5*Ye),Me+=le*(5*q),Me+=pe*(5*je),Me+=Oe*(5*We),ve+=Me>>>13,Me&=8191,Ce=ve,Ce+=Se*We,Ce+=Ae*ze,Ce+=we*(5*ut),Ce+=Z*(5*ft),Ce+=Q*(5*Ve),ve=Ce>>>13,Ce&=8191,Ce+=de*(5*xt),Ce+=fe*(5*pt),Ce+=le*(5*Ye),Ce+=pe*(5*q),Ce+=Oe*(5*je),ve+=Ce>>>13,Ce&=8191,De=ve,De+=Se*je,De+=Ae*We,De+=we*ze,De+=Z*(5*ut),De+=Q*(5*ft),ve=De>>>13,De&=8191,De+=de*(5*Ve),De+=fe*(5*xt),De+=le*(5*pt),De+=pe*(5*Ye),De+=Oe*(5*q),ve+=De>>>13,De&=8191,Ne=ve,Ne+=Se*q,Ne+=Ae*je,Ne+=we*We,Ne+=Z*ze,Ne+=Q*(5*ut),ve=Ne>>>13,Ne&=8191,Ne+=de*(5*ft),Ne+=fe*(5*Ve),Ne+=le*(5*xt),Ne+=pe*(5*pt),Ne+=Oe*(5*Ye),ve+=Ne>>>13,Ne&=8191,Ie=ve,Ie+=Se*Ye,Ie+=Ae*q,Ie+=we*je,Ie+=Z*We,Ie+=Q*ze,ve=Ie>>>13,Ie&=8191,Ie+=de*(5*ut),Ie+=fe*(5*ft),Ie+=le*(5*Ve),Ie+=pe*(5*xt),Ie+=Oe*(5*pt),ve+=Ie>>>13,Ie&=8191,Ue=ve,Ue+=Se*pt,Ue+=Ae*Ye,Ue+=we*q,Ue+=Z*je,Ue+=Q*We,ve=Ue>>>13,Ue&=8191,Ue+=de*ze,Ue+=fe*(5*ut),Ue+=le*(5*ft),Ue+=pe*(5*Ve),Ue+=Oe*(5*xt),ve+=Ue>>>13,Ue&=8191,Be=ve,Be+=Se*xt,Be+=Ae*pt,Be+=we*Ye,Be+=Z*q,Be+=Q*je,ve=Be>>>13,Be&=8191,Be+=de*We,Be+=fe*ze,Be+=le*(5*ut),Be+=pe*(5*ft),Be+=Oe*(5*Ve),ve+=Be>>>13,Be&=8191,_e=ve,_e+=Se*Ve,_e+=Ae*xt,_e+=we*pt,_e+=Z*Ye,_e+=Q*q,ve=_e>>>13,_e&=8191,_e+=de*je,_e+=fe*We,_e+=le*ze,_e+=pe*(5*ut),_e+=Oe*(5*ft),ve+=_e>>>13,_e&=8191,Re=ve,Re+=Se*ft,Re+=Ae*Ve,Re+=we*xt,Re+=Z*pt,Re+=Q*Ye,ve=Re>>>13,Re&=8191,Re+=de*q,Re+=fe*je,Re+=le*We,Re+=pe*ze,Re+=Oe*(5*ut),ve+=Re>>>13,Re&=8191,me=ve,me+=Se*ut,me+=Ae*ft,me+=we*Ve,me+=Z*xt,me+=Q*pt,ve=me>>>13,me&=8191,me+=de*Ye,me+=fe*q,me+=le*je,me+=pe*We,me+=Oe*ze,ve+=me>>>13,me&=8191,ve=(ve<<2)+ve|0,ve=ve+Me|0,Me=ve&8191,ve=ve>>>13,Ce+=ve,Se=Me,Ae=Ce,we=De,Z=Ne,Q=Ie,de=Ue,fe=Be,le=_e,pe=Re,Oe=me,_+=16,v-=16;this.h[0]=Se,this.h[1]=Ae,this.h[2]=we,this.h[3]=Z,this.h[4]=Q,this.h[5]=de,this.h[6]=fe,this.h[7]=le,this.h[8]=pe,this.h[9]=Oe},T.prototype.finish=function(g,_){var v=new Uint16Array(10),l,A,G,J;if(this.leftover){for(J=this.leftover,this.buffer[J++]=1;J<16;J++)this.buffer[J]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(l=this.h[1]>>>13,this.h[1]&=8191,J=2;J<10;J++)this.h[J]+=l,l=this.h[J]>>>13,this.h[J]&=8191;for(this.h[0]+=l*5,l=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=l,l=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=l,v[0]=this.h[0]+5,l=v[0]>>>13,v[0]&=8191,J=1;J<10;J++)v[J]=this.h[J]+l,l=v[J]>>>13,v[J]&=8191;for(v[9]-=8192,A=(l^1)-1,J=0;J<10;J++)v[J]&=A;for(A=~A,J=0;J<10;J++)this.h[J]=this.h[J]&A|v[J];for(this.h[0]=(this.h[0]|this.h[1]<<13)&65535,this.h[1]=(this.h[1]>>>3|this.h[2]<<10)&65535,this.h[2]=(this.h[2]>>>6|this.h[3]<<7)&65535,this.h[3]=(this.h[3]>>>9|this.h[4]<<4)&65535,this.h[4]=(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14)&65535,this.h[5]=(this.h[6]>>>2|this.h[7]<<11)&65535,this.h[6]=(this.h[7]>>>5|this.h[8]<<8)&65535,this.h[7]=(this.h[8]>>>8|this.h[9]<<5)&65535,G=this.h[0]+this.pad[0],this.h[0]=G&65535,J=1;J<8;J++)G=(this.h[J]+this.pad[J]|0)+(G>>>16)|0,this.h[J]=G&65535;g[_+0]=this.h[0]>>>0&255,g[_+1]=this.h[0]>>>8&255,g[_+2]=this.h[1]>>>0&255,g[_+3]=this.h[1]>>>8&255,g[_+4]=this.h[2]>>>0&255,g[_+5]=this.h[2]>>>8&255,g[_+6]=this.h[3]>>>0&255,g[_+7]=this.h[3]>>>8&255,g[_+8]=this.h[4]>>>0&255,g[_+9]=this.h[4]>>>8&255,g[_+10]=this.h[5]>>>0&255,g[_+11]=this.h[5]>>>8&255,g[_+12]=this.h[6]>>>0&255,g[_+13]=this.h[6]>>>8&255,g[_+14]=this.h[7]>>>0&255,g[_+15]=this.h[7]>>>8&255},T.prototype.update=function(g,_,v){var l,A;if(this.leftover){for(A=16-this.leftover,A>v&&(A=v),l=0;l<A;l++)this.buffer[this.leftover+l]=g[_+l];if(v-=A,_+=A,this.leftover+=A,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(v>=16&&(A=v-v%16,this.blocks(g,_,A),_+=A,v-=A),v){for(l=0;l<v;l++)this.buffer[this.leftover+l]=g[_+l];this.leftover+=v}};function f(g,_,v,l,A,G){var J=new T(G);return J.update(v,l,A),J.finish(g,_),0}function d(g,_,v,l,A,G){var J=new Uint8Array(16);return f(J,0,v,l,A,G),E(g,_,J,0)}function y(g,_,v,l,A){var G;if(v<32)return-1;for(se(g,0,_,0,v,l,A),f(g,16,g,32,v-32,g),G=0;G<16;G++)g[G]=0;return 0}function w(g,_,v,l,A){var G,J=new Uint8Array(32);if(v<32||(ee(J,0,32,l,A),d(_,16,_,32,v-32,J)!==0))return-1;for(se(g,0,_,0,v,l,A),G=0;G<32;G++)g[G]=0;return 0}function S(g,_){var v;for(v=0;v<16;v++)g[v]=_[v]|0}function B(g){var _,v,l=1;for(_=0;_<16;_++)v=g[_]+l+65535,l=Math.floor(v/65536),g[_]=v-l*65536;g[0]+=l-1+37*(l-1)}function $(g,_,v){for(var l,A=~(v-1),G=0;G<16;G++)l=A&(g[G]^_[G]),g[G]^=l,_[G]^=l}function k(g,_){var v,l,A,G=r(),J=r();for(v=0;v<16;v++)J[v]=_[v];for(B(J),B(J),B(J),l=0;l<2;l++){for(G[0]=J[0]-65517,v=1;v<15;v++)G[v]=J[v]-65535-(G[v-1]>>16&1),G[v-1]&=65535;G[15]=J[15]-32767-(G[14]>>16&1),A=G[15]>>16&1,G[14]&=65535,$(J,G,1-A)}for(v=0;v<16;v++)g[2*v]=J[v]&255,g[2*v+1]=J[v]>>8}function x(g,_){var v=new Uint8Array(32),l=new Uint8Array(32);return k(v,g),k(l,_),L(v,0,l,0)}function b(g){var _=new Uint8Array(32);return k(_,g),_[0]&1}function F(g,_){var v;for(v=0;v<16;v++)g[v]=_[2*v]+(_[2*v+1]<<8);g[15]&=32767}function V(g,_,v){for(var l=0;l<16;l++)g[l]=_[l]+v[l]}function K(g,_,v){for(var l=0;l<16;l++)g[l]=_[l]-v[l]}function H(g,_,v){var l,A,G=0,J=0,te=0,ae=0,Te=0,be=0,Ge=0,ve=0,Me=0,Ce=0,De=0,Ne=0,Ie=0,Ue=0,Be=0,_e=0,Re=0,me=0,Se=0,Ae=0,we=0,Z=0,Q=0,de=0,fe=0,le=0,pe=0,Oe=0,ze=0,We=0,je=0,q=v[0],Ye=v[1],pt=v[2],xt=v[3],Ve=v[4],ft=v[5],ut=v[6],Qt=v[7],Ct=v[8],Yt=v[9],Xt=v[10],Zt=v[11],ar=v[12],_r=v[13],Er=v[14],Sr=v[15];l=_[0],G+=l*q,J+=l*Ye,te+=l*pt,ae+=l*xt,Te+=l*Ve,be+=l*ft,Ge+=l*ut,ve+=l*Qt,Me+=l*Ct,Ce+=l*Yt,De+=l*Xt,Ne+=l*Zt,Ie+=l*ar,Ue+=l*_r,Be+=l*Er,_e+=l*Sr,l=_[1],J+=l*q,te+=l*Ye,ae+=l*pt,Te+=l*xt,be+=l*Ve,Ge+=l*ft,ve+=l*ut,Me+=l*Qt,Ce+=l*Ct,De+=l*Yt,Ne+=l*Xt,Ie+=l*Zt,Ue+=l*ar,Be+=l*_r,_e+=l*Er,Re+=l*Sr,l=_[2],te+=l*q,ae+=l*Ye,Te+=l*pt,be+=l*xt,Ge+=l*Ve,ve+=l*ft,Me+=l*ut,Ce+=l*Qt,De+=l*Ct,Ne+=l*Yt,Ie+=l*Xt,Ue+=l*Zt,Be+=l*ar,_e+=l*_r,Re+=l*Er,me+=l*Sr,l=_[3],ae+=l*q,Te+=l*Ye,be+=l*pt,Ge+=l*xt,ve+=l*Ve,Me+=l*ft,Ce+=l*ut,De+=l*Qt,Ne+=l*Ct,Ie+=l*Yt,Ue+=l*Xt,Be+=l*Zt,_e+=l*ar,Re+=l*_r,me+=l*Er,Se+=l*Sr,l=_[4],Te+=l*q,be+=l*Ye,Ge+=l*pt,ve+=l*xt,Me+=l*Ve,Ce+=l*ft,De+=l*ut,Ne+=l*Qt,Ie+=l*Ct,Ue+=l*Yt,Be+=l*Xt,_e+=l*Zt,Re+=l*ar,me+=l*_r,Se+=l*Er,Ae+=l*Sr,l=_[5],be+=l*q,Ge+=l*Ye,ve+=l*pt,Me+=l*xt,Ce+=l*Ve,De+=l*ft,Ne+=l*ut,Ie+=l*Qt,Ue+=l*Ct,Be+=l*Yt,_e+=l*Xt,Re+=l*Zt,me+=l*ar,Se+=l*_r,Ae+=l*Er,we+=l*Sr,l=_[6],Ge+=l*q,ve+=l*Ye,Me+=l*pt,Ce+=l*xt,De+=l*Ve,Ne+=l*ft,Ie+=l*ut,Ue+=l*Qt,Be+=l*Ct,_e+=l*Yt,Re+=l*Xt,me+=l*Zt,Se+=l*ar,Ae+=l*_r,we+=l*Er,Z+=l*Sr,l=_[7],ve+=l*q,Me+=l*Ye,Ce+=l*pt,De+=l*xt,Ne+=l*Ve,Ie+=l*ft,Ue+=l*ut,Be+=l*Qt,_e+=l*Ct,Re+=l*Yt,me+=l*Xt,Se+=l*Zt,Ae+=l*ar,we+=l*_r,Z+=l*Er,Q+=l*Sr,l=_[8],Me+=l*q,Ce+=l*Ye,De+=l*pt,Ne+=l*xt,Ie+=l*Ve,Ue+=l*ft,Be+=l*ut,_e+=l*Qt,Re+=l*Ct,me+=l*Yt,Se+=l*Xt,Ae+=l*Zt,we+=l*ar,Z+=l*_r,Q+=l*Er,de+=l*Sr,l=_[9],Ce+=l*q,De+=l*Ye,Ne+=l*pt,Ie+=l*xt,Ue+=l*Ve,Be+=l*ft,_e+=l*ut,Re+=l*Qt,me+=l*Ct,Se+=l*Yt,Ae+=l*Xt,we+=l*Zt,Z+=l*ar,Q+=l*_r,de+=l*Er,fe+=l*Sr,l=_[10],De+=l*q,Ne+=l*Ye,Ie+=l*pt,Ue+=l*xt,Be+=l*Ve,_e+=l*ft,Re+=l*ut,me+=l*Qt,Se+=l*Ct,Ae+=l*Yt,we+=l*Xt,Z+=l*Zt,Q+=l*ar,de+=l*_r,fe+=l*Er,le+=l*Sr,l=_[11],Ne+=l*q,Ie+=l*Ye,Ue+=l*pt,Be+=l*xt,_e+=l*Ve,Re+=l*ft,me+=l*ut,Se+=l*Qt,Ae+=l*Ct,we+=l*Yt,Z+=l*Xt,Q+=l*Zt,de+=l*ar,fe+=l*_r,le+=l*Er,pe+=l*Sr,l=_[12],Ie+=l*q,Ue+=l*Ye,Be+=l*pt,_e+=l*xt,Re+=l*Ve,me+=l*ft,Se+=l*ut,Ae+=l*Qt,we+=l*Ct,Z+=l*Yt,Q+=l*Xt,de+=l*Zt,fe+=l*ar,le+=l*_r,pe+=l*Er,Oe+=l*Sr,l=_[13],Ue+=l*q,Be+=l*Ye,_e+=l*pt,Re+=l*xt,me+=l*Ve,Se+=l*ft,Ae+=l*ut,we+=l*Qt,Z+=l*Ct,Q+=l*Yt,de+=l*Xt,fe+=l*Zt,le+=l*ar,pe+=l*_r,Oe+=l*Er,ze+=l*Sr,l=_[14],Be+=l*q,_e+=l*Ye,Re+=l*pt,me+=l*xt,Se+=l*Ve,Ae+=l*ft,we+=l*ut,Z+=l*Qt,Q+=l*Ct,de+=l*Yt,fe+=l*Xt,le+=l*Zt,pe+=l*ar,Oe+=l*_r,ze+=l*Er,We+=l*Sr,l=_[15],_e+=l*q,Re+=l*Ye,me+=l*pt,Se+=l*xt,Ae+=l*Ve,we+=l*ft,Z+=l*ut,Q+=l*Qt,de+=l*Ct,fe+=l*Yt,le+=l*Xt,pe+=l*Zt,Oe+=l*ar,ze+=l*_r,We+=l*Er,je+=l*Sr,G+=38*Re,J+=38*me,te+=38*Se,ae+=38*Ae,Te+=38*we,be+=38*Z,Ge+=38*Q,ve+=38*de,Me+=38*fe,Ce+=38*le,De+=38*pe,Ne+=38*Oe,Ie+=38*ze,Ue+=38*We,Be+=38*je,A=1,l=G+A+65535,A=Math.floor(l/65536),G=l-A*65536,l=J+A+65535,A=Math.floor(l/65536),J=l-A*65536,l=te+A+65535,A=Math.floor(l/65536),te=l-A*65536,l=ae+A+65535,A=Math.floor(l/65536),ae=l-A*65536,l=Te+A+65535,A=Math.floor(l/65536),Te=l-A*65536,l=be+A+65535,A=Math.floor(l/65536),be=l-A*65536,l=Ge+A+65535,A=Math.floor(l/65536),Ge=l-A*65536,l=ve+A+65535,A=Math.floor(l/65536),ve=l-A*65536,l=Me+A+65535,A=Math.floor(l/65536),Me=l-A*65536,l=Ce+A+65535,A=Math.floor(l/65536),Ce=l-A*65536,l=De+A+65535,A=Math.floor(l/65536),De=l-A*65536,l=Ne+A+65535,A=Math.floor(l/65536),Ne=l-A*65536,l=Ie+A+65535,A=Math.floor(l/65536),Ie=l-A*65536,l=Ue+A+65535,A=Math.floor(l/65536),Ue=l-A*65536,l=Be+A+65535,A=Math.floor(l/65536),Be=l-A*65536,l=_e+A+65535,A=Math.floor(l/65536),_e=l-A*65536,G+=A-1+37*(A-1),A=1,l=G+A+65535,A=Math.floor(l/65536),G=l-A*65536,l=J+A+65535,A=Math.floor(l/65536),J=l-A*65536,l=te+A+65535,A=Math.floor(l/65536),te=l-A*65536,l=ae+A+65535,A=Math.floor(l/65536),ae=l-A*65536,l=Te+A+65535,A=Math.floor(l/65536),Te=l-A*65536,l=be+A+65535,A=Math.floor(l/65536),be=l-A*65536,l=Ge+A+65535,A=Math.floor(l/65536),Ge=l-A*65536,l=ve+A+65535,A=Math.floor(l/65536),ve=l-A*65536,l=Me+A+65535,A=Math.floor(l/65536),Me=l-A*65536,l=Ce+A+65535,A=Math.floor(l/65536),Ce=l-A*65536,l=De+A+65535,A=Math.floor(l/65536),De=l-A*65536,l=Ne+A+65535,A=Math.floor(l/65536),Ne=l-A*65536,l=Ie+A+65535,A=Math.floor(l/65536),Ie=l-A*65536,l=Ue+A+65535,A=Math.floor(l/65536),Ue=l-A*65536,l=Be+A+65535,A=Math.floor(l/65536),Be=l-A*65536,l=_e+A+65535,A=Math.floor(l/65536),_e=l-A*65536,G+=A-1+37*(A-1),g[0]=G,g[1]=J,g[2]=te,g[3]=ae,g[4]=Te,g[5]=be,g[6]=Ge,g[7]=ve,g[8]=Me,g[9]=Ce,g[10]=De,g[11]=Ne,g[12]=Ie,g[13]=Ue,g[14]=Be,g[15]=_e}function O(g,_){H(g,_,_)}function j(g,_){var v=r(),l;for(l=0;l<16;l++)v[l]=_[l];for(l=253;l>=0;l--)O(v,v),l!==2&&l!==4&&H(v,v,_);for(l=0;l<16;l++)g[l]=v[l]}function re(g,_){var v=r(),l;for(l=0;l<16;l++)v[l]=_[l];for(l=250;l>=0;l--)O(v,v),l!==1&&H(v,v,_);for(l=0;l<16;l++)g[l]=v[l]}function ie(g,_,v){var l=new Uint8Array(32),A=new Float64Array(80),G,J,te=r(),ae=r(),Te=r(),be=r(),Ge=r(),ve=r();for(J=0;J<31;J++)l[J]=_[J];for(l[31]=_[31]&127|64,l[0]&=248,F(A,v),J=0;J<16;J++)ae[J]=A[J],be[J]=te[J]=Te[J]=0;for(te[0]=be[0]=1,J=254;J>=0;--J)G=l[J>>>3]>>>(J&7)&1,$(te,ae,G),$(Te,be,G),V(Ge,te,Te),K(te,te,Te),V(Te,ae,be),K(ae,ae,be),O(be,Ge),O(ve,te),H(te,Te,te),H(Te,ae,Ge),V(Ge,te,Te),K(te,te,Te),O(ae,te),K(Te,be,ve),H(te,Te,c),V(te,te,be),H(Te,Te,te),H(te,be,ve),H(be,ae,A),O(ae,Ge),$(te,ae,G),$(Te,be,G);for(J=0;J<16;J++)A[J+16]=te[J],A[J+32]=Te[J],A[J+48]=ae[J],A[J+64]=be[J];var Me=A.subarray(32),Ce=A.subarray(16);return j(Me,Me),H(Ce,Ce,Me),k(g,Ce),0}function ye(g,_){return ie(g,_,s)}function I(g,_){return n(_,32),ye(g,_)}function C(g,_,v){var l=new Uint8Array(32);return ie(l,v,_),U(g,i,l,Y)}var ne=y,Ee=w;function Le(g,_,v,l,A,G){var J=new Uint8Array(32);return C(J,A,G),ne(g,_,v,l,J)}function Pe(g,_,v,l,A,G){var J=new Uint8Array(32);return C(J,A,G),Ee(g,_,v,l,J)}var rt=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function ht(g,_,v,l){for(var A=new Int32Array(16),G=new Int32Array(16),J,te,ae,Te,be,Ge,ve,Me,Ce,De,Ne,Ie,Ue,Be,_e,Re,me,Se,Ae,we,Z,Q,de,fe,le,pe,Oe=g[0],ze=g[1],We=g[2],je=g[3],q=g[4],Ye=g[5],pt=g[6],xt=g[7],Ve=_[0],ft=_[1],ut=_[2],Qt=_[3],Ct=_[4],Yt=_[5],Xt=_[6],Zt=_[7],ar=0;l>=128;){for(Ae=0;Ae<16;Ae++)we=8*Ae+ar,A[Ae]=v[we+0]<<24|v[we+1]<<16|v[we+2]<<8|v[we+3],G[Ae]=v[we+4]<<24|v[we+5]<<16|v[we+6]<<8|v[we+7];for(Ae=0;Ae<80;Ae++)if(J=Oe,te=ze,ae=We,Te=je,be=q,Ge=Ye,ve=pt,Me=xt,Ce=Ve,De=ft,Ne=ut,Ie=Qt,Ue=Ct,Be=Yt,_e=Xt,Re=Zt,Z=xt,Q=Zt,de=Q&65535,fe=Q>>>16,le=Z&65535,pe=Z>>>16,Z=(q>>>14|Ct<<18)^(q>>>18|Ct<<14)^(Ct>>>9|q<<23),Q=(Ct>>>14|q<<18)^(Ct>>>18|q<<14)^(q>>>9|Ct<<23),de+=Q&65535,fe+=Q>>>16,le+=Z&65535,pe+=Z>>>16,Z=q&Ye^~q&pt,Q=Ct&Yt^~Ct&Xt,de+=Q&65535,fe+=Q>>>16,le+=Z&65535,pe+=Z>>>16,Z=rt[Ae*2],Q=rt[Ae*2+1],de+=Q&65535,fe+=Q>>>16,le+=Z&65535,pe+=Z>>>16,Z=A[Ae%16],Q=G[Ae%16],de+=Q&65535,fe+=Q>>>16,le+=Z&65535,pe+=Z>>>16,fe+=de>>>16,le+=fe>>>16,pe+=le>>>16,me=le&65535|pe<<16,Se=de&65535|fe<<16,Z=me,Q=Se,de=Q&65535,fe=Q>>>16,le=Z&65535,pe=Z>>>16,Z=(Oe>>>28|Ve<<4)^(Ve>>>2|Oe<<30)^(Ve>>>7|Oe<<25),Q=(Ve>>>28|Oe<<4)^(Oe>>>2|Ve<<30)^(Oe>>>7|Ve<<25),de+=Q&65535,fe+=Q>>>16,le+=Z&65535,pe+=Z>>>16,Z=Oe&ze^Oe&We^ze&We,Q=Ve&ft^Ve&ut^ft&ut,de+=Q&65535,fe+=Q>>>16,le+=Z&65535,pe+=Z>>>16,fe+=de>>>16,le+=fe>>>16,pe+=le>>>16,Me=le&65535|pe<<16,Re=de&65535|fe<<16,Z=Te,Q=Ie,de=Q&65535,fe=Q>>>16,le=Z&65535,pe=Z>>>16,Z=me,Q=Se,de+=Q&65535,fe+=Q>>>16,le+=Z&65535,pe+=Z>>>16,fe+=de>>>16,le+=fe>>>16,pe+=le>>>16,Te=le&65535|pe<<16,Ie=de&65535|fe<<16,ze=J,We=te,je=ae,q=Te,Ye=be,pt=Ge,xt=ve,Oe=Me,ft=Ce,ut=De,Qt=Ne,Ct=Ie,Yt=Ue,Xt=Be,Zt=_e,Ve=Re,Ae%16===15)for(we=0;we<16;we++)Z=A[we],Q=G[we],de=Q&65535,fe=Q>>>16,le=Z&65535,pe=Z>>>16,Z=A[(we+9)%16],Q=G[(we+9)%16],de+=Q&65535,fe+=Q>>>16,le+=Z&65535,pe+=Z>>>16,me=A[(we+1)%16],Se=G[(we+1)%16],Z=(me>>>1|Se<<31)^(me>>>8|Se<<24)^me>>>7,Q=(Se>>>1|me<<31)^(Se>>>8|me<<24)^(Se>>>7|me<<25),de+=Q&65535,fe+=Q>>>16,le+=Z&65535,pe+=Z>>>16,me=A[(we+14)%16],Se=G[(we+14)%16],Z=(me>>>19|Se<<13)^(Se>>>29|me<<3)^me>>>6,Q=(Se>>>19|me<<13)^(me>>>29|Se<<3)^(Se>>>6|me<<26),de+=Q&65535,fe+=Q>>>16,le+=Z&65535,pe+=Z>>>16,fe+=de>>>16,le+=fe>>>16,pe+=le>>>16,A[we]=le&65535|pe<<16,G[we]=de&65535|fe<<16;Z=Oe,Q=Ve,de=Q&65535,fe=Q>>>16,le=Z&65535,pe=Z>>>16,Z=g[0],Q=_[0],de+=Q&65535,fe+=Q>>>16,le+=Z&65535,pe+=Z>>>16,fe+=de>>>16,le+=fe>>>16,pe+=le>>>16,g[0]=Oe=le&65535|pe<<16,_[0]=Ve=de&65535|fe<<16,Z=ze,Q=ft,de=Q&65535,fe=Q>>>16,le=Z&65535,pe=Z>>>16,Z=g[1],Q=_[1],de+=Q&65535,fe+=Q>>>16,le+=Z&65535,pe+=Z>>>16,fe+=de>>>16,le+=fe>>>16,pe+=le>>>16,g[1]=ze=le&65535|pe<<16,_[1]=ft=de&65535|fe<<16,Z=We,Q=ut,de=Q&65535,fe=Q>>>16,le=Z&65535,pe=Z>>>16,Z=g[2],Q=_[2],de+=Q&65535,fe+=Q>>>16,le+=Z&65535,pe+=Z>>>16,fe+=de>>>16,le+=fe>>>16,pe+=le>>>16,g[2]=We=le&65535|pe<<16,_[2]=ut=de&65535|fe<<16,Z=je,Q=Qt,de=Q&65535,fe=Q>>>16,le=Z&65535,pe=Z>>>16,Z=g[3],Q=_[3],de+=Q&65535,fe+=Q>>>16,le+=Z&65535,pe+=Z>>>16,fe+=de>>>16,le+=fe>>>16,pe+=le>>>16,g[3]=je=le&65535|pe<<16,_[3]=Qt=de&65535|fe<<16,Z=q,Q=Ct,de=Q&65535,fe=Q>>>16,le=Z&65535,pe=Z>>>16,Z=g[4],Q=_[4],de+=Q&65535,fe+=Q>>>16,le+=Z&65535,pe+=Z>>>16,fe+=de>>>16,le+=fe>>>16,pe+=le>>>16,g[4]=q=le&65535|pe<<16,_[4]=Ct=de&65535|fe<<16,Z=Ye,Q=Yt,de=Q&65535,fe=Q>>>16,le=Z&65535,pe=Z>>>16,Z=g[5],Q=_[5],de+=Q&65535,fe+=Q>>>16,le+=Z&65535,pe+=Z>>>16,fe+=de>>>16,le+=fe>>>16,pe+=le>>>16,g[5]=Ye=le&65535|pe<<16,_[5]=Yt=de&65535|fe<<16,Z=pt,Q=Xt,de=Q&65535,fe=Q>>>16,le=Z&65535,pe=Z>>>16,Z=g[6],Q=_[6],de+=Q&65535,fe+=Q>>>16,le+=Z&65535,pe+=Z>>>16,fe+=de>>>16,le+=fe>>>16,pe+=le>>>16,g[6]=pt=le&65535|pe<<16,_[6]=Xt=de&65535|fe<<16,Z=xt,Q=Zt,de=Q&65535,fe=Q>>>16,le=Z&65535,pe=Z>>>16,Z=g[7],Q=_[7],de+=Q&65535,fe+=Q>>>16,le+=Z&65535,pe+=Z>>>16,fe+=de>>>16,le+=fe>>>16,pe+=le>>>16,g[7]=xt=le&65535|pe<<16,_[7]=Zt=de&65535|fe<<16,ar+=128,l-=128}return l}function et(g,_,v){var l=new Int32Array(8),A=new Int32Array(8),G=new Uint8Array(256),J,te=v;for(l[0]=1779033703,l[1]=3144134277,l[2]=1013904242,l[3]=2773480762,l[4]=1359893119,l[5]=2600822924,l[6]=528734635,l[7]=1541459225,A[0]=4089235720,A[1]=2227873595,A[2]=4271175723,A[3]=1595750129,A[4]=2917565137,A[5]=725511199,A[6]=4215389547,A[7]=327033209,ht(l,A,_,v),v%=128,J=0;J<v;J++)G[J]=_[te-v+J];for(G[v]=128,v=256-128*(v<112?1:0),G[v-9]=0,M(G,v-8,te/536870912|0,te<<3),ht(l,A,G,v),J=0;J<8;J++)M(g,8*J,l[J],A[J]);return 0}function Nr(g,_){var v=r(),l=r(),A=r(),G=r(),J=r(),te=r(),ae=r(),Te=r(),be=r();K(v,g[1],g[0]),K(be,_[1],_[0]),H(v,v,be),V(l,g[0],g[1]),V(be,_[0],_[1]),H(l,l,be),H(A,g[3],_[3]),H(A,A,h),H(G,g[2],_[2]),V(G,G,G),K(J,l,v),K(te,G,A),V(ae,G,A),V(Te,l,v),H(g[0],J,te),H(g[1],Te,ae),H(g[2],ae,te),H(g[3],J,Te)}function It(g,_,v){var l;for(l=0;l<4;l++)$(g[l],_[l],v)}function Et(g,_){var v=r(),l=r(),A=r();j(A,_[2]),H(v,_[0],A),H(l,_[1],A),k(g,l),g[31]^=b(v)<<7}function Dr(g,_,v){var l,A;for(S(g[0],a),S(g[1],o),S(g[2],o),S(g[3],a),A=255;A>=0;--A)l=v[A/8|0]>>(A&7)&1,It(g,_,l),Nr(_,g),Nr(g,g),It(g,_,l)}function gt(g,_){var v=[r(),r(),r(),r()];S(v[0],p),S(v[1],m),S(v[2],o),H(v[3],p,m),Dr(g,v,_)}function vt(g,_,v){var l=new Uint8Array(64),A=[r(),r(),r(),r()],G;for(v||n(_,32),et(l,_,32),l[0]&=248,l[31]&=127,l[31]|=64,gt(A,l),Et(g,A),G=0;G<32;G++)_[G+32]=g[G];return 0}var wr=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function ct(g,_){var v,l,A,G;for(l=63;l>=32;--l){for(v=0,A=l-32,G=l-12;A<G;++A)_[A]+=v-16*_[l]*wr[A-(l-32)],v=Math.floor((_[A]+128)/256),_[A]-=v*256;_[A]+=v,_[l]=0}for(v=0,A=0;A<32;A++)_[A]+=v-(_[31]>>4)*wr[A],v=_[A]>>8,_[A]&=255;for(A=0;A<32;A++)_[A]-=v*wr[A];for(l=0;l<32;l++)_[l+1]+=_[l]>>8,g[l]=_[l]&255}function nt(g){var _=new Float64Array(64),v;for(v=0;v<64;v++)_[v]=g[v];for(v=0;v<64;v++)g[v]=0;ct(g,_)}function Gn(g,_,v,l){var A=new Uint8Array(64),G=new Uint8Array(64),J=new Uint8Array(64),te,ae,Te=new Float64Array(64),be=[r(),r(),r(),r()];et(A,l,32),A[0]&=248,A[31]&=127,A[31]|=64;var Ge=v+64;for(te=0;te<v;te++)g[64+te]=_[te];for(te=0;te<32;te++)g[32+te]=A[32+te];for(et(J,g.subarray(32),v+32),nt(J),gt(be,J),Et(g,be),te=32;te<64;te++)g[te]=l[te];for(et(G,g,v+64),nt(G),te=0;te<64;te++)Te[te]=0;for(te=0;te<32;te++)Te[te]=J[te];for(te=0;te<32;te++)for(ae=0;ae<32;ae++)Te[te+ae]+=G[te]*A[ae];return ct(g.subarray(32),Te),Ge}function qt(g,_){var v=r(),l=r(),A=r(),G=r(),J=r(),te=r(),ae=r();return S(g[2],o),F(g[1],_),O(A,g[1]),H(G,A,u),K(A,A,g[2]),V(G,g[2],G),O(J,G),O(te,J),H(ae,te,J),H(v,ae,A),H(v,v,G),re(v,v),H(v,v,A),H(v,v,G),H(v,v,G),H(g[0],v,G),O(l,g[0]),H(l,l,G),x(l,A)&&H(g[0],g[0],P),O(l,g[0]),H(l,l,G),x(l,A)?-1:(b(g[0])===_[31]>>7&&K(g[0],a,g[0]),H(g[3],g[0],g[1]),0)}function Bt(g,_,v,l){var A,G=new Uint8Array(32),J=new Uint8Array(64),te=[r(),r(),r(),r()],ae=[r(),r(),r(),r()];if(v<64||qt(ae,l))return-1;for(A=0;A<v;A++)g[A]=_[A];for(A=0;A<32;A++)g[A+32]=l[A];if(et(J,g,v),nt(J),Dr(te,ae,J),gt(ae,_.subarray(32)),Nr(te,ae),Et(G,te),v-=64,L(_,0,G,0)){for(A=0;A<v;A++)g[A]=0;return-1}for(A=0;A<v;A++)g[A]=_[A+64];return v}var Mn=32,kt=24,St=32,Lr=16,At=32,Mt=32,Jr=32,Tt=32,Ut=32,Wn=kt,Ft=St,Ht=Lr,vr=64,bt=32,_t=64,Cn=32,Ot=64;e.lowlevel={crypto_core_hsalsa20:U,crypto_stream_xor:se,crypto_stream:ee,crypto_stream_salsa20_xor:oe,crypto_stream_salsa20:X,crypto_onetimeauth:f,crypto_onetimeauth_verify:d,crypto_verify_16:E,crypto_verify_32:L,crypto_secretbox:y,crypto_secretbox_open:w,crypto_scalarmult:ie,crypto_scalarmult_base:ye,crypto_box_beforenm:C,crypto_box_afternm:ne,crypto_box:Le,crypto_box_open:Pe,crypto_box_keypair:I,crypto_hash:et,crypto_sign:Gn,crypto_sign_keypair:vt,crypto_sign_open:Bt,crypto_secretbox_KEYBYTES:Mn,crypto_secretbox_NONCEBYTES:kt,crypto_secretbox_ZEROBYTES:St,crypto_secretbox_BOXZEROBYTES:Lr,crypto_scalarmult_BYTES:At,crypto_scalarmult_SCALARBYTES:Mt,crypto_box_PUBLICKEYBYTES:Jr,crypto_box_SECRETKEYBYTES:Tt,crypto_box_BEFORENMBYTES:Ut,crypto_box_NONCEBYTES:Wn,crypto_box_ZEROBYTES:Ft,crypto_box_BOXZEROBYTES:Ht,crypto_sign_BYTES:vr,crypto_sign_PUBLICKEYBYTES:bt,crypto_sign_SECRETKEYBYTES:_t,crypto_sign_SEEDBYTES:Cn,crypto_hash_BYTES:Ot,gf:r,D:u,L:wr,pack25519:k,unpack25519:F,M:H,A:V,S:O,Z:K,pow2523:re,add:Nr,set25519:S,modL:ct,scalarmult:Dr,scalarbase:gt};function Dt(g,_){if(g.length!==Mn)throw new Error("bad key size");if(_.length!==kt)throw new Error("bad nonce size")}function si(g,_){if(g.length!==Jr)throw new Error("bad public key size");if(_.length!==Tt)throw new Error("bad secret key size")}function Qe(){for(var g=0;g<arguments.length;g++)if(!(arguments[g]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}function Lt(g){for(var _=0;_<g.length;_++)g[_]=0}e.randomBytes=function(g){var _=new Uint8Array(g);return n(_,g),_},e.secretbox=function(g,_,v){Qe(g,_,v),Dt(v,_);for(var l=new Uint8Array(St+g.length),A=new Uint8Array(l.length),G=0;G<g.length;G++)l[G+St]=g[G];return y(A,l,l.length,_,v),A.subarray(Lr)},e.secretbox.open=function(g,_,v){Qe(g,_,v),Dt(v,_);for(var l=new Uint8Array(Lr+g.length),A=new Uint8Array(l.length),G=0;G<g.length;G++)l[G+Lr]=g[G];return l.length<32||w(A,l,l.length,_,v)!==0?null:A.subarray(St)},e.secretbox.keyLength=Mn,e.secretbox.nonceLength=kt,e.secretbox.overheadLength=Lr,e.scalarMult=function(g,_){if(Qe(g,_),g.length!==Mt)throw new Error("bad n size");if(_.length!==At)throw new Error("bad p size");var v=new Uint8Array(At);return ie(v,g,_),v},e.scalarMult.base=function(g){if(Qe(g),g.length!==Mt)throw new Error("bad n size");var _=new Uint8Array(At);return ye(_,g),_},e.scalarMult.scalarLength=Mt,e.scalarMult.groupElementLength=At,e.box=function(g,_,v,l){var A=e.box.before(v,l);return e.secretbox(g,_,A)},e.box.before=function(g,_){Qe(g,_),si(g,_);var v=new Uint8Array(Ut);return C(v,g,_),v},e.box.after=e.secretbox,e.box.open=function(g,_,v,l){var A=e.box.before(v,l);return e.secretbox.open(g,_,A)},e.box.open.after=e.secretbox.open,e.box.keyPair=function(){var g=new Uint8Array(Jr),_=new Uint8Array(Tt);return I(g,_),{publicKey:g,secretKey:_}},e.box.keyPair.fromSecretKey=function(g){if(Qe(g),g.length!==Tt)throw new Error("bad secret key size");var _=new Uint8Array(Jr);return ye(_,g),{publicKey:_,secretKey:new Uint8Array(g)}},e.box.publicKeyLength=Jr,e.box.secretKeyLength=Tt,e.box.sharedKeyLength=Ut,e.box.nonceLength=Wn,e.box.overheadLength=e.secretbox.overheadLength,e.sign=function(g,_){if(Qe(g,_),_.length!==_t)throw new Error("bad secret key size");var v=new Uint8Array(vr+g.length);return Gn(v,g,g.length,_),v},e.sign.open=function(g,_){if(Qe(g,_),_.length!==bt)throw new Error("bad public key size");var v=new Uint8Array(g.length),l=Bt(v,g,g.length,_);if(l<0)return null;for(var A=new Uint8Array(l),G=0;G<A.length;G++)A[G]=v[G];return A},e.sign.detached=function(g,_){for(var v=e.sign(g,_),l=new Uint8Array(vr),A=0;A<l.length;A++)l[A]=v[A];return l},e.sign.detached.verify=function(g,_,v){if(Qe(g,_,v),_.length!==vr)throw new Error("bad signature size");if(v.length!==bt)throw new Error("bad public key size");var l=new Uint8Array(vr+g.length),A=new Uint8Array(vr+g.length),G;for(G=0;G<vr;G++)l[G]=_[G];for(G=0;G<g.length;G++)l[G+vr]=g[G];return Bt(A,l,l.length,v)>=0},e.sign.keyPair=function(){var g=new Uint8Array(bt),_=new Uint8Array(_t);return vt(g,_),{publicKey:g,secretKey:_}},e.sign.keyPair.fromSecretKey=function(g){if(Qe(g),g.length!==_t)throw new Error("bad secret key size");for(var _=new Uint8Array(bt),v=0;v<_.length;v++)_[v]=g[32+v];return{publicKey:_,secretKey:new Uint8Array(g)}},e.sign.keyPair.fromSeed=function(g){if(Qe(g),g.length!==Cn)throw new Error("bad seed size");for(var _=new Uint8Array(bt),v=new Uint8Array(_t),l=0;l<32;l++)v[l]=g[l];return vt(_,v,!0),{publicKey:_,secretKey:v}},e.sign.publicKeyLength=bt,e.sign.secretKeyLength=_t,e.sign.seedLength=Cn,e.sign.signatureLength=vr,e.hash=function(g){Qe(g);var _=new Uint8Array(Ot);return et(_,g,g.length),_},e.hash.hashLength=Ot,e.verify=function(g,_){return Qe(g,_),g.length===0||_.length===0||g.length!==_.length?!1:R(g,0,_,0,g.length)===0},e.setPRNG=function(g){n=g},function(){var g=typeof self<"u"?self.crypto||self.msCrypto:null;if(g&&g.getRandomValues){var _=65536;e.setPRNG(function(v,l){var A,G=new Uint8Array(l);for(A=0;A<l;A+=_)g.getRandomValues(G.subarray(A,A+Math.min(l-A,_)));for(A=0;A<l;A++)v[A]=G[A];Lt(G)})}else typeof Ug<"u"&&(g=kg(),g&&g.randomBytes&&e.setPRNG(function(v,l){var A,G=g.randomBytes(l);for(A=0;A<l;A++)v[A]=G[A];Lt(G)}))}()})(t.exports?t.exports:self.nacl=self.nacl||{})})(mx);var Va=mx.exports;const yo=pn(Va);var Ja={},wx={},Ic={};Object.defineProperty(Ic,"__esModule",{value:!0});Ic.Assignable=void 0;let cv=class{constructor(e){Object.keys(e).map(r=>{this[r]=e[r]})}};Ic.Assignable=cv;var Fn={};Object.defineProperty(Fn,"__esModule",{value:!0});Fn.ErrorContext=Fn.TypedError=Fn.ArgumentTypeError=Fn.PositionalArgsError=void 0;let fv=class extends Error{constructor(){super("Contract method calls expect named arguments wrapped in object, e.g. { argName1: argValue1, argName2: argValue2 }")}};Fn.PositionalArgsError=fv;let uv=class extends Error{constructor(e,r,n){super(`Expected ${r} for '${e}' argument, but got '${JSON.stringify(n)}'`)}};Fn.ArgumentTypeError=uv;let lv=class extends Error{constructor(e,r,n){super(e),this.type=r||"UntypedError",this.context=n}};Fn.TypedError=lv;let dv=class{constructor(e){this.transactionHash=e}};Fn.ErrorContext=dv;var vx={},_x={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.IdType=void 0,function(e){e.Transaction="transaction",e.Receipt="receipt"}(t.IdType||(t.IdType={}))})(_x);var Ex={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.FinalExecutionStatusBasic=t.ExecutionStatusBasic=void 0,function(e){e.Unknown="Unknown",e.Pending="Pending",e.Failure="Failure"}(t.ExecutionStatusBasic||(t.ExecutionStatusBasic={})),function(e){e.NotStarted="NotStarted",e.Started="Started",e.Failure="Failure"}(t.FinalExecutionStatusBasic||(t.FinalExecutionStatusBasic={}))})(Ex);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.FinalExecutionStatusBasic=t.ExecutionStatusBasic=t.IdType=void 0;var e=_x;Object.defineProperty(t,"IdType",{enumerable:!0,get:function(){return e.IdType}});var r=Ex;Object.defineProperty(t,"ExecutionStatusBasic",{enumerable:!0,get:function(){return r.ExecutionStatusBasic}}),Object.defineProperty(t,"FinalExecutionStatusBasic",{enumerable:!0,get:function(){return r.FinalExecutionStatusBasic}})})(vx);(function(t){var e=Ze&&Ze.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var o=Object.getOwnPropertyDescriptor(i,s);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,o)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),r=Ze&&Ze.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(Ic,t),r(Fn,t),r(vx,t)})(wx);var hv=Ze&&Ze.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ja,"__esModule",{value:!0});Ja.PublicKey=void 0;const pv=wx,Hf=Da,xv=hv(Va),ic=Mc;function yv(t){switch(t){case ic.KeyType.ED25519:return"ed25519";default:throw new Error(`Unknown key type ${t}`)}}function gv(t){switch(t.toLowerCase()){case"ed25519":return ic.KeyType.ED25519;default:throw new Error(`Unknown key type ${t}`)}}let bv=class Uo extends pv.Assignable{static from(e){return typeof e=="string"?Uo.fromString(e):e}static fromString(e){const r=e.split(":");if(r.length===1)return new Uo({keyType:ic.KeyType.ED25519,data:(0,Hf.baseDecode)(r[0])});if(r.length===2)return new Uo({keyType:gv(r[0]),data:(0,Hf.baseDecode)(r[1])});throw new Error("Invalid encoded key format, must be <curve>:<encoded key>")}toString(){return`${yv(this.keyType)}:${(0,Hf.baseEncode)(this.data)}`}verify(e,r){switch(this.keyType){case ic.KeyType.ED25519:return xv.default.sign.detached.verify(e,r,this.data);default:throw new Error(`Unknown key type ${this.keyType}`)}}};Ja.PublicKey=bv;var mv=Ze&&Ze.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Wa,"__esModule",{value:!0});Wa.KeyPairEd25519=void 0;const Kf=Da,zf=mv(Va),wv=Mc,vv=Ga,_v=Ja;let Ev=class Sx extends vv.KeyPairBase{constructor(e){super();const r=zf.default.sign.keyPair.fromSecretKey((0,Kf.baseDecode)(e));this.publicKey=new _v.PublicKey({keyType:wv.KeyType.ED25519,data:r.publicKey}),this.secretKey=e}static fromRandom(){const e=zf.default.sign.keyPair();return new Sx((0,Kf.baseEncode)(e.secretKey))}sign(e){return{signature:zf.default.sign.detached(e,(0,Kf.baseDecode)(this.secretKey)),publicKey:this.publicKey}}verify(e,r){return this.publicKey.verify(e,r)}toString(){return`ed25519:${this.secretKey}`}getPublicKey(){return this.publicKey}};Wa.KeyPairEd25519=Ev;Object.defineProperty(Cc,"__esModule",{value:!0});Cc.KeyPair=void 0;const Sv=Ga,jf=Wa;let Av=class extends Sv.KeyPairBase{static fromRandom(e){switch(e.toUpperCase()){case"ED25519":return jf.KeyPairEd25519.fromRandom();default:throw new Error(`Unknown curve ${e}`)}}static fromString(e){const r=e.split(":");if(r.length===1)return new jf.KeyPairEd25519(r[0]);if(r.length===2)switch(r[0].toUpperCase()){case"ED25519":return new jf.KeyPairEd25519(r[1]);default:throw new Error(`Unknown curve: ${r[0]}`)}else throw new Error("Invalid encoded key format, must be <curve>:<encoded key>")}};Cc.KeyPair=Av;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.PublicKey=t.KeyPairEd25519=t.KeyPair=t.KeyType=void 0;var e=Mc;Object.defineProperty(t,"KeyType",{enumerable:!0,get:function(){return e.KeyType}});var r=Cc;Object.defineProperty(t,"KeyPair",{enumerable:!0,get:function(){return r.KeyPair}});var n=Wa;Object.defineProperty(t,"KeyPairEd25519",{enumerable:!0,get:function(){return n.KeyPairEd25519}});var i=Ja;Object.defineProperty(t,"PublicKey",{enumerable:!0,get:function(){return i.PublicKey}})})(kc);var Ax={},Bc={},Tx={},Uc={},js={};Object.defineProperty(js,"__esModule",{value:!0});js.KeyStore=void 0;class Tv{}js.KeyStore=Tv;var is=Ze&&Ze.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(h){try{u(n.next(h))}catch(p){a(p)}}function c(h){try{u(n.throw(h))}catch(p){a(p)}}function u(h){h.done?s(h.value):i(h.value).then(o,c)}u((n=n.apply(t,e||[])).next())})};Object.defineProperty(Uc,"__esModule",{value:!0});Uc.InMemoryKeyStore=void 0;const Rv=kc,Pv=js;class kv extends Pv.KeyStore{constructor(){super(),this.keys={}}setKey(e,r,n){return is(this,void 0,void 0,function*(){this.keys[`${r}:${e}`]=n.toString()})}getKey(e,r){return is(this,void 0,void 0,function*(){const n=this.keys[`${r}:${e}`];return n?Rv.KeyPair.fromString(n):null})}removeKey(e,r){return is(this,void 0,void 0,function*(){delete this.keys[`${r}:${e}`]})}clear(){return is(this,void 0,void 0,function*(){this.keys={}})}getNetworks(){return is(this,void 0,void 0,function*(){const e=new Set;return Object.keys(this.keys).forEach(r=>{const n=r.split(":");e.add(n[1])}),Array.from(e.values())})}getAccounts(e){return is(this,void 0,void 0,function*(){const r=new Array;return Object.keys(this.keys).forEach(n=>{const i=n.split(":");i[i.length-1]===e&&r.push(i.slice(0,i.length-1).join(":"))}),r})}toString(){return"InMemoryKeyStore"}}Uc.InMemoryKeyStore=kv;var Oc={},ss=Ze&&Ze.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(h){try{u(n.next(h))}catch(p){a(p)}}function c(h){try{u(n.throw(h))}catch(p){a(p)}}function u(h){h.done?s(h.value):i(h.value).then(o,c)}u((n=n.apply(t,e||[])).next())})};Object.defineProperty(Oc,"__esModule",{value:!0});Oc.MergeKeyStore=void 0;const Mv=js;class Cv extends Mv.KeyStore{constructor(e,r={writeKeyStoreIndex:0}){super(),this.options=r,this.keyStores=e}setKey(e,r,n){return ss(this,void 0,void 0,function*(){yield this.keyStores[this.options.writeKeyStoreIndex].setKey(e,r,n)})}getKey(e,r){return ss(this,void 0,void 0,function*(){for(const n of this.keyStores){const i=yield n.getKey(e,r);if(i)return i}return null})}removeKey(e,r){return ss(this,void 0,void 0,function*(){for(const n of this.keyStores)yield n.removeKey(e,r)})}clear(){return ss(this,void 0,void 0,function*(){for(const e of this.keyStores)yield e.clear()})}getNetworks(){return ss(this,void 0,void 0,function*(){const e=new Set;for(const r of this.keyStores)for(const n of yield r.getNetworks())e.add(n);return Array.from(e)})}getAccounts(e){return ss(this,void 0,void 0,function*(){const r=new Set;for(const n of this.keyStores)for(const i of yield n.getAccounts(e))r.add(i);return Array.from(r)})}toString(){return`MergeKeyStore(${this.keyStores.join(", ")})`}}Oc.MergeKeyStore=Cv;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.MergeKeyStore=t.KeyStore=t.InMemoryKeyStore=void 0;var e=Uc;Object.defineProperty(t,"InMemoryKeyStore",{enumerable:!0,get:function(){return e.InMemoryKeyStore}});var r=js;Object.defineProperty(t,"KeyStore",{enumerable:!0,get:function(){return r.KeyStore}});var n=Oc;Object.defineProperty(t,"MergeKeyStore",{enumerable:!0,get:function(){return n.MergeKeyStore}})})(Tx);var as=Ze&&Ze.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(h){try{u(n.next(h))}catch(p){a(p)}}function c(h){try{u(n.throw(h))}catch(p){a(p)}}function u(h){h.done?s(h.value):i(h.value).then(o,c)}u((n=n.apply(t,e||[])).next())})};Object.defineProperty(Bc,"__esModule",{value:!0});Bc.BrowserLocalStorageKeyStore=void 0;const Iv=kc,Bv=Tx,Uv="near-api-js:keystore:";class Ov extends Bv.KeyStore{constructor(e=window.localStorage,r=Uv){super(),this.localStorage=e,this.prefix=r}setKey(e,r,n){return as(this,void 0,void 0,function*(){this.localStorage.setItem(this.storageKeyForSecretKey(e,r),n.toString())})}getKey(e,r){return as(this,void 0,void 0,function*(){const n=this.localStorage.getItem(this.storageKeyForSecretKey(e,r));return n?Iv.KeyPair.fromString(n):null})}removeKey(e,r){return as(this,void 0,void 0,function*(){this.localStorage.removeItem(this.storageKeyForSecretKey(e,r))})}clear(){return as(this,void 0,void 0,function*(){for(const e of this.storageKeys())e.startsWith(this.prefix)&&this.localStorage.removeItem(e)})}getNetworks(){return as(this,void 0,void 0,function*(){const e=new Set;for(const r of this.storageKeys())if(r.startsWith(this.prefix)){const n=r.substring(this.prefix.length).split(":");e.add(n[1])}return Array.from(e.values())})}getAccounts(e){return as(this,void 0,void 0,function*(){const r=new Array;for(const n of this.storageKeys())if(n.startsWith(this.prefix)){const i=n.substring(this.prefix.length).split(":");i[1]===e&&r.push(i[0])}return r})}storageKeyForSecretKey(e,r){return`${this.prefix}${r}:${e}`}*storageKeys(){for(let e=0;e<this.localStorage.length;e++)yield this.localStorage.key(e)}}Bc.BrowserLocalStorageKeyStore=Ov;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.BrowserLocalStorageKeyStore=void 0;var e=Bc;Object.defineProperty(t,"BrowserLocalStorageKeyStore",{enumerable:!0,get:function(){return e.BrowserLocalStorageKeyStore}})})(Ax);var ls={},Ms={},st={},Wi={},Nc={};Object.defineProperty(Nc,"__esModule",{value:!0});Nc.Assignable=void 0;class Nv{constructor(e){Object.keys(e).map(r=>{this[r]=e[r]})}}Nc.Assignable=Nv;var Hn={};Object.defineProperty(Hn,"__esModule",{value:!0});Hn.ErrorContext=Hn.TypedError=Hn.ArgumentTypeError=Hn.PositionalArgsError=void 0;class Dv extends Error{constructor(){super("Contract method calls expect named arguments wrapped in object, e.g. { argName1: argValue1, argName2: argValue2 }")}}Hn.PositionalArgsError=Dv;class Lv extends Error{constructor(e,r,n){super(`Expected ${r} for '${e}' argument, but got '${JSON.stringify(n)}'`)}}Hn.ArgumentTypeError=Lv;class $v extends Error{constructor(e,r,n){super(e),this.type=r||"UntypedError",this.context=n}}Hn.TypedError=$v;class qv{constructor(e){this.transactionHash=e}}Hn.ErrorContext=qv;var Rx={},Px={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.IdType=void 0,function(e){e.Transaction="transaction",e.Receipt="receipt"}(t.IdType||(t.IdType={}))})(Px);var kx={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.FinalExecutionStatusBasic=t.ExecutionStatusBasic=void 0,function(e){e.Unknown="Unknown",e.Pending="Pending",e.Failure="Failure"}(t.ExecutionStatusBasic||(t.ExecutionStatusBasic={})),function(e){e.NotStarted="NotStarted",e.Started="Started",e.Failure="Failure"}(t.FinalExecutionStatusBasic||(t.FinalExecutionStatusBasic={}))})(kx);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.FinalExecutionStatusBasic=t.ExecutionStatusBasic=t.IdType=void 0;var e=Px;Object.defineProperty(t,"IdType",{enumerable:!0,get:function(){return e.IdType}});var r=kx;Object.defineProperty(t,"ExecutionStatusBasic",{enumerable:!0,get:function(){return r.ExecutionStatusBasic}}),Object.defineProperty(t,"FinalExecutionStatusBasic",{enumerable:!0,get:function(){return r.FinalExecutionStatusBasic}})})(Rx);(function(t){var e=Ze&&Ze.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var o=Object.getOwnPropertyDescriptor(i,s);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,o)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),r=Ze&&Ze.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(Nc,t),r(Hn,t),r(Rx,t)})(Wi);Object.defineProperty(st,"__esModule",{value:!0});st.Action=st.SignedDelegate=st.DeleteAccount=st.DeleteKey=st.AddKey=st.Stake=st.Transfer=st.FunctionCall=st.DeployContract=st.CreateAccount=st.IAction=st.AccessKey=st.AccessKeyPermission=st.FullAccessPermission=st.FunctionCallPermission=void 0;const Dc=Wi;class Mx{constructor(e){if(Object.keys(e).length!==1)throw new Error("Enum can only take single value");Object.keys(e).map(r=>{this[r]=e[r],this.enum=r})}}class Fv extends Dc.Assignable{}st.FunctionCallPermission=Fv;class Hv extends Dc.Assignable{}st.FullAccessPermission=Hv;class Kv extends Mx{}st.AccessKeyPermission=Kv;class zv extends Dc.Assignable{}st.AccessKey=zv;class jn extends Dc.Assignable{}st.IAction=jn;class jv extends jn{}st.CreateAccount=jv;class Gv extends jn{}st.DeployContract=Gv;class Wv extends jn{}st.FunctionCall=Wv;class Vv extends jn{}st.Transfer=Vv;class Jv extends jn{}st.Stake=Jv;class Yv extends jn{}st.AddKey=Yv;class Xv extends jn{}st.DeleteKey=Xv;class Zv extends jn{}st.DeleteAccount=Zv;class Qv extends jn{}st.SignedDelegate=Qv;class e6 extends Mx{}st.Action=e6;Object.defineProperty(Ms,"__esModule",{value:!0});Ms.actionCreators=Ms.stringifyJsonOrBytes=void 0;const Kt=st;function t6(){return new Kt.AccessKey({permission:new Kt.AccessKeyPermission({fullAccess:new Kt.FullAccessPermission({})})})}function r6(t,e,r){return new Kt.AccessKey({permission:new Kt.AccessKeyPermission({functionCall:new Kt.FunctionCallPermission({receiverId:t,allowance:r,methodNames:e})})})}function n6(){return new Kt.Action({createAccount:new Kt.CreateAccount({})})}function i6(t){return new Kt.Action({deployContract:new Kt.DeployContract({code:t})})}function Cx(t){return t.byteLength!==void 0&&t.byteLength===t.length?t:ue.from(JSON.stringify(t))}Ms.stringifyJsonOrBytes=Cx;function s6(t,e,r,n,i=Cx,s=!1){return s?new Kt.Action({functionCall:new Kt.FunctionCall({methodName:t,args:e,gas:r,deposit:n})}):new Kt.Action({functionCall:new Kt.FunctionCall({methodName:t,args:i(e),gas:r,deposit:n})})}function a6(t){return new Kt.Action({transfer:new Kt.Transfer({deposit:t})})}function o6(t,e){return new Kt.Action({stake:new Kt.Stake({stake:t,publicKey:e})})}function c6(t,e){return new Kt.Action({addKey:new Kt.AddKey({publicKey:t,accessKey:e})})}function f6(t){return new Kt.Action({deleteKey:new Kt.DeleteKey({publicKey:t})})}function u6(t){return new Kt.Action({deleteAccount:new Kt.DeleteAccount({beneficiaryId:t})})}function l6({delegateAction:t,signature:e}){return new Kt.Action({signedDelegate:new Kt.SignedDelegate({delegateAction:t,signature:e})})}Ms.actionCreators={addKey:c6,createAccount:n6,deleteAccount:u6,deleteKey:f6,deployContract:i6,fullAccessKey:t6,functionCall:s6,functionCallAccessKey:r6,signedDelegate:l6,stake:o6,transfer:a6};var Ya={},Lc={},Ix={},$c={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.KeyType=void 0,function(e){e[e.ED25519=0]="ED25519"}(t.KeyType||(t.KeyType={}))})($c);var qc={},Xa={};Object.defineProperty(Xa,"__esModule",{value:!0});Xa.KeyPairBase=void 0;class d6{}Xa.KeyPairBase=d6;var Za={},Qa={},h6=Ze&&Ze.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Qa,"__esModule",{value:!0});Qa.PublicKey=void 0;const p6=Wi,Gf=Da,x6=h6(Va),sc=$c;function y6(t){switch(t){case sc.KeyType.ED25519:return"ed25519";default:throw new Error(`Unknown key type ${t}`)}}function g6(t){switch(t.toLowerCase()){case"ed25519":return sc.KeyType.ED25519;default:throw new Error(`Unknown key type ${t}`)}}class ba extends p6.Assignable{static from(e){return typeof e=="string"?ba.fromString(e):e}static fromString(e){const r=e.split(":");if(r.length===1)return new ba({keyType:sc.KeyType.ED25519,data:(0,Gf.baseDecode)(r[0])});if(r.length===2)return new ba({keyType:g6(r[0]),data:(0,Gf.baseDecode)(r[1])});throw new Error("Invalid encoded key format, must be <curve>:<encoded key>")}toString(){return`${y6(this.keyType)}:${(0,Gf.baseEncode)(this.data)}`}verify(e,r){switch(this.keyType){case sc.KeyType.ED25519:return x6.default.sign.detached.verify(e,r,this.data);default:throw new Error(`Unknown key type ${this.keyType}`)}}}Qa.PublicKey=ba;var b6=Ze&&Ze.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Za,"__esModule",{value:!0});Za.KeyPairEd25519=void 0;const Wf=Da,Vf=b6(Va),m6=$c,w6=Xa,v6=Qa;class Bl extends w6.KeyPairBase{constructor(e){super();const r=Vf.default.sign.keyPair.fromSecretKey((0,Wf.baseDecode)(e));this.publicKey=new v6.PublicKey({keyType:m6.KeyType.ED25519,data:r.publicKey}),this.secretKey=e}static fromRandom(){const e=Vf.default.sign.keyPair();return new Bl((0,Wf.baseEncode)(e.secretKey))}sign(e){return{signature:Vf.default.sign.detached(e,(0,Wf.baseDecode)(this.secretKey)),publicKey:this.publicKey}}verify(e,r){return this.publicKey.verify(e,r)}toString(){return`ed25519:${this.secretKey}`}getPublicKey(){return this.publicKey}}Za.KeyPairEd25519=Bl;Object.defineProperty(qc,"__esModule",{value:!0});qc.KeyPair=void 0;const _6=Xa,Jf=Za;class E6 extends _6.KeyPairBase{static fromRandom(e){switch(e.toUpperCase()){case"ED25519":return Jf.KeyPairEd25519.fromRandom();default:throw new Error(`Unknown curve ${e}`)}}static fromString(e){const r=e.split(":");if(r.length===1)return new Jf.KeyPairEd25519(r[0]);if(r.length===2)switch(r[0].toUpperCase()){case"ED25519":return new Jf.KeyPairEd25519(r[1]);default:throw new Error(`Unknown curve: ${r[0]}`)}else throw new Error("Invalid encoded key format, must be <curve>:<encoded key>")}}qc.KeyPair=E6;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.PublicKey=t.KeyPairEd25519=t.KeyPair=t.KeyType=void 0;var e=$c;Object.defineProperty(t,"KeyType",{enumerable:!0,get:function(){return e.KeyType}});var r=qc;Object.defineProperty(t,"KeyPair",{enumerable:!0,get:function(){return r.KeyPair}});var n=Za;Object.defineProperty(t,"KeyPairEd25519",{enumerable:!0,get:function(){return n.KeyPairEd25519}});var i=Qa;Object.defineProperty(t,"PublicKey",{enumerable:!0,get:function(){return i.PublicKey}})})(Ix);var Li={};Object.defineProperty(Li,"__esModule",{value:!0});Li.buildDelegateAction=Li.DelegateAction=void 0;const S6=Wi;class Bx extends S6.Assignable{}Li.DelegateAction=Bx;function A6({actions:t,maxBlockHeight:e,nonce:r,publicKey:n,receiverId:i,senderId:s}){return new Bx({senderId:s,receiverId:i,actions:t,nonce:r,maxBlockHeight:e,publicKey:n})}Li.buildDelegateAction=A6;var Fc={};Object.defineProperty(Fc,"__esModule",{value:!0});Fc.DelegateActionPrefix=void 0;const T6=Wi,R6=Math.pow(2,30),P6={MetaTransactions:366};class k6 extends T6.Assignable{}class M6 extends k6{constructor(e){super({prefix:R6+e})}}class C6 extends M6{constructor(){super(P6.MetaTransactions)}}Fc.DelegateActionPrefix=C6;var Gs={};Object.defineProperty(Gs,"__esModule",{value:!0});Gs.Signature=void 0;const I6=Wi;class B6 extends I6.Assignable{}Gs.Signature=B6;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.SCHEMA=t.SignedTransaction=t.Transaction=t.decodeSignedTransaction=t.decodeTransaction=t.encodeTransaction=t.encodeSignedDelegate=t.encodeDelegateAction=void 0;const e=Ix,r=Wi,n=Da,i=st,s=Li,a=Fc,o=Gs;function c(R){return new Uint8Array([...(0,n.serialize)(t.SCHEMA,new a.DelegateActionPrefix),...(0,n.serialize)(t.SCHEMA,R)])}t.encodeDelegateAction=c;function u(R){return(0,n.serialize)(t.SCHEMA,R)}t.encodeSignedDelegate=u;function h(R){return(0,n.serialize)(t.SCHEMA,R)}t.encodeTransaction=h;function p(R){return(0,n.deserialize)(t.SCHEMA,P,R)}t.decodeTransaction=p;function m(R){return(0,n.deserialize)(t.SCHEMA,M,R)}t.decodeSignedTransaction=m;class P extends r.Assignable{encode(){return h(this)}static decode(E){return p(E)}}t.Transaction=P;class M extends r.Assignable{encode(){return h(this)}static decode(E){return m(E)}}t.SignedTransaction=M,t.SCHEMA=new Map([[o.Signature,{kind:"struct",fields:[["keyType","u8"],["data",[64]]]}],[M,{kind:"struct",fields:[["transaction",P],["signature",o.Signature]]}],[P,{kind:"struct",fields:[["signerId","string"],["publicKey",e.PublicKey],["nonce","u64"],["receiverId","string"],["blockHash",[32]],["actions",[i.Action]]]}],[e.PublicKey,{kind:"struct",fields:[["keyType","u8"],["data",[32]]]}],[i.AccessKey,{kind:"struct",fields:[["nonce","u64"],["permission",i.AccessKeyPermission]]}],[i.AccessKeyPermission,{kind:"enum",field:"enum",values:[["functionCall",i.FunctionCallPermission],["fullAccess",i.FullAccessPermission]]}],[i.FunctionCallPermission,{kind:"struct",fields:[["allowance",{kind:"option",type:"u128"}],["receiverId","string"],["methodNames",["string"]]]}],[i.FullAccessPermission,{kind:"struct",fields:[]}],[i.Action,{kind:"enum",field:"enum",values:[["createAccount",i.CreateAccount],["deployContract",i.DeployContract],["functionCall",i.FunctionCall],["transfer",i.Transfer],["stake",i.Stake],["addKey",i.AddKey],["deleteKey",i.DeleteKey],["deleteAccount",i.DeleteAccount],["signedDelegate",i.SignedDelegate]]}],[i.CreateAccount,{kind:"struct",fields:[]}],[i.DeployContract,{kind:"struct",fields:[["code",["u8"]]]}],[i.FunctionCall,{kind:"struct",fields:[["methodName","string"],["args",["u8"]],["gas","u64"],["deposit","u128"]]}],[i.Transfer,{kind:"struct",fields:[["deposit","u128"]]}],[i.Stake,{kind:"struct",fields:[["stake","u128"],["publicKey",e.PublicKey]]}],[i.AddKey,{kind:"struct",fields:[["publicKey",e.PublicKey],["accessKey",i.AccessKey]]}],[i.DeleteKey,{kind:"struct",fields:[["publicKey",e.PublicKey]]}],[i.DeleteAccount,{kind:"struct",fields:[["beneficiaryId","string"]]}],[s.DelegateAction,{kind:"struct",fields:[["senderId","string"],["receiverId","string"],["actions",[i.Action]],["nonce","u64"],["maxBlockHeight","u64"],["publicKey",e.PublicKey]]}],[a.DelegateActionPrefix,{kind:"struct",fields:[["prefix","u32"]]}],[i.SignedDelegate,{kind:"struct",fields:[["delegateAction",s.DelegateAction],["signature",o.Signature]]}]])})(Lc);Object.defineProperty(Ya,"__esModule",{value:!0});Ya.createTransaction=void 0;const U6=Lc;function O6(t,e,r,n,i,s){return new U6.Transaction({signerId:t,publicKey:e,nonce:n,receiverId:r,actions:i,blockHash:s})}Ya.createTransaction=O6;var Cs={},Ul=Ze&&Ze.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(h){try{u(n.next(h))}catch(p){a(p)}}function c(h){try{u(n.throw(h))}catch(p){a(p)}}function u(h){h.done?s(h.value):i(h.value).then(o,c)}u((n=n.apply(t,e||[])).next())})},N6=Ze&&Ze.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Cs,"__esModule",{value:!0});Cs.signDelegateAction=Cs.signTransaction=void 0;const Ux=N6(lh),D6=st,L6=Ya,ac=Lc,Ox=Gs;function h0(t,e,r,n){return Ul(this,void 0,void 0,function*(){const i=(0,ac.encodeTransaction)(t),s=new Uint8Array(Ux.default.sha256.array(i)),a=yield e.signMessage(i,r,n),o=new ac.SignedTransaction({transaction:t,signature:new Ox.Signature({keyType:t.publicKey.keyType,data:a.signature})});return[s,o]})}function $6(...t){return Ul(this,void 0,void 0,function*(){if(t[0].constructor===ac.Transaction){const[e,r,n,i]=t;return h0(e,r,n,i)}else{const[e,r,n,i,s,a,o]=t,c=yield s.getPublicKey(a,o),u=(0,L6.createTransaction)(a,c,e,r,n,i);return h0(u,s,a,o)}})}Cs.signTransaction=$6;function q6({delegateAction:t,signer:e}){return Ul(this,void 0,void 0,function*(){const r=(0,ac.encodeDelegateAction)(t),n=yield e.sign(r),i=new D6.SignedDelegate({delegateAction:t,signature:new Ox.Signature({keyType:t.publicKey.keyType,data:n})});return{hash:new Uint8Array(Ux.default.sha256.array(r)),signedDelegateAction:i}})}Cs.signDelegateAction=q6;(function(t){var e=Ze&&Ze.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var o=Object.getOwnPropertyDescriptor(i,s);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,o)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),r=Ze&&Ze.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(Ms,t),r(st,t),r(Ya,t),r(Li,t),r(Lc,t),r(Cs,t),r(Gs,t)})(ls);function F6(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),r=0;r<e.length;r++)e[r]=255;for(var n=0;n<t.length;n++){var i=t.charAt(n),s=i.charCodeAt(0);if(e[s]!==255)throw new TypeError(i+" is ambiguous");e[s]=n}var a=t.length,o=t.charAt(0),c=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function h(P){if(P instanceof Uint8Array||(ArrayBuffer.isView(P)?P=new Uint8Array(P.buffer,P.byteOffset,P.byteLength):Array.isArray(P)&&(P=Uint8Array.from(P))),!(P instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(P.length===0)return"";for(var M=0,R=0,E=0,L=P.length;E!==L&&P[E]===0;)E++,M++;for(var W=(L-E)*u+1>>>0,z=new Uint8Array(W);E!==L;){for(var D=P[E],U=0,Y=W-1;(D!==0||U<R)&&Y!==-1;Y--,U++)D+=256*z[Y]>>>0,z[Y]=D%a>>>0,D=D/a>>>0;if(D!==0)throw new Error("Non-zero carry");R=U,E++}for(var oe=W-R;oe!==W&&z[oe]===0;)oe++;for(var X=o.repeat(M);oe<W;++oe)X+=t.charAt(z[oe]);return X}function p(P){if(typeof P!="string")throw new TypeError("Expected String");if(P.length===0)return new Uint8Array;for(var M=0,R=0,E=0;P[M]===o;)R++,M++;for(var L=(P.length-M)*c+1>>>0,W=new Uint8Array(L);P[M];){var z=e[P.charCodeAt(M)];if(z===255)return;for(var D=0,U=L-1;(z!==0||D<E)&&U!==-1;U--,D++)z+=a*W[U]>>>0,W[U]=z%256>>>0,z=z/256>>>0;if(z!==0)throw new Error("Non-zero carry");E=D,M++}for(var Y=L-E;Y!==L&&W[Y]===0;)Y++;for(var oe=new Uint8Array(R+(L-Y)),X=R;Y!==L;)oe[X++]=W[Y++];return oe}function m(P){var M=p(P);if(M)return M;throw new Error("Non-base"+a+" character")}return{encode:h,decodeUnsafe:p,decode:m}}var H6=F6;const K6=H6,z6="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";var j6=K6(z6);const la=pn(j6);class G6 extends Rc{constructor(r){super(r);N(this,"keyPair");N(this,"near");this.near=this.wallet._near,this.base=["yoctoNEAR",1e25]}async ready(){if(!this.wallet.isSignedIn())throw new Error("Wallet has not been signed in!");const r=new Ax.BrowserLocalStorageKeyStore,n=this.wallet.account();if(this.keyPair=await r.getKey(this.wallet._networkId,n.accountId),!this.keyPair){this.keyPair=kc.KeyPair.fromRandom("ed25519");const i=this.keyPair.getPublicKey().toString();await r.setKey(this.wallet._networkId,n.accountId,this.keyPair),await n.addKey(i)}this._address=await this.wallet.getAccountId(),this.providerInstance=this.wallet._near.connection.provider}async getTx(r){const n=await this.providerInstance,[i,s]=r.split(":"),a=await n.txStatusReceipts(la.decode(s),i),o=await n.block(a.transaction_outcome.block_hash),c=(await n.block({finality:"final"})).header.height;if(a.receipts_outcome[0].outcome.status.SuccessValue!=="")throw new Error("Transaction failed!");const u=a.receipts[0].receipt.Action.actions[0].Transfer.deposit??0;return{from:i,to:a.transaction.receiver_id,amount:new qe(u),blockHeight:new qe(o.header.height),pending:!1,confirmed:c-o.header.height>=this.minConfirm}}ownerToAddress(r){const n=typeof r=="string"?r:la.encode(r);return ue.from(la.decode(n.replace("ed25519:",""))).toString("hex")}async sign(r){return this.getSigner().sign(r)}getSigner(){return new ku(this.keyPair.secretKey)}async verify(r,n,i){return ku.verify(r,n,i)}async getCurrentHeight(){const r=await this.providerInstance.status();return new qe(r.sync_info.latest_block_height)}async getFee(r,n){const i=(await this.providerInstance.block({finality:"final"})).header.height,s=await this.providerInstance.gasPrice(i);return new qe(s.gas_price).multipliedBy(45e10)}async sendTx(r){const n=await this.providerInstance.sendTransaction(r);return`${this.address}:${n.transaction.hash}`}async createTx(r,n,i){if(!this.address)throw new Error("Address is undefined - you might be missing a wallet, or have not run Irys.ready()");const s=await this.providerInstance.query({request_type:"view_access_key",finality:"final",account_id:this.address,public_key:this.keyPair.getPublicKey().toString()}),a=++s.nonce,o=ue.from(la.decode(s.block_hash)),c=[ls.actionCreators.transfer(new Ke(new qe(r).toString()))],u=ls.createTransaction(this.address,this.keyPair.getPublicKey(),n,a,c,o),h=Mg(ls.SCHEMA,u),p=new Uint8Array(lh.sha256.array(h)),m=this.keyPair.sign(p);return{tx:new ls.SignedTransaction({transaction:u,signature:new ls.Signature({keyType:u.publicKey.keyType,data:m.signature})}),txId:void 0}}async getPublicKey(){return ue.from(this.keyPair.getPublicKey().data)}}class W6 extends Rc{constructor(r){super(r);N(this,"signer");N(this,"minConfirm",1);this.base=["lamports",1e9]}async getProvider(){return this.providerInstance||(this.providerInstance=new Cg(this.providerUrl,{confirmTransactionInitialTimeout:6e4,commitment:"confirmed"})),this.providerInstance}async getTx(r){const n=await this.getProvider(),i=await n.getTransaction(r,{commitment:"confirmed"});if(!i)throw new Error("Confirmed tx not found");const s=await n.getSlot("confirmed");if(!i.meta)throw new Error(`Unable to resolve transaction ${r}`);const a=new qe(i.meta.postBalances[1]).minus(new qe(i.meta.preBalances[1]));return{from:i.transaction.message.accountKeys[0].toBase58(),to:i.transaction.message.accountKeys[1].toBase58(),amount:a,blockHeight:new qe(i.slot),pending:!1,confirmed:s-i.slot>=1}}ownerToAddress(r){return typeof r=="string"&&(r=ue.from(r)),la.encode(r)}async sign(r){return await(await this.getSigner()).sign(r)}getSigner(){return this.signer||(this.signer=new Qo(this.wallet)),this.signer}verify(r,n,i){return Qo.verify(r,n,i)}async getCurrentHeight(){return new qe((await(await this.getProvider()).getEpochInfo()).blockHeight??0)}async getFee(r,n){return new qe(5e3)}async sendTx(r){return await this.wallet.sendTransaction(r,await this.getProvider(),{skipPreflight:!0})}async createTx(r,n,i){const s=new od(await this.getPublicKey()),a=await Ai(async c=>{var u;try{return await(await this.getProvider()).getRecentBlockhash()}catch(h){throw(u=h.message)!=null&&u.includes("blockhash")?h:(c(h),new Error("Unreachable"))}},{retries:3,minTimeout:1e3}),o=new Ig({recentBlockhash:a.blockhash,feePayer:s});return o.add(Bg.transfer({fromPubkey:s,toPubkey:new od(n),lamports:+new qe(r).toNumber()})),{tx:o,txId:void 0}}async getPublicKey(){if(!this.wallet.publicKey)throw new Error("Wallet.publicKey is undefined");return this.wallet.publicKey.toBuffer()}}const eo="abi/5.7.0",ot=new xe(eo),$i={};let p0={calldata:!0,memory:!0,storage:!0},V6={calldata:!0,memory:!0};function go(t,e){if(t==="bytes"||t==="string"){if(p0[e])return!0}else if(t==="address"){if(e==="payable")return!0}else if((t.indexOf("[")>=0||t==="tuple")&&V6[e])return!0;return(p0[e]||e==="payable")&&ot.throwArgumentError("invalid modifier","name",e),!1}function J6(t,e){let r=t;function n(o){ot.throwArgumentError(`unexpected character at position ${o}`,"param",t)}t=t.replace(/\s/g," ");function i(o){let c={type:"",name:"",parent:o,state:{allowType:!0}};return e&&(c.indexed=!1),c}let s={type:"",name:"",state:{allowType:!0}},a=s;for(let o=0;o<t.length;o++){let c=t[o];switch(c){case"(":a.state.allowType&&a.type===""?a.type="tuple":a.state.allowParams||n(o),a.state.allowType=!1,a.type=ds(a.type),a.components=[i(a)],a=a.components[0];break;case")":delete a.state,a.name==="indexed"&&(e||n(o),a.indexed=!0,a.name=""),go(a.type,a.name)&&(a.name=""),a.type=ds(a.type);let u=a;a=a.parent,a||n(o),delete u.parent,a.state.allowParams=!1,a.state.allowName=!0,a.state.allowArray=!0;break;case",":delete a.state,a.name==="indexed"&&(e||n(o),a.indexed=!0,a.name=""),go(a.type,a.name)&&(a.name=""),a.type=ds(a.type);let h=i(a.parent);a.parent.components.push(h),delete a.parent,a=h;break;case" ":a.state.allowType&&a.type!==""&&(a.type=ds(a.type),delete a.state.allowType,a.state.allowName=!0,a.state.allowParams=!0),a.state.allowName&&a.name!==""&&(a.name==="indexed"?(e||n(o),a.indexed&&n(o),a.indexed=!0,a.name=""):go(a.type,a.name)?a.name="":a.state.allowName=!1);break;case"[":a.state.allowArray||n(o),a.type+=c,a.state.allowArray=!1,a.state.allowName=!1,a.state.readArray=!0;break;case"]":a.state.readArray||n(o),a.type+=c,a.state.readArray=!1,a.state.allowArray=!0,a.state.allowName=!0;break;default:a.state.allowType?(a.type+=c,a.state.allowParams=!0,a.state.allowArray=!0):a.state.allowName?(a.name+=c,delete a.state.allowArray):a.state.readArray?a.type+=c:n(o)}}return a.parent&&ot.throwArgumentError("unexpected eof","param",t),delete s.state,a.name==="indexed"?(e||n(r.length-7),a.indexed&&n(r.length-7),a.indexed=!0,a.name=""):go(a.type,a.name)&&(a.name=""),s.type=ds(s.type),s}function Oo(t,e){for(let r in e)he(t,r,e[r])}const wt=Object.freeze({sighash:"sighash",minimal:"minimal",full:"full",json:"json"}),Y6=new RegExp(/^(.*)\[([0-9]*)\]$/);class lr{constructor(e,r){e!==$i&&ot.throwError("use fromString",xe.errors.UNSUPPORTED_OPERATION,{operation:"new ParamType()"}),Oo(this,r);let n=this.type.match(Y6);n?Oo(this,{arrayLength:parseInt(n[2]||"-1"),arrayChildren:lr.fromObject({type:n[1],components:this.components}),baseType:"array"}):Oo(this,{arrayLength:null,arrayChildren:null,baseType:this.components!=null?"tuple":this.type}),this._isParamType=!0,Object.freeze(this)}format(e){if(e||(e=wt.sighash),wt[e]||ot.throwArgumentError("invalid format type","format",e),e===wt.json){let n={type:this.baseType==="tuple"?"tuple":this.type,name:this.name||void 0};return typeof this.indexed=="boolean"&&(n.indexed=this.indexed),this.components&&(n.components=this.components.map(i=>JSON.parse(i.format(e)))),JSON.stringify(n)}let r="";return this.baseType==="array"?(r+=this.arrayChildren.format(e),r+="["+(this.arrayLength<0?"":String(this.arrayLength))+"]"):this.baseType==="tuple"?(e!==wt.sighash&&(r+=this.type),r+="("+this.components.map(n=>n.format(e)).join(e===wt.full?", ":",")+")"):r+=this.type,e!==wt.sighash&&(this.indexed===!0&&(r+=" indexed"),e===wt.full&&this.name&&(r+=" "+this.name)),r}static from(e,r){return typeof e=="string"?lr.fromString(e,r):lr.fromObject(e)}static fromObject(e){return lr.isParamType(e)?e:new lr($i,{name:e.name||null,type:ds(e.type),indexed:e.indexed==null?null:!!e.indexed,components:e.components?e.components.map(lr.fromObject):null})}static fromString(e,r){function n(i){return lr.fromObject({name:i.name,type:i.type,indexed:i.indexed,components:i.components})}return n(J6(e,!!r))}static isParamType(e){return!!(e!=null&&e._isParamType)}}function Pa(t,e){return Z6(t).map(r=>lr.fromString(r,e))}class Zn{constructor(e,r){e!==$i&&ot.throwError("use a static from method",xe.errors.UNSUPPORTED_OPERATION,{operation:"new Fragment()"}),Oo(this,r),this._isFragment=!0,Object.freeze(this)}static from(e){return Zn.isFragment(e)?e:typeof e=="string"?Zn.fromString(e):Zn.fromObject(e)}static fromObject(e){if(Zn.isFragment(e))return e;switch(e.type){case"function":return Ln.fromObject(e);case"event":return Yn.fromObject(e);case"constructor":return Dn.fromObject(e);case"error":return mi.fromObject(e);case"fallback":case"receive":return null}return ot.throwArgumentError("invalid fragment object","value",e)}static fromString(e){return e=e.replace(/\s/g," "),e=e.replace(/\(/g," (").replace(/\)/g,") ").replace(/\s+/g," "),e=e.trim(),e.split(" ")[0]==="event"?Yn.fromString(e.substring(5).trim()):e.split(" ")[0]==="function"?Ln.fromString(e.substring(8).trim()):e.split("(")[0].trim()==="constructor"?Dn.fromString(e.trim()):e.split(" ")[0]==="error"?mi.fromString(e.substring(5).trim()):ot.throwArgumentError("unsupported fragment","value",e)}static isFragment(e){return!!(e&&e._isFragment)}}class Yn extends Zn{format(e){if(e||(e=wt.sighash),wt[e]||ot.throwArgumentError("invalid format type","format",e),e===wt.json)return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(n=>JSON.parse(n.format(e)))});let r="";return e!==wt.sighash&&(r+="event "),r+=this.name+"("+this.inputs.map(n=>n.format(e)).join(e===wt.full?", ":",")+") ",e!==wt.sighash&&this.anonymous&&(r+="anonymous "),r.trim()}static from(e){return typeof e=="string"?Yn.fromString(e):Yn.fromObject(e)}static fromObject(e){if(Yn.isEventFragment(e))return e;e.type!=="event"&&ot.throwArgumentError("invalid event object","value",e);const r={name:ka(e.name),anonymous:e.anonymous,inputs:e.inputs?e.inputs.map(lr.fromObject):[],type:"event"};return new Yn($i,r)}static fromString(e){let r=e.match(Ma);r||ot.throwArgumentError("invalid event string","value",e);let n=!1;return r[3].split(" ").forEach(i=>{switch(i.trim()){case"anonymous":n=!0;break;case"":break;default:ot.warn("unknown modifier: "+i)}}),Yn.fromObject({name:r[1].trim(),anonymous:n,inputs:Pa(r[2],!0),type:"event"})}static isEventFragment(e){return e&&e._isFragment&&e.type==="event"}}function Nx(t,e){e.gas=null;let r=t.split("@");return r.length!==1?(r.length>2&&ot.throwArgumentError("invalid human-readable ABI signature","value",t),r[1].match(/^[0-9]+$/)||ot.throwArgumentError("invalid human-readable ABI signature gas","value",t),e.gas=$e.from(r[1]),r[0]):t}function Dx(t,e){e.constant=!1,e.payable=!1,e.stateMutability="nonpayable",t.split(" ").forEach(r=>{switch(r.trim()){case"constant":e.constant=!0;break;case"payable":e.payable=!0,e.stateMutability="payable";break;case"nonpayable":e.payable=!1,e.stateMutability="nonpayable";break;case"pure":e.constant=!0,e.stateMutability="pure";break;case"view":e.constant=!0,e.stateMutability="view";break;case"external":case"public":case"":break;default:console.log("unknown modifier: "+r)}})}function Lx(t){let e={constant:!1,payable:!0,stateMutability:"payable"};return t.stateMutability!=null?(e.stateMutability=t.stateMutability,e.constant=e.stateMutability==="view"||e.stateMutability==="pure",t.constant!=null&&!!t.constant!==e.constant&&ot.throwArgumentError("cannot have constant function with mutability "+e.stateMutability,"value",t),e.payable=e.stateMutability==="payable",t.payable!=null&&!!t.payable!==e.payable&&ot.throwArgumentError("cannot have payable function with mutability "+e.stateMutability,"value",t)):t.payable!=null?(e.payable=!!t.payable,t.constant==null&&!e.payable&&t.type!=="constructor"&&ot.throwArgumentError("unable to determine stateMutability","value",t),e.constant=!!t.constant,e.constant?e.stateMutability="view":e.stateMutability=e.payable?"payable":"nonpayable",e.payable&&e.constant&&ot.throwArgumentError("cannot have constant payable function","value",t)):t.constant!=null?(e.constant=!!t.constant,e.payable=!e.constant,e.stateMutability=e.constant?"view":"payable"):t.type!=="constructor"&&ot.throwArgumentError("unable to determine stateMutability","value",t),e}class Dn extends Zn{format(e){if(e||(e=wt.sighash),wt[e]||ot.throwArgumentError("invalid format type","format",e),e===wt.json)return JSON.stringify({type:"constructor",stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas?this.gas.toNumber():void 0,inputs:this.inputs.map(n=>JSON.parse(n.format(e)))});e===wt.sighash&&ot.throwError("cannot format a constructor for sighash",xe.errors.UNSUPPORTED_OPERATION,{operation:"format(sighash)"});let r="constructor("+this.inputs.map(n=>n.format(e)).join(e===wt.full?", ":",")+") ";return this.stateMutability&&this.stateMutability!=="nonpayable"&&(r+=this.stateMutability+" "),r.trim()}static from(e){return typeof e=="string"?Dn.fromString(e):Dn.fromObject(e)}static fromObject(e){if(Dn.isConstructorFragment(e))return e;e.type!=="constructor"&&ot.throwArgumentError("invalid constructor object","value",e);let r=Lx(e);r.constant&&ot.throwArgumentError("constructor cannot be constant","value",e);const n={name:null,type:e.type,inputs:e.inputs?e.inputs.map(lr.fromObject):[],payable:r.payable,stateMutability:r.stateMutability,gas:e.gas?$e.from(e.gas):null};return new Dn($i,n)}static fromString(e){let r={type:"constructor"};e=Nx(e,r);let n=e.match(Ma);return(!n||n[1].trim()!=="constructor")&&ot.throwArgumentError("invalid constructor string","value",e),r.inputs=Pa(n[2].trim(),!1),Dx(n[3].trim(),r),Dn.fromObject(r)}static isConstructorFragment(e){return e&&e._isFragment&&e.type==="constructor"}}class Ln extends Dn{format(e){if(e||(e=wt.sighash),wt[e]||ot.throwArgumentError("invalid format type","format",e),e===wt.json)return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas?this.gas.toNumber():void 0,inputs:this.inputs.map(n=>JSON.parse(n.format(e))),outputs:this.outputs.map(n=>JSON.parse(n.format(e)))});let r="";return e!==wt.sighash&&(r+="function "),r+=this.name+"("+this.inputs.map(n=>n.format(e)).join(e===wt.full?", ":",")+") ",e!==wt.sighash&&(this.stateMutability?this.stateMutability!=="nonpayable"&&(r+=this.stateMutability+" "):this.constant&&(r+="view "),this.outputs&&this.outputs.length&&(r+="returns ("+this.outputs.map(n=>n.format(e)).join(", ")+") "),this.gas!=null&&(r+="@"+this.gas.toString()+" ")),r.trim()}static from(e){return typeof e=="string"?Ln.fromString(e):Ln.fromObject(e)}static fromObject(e){if(Ln.isFunctionFragment(e))return e;e.type!=="function"&&ot.throwArgumentError("invalid function object","value",e);let r=Lx(e);const n={type:e.type,name:ka(e.name),constant:r.constant,inputs:e.inputs?e.inputs.map(lr.fromObject):[],outputs:e.outputs?e.outputs.map(lr.fromObject):[],payable:r.payable,stateMutability:r.stateMutability,gas:e.gas?$e.from(e.gas):null};return new Ln($i,n)}static fromString(e){let r={type:"function"};e=Nx(e,r);let n=e.split(" returns ");n.length>2&&ot.throwArgumentError("invalid function string","value",e);let i=n[0].match(Ma);if(i||ot.throwArgumentError("invalid function signature","value",e),r.name=i[1].trim(),r.name&&ka(r.name),r.inputs=Pa(i[2],!1),Dx(i[3].trim(),r),n.length>1){let s=n[1].match(Ma);(s[1].trim()!=""||s[3].trim()!="")&&ot.throwArgumentError("unexpected tokens","value",e),r.outputs=Pa(s[2],!1)}else r.outputs=[];return Ln.fromObject(r)}static isFunctionFragment(e){return e&&e._isFragment&&e.type==="function"}}function x0(t){const e=t.format();return(e==="Error(string)"||e==="Panic(uint256)")&&ot.throwArgumentError(`cannot specify user defined ${e} error`,"fragment",t),t}class mi extends Zn{format(e){if(e||(e=wt.sighash),wt[e]||ot.throwArgumentError("invalid format type","format",e),e===wt.json)return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(n=>JSON.parse(n.format(e)))});let r="";return e!==wt.sighash&&(r+="error "),r+=this.name+"("+this.inputs.map(n=>n.format(e)).join(e===wt.full?", ":",")+") ",r.trim()}static from(e){return typeof e=="string"?mi.fromString(e):mi.fromObject(e)}static fromObject(e){if(mi.isErrorFragment(e))return e;e.type!=="error"&&ot.throwArgumentError("invalid error object","value",e);const r={type:e.type,name:ka(e.name),inputs:e.inputs?e.inputs.map(lr.fromObject):[]};return x0(new mi($i,r))}static fromString(e){let r={type:"error"},n=e.match(Ma);return n||ot.throwArgumentError("invalid error signature","value",e),r.name=n[1].trim(),r.name&&ka(r.name),r.inputs=Pa(n[2],!1),x0(mi.fromObject(r))}static isErrorFragment(e){return e&&e._isFragment&&e.type==="error"}}function ds(t){return t.match(/^uint($|[^1-9])/)?t="uint256"+t.substring(4):t.match(/^int($|[^1-9])/)&&(t="int256"+t.substring(3)),t}const X6=new RegExp("^[a-zA-Z$_][a-zA-Z0-9$_]*$");function ka(t){return(!t||!t.match(X6))&&ot.throwArgumentError(`invalid identifier "${t}"`,"value",t),t}const Ma=new RegExp("^([^)(]*)\\((.*)\\)([^)(]*)$");function Z6(t){t=t.trim();let e=[],r="",n=0;for(let i=0;i<t.length;i++){let s=t[i];s===","&&n===0?(e.push(r),r=""):(r+=s,s==="("?n++:s===")"&&(n--,n===-1&&ot.throwArgumentError("unbalanced parenthesis","value",t)))}return r&&e.push(r),e}const Ol=new xe(eo);function Q6(t){const e=[],r=function(n,i){if(Array.isArray(i))for(let s in i){const a=n.slice();a.push(s);try{r(a,i[s])}catch(o){e.push({path:a,error:o})}}};return r([],t),e}class ii{constructor(e,r,n,i){this.name=e,this.type=r,this.localName=n,this.dynamic=i}_throwError(e,r){Ol.throwArgumentError(e,this.localName,r)}}class Bu{constructor(e){he(this,"wordSize",e||32),this._data=[],this._dataLength=0,this._padding=new Uint8Array(e)}get data(){return Ii(this._data)}get length(){return this._dataLength}_writeData(e){return this._data.push(e),this._dataLength+=e.length,e.length}appendWriter(e){return this._writeData(Br(e._data))}writeBytes(e){let r=ge(e);const n=r.length%this.wordSize;return n&&(r=Br([r,this._padding.slice(n)])),this._writeData(r)}_getValue(e){let r=ge($e.from(e));return r.length>this.wordSize&&Ol.throwError("value out-of-bounds",xe.errors.BUFFER_OVERRUN,{length:this.wordSize,offset:r.length}),r.length%this.wordSize&&(r=Br([this._padding.slice(r.length%this.wordSize),r])),r}writeValue(e){return this._writeData(this._getValue(e))}writeUpdatableValue(){const e=this._data.length;return this._data.push(this._padding),this._dataLength+=this.wordSize,r=>{this._data[e]=this._getValue(r)}}}class oc{constructor(e,r,n,i){he(this,"_data",ge(e)),he(this,"wordSize",r||32),he(this,"_coerceFunc",n),he(this,"allowLoose",i),this._offset=0}get data(){return ke(this._data)}get consumed(){return this._offset}static coerce(e,r){let n=e.match("^u?int([0-9]+)$");return n&&parseInt(n[1])<=48&&(r=r.toNumber()),r}coerce(e,r){return this._coerceFunc?this._coerceFunc(e,r):oc.coerce(e,r)}_peekBytes(e,r,n){let i=Math.ceil(r/this.wordSize)*this.wordSize;return this._offset+i>this._data.length&&(this.allowLoose&&n&&this._offset+r<=this._data.length?i=r:Ol.throwError("data out-of-bounds",xe.errors.BUFFER_OVERRUN,{length:this._data.length,offset:this._offset+i})),this._data.slice(this._offset,this._offset+i)}subReader(e){return new oc(this._data.slice(this._offset+e),this.wordSize,this._coerceFunc,this.allowLoose)}readBytes(e,r){let n=this._peekBytes(0,e,!!r);return this._offset+=n.length,n.slice(0,e)}readValue(){return $e.from(this.readBytes(this.wordSize))}}class e3 extends ii{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,r){try{r=fr(r)}catch(n){this._throwError(n.message,r)}return e.writeValue(r)}decode(e){return fr(Ur(e.readValue().toHexString(),20))}}class t3 extends ii{constructor(e){super(e.name,e.type,void 0,e.dynamic),this.coder=e}defaultValue(){return this.coder.defaultValue()}encode(e,r){return this.coder.encode(e,r)}decode(e){return this.coder.decode(e)}}const ys=new xe(eo);function $x(t,e,r){let n=null;if(Array.isArray(r))n=r;else if(r&&typeof r=="object"){let c={};n=e.map(u=>{const h=u.localName;return h||ys.throwError("cannot encode object for signature with missing names",xe.errors.INVALID_ARGUMENT,{argument:"values",coder:u,value:r}),c[h]&&ys.throwError("cannot encode object for signature with duplicate names",xe.errors.INVALID_ARGUMENT,{argument:"values",coder:u,value:r}),c[h]=!0,r[h]})}else ys.throwArgumentError("invalid tuple value","tuple",r);e.length!==n.length&&ys.throwArgumentError("types/value length mismatch","tuple",r);let i=new Bu(t.wordSize),s=new Bu(t.wordSize),a=[];e.forEach((c,u)=>{let h=n[u];if(c.dynamic){let p=s.length;c.encode(s,h);let m=i.writeUpdatableValue();a.push(P=>{m(P+p)})}else c.encode(i,h)}),a.forEach(c=>{c(i.length)});let o=t.appendWriter(i);return o+=t.appendWriter(s),o}function qx(t,e){let r=[],n=t.subReader(0);e.forEach(s=>{let a=null;if(s.dynamic){let o=t.readValue(),c=n.subReader(o.toNumber());try{a=s.decode(c)}catch(u){if(u.code===xe.errors.BUFFER_OVERRUN)throw u;a=u,a.baseType=s.name,a.name=s.localName,a.type=s.type}}else try{a=s.decode(t)}catch(o){if(o.code===xe.errors.BUFFER_OVERRUN)throw o;a=o,a.baseType=s.name,a.name=s.localName,a.type=s.type}a!=null&&r.push(a)});const i=e.reduce((s,a)=>{const o=a.localName;return o&&(s[o]||(s[o]=0),s[o]++),s},{});e.forEach((s,a)=>{let o=s.localName;if(!o||i[o]!==1||(o==="length"&&(o="_length"),r[o]!=null))return;const c=r[a];c instanceof Error?Object.defineProperty(r,o,{enumerable:!0,get:()=>{throw c}}):r[o]=c});for(let s=0;s<r.length;s++){const a=r[s];a instanceof Error&&Object.defineProperty(r,s,{enumerable:!0,get:()=>{throw a}})}return Object.freeze(r)}class r3 extends ii{constructor(e,r,n){const i=e.type+"["+(r>=0?r:"")+"]",s=r===-1||e.dynamic;super("array",i,n,s),this.coder=e,this.length=r}defaultValue(){const e=this.coder.defaultValue(),r=[];for(let n=0;n<this.length;n++)r.push(e);return r}encode(e,r){Array.isArray(r)||this._throwError("expected array value",r);let n=this.length;n===-1&&(n=r.length,e.writeValue(r.length)),ys.checkArgumentCount(r.length,n,"coder array"+(this.localName?" "+this.localName:""));let i=[];for(let s=0;s<r.length;s++)i.push(this.coder);return $x(e,i,r)}decode(e){let r=this.length;r===-1&&(r=e.readValue().toNumber(),r*32>e._data.length&&ys.throwError("insufficient data length",xe.errors.BUFFER_OVERRUN,{length:e._data.length,count:r}));let n=[];for(let i=0;i<r;i++)n.push(new t3(this.coder));return e.coerce(this.name,qx(e,n))}}class n3 extends ii{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,r){return e.writeValue(r?1:0)}decode(e){return e.coerce(this.type,!e.readValue().isZero())}}class Fx extends ii{constructor(e,r){super(e,e,r,!0)}defaultValue(){return"0x"}encode(e,r){r=ge(r);let n=e.writeValue(r.length);return n+=e.writeBytes(r),n}decode(e){return e.readBytes(e.readValue().toNumber(),!0)}}class i3 extends Fx{constructor(e){super("bytes",e)}decode(e){return e.coerce(this.name,ke(super.decode(e)))}}class s3 extends ii{constructor(e,r){let n="bytes"+String(e);super(n,n,r,!1),this.size=e}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(e,r){let n=ge(r);return n.length!==this.size&&this._throwError("incorrect data length",r),e.writeBytes(n)}decode(e){return e.coerce(this.name,ke(e.readBytes(this.size)))}}class a3 extends ii{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,r){return r!=null&&this._throwError("not null",r),e.writeBytes([])}decode(e){return e.readBytes(0),e.coerce(this.name,null)}}class o3 extends ii{constructor(e,r,n){const i=(r?"int":"uint")+e*8;super(i,i,n,!1),this.size=e,this.signed=r}defaultValue(){return 0}encode(e,r){let n=$e.from(r),i=wm.mask(e.wordSize*8);if(this.signed){let s=i.mask(this.size*8-1);(n.gt(s)||n.lt(s.add(mm).mul(gm)))&&this._throwError("value out-of-bounds",r)}else(n.lt(bm)||n.gt(i.mask(this.size*8)))&&this._throwError("value out-of-bounds",r);return n=n.toTwos(this.size*8).mask(this.size*8),this.signed&&(n=n.fromTwos(this.size*8).toTwos(8*e.wordSize)),e.writeValue(n)}decode(e){let r=e.readValue().mask(this.size*8);return this.signed&&(r=r.fromTwos(this.size*8)),e.coerce(this.name,r)}}class c3 extends Fx{constructor(e){super("string",e)}defaultValue(){return""}encode(e,r){return super.encode(e,Kn(r))}decode(e){return Rm(super.decode(e))}}class bo extends ii{constructor(e,r){let n=!1;const i=[];e.forEach(a=>{a.dynamic&&(n=!0),i.push(a.type)});const s="tuple("+i.join(",")+")";super("tuple",s,r,n),this.coders=e}defaultValue(){const e=[];this.coders.forEach(n=>{e.push(n.defaultValue())});const r=this.coders.reduce((n,i)=>{const s=i.localName;return s&&(n[s]||(n[s]=0),n[s]++),n},{});return this.coders.forEach((n,i)=>{let s=n.localName;!s||r[s]!==1||(s==="length"&&(s="_length"),e[s]==null&&(e[s]=e[i]))}),Object.freeze(e)}encode(e,r){return $x(e,this.coders,r)}decode(e){return e.coerce(this.name,qx(e,this.coders))}}const mo=new xe(eo),f3=new RegExp(/^bytes([0-9]*)$/),u3=new RegExp(/^(u?int)([0-9]*)$/);class l3{constructor(e){he(this,"coerceFunc",e||null)}_getCoder(e){switch(e.baseType){case"address":return new e3(e.name);case"bool":return new n3(e.name);case"string":return new c3(e.name);case"bytes":return new i3(e.name);case"array":return new r3(this._getCoder(e.arrayChildren),e.arrayLength,e.name);case"tuple":return new bo((e.components||[]).map(n=>this._getCoder(n)),e.name);case"":return new a3(e.name)}let r=e.type.match(u3);if(r){let n=parseInt(r[2]||"256");return(n===0||n>256||n%8!==0)&&mo.throwArgumentError("invalid "+r[1]+" bit length","param",e),new o3(n/8,r[1]==="int",e.name)}if(r=e.type.match(f3),r){let n=parseInt(r[1]);return(n===0||n>32)&&mo.throwArgumentError("invalid bytes length","param",e),new s3(n,e.name)}return mo.throwArgumentError("invalid type","type",e.type)}_getWordSize(){return 32}_getReader(e,r){return new oc(e,this._getWordSize(),this.coerceFunc,r)}_getWriter(){return new Bu(this._getWordSize())}getDefaultValue(e){const r=e.map(i=>this._getCoder(lr.from(i)));return new bo(r,"_").defaultValue()}encode(e,r){e.length!==r.length&&mo.throwError("types/values length mismatch",xe.errors.INVALID_ARGUMENT,{count:{types:e.length,values:r.length},value:{types:e,values:r}});const n=e.map(a=>this._getCoder(lr.from(a))),i=new bo(n,"_"),s=this._getWriter();return i.encode(s,r),s.data}decode(e,r,n){const i=e.map(a=>this._getCoder(lr.from(a)));return new bo(i,"_").decode(this._getReader(ge(r),n))}}const d3=new l3,Wt=new xe(eo);class h3 extends Hs{}class p3 extends Hs{}class x3 extends Hs{}class Uu extends Hs{static isIndexed(e){return!!(e&&e._isIndexed)}}const y3={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:!0},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"]}};function y0(t,e){const r=new Error(`deferred error during ABI decoding triggered accessing ${t}`);return r.error=e,r}class g0{constructor(e){let r=[];typeof e=="string"?r=JSON.parse(e):r=e,he(this,"fragments",r.map(n=>Zn.from(n)).filter(n=>n!=null)),he(this,"_abiCoder",fa(new.target,"getAbiCoder")()),he(this,"functions",{}),he(this,"errors",{}),he(this,"events",{}),he(this,"structs",{}),this.fragments.forEach(n=>{let i=null;switch(n.type){case"constructor":if(this.deploy){Wt.warn("duplicate definition - constructor");return}he(this,"deploy",n);return;case"function":i=this.functions;break;case"event":i=this.events;break;case"error":i=this.errors;break;default:return}let s=n.format();if(i[s]){Wt.warn("duplicate definition - "+s);return}i[s]=n}),this.deploy||he(this,"deploy",Dn.from({payable:!1,type:"constructor"})),he(this,"_isInterface",!0)}format(e){e||(e=wt.full),e===wt.sighash&&Wt.throwArgumentError("interface does not support formatting sighash","format",e);const r=this.fragments.map(n=>n.format(e));return e===wt.json?JSON.stringify(r.map(n=>JSON.parse(n))):r}static getAbiCoder(){return d3}static getAddress(e){return fr(e)}static getSighash(e){return Ni(Ci(e.format()),0,4)}static getEventTopic(e){return Ci(e.format())}getFunction(e){if(ir(e)){for(const n in this.functions)if(e===this.getSighash(n))return this.functions[n];Wt.throwArgumentError("no matching function","sighash",e)}if(e.indexOf("(")===-1){const n=e.trim(),i=Object.keys(this.functions).filter(s=>s.split("(")[0]===n);return i.length===0?Wt.throwArgumentError("no matching function","name",n):i.length>1&&Wt.throwArgumentError("multiple matching functions","name",n),this.functions[i[0]]}const r=this.functions[Ln.fromString(e).format()];return r||Wt.throwArgumentError("no matching function","signature",e),r}getEvent(e){if(ir(e)){const n=e.toLowerCase();for(const i in this.events)if(n===this.getEventTopic(i))return this.events[i];Wt.throwArgumentError("no matching event","topichash",n)}if(e.indexOf("(")===-1){const n=e.trim(),i=Object.keys(this.events).filter(s=>s.split("(")[0]===n);return i.length===0?Wt.throwArgumentError("no matching event","name",n):i.length>1&&Wt.throwArgumentError("multiple matching events","name",n),this.events[i[0]]}const r=this.events[Yn.fromString(e).format()];return r||Wt.throwArgumentError("no matching event","signature",e),r}getError(e){if(ir(e)){const n=fa(this.constructor,"getSighash");for(const i in this.errors){const s=this.errors[i];if(e===n(s))return this.errors[i]}Wt.throwArgumentError("no matching error","sighash",e)}if(e.indexOf("(")===-1){const n=e.trim(),i=Object.keys(this.errors).filter(s=>s.split("(")[0]===n);return i.length===0?Wt.throwArgumentError("no matching error","name",n):i.length>1&&Wt.throwArgumentError("multiple matching errors","name",n),this.errors[i[0]]}const r=this.errors[Ln.fromString(e).format()];return r||Wt.throwArgumentError("no matching error","signature",e),r}getSighash(e){if(typeof e=="string")try{e=this.getFunction(e)}catch(r){try{e=this.getError(e)}catch{throw r}}return fa(this.constructor,"getSighash")(e)}getEventTopic(e){return typeof e=="string"&&(e=this.getEvent(e)),fa(this.constructor,"getEventTopic")(e)}_decodeParams(e,r){return this._abiCoder.decode(e,r)}_encodeParams(e,r){return this._abiCoder.encode(e,r)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,r){typeof e=="string"&&(e=this.getError(e));const n=ge(r);return ke(n.slice(0,4))!==this.getSighash(e)&&Wt.throwArgumentError(`data signature does not match error ${e.name}.`,"data",ke(n)),this._decodeParams(e.inputs,n.slice(4))}encodeErrorResult(e,r){return typeof e=="string"&&(e=this.getError(e)),ke(Br([this.getSighash(e),this._encodeParams(e.inputs,r||[])]))}decodeFunctionData(e,r){typeof e=="string"&&(e=this.getFunction(e));const n=ge(r);return ke(n.slice(0,4))!==this.getSighash(e)&&Wt.throwArgumentError(`data signature does not match function ${e.name}.`,"data",ke(n)),this._decodeParams(e.inputs,n.slice(4))}encodeFunctionData(e,r){return typeof e=="string"&&(e=this.getFunction(e)),ke(Br([this.getSighash(e),this._encodeParams(e.inputs,r||[])]))}decodeFunctionResult(e,r){typeof e=="string"&&(e=this.getFunction(e));let n=ge(r),i=null,s="",a=null,o=null,c=null;switch(n.length%this._abiCoder._getWordSize()){case 0:try{return this._abiCoder.decode(e.outputs,n)}catch{}break;case 4:{const u=ke(n.slice(0,4)),h=y3[u];if(h)a=this._abiCoder.decode(h.inputs,n.slice(4)),o=h.name,c=h.signature,h.reason&&(i=a[0]),o==="Error"?s=`; VM Exception while processing transaction: reverted with reason string ${JSON.stringify(a[0])}`:o==="Panic"&&(s=`; VM Exception while processing transaction: reverted with panic code ${a[0]}`);else try{const p=this.getError(u);a=this._abiCoder.decode(p.inputs,n.slice(4)),o=p.name,c=p.format()}catch{}break}}return Wt.throwError("call revert exception"+s,xe.errors.CALL_EXCEPTION,{method:e.format(),data:ke(r),errorArgs:a,errorName:o,errorSignature:c,reason:i})}encodeFunctionResult(e,r){return typeof e=="string"&&(e=this.getFunction(e)),ke(this._abiCoder.encode(e.outputs,r||[]))}encodeFilterTopics(e,r){typeof e=="string"&&(e=this.getEvent(e)),r.length>e.inputs.length&&Wt.throwError("too many arguments for "+e.format(),xe.errors.UNEXPECTED_ARGUMENT,{argument:"values",value:r});let n=[];e.anonymous||n.push(this.getEventTopic(e));const i=(s,a)=>s.type==="string"?Ci(a):s.type==="bytes"?hr(ke(a)):(s.type==="bool"&&typeof a=="boolean"&&(a=a?"0x01":"0x00"),s.type.match(/^u?int/)&&(a=$e.from(a).toHexString()),s.type==="address"&&this._abiCoder.encode(["address"],[a]),Ur(ke(a),32));for(r.forEach((s,a)=>{let o=e.inputs[a];if(!o.indexed){s!=null&&Wt.throwArgumentError("cannot filter non-indexed parameters; must be null","contract."+o.name,s);return}s==null?n.push(null):o.baseType==="array"||o.baseType==="tuple"?Wt.throwArgumentError("filtering with tuples or arrays not supported","contract."+o.name,s):Array.isArray(s)?n.push(s.map(c=>i(o,c))):n.push(i(o,s))});n.length&&n[n.length-1]===null;)n.pop();return n}encodeEventLog(e,r){typeof e=="string"&&(e=this.getEvent(e));const n=[],i=[],s=[];return e.anonymous||n.push(this.getEventTopic(e)),r.length!==e.inputs.length&&Wt.throwArgumentError("event arguments/values mismatch","values",r),e.inputs.forEach((a,o)=>{const c=r[o];if(a.indexed)if(a.type==="string")n.push(Ci(c));else if(a.type==="bytes")n.push(hr(c));else{if(a.baseType==="tuple"||a.baseType==="array")throw new Error("not implemented");n.push(this._abiCoder.encode([a.type],[c]))}else i.push(a),s.push(c)}),{data:this._abiCoder.encode(i,s),topics:n}}decodeEventLog(e,r,n){if(typeof e=="string"&&(e=this.getEvent(e)),n!=null&&!e.anonymous){let m=this.getEventTopic(e);(!ir(n[0],32)||n[0].toLowerCase()!==m)&&Wt.throwError("fragment/topic mismatch",xe.errors.INVALID_ARGUMENT,{argument:"topics[0]",expected:m,value:n[0]}),n=n.slice(1)}let i=[],s=[],a=[];e.inputs.forEach((m,P)=>{m.indexed?m.type==="string"||m.type==="bytes"||m.baseType==="tuple"||m.baseType==="array"?(i.push(lr.fromObject({type:"bytes32",name:m.name})),a.push(!0)):(i.push(m),a.push(!1)):(s.push(m),a.push(!1))});let o=n!=null?this._abiCoder.decode(i,Br(n)):null,c=this._abiCoder.decode(s,r,!0),u=[],h=0,p=0;e.inputs.forEach((m,P)=>{if(m.indexed)if(o==null)u[P]=new Uu({_isIndexed:!0,hash:null});else if(a[P])u[P]=new Uu({_isIndexed:!0,hash:o[p++]});else try{u[P]=o[p++]}catch(M){u[P]=M}else try{u[P]=c[h++]}catch(M){u[P]=M}if(m.name&&u[m.name]==null){const M=u[P];M instanceof Error?Object.defineProperty(u,m.name,{enumerable:!0,get:()=>{throw y0(`property ${JSON.stringify(m.name)}`,M)}}):u[m.name]=M}});for(let m=0;m<u.length;m++){const P=u[m];P instanceof Error&&Object.defineProperty(u,m,{enumerable:!0,get:()=>{throw y0(`index ${m}`,P)}})}return Object.freeze(u)}parseTransaction(e){let r=this.getFunction(e.data.substring(0,10).toLowerCase());return r?new p3({args:this._abiCoder.decode(r.inputs,"0x"+e.data.substring(10)),functionFragment:r,name:r.name,signature:r.format(),sighash:this.getSighash(r),value:$e.from(e.value||"0")}):null}parseLog(e){let r=this.getEvent(e.topics[0]);return!r||r.anonymous?null:new h3({eventFragment:r,name:r.name,signature:r.format(),topic:this.getEventTopic(r),args:this.decodeEventLog(r,e.data,e.topics)})}parseError(e){const r=ke(e);let n=this.getError(r.substring(0,10).toLowerCase());return n?new x3({args:this._abiCoder.decode(n.inputs,"0x"+r.substring(10)),errorFragment:n,name:n.name,signature:n.format(),sighash:this.getSighash(n)}):null}static isInterface(e){return!!(e&&e._isInterface)}}const g3="contracts/5.7.0";var qi=function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(h){try{u(n.next(h))}catch(p){a(p)}}function c(h){try{u(n.throw(h))}catch(p){a(p)}}function u(h){h.done?s(h.value):i(h.value).then(o,c)}u((n=n.apply(t,e||[])).next())})};const rr=new xe(g3);function cc(t,e){return qi(this,void 0,void 0,function*(){const r=yield e;typeof r!="string"&&rr.throwArgumentError("invalid address or ENS name","name",r);try{return fr(r)}catch{}t||rr.throwError("a provider or signer is needed to resolve ENS names",xe.errors.UNSUPPORTED_OPERATION,{operation:"resolveName"});const n=yield t.resolveName(r);return n==null&&rr.throwArgumentError("resolver or addr is not configured for ENS name","name",r),n})}function No(t,e,r){return qi(this,void 0,void 0,function*(){return Array.isArray(r)?yield Promise.all(r.map((n,i)=>No(t,Array.isArray(e)?e[i]:e[n.name],n))):r.type==="address"?yield cc(t,e):r.type==="tuple"?yield No(t,e,r.components):r.baseType==="array"?Array.isArray(e)?yield Promise.all(e.map(n=>No(t,n,r.arrayChildren))):Promise.reject(rr.makeError("invalid value for array",xe.errors.INVALID_ARGUMENT,{argument:"value",value:e})):e})}function Hc(t,e,r){return qi(this,void 0,void 0,function*(){let n={};r.length===e.inputs.length+1&&typeof r[r.length-1]=="object"&&(n=_i(r.pop())),rr.checkArgumentCount(r.length,e.inputs.length,"passed to contract"),t.signer?n.from?n.from=Xn({override:cc(t.signer,n.from),signer:t.signer.getAddress()}).then(u=>qi(this,void 0,void 0,function*(){return fr(u.signer)!==u.override&&rr.throwError("Contract with a Signer cannot override from",xe.errors.UNSUPPORTED_OPERATION,{operation:"overrides.from"}),u.override})):n.from=t.signer.getAddress():n.from&&(n.from=cc(t.provider,n.from));const i=yield Xn({args:No(t.signer||t.provider,r,e.inputs),address:t.resolvedAddress,overrides:Xn(n)||{}}),s=t.interface.encodeFunctionData(e,i.args),a={data:s,to:i.address},o=i.overrides;if(o.nonce!=null&&(a.nonce=$e.from(o.nonce).toNumber()),o.gasLimit!=null&&(a.gasLimit=$e.from(o.gasLimit)),o.gasPrice!=null&&(a.gasPrice=$e.from(o.gasPrice)),o.maxFeePerGas!=null&&(a.maxFeePerGas=$e.from(o.maxFeePerGas)),o.maxPriorityFeePerGas!=null&&(a.maxPriorityFeePerGas=$e.from(o.maxPriorityFeePerGas)),o.from!=null&&(a.from=o.from),o.type!=null&&(a.type=o.type),o.accessList!=null&&(a.accessList=Ap(o.accessList)),a.gasLimit==null&&e.gas!=null){let u=21e3;const h=ge(s);for(let p=0;p<h.length;p++)u+=4,h[p]&&(u+=64);a.gasLimit=$e.from(e.gas).add(u)}if(o.value){const u=$e.from(o.value);!u.isZero()&&!e.payable&&rr.throwError("non-payable method cannot override value",xe.errors.UNSUPPORTED_OPERATION,{operation:"overrides.value",value:n.value}),a.value=u}o.customData&&(a.customData=_i(o.customData)),o.ccipReadEnabled&&(a.ccipReadEnabled=!!o.ccipReadEnabled),delete n.nonce,delete n.gasLimit,delete n.gasPrice,delete n.from,delete n.value,delete n.type,delete n.accessList,delete n.maxFeePerGas,delete n.maxPriorityFeePerGas,delete n.customData,delete n.ccipReadEnabled;const c=Object.keys(n).filter(u=>n[u]!=null);return c.length&&rr.throwError(`cannot override ${c.map(u=>JSON.stringify(u)).join(",")}`,xe.errors.UNSUPPORTED_OPERATION,{operation:"overrides",overrides:c}),a})}function b3(t,e){return function(...r){return Hc(t,e,r)}}function m3(t,e){const r=t.signer||t.provider;return function(...n){return qi(this,void 0,void 0,function*(){r||rr.throwError("estimate require a provider or signer",xe.errors.UNSUPPORTED_OPERATION,{operation:"estimateGas"});const i=yield Hc(t,e,n);return yield r.estimateGas(i)})}}function w3(t,e){const r=e.wait.bind(e);e.wait=n=>r(n).then(i=>(i.events=i.logs.map(s=>{let a=Ps(s),o=null;try{o=t.interface.parseLog(s)}catch{}return o&&(a.args=o.args,a.decode=(c,u)=>t.interface.decodeEventLog(o.eventFragment,c,u),a.event=o.name,a.eventSignature=o.signature),a.removeListener=()=>t.provider,a.getBlock=()=>t.provider.getBlock(i.blockHash),a.getTransaction=()=>t.provider.getTransaction(i.transactionHash),a.getTransactionReceipt=()=>Promise.resolve(i),a}),i))}function Hx(t,e,r){const n=t.signer||t.provider;return function(...i){return qi(this,void 0,void 0,function*(){let s;if(i.length===e.inputs.length+1&&typeof i[i.length-1]=="object"){const c=_i(i.pop());c.blockTag!=null&&(s=yield c.blockTag),delete c.blockTag,i.push(c)}t.deployTransaction!=null&&(yield t._deployed(s));const a=yield Hc(t,e,i),o=yield n.call(a,s);try{let c=t.interface.decodeFunctionResult(e,o);return r&&e.outputs.length===1&&(c=c[0]),c}catch(c){throw c.code===xe.errors.CALL_EXCEPTION&&(c.address=t.address,c.args=i,c.transaction=a),c}})}}function v3(t,e){return function(...r){return qi(this,void 0,void 0,function*(){t.signer||rr.throwError("sending a transaction requires a signer",xe.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction"}),t.deployTransaction!=null&&(yield t._deployed());const n=yield Hc(t,e,r),i=yield t.signer.sendTransaction(n);return w3(t,i),i})}}function b0(t,e,r){return e.constant?Hx(t,e,r):v3(t,e)}function Kx(t){return t.address&&(t.topics==null||t.topics.length===0)?"*":(t.address||"*")+"@"+(t.topics?t.topics.map(e=>Array.isArray(e)?e.join("|"):e).join(":"):"")}class Ca{constructor(e,r){he(this,"tag",e),he(this,"filter",r),this._listeners=[]}addListener(e,r){this._listeners.push({listener:e,once:r})}removeListener(e){let r=!1;this._listeners=this._listeners.filter(n=>r||n.listener!==e?!0:(r=!0,!1))}removeAllListeners(){this._listeners=[]}listeners(){return this._listeners.map(e=>e.listener)}listenerCount(){return this._listeners.length}run(e){const r=this.listenerCount();return this._listeners=this._listeners.filter(n=>{const i=e.slice();return setTimeout(()=>{n.listener.apply(this,i)},0),!n.once}),r}prepareEvent(e){}getEmit(e){return[e]}}class _3 extends Ca{constructor(){super("error",null)}}class m0 extends Ca{constructor(e,r,n,i){const s={address:e};let a=r.getEventTopic(n);i?(a!==i[0]&&rr.throwArgumentError("topic mismatch","topics",i),s.topics=i.slice()):s.topics=[a],super(Kx(s),s),he(this,"address",e),he(this,"interface",r),he(this,"fragment",n)}prepareEvent(e){super.prepareEvent(e),e.event=this.fragment.name,e.eventSignature=this.fragment.format(),e.decode=(r,n)=>this.interface.decodeEventLog(this.fragment,r,n);try{e.args=this.interface.decodeEventLog(this.fragment,e.data,e.topics)}catch(r){e.args=null,e.decodeError=r}}getEmit(e){const r=Q6(e.args);if(r.length)throw r[0].error;const n=(e.args||[]).slice();return n.push(e),n}}class w0 extends Ca{constructor(e,r){super("*",{address:e}),he(this,"address",e),he(this,"interface",r)}prepareEvent(e){super.prepareEvent(e);try{const r=this.interface.parseLog(e);e.event=r.name,e.eventSignature=r.signature,e.decode=(n,i)=>this.interface.decodeEventLog(r.eventFragment,n,i),e.args=r.args}catch{}}}class E3{constructor(e,r,n){he(this,"interface",fa(new.target,"getInterface")(r)),n==null?(he(this,"provider",null),he(this,"signer",null)):Ka.isSigner(n)?(he(this,"provider",n.provider||null),he(this,"signer",n)):Rp.isProvider(n)?(he(this,"provider",n),he(this,"signer",null)):rr.throwArgumentError("invalid signer or provider","signerOrProvider",n),he(this,"callStatic",{}),he(this,"estimateGas",{}),he(this,"functions",{}),he(this,"populateTransaction",{}),he(this,"filters",{});{const a={};Object.keys(this.interface.events).forEach(o=>{const c=this.interface.events[o];he(this.filters,o,(...u)=>({address:this.address,topics:this.interface.encodeFilterTopics(c,u)})),a[c.name]||(a[c.name]=[]),a[c.name].push(o)}),Object.keys(a).forEach(o=>{const c=a[o];c.length===1?he(this.filters,o,this.filters[c[0]]):rr.warn(`Duplicate definition of ${o} (${c.join(", ")})`)})}if(he(this,"_runningEvents",{}),he(this,"_wrappedEmits",{}),e==null&&rr.throwArgumentError("invalid contract address or ENS name","addressOrName",e),he(this,"address",e),this.provider)he(this,"resolvedAddress",cc(this.provider,e));else try{he(this,"resolvedAddress",Promise.resolve(fr(e)))}catch{rr.throwError("provider is required to use ENS name as contract address",xe.errors.UNSUPPORTED_OPERATION,{operation:"new Contract"})}this.resolvedAddress.catch(a=>{});const i={},s={};Object.keys(this.interface.functions).forEach(a=>{const o=this.interface.functions[a];if(s[a]){rr.warn(`Duplicate ABI entry for ${JSON.stringify(a)}`);return}s[a]=!0;{const c=o.name;i[`%${c}`]||(i[`%${c}`]=[]),i[`%${c}`].push(a)}this[a]==null&&he(this,a,b0(this,o,!0)),this.functions[a]==null&&he(this.functions,a,b0(this,o,!1)),this.callStatic[a]==null&&he(this.callStatic,a,Hx(this,o,!0)),this.populateTransaction[a]==null&&he(this.populateTransaction,a,b3(this,o)),this.estimateGas[a]==null&&he(this.estimateGas,a,m3(this,o))}),Object.keys(i).forEach(a=>{const o=i[a];if(o.length>1)return;a=a.substring(1);const c=o[0];try{this[a]==null&&he(this,a,this[c])}catch{}this.functions[a]==null&&he(this.functions,a,this.functions[c]),this.callStatic[a]==null&&he(this.callStatic,a,this.callStatic[c]),this.populateTransaction[a]==null&&he(this.populateTransaction,a,this.populateTransaction[c]),this.estimateGas[a]==null&&he(this.estimateGas,a,this.estimateGas[c])})}static getContractAddress(e){return Nm(e)}static getInterface(e){return g0.isInterface(e)?e:new g0(e)}deployed(){return this._deployed()}_deployed(e){return this._deployedPromise||(this.deployTransaction?this._deployedPromise=this.deployTransaction.wait().then(()=>this):this._deployedPromise=this.provider.getCode(this.address,e).then(r=>(r==="0x"&&rr.throwError("contract not deployed",xe.errors.UNSUPPORTED_OPERATION,{contractAddress:this.address,operation:"getDeployed"}),this))),this._deployedPromise}fallback(e){this.signer||rr.throwError("sending a transactions require a signer",xe.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction(fallback)"});const r=_i(e||{});return["from","to"].forEach(function(n){r[n]!=null&&rr.throwError("cannot override "+n,xe.errors.UNSUPPORTED_OPERATION,{operation:n})}),r.to=this.resolvedAddress,this.deployed().then(()=>this.signer.sendTransaction(r))}connect(e){typeof e=="string"&&(e=new yl(e,this.provider));const r=new this.constructor(this.address,this.interface,e);return this.deployTransaction&&he(r,"deployTransaction",this.deployTransaction),r}attach(e){return new this.constructor(e,this.interface,this.signer||this.provider)}static isIndexed(e){return Uu.isIndexed(e)}_normalizeRunningEvent(e){return this._runningEvents[e.tag]?this._runningEvents[e.tag]:e}_getRunningEvent(e){if(typeof e=="string"){if(e==="error")return this._normalizeRunningEvent(new _3);if(e==="event")return this._normalizeRunningEvent(new Ca("event",null));if(e==="*")return this._normalizeRunningEvent(new w0(this.address,this.interface));const r=this.interface.getEvent(e);return this._normalizeRunningEvent(new m0(this.address,this.interface,r))}if(e.topics&&e.topics.length>0){try{const n=e.topics[0];if(typeof n!="string")throw new Error("invalid topic");const i=this.interface.getEvent(n);return this._normalizeRunningEvent(new m0(this.address,this.interface,i,e.topics))}catch{}const r={address:this.address,topics:e.topics};return this._normalizeRunningEvent(new Ca(Kx(r),r))}return this._normalizeRunningEvent(new w0(this.address,this.interface))}_checkRunningEvents(e){if(e.listenerCount()===0){delete this._runningEvents[e.tag];const r=this._wrappedEmits[e.tag];r&&e.filter&&(this.provider.off(e.filter,r),delete this._wrappedEmits[e.tag])}}_wrapEvent(e,r,n){const i=Ps(r);return i.removeListener=()=>{n&&(e.removeListener(n),this._checkRunningEvents(e))},i.getBlock=()=>this.provider.getBlock(r.blockHash),i.getTransaction=()=>this.provider.getTransaction(r.transactionHash),i.getTransactionReceipt=()=>this.provider.getTransactionReceipt(r.transactionHash),e.prepareEvent(i),i}_addEventListener(e,r,n){if(this.provider||rr.throwError("events require a provider or a signer with a provider",xe.errors.UNSUPPORTED_OPERATION,{operation:"once"}),e.addListener(r,n),this._runningEvents[e.tag]=e,!this._wrappedEmits[e.tag]){const i=s=>{let a=this._wrapEvent(e,s,r);if(a.decodeError==null)try{const o=e.getEmit(a);this.emit(e.filter,...o)}catch(o){a.decodeError=o.error}e.filter!=null&&this.emit("event",a),a.decodeError!=null&&this.emit("error",a.decodeError,a)};this._wrappedEmits[e.tag]=i,e.filter!=null&&this.provider.on(e.filter,i)}}queryFilter(e,r,n){const i=this._getRunningEvent(e),s=_i(i.filter);return typeof r=="string"&&ir(r,32)?(n!=null&&rr.throwArgumentError("cannot specify toBlock with blockhash","toBlock",n),s.blockHash=r):(s.fromBlock=r??0,s.toBlock=n??"latest"),this.provider.getLogs(s).then(a=>a.map(o=>this._wrapEvent(i,o,null)))}on(e,r){return this._addEventListener(this._getRunningEvent(e),r,!1),this}once(e,r){return this._addEventListener(this._getRunningEvent(e),r,!0),this}emit(e,...r){if(!this.provider)return!1;const n=this._getRunningEvent(e),i=n.run(r)>0;return this._checkRunningEvents(n),i}listenerCount(e){return this.provider?e==null?Object.keys(this._runningEvents).reduce((r,n)=>r+this._runningEvents[n].listenerCount(),0):this._getRunningEvent(e).listenerCount():0}listeners(e){if(!this.provider)return[];if(e==null){const r=[];for(let n in this._runningEvents)this._runningEvents[n].listeners().forEach(i=>{r.push(i)});return r}return this._getRunningEvent(e).listeners()}removeAllListeners(e){if(!this.provider)return this;if(e==null){for(const n in this._runningEvents){const i=this._runningEvents[n];i.removeAllListeners(),this._checkRunningEvents(i)}return this}const r=this._getRunningEvent(e);return r.removeAllListeners(),this._checkRunningEvents(r),this}off(e,r){if(!this.provider)return this;const n=this._getRunningEvent(e);return n.removeListener(r),this._checkRunningEvents(n),this}removeListener(e,r){return this.off(e,r)}}class S3 extends E3{}class A3 extends Pc{constructor(r){super(r);N(this,"contractInstance");N(this,"contractAddress");this.contractAddress=r.contractAddress}async getContract(){return this.contractInstance||(this.contractInstance=new S3(this.contractAddress,T3,this.w3signer),this.base=["wei",Math.pow(10,await this.contractInstance.decimals())]),this.contractInstance}async getTx(r){const n=await this.providerInstance.getTransaction(r);if(!n)throw new Error("Tx doesn't exist");if(n.data.length!==138||n.data.slice(2,10)!=="a9059cbb")throw new Error("Tx isn't a ERC20 transfer");const i=`0x${n.data.slice(34,74)}`,s=new qe(n.data.slice(74),16);return{from:n.from,to:i,blockHeight:n.blockNumber?new qe(n.blockNumber):void 0,amount:s,pending:!n.blockNumber,confirmed:n.confirmations>=this.minConfirm}}async getFee(r,n){const i="0x"+new qe(r).toString(16),s=await this.getContract(),a=await this.providerInstance.getGasPrice(),o=await s.estimateGas.transfer(n,i),c=new qe(a.mul(o).toString()),[u]=await this.getGas(),h=u.multipliedBy(c),p=new qe(await this.price());return new qe(h).dividedToIntegerBy(p)}async createTx(r,n,i){const s=await this.getContract(),a="0x"+new qe(r).toString(16),o=await s.populateTransaction.transfer(n,a);if(o.gasPrice=await this.providerInstance.getGasPrice(),o.gasLimit=await s.estimateGas.transfer(n,a),o.chainId=(await this.providerInstance.getNetwork()).chainId,!this.address)throw new Error("Address is undefined - you might be missing a wallet, or have not run Irys.ready()");return o.nonce=await this.providerInstance.getTransactionCount(this.address),{txId:void 0,tx:o}}async getGas(){return[new qe(await bx("ETH")),1e18]}}const T3=[{constant:!0,inputs:[],name:"name",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_spender",type:"address"},{name:"_value",type:"uint256"}],name:"approve",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transferFrom",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"}],name:"balanceOf",outputs:[{name:"balance",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transfer",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"},{name:"_spender",type:"address"}],name:"allowance",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{payable:!0,stateMutability:"payable",type:"fallback"},{anonymous:!1,inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Transfer",type:"event"}];var zr={},dr={};Object.defineProperty(dr,"__esModule",{value:!0});dr.output=dr.exists=dr.hash=dr.bytes=dr.bool=dr.number=void 0;function fc(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}dr.number=fc;function zx(t){if(typeof t!="boolean")throw new Error(`Expected boolean, not ${t}`)}dr.bool=zx;function Nl(t,...e){if(!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new TypeError(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}dr.bytes=Nl;function jx(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");fc(t.outputLen),fc(t.blockLen)}dr.hash=jx;function Gx(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}dr.exists=Gx;function Wx(t,e){Nl(t);const r=e.outputLen;if(t.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}dr.output=Wx;const R3={number:fc,bool:zx,bytes:Nl,hash:jx,exists:Gx,output:Wx};dr.default=R3;var Is={},Vx={},Vi={},Kc={};Object.defineProperty(Kc,"__esModule",{value:!0});Kc.crypto=void 0;Kc.crypto={node:void 0,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0};(function(t){/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(t,"__esModule",{value:!0}),t.randomBytes=t.wrapConstructorWithOpts=t.wrapConstructor=t.checkOpts=t.Hash=t.concatBytes=t.toBytes=t.utf8ToBytes=t.asyncLoop=t.nextTick=t.hexToBytes=t.bytesToHex=t.isLE=t.rotr=t.createView=t.u32=t.u8=void 0;const e=Kc,r=D=>new Uint8Array(D.buffer,D.byteOffset,D.byteLength);t.u8=r;const n=D=>new Uint32Array(D.buffer,D.byteOffset,Math.floor(D.byteLength/4));t.u32=n;const i=D=>new DataView(D.buffer,D.byteOffset,D.byteLength);t.createView=i;const s=(D,U)=>D<<32-U|D>>>U;if(t.rotr=s,t.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68,!t.isLE)throw new Error("Non little-endian hardware is not supported");const a=Array.from({length:256},(D,U)=>U.toString(16).padStart(2,"0"));function o(D){if(!(D instanceof Uint8Array))throw new Error("Uint8Array expected");let U="";for(let Y=0;Y<D.length;Y++)U+=a[D[Y]];return U}t.bytesToHex=o;function c(D){if(typeof D!="string")throw new TypeError("hexToBytes: expected string, got "+typeof D);if(D.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const U=new Uint8Array(D.length/2);for(let Y=0;Y<U.length;Y++){const oe=Y*2,X=D.slice(oe,oe+2),ee=Number.parseInt(X,16);if(Number.isNaN(ee)||ee<0)throw new Error("Invalid byte sequence");U[Y]=ee}return U}t.hexToBytes=c;const u=async()=>{};t.nextTick=u;async function h(D,U,Y){let oe=Date.now();for(let X=0;X<D;X++){Y(X);const ee=Date.now()-oe;ee>=0&&ee<U||(await(0,t.nextTick)(),oe+=ee)}}t.asyncLoop=h;function p(D){if(typeof D!="string")throw new TypeError(`utf8ToBytes expected string, got ${typeof D}`);return new TextEncoder().encode(D)}t.utf8ToBytes=p;function m(D){if(typeof D=="string"&&(D=p(D)),!(D instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof D})`);return D}t.toBytes=m;function P(...D){if(!D.every(oe=>oe instanceof Uint8Array))throw new Error("Uint8Array list expected");if(D.length===1)return D[0];const U=D.reduce((oe,X)=>oe+X.length,0),Y=new Uint8Array(U);for(let oe=0,X=0;oe<D.length;oe++){const ee=D[oe];Y.set(ee,X),X+=ee.length}return Y}t.concatBytes=P;class M{clone(){return this._cloneInto()}}t.Hash=M;const R=D=>Object.prototype.toString.call(D)==="[object Object]"&&D.constructor===Object;function E(D,U){if(U!==void 0&&(typeof U!="object"||!R(U)))throw new TypeError("Options should be object or undefined");return Object.assign(D,U)}t.checkOpts=E;function L(D){const U=oe=>D().update(m(oe)).digest(),Y=D();return U.outputLen=Y.outputLen,U.blockLen=Y.blockLen,U.create=()=>D(),U}t.wrapConstructor=L;function W(D){const U=(oe,X)=>D(X).update(m(oe)).digest(),Y=D({});return U.outputLen=Y.outputLen,U.blockLen=Y.blockLen,U.create=oe=>D(oe),U}t.wrapConstructorWithOpts=W;function z(D=32){if(e.crypto.web)return e.crypto.web.getRandomValues(new Uint8Array(D));if(e.crypto.node)return new Uint8Array(e.crypto.node.randomBytes(D).buffer);throw new Error("The environment doesn't have randomBytes function")}t.randomBytes=z})(Vi);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.hmac=void 0;const e=dr,r=Vi;class n extends r.Hash{constructor(a,o){super(),this.finished=!1,this.destroyed=!1,e.default.hash(a);const c=(0,r.toBytes)(o);if(this.iHash=a.create(),typeof this.iHash.update!="function")throw new TypeError("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const u=this.blockLen,h=new Uint8Array(u);h.set(c.length>u?a.create().update(c).digest():c);for(let p=0;p<h.length;p++)h[p]^=54;this.iHash.update(h),this.oHash=a.create();for(let p=0;p<h.length;p++)h[p]^=106;this.oHash.update(h),h.fill(0)}update(a){return e.default.exists(this),this.iHash.update(a),this}digestInto(a){e.default.exists(this),e.default.bytes(a,this.outputLen),this.finished=!0,this.iHash.digestInto(a),this.oHash.update(a),this.oHash.digestInto(a),this.destroy()}digest(){const a=new Uint8Array(this.oHash.outputLen);return this.digestInto(a),a}_cloneInto(a){a||(a=Object.create(Object.getPrototypeOf(this),{}));const{oHash:o,iHash:c,finished:u,destroyed:h,blockLen:p,outputLen:m}=this;return a=a,a.finished=u,a.destroyed=h,a.blockLen=p,a.outputLen=m,a.oHash=o._cloneInto(a.oHash),a.iHash=c._cloneInto(a.iHash),a}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const i=(s,a,o)=>new n(s,a).update(o).digest();t.hmac=i,t.hmac.create=(s,a)=>new n(s,a)})(Vx);Object.defineProperty(Is,"__esModule",{value:!0});Is.pbkdf2Async=Is.pbkdf2=void 0;const wo=dr,P3=Vx,vs=Vi;function Jx(t,e,r,n){wo.default.hash(t);const i=(0,vs.checkOpts)({dkLen:32,asyncTick:10},n),{c:s,dkLen:a,asyncTick:o}=i;if(wo.default.number(s),wo.default.number(a),wo.default.number(o),s<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const c=(0,vs.toBytes)(e),u=(0,vs.toBytes)(r),h=new Uint8Array(a),p=P3.hmac.create(t,c),m=p._cloneInto().update(u);return{c:s,dkLen:a,asyncTick:o,DK:h,PRF:p,PRFSalt:m}}function Yx(t,e,r,n,i){return t.destroy(),e.destroy(),n&&n.destroy(),i.fill(0),r}function k3(t,e,r,n){const{c:i,dkLen:s,DK:a,PRF:o,PRFSalt:c}=Jx(t,e,r,n);let u;const h=new Uint8Array(4),p=(0,vs.createView)(h),m=new Uint8Array(o.outputLen);for(let P=1,M=0;M<s;P++,M+=o.outputLen){const R=a.subarray(M,M+o.outputLen);p.setInt32(0,P,!1),(u=c._cloneInto(u)).update(h).digestInto(m),R.set(m.subarray(0,R.length));for(let E=1;E<i;E++){o._cloneInto(u).update(m).digestInto(m);for(let L=0;L<R.length;L++)R[L]^=m[L]}}return Yx(o,c,a,u,m)}Is.pbkdf2=k3;async function M3(t,e,r,n){const{c:i,dkLen:s,asyncTick:a,DK:o,PRF:c,PRFSalt:u}=Jx(t,e,r,n);let h;const p=new Uint8Array(4),m=(0,vs.createView)(p),P=new Uint8Array(c.outputLen);for(let M=1,R=0;R<s;M++,R+=c.outputLen){const E=o.subarray(R,R+c.outputLen);m.setInt32(0,M,!1),(h=u._cloneInto(h)).update(p).digestInto(P),E.set(P.subarray(0,E.length)),await(0,vs.asyncLoop)(i-1,a,L=>{c._cloneInto(h).update(P).digestInto(P);for(let W=0;W<E.length;W++)E[W]^=P[W]})}return Yx(c,u,o,h,P)}Is.pbkdf2Async=M3;var Bs={},to={};Object.defineProperty(to,"__esModule",{value:!0});to.SHA2=void 0;const Yf=dr,ia=Vi;function C3(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const i=BigInt(32),s=BigInt(4294967295),a=Number(r>>i&s),o=Number(r&s),c=n?4:0,u=n?0:4;t.setUint32(e+c,a,n),t.setUint32(e+u,o,n)}let I3=class extends ia.Hash{constructor(e,r,n,i){super(),this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=(0,ia.createView)(this.buffer)}update(e){Yf.default.exists(this);const{view:r,buffer:n,blockLen:i}=this;e=(0,ia.toBytes)(e);const s=e.length;for(let a=0;a<s;){const o=Math.min(i-this.pos,s-a);if(o===i){const c=(0,ia.createView)(e);for(;i<=s-a;a+=i)this.process(c,a);continue}n.set(e.subarray(a,a+o),this.pos),this.pos+=o,a+=o,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Yf.default.exists(this),Yf.default.output(e,this),this.finished=!0;const{buffer:r,view:n,blockLen:i,isLE:s}=this;let{pos:a}=this;r[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>i-a&&(this.process(n,0),a=0);for(let p=a;p<i;p++)r[p]=0;C3(n,i-8,BigInt(this.length*8),s),this.process(n,0);const o=(0,ia.createView)(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,h=this.get();if(u>h.length)throw new Error("_sha2: outputLen bigger than state");for(let p=0;p<u;p++)o.setUint32(4*p,h[p],s)}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:r,buffer:n,length:i,finished:s,destroyed:a,pos:o}=this;return e.length=i,e.pos=o,e.finished=s,e.destroyed=a,i%r&&e.buffer.set(n),e}};to.SHA2=I3;Object.defineProperty(Bs,"__esModule",{value:!0});Bs.sha224=Bs.sha256=void 0;const B3=to,Qr=Vi,U3=(t,e,r)=>t&e^~t&r,O3=(t,e,r)=>t&e^t&r^e&r,N3=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),fi=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),ui=new Uint32Array(64);class Xx extends B3.SHA2{constructor(){super(64,32,8,!1),this.A=fi[0]|0,this.B=fi[1]|0,this.C=fi[2]|0,this.D=fi[3]|0,this.E=fi[4]|0,this.F=fi[5]|0,this.G=fi[6]|0,this.H=fi[7]|0}get(){const{A:e,B:r,C:n,D:i,E:s,F:a,G:o,H:c}=this;return[e,r,n,i,s,a,o,c]}set(e,r,n,i,s,a,o,c){this.A=e|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=s|0,this.F=a|0,this.G=o|0,this.H=c|0}process(e,r){for(let p=0;p<16;p++,r+=4)ui[p]=e.getUint32(r,!1);for(let p=16;p<64;p++){const m=ui[p-15],P=ui[p-2],M=(0,Qr.rotr)(m,7)^(0,Qr.rotr)(m,18)^m>>>3,R=(0,Qr.rotr)(P,17)^(0,Qr.rotr)(P,19)^P>>>10;ui[p]=R+ui[p-7]+M+ui[p-16]|0}let{A:n,B:i,C:s,D:a,E:o,F:c,G:u,H:h}=this;for(let p=0;p<64;p++){const m=(0,Qr.rotr)(o,6)^(0,Qr.rotr)(o,11)^(0,Qr.rotr)(o,25),P=h+m+U3(o,c,u)+N3[p]+ui[p]|0,R=((0,Qr.rotr)(n,2)^(0,Qr.rotr)(n,13)^(0,Qr.rotr)(n,22))+O3(n,i,s)|0;h=u,u=c,c=o,o=a+P|0,a=s,s=i,i=n,n=P+R|0}n=n+this.A|0,i=i+this.B|0,s=s+this.C|0,a=a+this.D|0,o=o+this.E|0,c=c+this.F|0,u=u+this.G|0,h=h+this.H|0,this.set(n,i,s,a,o,c,u,h)}roundClean(){ui.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class D3 extends Xx{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}Bs.sha256=(0,Qr.wrapConstructor)(()=>new Xx);Bs.sha224=(0,Qr.wrapConstructor)(()=>new D3);var cn={},Zx={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.add=t.toBig=t.split=t.fromBig=void 0;const e=BigInt(2**32-1),r=BigInt(32);function n(se,T=!1){return T?{h:Number(se&e),l:Number(se>>r&e)}:{h:Number(se>>r&e)|0,l:Number(se&e)|0}}t.fromBig=n;function i(se,T=!1){let f=new Uint32Array(se.length),d=new Uint32Array(se.length);for(let y=0;y<se.length;y++){const{h:w,l:S}=n(se[y],T);[f[y],d[y]]=[w,S]}return[f,d]}t.split=i;const s=(se,T)=>BigInt(se>>>0)<<r|BigInt(T>>>0);t.toBig=s;const a=(se,T,f)=>se>>>f,o=(se,T,f)=>se<<32-f|T>>>f,c=(se,T,f)=>se>>>f|T<<32-f,u=(se,T,f)=>se<<32-f|T>>>f,h=(se,T,f)=>se<<64-f|T>>>f-32,p=(se,T,f)=>se>>>f-32|T<<64-f,m=(se,T)=>T,P=(se,T)=>se,M=(se,T,f)=>se<<f|T>>>32-f,R=(se,T,f)=>T<<f|se>>>32-f,E=(se,T,f)=>T<<f-32|se>>>64-f,L=(se,T,f)=>se<<f-32|T>>>64-f;function W(se,T,f,d){const y=(T>>>0)+(d>>>0);return{h:se+f+(y/2**32|0)|0,l:y|0}}t.add=W;const z=(se,T,f)=>(se>>>0)+(T>>>0)+(f>>>0),D=(se,T,f,d)=>T+f+d+(se/2**32|0)|0,U=(se,T,f,d)=>(se>>>0)+(T>>>0)+(f>>>0)+(d>>>0),Y=(se,T,f,d,y)=>T+f+d+y+(se/2**32|0)|0,oe=(se,T,f,d,y)=>(se>>>0)+(T>>>0)+(f>>>0)+(d>>>0)+(y>>>0),X=(se,T,f,d,y,w)=>T+f+d+y+w+(se/2**32|0)|0,ee={fromBig:n,split:i,toBig:t.toBig,shrSH:a,shrSL:o,rotrSH:c,rotrSL:u,rotrBH:h,rotrBL:p,rotr32H:m,rotr32L:P,rotlSH:M,rotlSL:R,rotlBH:E,rotlBL:L,add:W,add3L:z,add3H:D,add4L:U,add4H:Y,add5H:X,add5L:oe};t.default=ee})(Zx);Object.defineProperty(cn,"__esModule",{value:!0});cn.sha384=cn.sha512_256=cn.sha512_224=cn.sha512=cn.SHA512=void 0;const L3=to,Je=Zx,zc=Vi,[$3,q3]=Je.default.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),li=new Uint32Array(80),di=new Uint32Array(80);let ro=class extends L3.SHA2{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:r,Bh:n,Bl:i,Ch:s,Cl:a,Dh:o,Dl:c,Eh:u,El:h,Fh:p,Fl:m,Gh:P,Gl:M,Hh:R,Hl:E}=this;return[e,r,n,i,s,a,o,c,u,h,p,m,P,M,R,E]}set(e,r,n,i,s,a,o,c,u,h,p,m,P,M,R,E){this.Ah=e|0,this.Al=r|0,this.Bh=n|0,this.Bl=i|0,this.Ch=s|0,this.Cl=a|0,this.Dh=o|0,this.Dl=c|0,this.Eh=u|0,this.El=h|0,this.Fh=p|0,this.Fl=m|0,this.Gh=P|0,this.Gl=M|0,this.Hh=R|0,this.Hl=E|0}process(e,r){for(let z=0;z<16;z++,r+=4)li[z]=e.getUint32(r),di[z]=e.getUint32(r+=4);for(let z=16;z<80;z++){const D=li[z-15]|0,U=di[z-15]|0,Y=Je.default.rotrSH(D,U,1)^Je.default.rotrSH(D,U,8)^Je.default.shrSH(D,U,7),oe=Je.default.rotrSL(D,U,1)^Je.default.rotrSL(D,U,8)^Je.default.shrSL(D,U,7),X=li[z-2]|0,ee=di[z-2]|0,se=Je.default.rotrSH(X,ee,19)^Je.default.rotrBH(X,ee,61)^Je.default.shrSH(X,ee,6),T=Je.default.rotrSL(X,ee,19)^Je.default.rotrBL(X,ee,61)^Je.default.shrSL(X,ee,6),f=Je.default.add4L(oe,T,di[z-7],di[z-16]),d=Je.default.add4H(f,Y,se,li[z-7],li[z-16]);li[z]=d|0,di[z]=f|0}let{Ah:n,Al:i,Bh:s,Bl:a,Ch:o,Cl:c,Dh:u,Dl:h,Eh:p,El:m,Fh:P,Fl:M,Gh:R,Gl:E,Hh:L,Hl:W}=this;for(let z=0;z<80;z++){const D=Je.default.rotrSH(p,m,14)^Je.default.rotrSH(p,m,18)^Je.default.rotrBH(p,m,41),U=Je.default.rotrSL(p,m,14)^Je.default.rotrSL(p,m,18)^Je.default.rotrBL(p,m,41),Y=p&P^~p&R,oe=m&M^~m&E,X=Je.default.add5L(W,U,oe,q3[z],di[z]),ee=Je.default.add5H(X,L,D,Y,$3[z],li[z]),se=X|0,T=Je.default.rotrSH(n,i,28)^Je.default.rotrBH(n,i,34)^Je.default.rotrBH(n,i,39),f=Je.default.rotrSL(n,i,28)^Je.default.rotrBL(n,i,34)^Je.default.rotrBL(n,i,39),d=n&s^n&o^s&o,y=i&a^i&c^a&c;L=R|0,W=E|0,R=P|0,E=M|0,P=p|0,M=m|0,{h:p,l:m}=Je.default.add(u|0,h|0,ee|0,se|0),u=o|0,h=c|0,o=s|0,c=a|0,s=n|0,a=i|0;const w=Je.default.add3L(se,f,y);n=Je.default.add3H(w,ee,T,d),i=w|0}({h:n,l:i}=Je.default.add(this.Ah|0,this.Al|0,n|0,i|0)),{h:s,l:a}=Je.default.add(this.Bh|0,this.Bl|0,s|0,a|0),{h:o,l:c}=Je.default.add(this.Ch|0,this.Cl|0,o|0,c|0),{h:u,l:h}=Je.default.add(this.Dh|0,this.Dl|0,u|0,h|0),{h:p,l:m}=Je.default.add(this.Eh|0,this.El|0,p|0,m|0),{h:P,l:M}=Je.default.add(this.Fh|0,this.Fl|0,P|0,M|0),{h:R,l:E}=Je.default.add(this.Gh|0,this.Gl|0,R|0,E|0),{h:L,l:W}=Je.default.add(this.Hh|0,this.Hl|0,L|0,W|0),this.set(n,i,s,a,o,c,u,h,p,m,P,M,R,E,L,W)}roundClean(){li.fill(0),di.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};cn.SHA512=ro;class F3 extends ro{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}}let H3=class extends ro{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}},K3=class extends ro{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}};cn.sha512=(0,zc.wrapConstructor)(()=>new ro);cn.sha512_224=(0,zc.wrapConstructor)(()=>new F3);cn.sha512_256=(0,zc.wrapConstructor)(()=>new H3);cn.sha384=(0,zc.wrapConstructor)(()=>new K3);var Qx={};(function(t){/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(t,"__esModule",{value:!0}),t.bytes=t.stringToBytes=t.str=t.bytesToString=t.hex=t.utf8=t.bech32m=t.bech32=t.base58check=t.createBase58check=t.base58xmr=t.base58xrp=t.base58flickr=t.base58=t.base64urlnopad=t.base64url=t.base64nopad=t.base64=t.base32crockford=t.base32hex=t.base32=t.base16=t.utils=t.assertNumber=void 0;function e(f){if(!Number.isSafeInteger(f))throw new Error(`Wrong integer: ${f}`)}t.assertNumber=e;function r(f){return f instanceof Uint8Array||f!=null&&typeof f=="object"&&f.constructor.name==="Uint8Array"}function n(...f){const d=B=>B,y=(B,$)=>k=>B($(k)),w=f.map(B=>B.encode).reduceRight(y,d),S=f.map(B=>B.decode).reduce(y,d);return{encode:w,decode:S}}function i(f){return{encode:d=>{if(!Array.isArray(d)||d.length&&typeof d[0]!="number")throw new Error("alphabet.encode input should be an array of numbers");return d.map(y=>{if(y<0||y>=f.length)throw new Error(`Digit index outside alphabet: ${y} (alphabet: ${f.length})`);return f[y]})},decode:d=>{if(!Array.isArray(d)||d.length&&typeof d[0]!="string")throw new Error("alphabet.decode input should be array of strings");return d.map(y=>{if(typeof y!="string")throw new Error(`alphabet.decode: not string element=${y}`);const w=f.indexOf(y);if(w===-1)throw new Error(`Unknown letter: "${y}". Allowed: ${f}`);return w})}}}function s(f=""){if(typeof f!="string")throw new Error("join separator should be string");return{encode:d=>{if(!Array.isArray(d)||d.length&&typeof d[0]!="string")throw new Error("join.encode input should be array of strings");for(let y of d)if(typeof y!="string")throw new Error(`join.encode: non-string input=${y}`);return d.join(f)},decode:d=>{if(typeof d!="string")throw new Error("join.decode input should be string");return d.split(f)}}}function a(f,d="="){if(typeof d!="string")throw new Error("padding chr should be string");return{encode(y){if(!Array.isArray(y)||y.length&&typeof y[0]!="string")throw new Error("padding.encode input should be array of strings");for(let w of y)if(typeof w!="string")throw new Error(`padding.encode: non-string input=${w}`);for(;y.length*f%8;)y.push(d);return y},decode(y){if(!Array.isArray(y)||y.length&&typeof y[0]!="string")throw new Error("padding.encode input should be array of strings");for(let S of y)if(typeof S!="string")throw new Error(`padding.decode: non-string input=${S}`);let w=y.length;if(w*f%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;w>0&&y[w-1]===d;w--)if(!((w-1)*f%8))throw new Error("Invalid padding: string has too much padding");return y.slice(0,w)}}}function o(f){if(typeof f!="function")throw new Error("normalize fn should be function");return{encode:d=>d,decode:d=>f(d)}}function c(f,d,y){if(d<2)throw new Error(`convertRadix: wrong from=${d}, base cannot be less than 2`);if(y<2)throw new Error(`convertRadix: wrong to=${y}, base cannot be less than 2`);if(!Array.isArray(f))throw new Error("convertRadix: data should be array");if(!f.length)return[];let w=0;const S=[],B=Array.from(f);for(B.forEach($=>{if($<0||$>=d)throw new Error(`Wrong integer: ${$}`)});;){let $=0,k=!0;for(let x=w;x<B.length;x++){const b=B[x],F=d*$+b;if(!Number.isSafeInteger(F)||d*$/d!==$||F-b!==d*$)throw new Error("convertRadix: carry overflow");$=F%y;const V=Math.floor(F/y);if(B[x]=V,!Number.isSafeInteger(V)||V*y+$!==F)throw new Error("convertRadix: carry overflow");if(k)V?k=!1:w=x;else continue}if(S.push($),k)break}for(let $=0;$<f.length-1&&f[$]===0;$++)S.push(0);return S.reverse()}const u=(f,d)=>d?u(d,f%d):f,h=(f,d)=>f+(d-u(f,d));function p(f,d,y,w){if(!Array.isArray(f))throw new Error("convertRadix2: data should be array");if(d<=0||d>32)throw new Error(`convertRadix2: wrong from=${d}`);if(y<=0||y>32)throw new Error(`convertRadix2: wrong to=${y}`);if(h(d,y)>32)throw new Error(`convertRadix2: carry overflow from=${d} to=${y} carryBits=${h(d,y)}`);let S=0,B=0;const $=2**y-1,k=[];for(const x of f){if(x>=2**d)throw new Error(`convertRadix2: invalid data word=${x} from=${d}`);if(S=S<<d|x,B+d>32)throw new Error(`convertRadix2: carry overflow pos=${B} from=${d}`);for(B+=d;B>=y;B-=y)k.push((S>>B-y&$)>>>0);S&=2**B-1}if(S=S<<y-B&$,!w&&B>=d)throw new Error("Excess padding");if(!w&&S)throw new Error(`Non-zero padding: ${S}`);return w&&B>0&&k.push(S>>>0),k}function m(f){return{encode:d=>{if(!r(d))throw new Error("radix.encode input should be Uint8Array");return c(Array.from(d),2**8,f)},decode:d=>{if(!Array.isArray(d)||d.length&&typeof d[0]!="number")throw new Error("radix.decode input should be array of numbers");return Uint8Array.from(c(d,f,2**8))}}}function P(f,d=!1){if(f<=0||f>32)throw new Error("radix2: bits should be in (0..32]");if(h(8,f)>32||h(f,8)>32)throw new Error("radix2: carry overflow");return{encode:y=>{if(!r(y))throw new Error("radix2.encode input should be Uint8Array");return p(Array.from(y),8,f,!d)},decode:y=>{if(!Array.isArray(y)||y.length&&typeof y[0]!="number")throw new Error("radix2.decode input should be array of numbers");return Uint8Array.from(p(y,f,8,d))}}}function M(f){if(typeof f!="function")throw new Error("unsafeWrapper fn should be function");return function(...d){try{return f.apply(null,d)}catch{}}}function R(f,d){if(typeof d!="function")throw new Error("checksum fn should be function");return{encode(y){if(!r(y))throw new Error("checksum.encode: input should be Uint8Array");const w=d(y).slice(0,f),S=new Uint8Array(y.length+f);return S.set(y),S.set(w,y.length),S},decode(y){if(!r(y))throw new Error("checksum.decode: input should be Uint8Array");const w=y.slice(0,-f),S=d(w).slice(0,f),B=y.slice(-f);for(let $=0;$<f;$++)if(S[$]!==B[$])throw new Error("Invalid checksum");return w}}}t.utils={alphabet:i,chain:n,checksum:R,convertRadix:c,convertRadix2:p,radix:m,radix2:P,join:s,padding:a},t.base16=n(P(4),i("0123456789ABCDEF"),s("")),t.base32=n(P(5),i("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),a(5),s("")),t.base32hex=n(P(5),i("0123456789ABCDEFGHIJKLMNOPQRSTUV"),a(5),s("")),t.base32crockford=n(P(5),i("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),s(""),o(f=>f.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1"))),t.base64=n(P(6),i("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),a(6),s("")),t.base64nopad=n(P(6),i("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),s("")),t.base64url=n(P(6),i("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),a(6),s("")),t.base64urlnopad=n(P(6),i("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),s(""));const E=f=>n(m(58),i(f),s(""));t.base58=E("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),t.base58flickr=E("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),t.base58xrp=E("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");const L=[0,2,3,5,6,7,9,10,11];t.base58xmr={encode(f){let d="";for(let y=0;y<f.length;y+=8){const w=f.subarray(y,y+8);d+=t.base58.encode(w).padStart(L[w.length],"1")}return d},decode(f){let d=[];for(let y=0;y<f.length;y+=11){const w=f.slice(y,y+11),S=L.indexOf(w.length),B=t.base58.decode(w);for(let $=0;$<B.length-S;$++)if(B[$]!==0)throw new Error("base58xmr: wrong padding");d=d.concat(Array.from(B.slice(B.length-S)))}return Uint8Array.from(d)}};const W=f=>n(R(4,d=>f(f(d))),t.base58);t.createBase58check=W,t.base58check=t.createBase58check;const z=n(i("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),s("")),D=[996825010,642813549,513874426,1027748829,705979059];function U(f){const d=f>>25;let y=(f&33554431)<<5;for(let w=0;w<D.length;w++)(d>>w&1)===1&&(y^=D[w]);return y}function Y(f,d,y=1){const w=f.length;let S=1;for(let B=0;B<w;B++){const $=f.charCodeAt(B);if($<33||$>126)throw new Error(`Invalid prefix (${f})`);S=U(S)^$>>5}S=U(S);for(let B=0;B<w;B++)S=U(S)^f.charCodeAt(B)&31;for(let B of d)S=U(S)^B;for(let B=0;B<6;B++)S=U(S);return S^=y,z.encode(p([S%2**30],30,5,!1))}function oe(f){const d=f==="bech32"?1:734539939,y=P(5),w=y.decode,S=y.encode,B=M(w);function $(F,V,K=90){if(typeof F!="string")throw new Error(`bech32.encode prefix should be string, not ${typeof F}`);if(!Array.isArray(V)||V.length&&typeof V[0]!="number")throw new Error(`bech32.encode words should be array of numbers, not ${typeof V}`);if(F.length===0)throw new TypeError(`Invalid prefix length ${F.length}`);const H=F.length+7+V.length;if(K!==!1&&H>K)throw new TypeError(`Length ${H} exceeds limit ${K}`);const O=F.toLowerCase(),j=Y(O,V,d);return`${O}1${z.encode(V)}${j}`}function k(F,V=90){if(typeof F!="string")throw new Error(`bech32.decode input should be string, not ${typeof F}`);if(F.length<8||V!==!1&&F.length>V)throw new TypeError(`Wrong string length: ${F.length} (${F}). Expected (8..${V})`);const K=F.toLowerCase();if(F!==K&&F!==F.toUpperCase())throw new Error("String must be lowercase or uppercase");const H=K.lastIndexOf("1");if(H===0||H===-1)throw new Error('Letter "1" must be present between prefix and data only');const O=K.slice(0,H),j=K.slice(H+1);if(j.length<6)throw new Error("Data must be at least 6 characters long");const re=z.decode(j).slice(0,-6),ie=Y(O,re,d);if(!j.endsWith(ie))throw new Error(`Invalid checksum in ${F}: expected "${ie}"`);return{prefix:O,words:re}}const x=M(k);function b(F){const{prefix:V,words:K}=k(F,!1);return{prefix:V,words:K,bytes:w(K)}}return{encode:$,decode:k,decodeToBytes:b,decodeUnsafe:x,fromWords:w,fromWordsUnsafe:B,toWords:S}}t.bech32=oe("bech32"),t.bech32m=oe("bech32m"),t.utf8={encode:f=>new TextDecoder().decode(f),decode:f=>new TextEncoder().encode(f)},t.hex=n(P(4),i("0123456789abcdef"),s(""),o(f=>{if(typeof f!="string"||f.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof f} with length ${f.length}`);return f.toLowerCase()}));const X={utf8:t.utf8,hex:t.hex,base16:t.base16,base32:t.base32,base64:t.base64,base64url:t.base64url,base58:t.base58,base58xmr:t.base58xmr},ee="Invalid encoding type. Available types: utf8, hex, base16, base32, base64, base64url, base58, base58xmr",se=(f,d)=>{if(typeof f!="string"||!X.hasOwnProperty(f))throw new TypeError(ee);if(!r(d))throw new TypeError("bytesToString() expects Uint8Array");return X[f].encode(d)};t.bytesToString=se,t.str=t.bytesToString;const T=(f,d)=>{if(!X.hasOwnProperty(f))throw new TypeError(ee);if(typeof d!="string")throw new TypeError("stringToBytes() expects string");return X[f].decode(d)};t.stringToBytes=T,t.bytes=t.stringToBytes})(Qx);Object.defineProperty(zr,"__esModule",{value:!0});var ey=zr.mnemonicToSeedSync=zr.mnemonicToSeed=zr.validateMnemonic=zr.entropyToMnemonic=zr.mnemonicToEntropy=zr.generateMnemonic=void 0;/*! scure-bip39 - MIT License (c) 2022 Patricio Palladino, Paul Miller (paulmillr.com) */const ty=dr,ry=Is,z3=Bs,ny=cn,j3=Vi,vo=Qx,G3=t=>t[0]==="";function iy(t){if(typeof t!="string")throw new TypeError(`Invalid mnemonic type: ${typeof t}`);return t.normalize("NFKD")}function Dl(t){const e=iy(t),r=e.split(" ");if(![12,15,18,21,24].includes(r.length))throw new Error("Invalid mnemonic");return{nfkd:e,words:r}}function sy(t){ty.default.bytes(t,16,20,24,28,32)}function W3(t,e=128){if(ty.default.number(e),e%32!==0||e>256)throw new TypeError("Invalid entropy");return cy((0,j3.randomBytes)(e/8),t)}zr.generateMnemonic=W3;const V3=t=>{const e=8-t.length/4;return new Uint8Array([(0,z3.sha256)(t)[0]>>e<<e])};function ay(t){if(!Array.isArray(t)||t.length!==2**11||typeof t[0]!="string")throw new Error("Worlist: expected array of 2048 strings");return t.forEach(e=>{if(typeof e!="string")throw new Error(`Wordlist: non-string element: ${e}`)}),vo.utils.chain(vo.utils.checksum(1,V3),vo.utils.radix2(11,!0),vo.utils.alphabet(t))}function oy(t,e){const{words:r}=Dl(t),n=ay(e).decode(r);return sy(n),n}zr.mnemonicToEntropy=oy;function cy(t,e){return sy(t),ay(e).encode(t).join(G3(e)?"":" ")}zr.entropyToMnemonic=cy;function J3(t,e){try{oy(t,e)}catch{return!1}return!0}zr.validateMnemonic=J3;const fy=t=>iy(`mnemonic${t}`);function Y3(t,e=""){return(0,ry.pbkdf2Async)(ny.sha512,Dl(t).nfkd,fy(e),{c:2048,dkLen:64})}zr.mnemonicToSeed=Y3;function X3(t,e=""){return(0,ry.pbkdf2)(ny.sha512,Dl(t).nfkd,fy(e),{c:2048,dkLen:64})}ey=zr.mnemonicToSeedSync=X3;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Z3=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),Xf=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),Q3=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Q3)throw new Error("Non little-endian hardware is not supported");const e_=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function uy(t){if(!(t instanceof Uint8Array))throw new Error("Uint8Array expected");let e="";for(let r=0;r<t.length;r++)e+=e_[t[r]];return e}function ly(t){if(typeof t!="string")throw new TypeError("hexToBytes: expected string, got "+typeof t);if(t.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const e=new Uint8Array(t.length/2);for(let r=0;r<e.length;r++){const n=r*2,i=t.slice(n,n+2),s=Number.parseInt(i,16);if(Number.isNaN(s)||s<0)throw new Error("Invalid byte sequence");e[r]=s}return e}function t_(t){if(typeof t!="string")throw new TypeError(`utf8ToBytes expected string, got ${typeof t}`);return new TextEncoder().encode(t)}function no(t){if(typeof t=="string"&&(t=t_(t)),!(t instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof t})`);return t}class Ll{clone(){return this._cloneInto()}}function jc(t){const e=n=>t().update(no(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function r_(t){const e=(n,i)=>t(i).update(no(n)).digest(),r=t({});return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=n=>t(n),e}function Ou(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function n_(t){if(typeof t!="boolean")throw new Error(`Expected boolean, not ${t}`)}function dy(t,...e){if(!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new TypeError(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function i_(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Ou(t.outputLen),Ou(t.blockLen)}function s_(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function a_(t,e){dy(t);const r=e.outputLen;if(t.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}const jr={number:Ou,bool:n_,bytes:dy,hash:i_,exists:s_,output:a_},_o=BigInt(2**32-1),Nu=BigInt(32);function hy(t,e=!1){return e?{h:Number(t&_o),l:Number(t>>Nu&_o)}:{h:Number(t>>Nu&_o)|0,l:Number(t&_o)|0}}function o_(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:s,l:a}=hy(t[i],e);[r[i],n[i]]=[s,a]}return[r,n]}const c_=(t,e)=>BigInt(t>>>0)<<Nu|BigInt(e>>>0),f_=(t,e,r)=>t>>>r,u_=(t,e,r)=>t<<32-r|e>>>r,l_=(t,e,r)=>t>>>r|e<<32-r,d_=(t,e,r)=>t<<32-r|e>>>r,h_=(t,e,r)=>t<<64-r|e>>>r-32,p_=(t,e,r)=>t>>>r-32|e<<64-r,x_=(t,e)=>e,y_=(t,e)=>t,g_=(t,e,r)=>t<<r|e>>>32-r,b_=(t,e,r)=>e<<r|t>>>32-r,m_=(t,e,r)=>e<<r-32|t>>>64-r,w_=(t,e,r)=>t<<r-32|e>>>64-r;function v_(t,e,r,n){const i=(e>>>0)+(n>>>0);return{h:t+r+(i/2**32|0)|0,l:i|0}}const __=(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),E_=(t,e,r,n)=>e+r+n+(t/2**32|0)|0,S_=(t,e,r,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0),A_=(t,e,r,n,i)=>e+r+n+i+(t/2**32|0)|0,T_=(t,e,r,n,i)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0)+(i>>>0),R_=(t,e,r,n,i,s)=>e+r+n+i+s+(t/2**32|0)|0,Fe={fromBig:hy,split:o_,toBig:c_,shrSH:f_,shrSL:u_,rotrSH:l_,rotrSL:d_,rotrBH:h_,rotrBL:p_,rotr32H:x_,rotr32L:y_,rotlSH:g_,rotlSL:b_,rotlBH:m_,rotlBL:w_,add:v_,add3L:__,add3H:E_,add4L:S_,add4H:A_,add5H:R_,add5L:T_},[py,xy,yy]=[[],[],[]],P_=BigInt(0),sa=BigInt(1),k_=BigInt(2),M_=BigInt(7),C_=BigInt(256),I_=BigInt(113);for(let t=0,e=sa,r=1,n=0;t<24;t++){[r,n]=[n,(2*r+3*n)%5],py.push(2*(5*n+r)),xy.push((t+1)*(t+2)/2%64);let i=P_;for(let s=0;s<7;s++)e=(e<<sa^(e>>M_)*I_)%C_,e&k_&&(i^=sa<<(sa<<BigInt(s))-sa);yy.push(i)}const[B_,U_]=Fe.split(yy,!0),v0=(t,e,r)=>r>32?Fe.rotlBH(t,e,r):Fe.rotlSH(t,e,r),_0=(t,e,r)=>r>32?Fe.rotlBL(t,e,r):Fe.rotlSL(t,e,r);function O_(t,e=24){const r=new Uint32Array(10);for(let n=24-e;n<24;n++){for(let a=0;a<10;a++)r[a]=t[a]^t[a+10]^t[a+20]^t[a+30]^t[a+40];for(let a=0;a<10;a+=2){const o=(a+8)%10,c=(a+2)%10,u=r[c],h=r[c+1],p=v0(u,h,1)^r[o],m=_0(u,h,1)^r[o+1];for(let P=0;P<50;P+=10)t[a+P]^=p,t[a+P+1]^=m}let i=t[2],s=t[3];for(let a=0;a<24;a++){const o=xy[a],c=v0(i,s,o),u=_0(i,s,o),h=py[a];i=t[h],s=t[h+1],t[h]=c,t[h+1]=u}for(let a=0;a<50;a+=10){for(let o=0;o<10;o++)r[o]=t[a+o];for(let o=0;o<10;o++)t[a+o]^=~r[(o+2)%10]&r[(o+4)%10]}t[0]^=B_[n],t[1]^=U_[n]}r.fill(0)}class Gc extends Ll{constructor(e,r,n,i=!1,s=24){if(super(),this.blockLen=e,this.suffix=r,this.outputLen=n,this.enableXOF=i,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,jr.number(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=Z3(this.state)}keccak(){O_(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){jr.exists(this);const{blockLen:r,state:n}=this;e=no(e);const i=e.length;for(let s=0;s<i;){const a=Math.min(r-this.pos,i-s);for(let o=0;o<a;o++)n[this.pos++]^=e[s++];this.pos===r&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:r,pos:n,blockLen:i}=this;e[n]^=r,r&128&&n===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){jr.exists(this,!1),jr.bytes(e),this.finish();const r=this.state,{blockLen:n}=this;for(let i=0,s=e.length;i<s;){this.posOut>=n&&this.keccak();const a=Math.min(n-this.posOut,s-i);e.set(r.subarray(this.posOut,this.posOut+a),i),this.posOut+=a,i+=a}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return jr.number(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(jr.output(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:r,suffix:n,outputLen:i,rounds:s,enableXOF:a}=this;return e||(e=new Gc(r,n,i,a,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=n,e.outputLen=i,e.enableXOF=a,e.destroyed=this.destroyed,e}}const Ri=(t,e,r)=>jc(()=>new Gc(e,t,r));Ri(6,144,224/8);const Us=Ri(6,136,256/8);Ri(6,104,384/8);Ri(6,72,512/8);Ri(1,144,224/8);Ri(1,136,256/8);Ri(1,104,384/8);Ri(1,72,512/8);const gy=(t,e,r)=>r_((n={})=>new Gc(e,t,n.dkLen===void 0?r:n.dkLen,!0));gy(31,168,128/8);gy(31,136,256/8);class by extends Ll{constructor(e,r){super(),this.finished=!1,this.destroyed=!1,jr.hash(e);const n=no(r);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new TypeError("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(n.length>i?e.create().update(n).digest():n);for(let a=0;a<s.length;a++)s[a]^=54;this.iHash.update(s),this.oHash=e.create();for(let a=0;a<s.length;a++)s[a]^=106;this.oHash.update(s),s.fill(0)}update(e){return jr.exists(this),this.iHash.update(e),this}digestInto(e){jr.exists(this),jr.bytes(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:r,iHash:n,finished:i,destroyed:s,blockLen:a,outputLen:o}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=a,e.outputLen=o,e.oHash=r._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const $l=(t,e,r)=>new by(t,e).update(r).digest();$l.create=(t,e)=>new by(t,e);function N_(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const i=BigInt(32),s=BigInt(4294967295),a=Number(r>>i&s),o=Number(r&s),c=n?4:0,u=n?0:4;t.setUint32(e+c,a,n),t.setUint32(e+u,o,n)}class D_ extends Ll{constructor(e,r,n,i){super(),this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Xf(this.buffer)}update(e){jr.exists(this);const{view:r,buffer:n,blockLen:i}=this;e=no(e);const s=e.length;for(let a=0;a<s;){const o=Math.min(i-this.pos,s-a);if(o===i){const c=Xf(e);for(;i<=s-a;a+=i)this.process(c,a);continue}n.set(e.subarray(a,a+o),this.pos),this.pos+=o,a+=o,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){jr.exists(this),jr.output(e,this),this.finished=!0;const{buffer:r,view:n,blockLen:i,isLE:s}=this;let{pos:a}=this;r[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>i-a&&(this.process(n,0),a=0);for(let c=a;c<i;c++)r[c]=0;N_(n,i-8,BigInt(this.length*8),s),this.process(n,0);const o=Xf(e);this.get().forEach((c,u)=>o.setUint32(4*u,c,s))}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:r,buffer:n,length:i,finished:s,destroyed:a,pos:o}=this;return e.length=i,e.pos=o,e.finished=s,e.destroyed=a,i%r&&e.buffer.set(n),e}}const[L_,$_]=Fe.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),hi=new Uint32Array(80),pi=new Uint32Array(80);class ql extends D_{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:r,Bh:n,Bl:i,Ch:s,Cl:a,Dh:o,Dl:c,Eh:u,El:h,Fh:p,Fl:m,Gh:P,Gl:M,Hh:R,Hl:E}=this;return[e,r,n,i,s,a,o,c,u,h,p,m,P,M,R,E]}set(e,r,n,i,s,a,o,c,u,h,p,m,P,M,R,E){this.Ah=e|0,this.Al=r|0,this.Bh=n|0,this.Bl=i|0,this.Ch=s|0,this.Cl=a|0,this.Dh=o|0,this.Dl=c|0,this.Eh=u|0,this.El=h|0,this.Fh=p|0,this.Fl=m|0,this.Gh=P|0,this.Gl=M|0,this.Hh=R|0,this.Hl=E|0}process(e,r){for(let z=0;z<16;z++,r+=4)hi[z]=e.getUint32(r),pi[z]=e.getUint32(r+=4);for(let z=16;z<80;z++){const D=hi[z-15]|0,U=pi[z-15]|0,Y=Fe.rotrSH(D,U,1)^Fe.rotrSH(D,U,8)^Fe.shrSH(D,U,7),oe=Fe.rotrSL(D,U,1)^Fe.rotrSL(D,U,8)^Fe.shrSL(D,U,7),X=hi[z-2]|0,ee=pi[z-2]|0,se=Fe.rotrSH(X,ee,19)^Fe.rotrBH(X,ee,61)^Fe.shrSH(X,ee,6),T=Fe.rotrSL(X,ee,19)^Fe.rotrBL(X,ee,61)^Fe.shrSL(X,ee,6),f=Fe.add4L(oe,T,pi[z-7],pi[z-16]),d=Fe.add4H(f,Y,se,hi[z-7],hi[z-16]);hi[z]=d|0,pi[z]=f|0}let{Ah:n,Al:i,Bh:s,Bl:a,Ch:o,Cl:c,Dh:u,Dl:h,Eh:p,El:m,Fh:P,Fl:M,Gh:R,Gl:E,Hh:L,Hl:W}=this;for(let z=0;z<80;z++){const D=Fe.rotrSH(p,m,14)^Fe.rotrSH(p,m,18)^Fe.rotrBH(p,m,41),U=Fe.rotrSL(p,m,14)^Fe.rotrSL(p,m,18)^Fe.rotrBL(p,m,41),Y=p&P^~p&R,oe=m&M^~m&E,X=Fe.add5L(W,U,oe,$_[z],pi[z]),ee=Fe.add5H(X,L,D,Y,L_[z],hi[z]),se=X|0,T=Fe.rotrSH(n,i,28)^Fe.rotrBH(n,i,34)^Fe.rotrBH(n,i,39),f=Fe.rotrSL(n,i,28)^Fe.rotrBL(n,i,34)^Fe.rotrBL(n,i,39),d=n&s^n&o^s&o,y=i&a^i&c^a&c;L=R|0,W=E|0,R=P|0,E=M|0,P=p|0,M=m|0,{h:p,l:m}=Fe.add(u|0,h|0,ee|0,se|0),u=o|0,h=c|0,o=s|0,c=a|0,s=n|0,a=i|0;const w=Fe.add3L(se,f,y);n=Fe.add3H(w,ee,T,d),i=w|0}({h:n,l:i}=Fe.add(this.Ah|0,this.Al|0,n|0,i|0)),{h:s,l:a}=Fe.add(this.Bh|0,this.Bl|0,s|0,a|0),{h:o,l:c}=Fe.add(this.Ch|0,this.Cl|0,o|0,c|0),{h:u,l:h}=Fe.add(this.Dh|0,this.Dl|0,u|0,h|0),{h:p,l:m}=Fe.add(this.Eh|0,this.El|0,p|0,m|0),{h:P,l:M}=Fe.add(this.Fh|0,this.Fl|0,P|0,M|0),{h:R,l:E}=Fe.add(this.Gh|0,this.Gl|0,R|0,E|0),{h:L,l:W}=Fe.add(this.Hh|0,this.Hl|0,L|0,W|0),this.set(n,i,s,a,o,c,u,h,p,m,P,M,R,E,L,W)}roundClean(){hi.fill(0),pi.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}class q_ extends ql{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}}class F_ extends ql{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}}const my=jc(()=>new ql);jc(()=>new q_);jc(()=>new F_);var Fl={exports:{}},wy=function(e,r){return function(){for(var i=new Array(arguments.length),s=0;s<i.length;s++)i[s]=arguments[s];return e.apply(r,i)}},H_=wy,Hl=Object.prototype.toString,Kl=function(t){return function(e){var r=Hl.call(e);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())}}(Object.create(null));function Ji(t){return t=t.toLowerCase(),function(r){return Kl(r)===t}}function zl(t){return Array.isArray(t)}function uc(t){return typeof t>"u"}function K_(t){return t!==null&&!uc(t)&&t.constructor!==null&&!uc(t.constructor)&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}var vy=Ji("ArrayBuffer");function z_(t){var e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&vy(t.buffer),e}function j_(t){return typeof t=="string"}function G_(t){return typeof t=="number"}function _y(t){return t!==null&&typeof t=="object"}function Do(t){if(Kl(t)!=="object")return!1;var e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}var W_=Ji("Date"),V_=Ji("File"),J_=Ji("Blob"),Y_=Ji("FileList");function jl(t){return Hl.call(t)==="[object Function]"}function X_(t){return _y(t)&&jl(t.pipe)}function Z_(t){var e="[object FormData]";return t&&(typeof FormData=="function"&&t instanceof FormData||Hl.call(t)===e||jl(t.toString)&&t.toString()===e)}var Q_=Ji("URLSearchParams");function e5(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function t5(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function Gl(t,e){if(!(t===null||typeof t>"u"))if(typeof t!="object"&&(t=[t]),zl(t))for(var r=0,n=t.length;r<n;r++)e.call(null,t[r],r,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}function Du(){var t={};function e(i,s){Do(t[s])&&Do(i)?t[s]=Du(t[s],i):Do(i)?t[s]=Du({},i):zl(i)?t[s]=i.slice():t[s]=i}for(var r=0,n=arguments.length;r<n;r++)Gl(arguments[r],e);return t}function r5(t,e,r){return Gl(e,function(i,s){r&&typeof i=="function"?t[s]=H_(i,r):t[s]=i}),t}function n5(t){return t.charCodeAt(0)===65279&&(t=t.slice(1)),t}function i5(t,e,r,n){t.prototype=Object.create(e.prototype,n),t.prototype.constructor=t,r&&Object.assign(t.prototype,r)}function s5(t,e,r){var n,i,s,a={};e=e||{};do{for(n=Object.getOwnPropertyNames(t),i=n.length;i-- >0;)s=n[i],a[s]||(e[s]=t[s],a[s]=!0);t=Object.getPrototypeOf(t)}while(t&&(!r||r(t,e))&&t!==Object.prototype);return e}function a5(t,e,r){t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=e.length;var n=t.indexOf(e,r);return n!==-1&&n===r}function o5(t){if(!t)return null;var e=t.length;if(uc(e))return null;for(var r=new Array(e);e-- >0;)r[e]=t[e];return r}var c5=function(t){return function(e){return t&&e instanceof t}}(typeof Uint8Array<"u"&&Object.getPrototypeOf(Uint8Array)),mr={isArray:zl,isArrayBuffer:vy,isBuffer:K_,isFormData:Z_,isArrayBufferView:z_,isString:j_,isNumber:G_,isObject:_y,isPlainObject:Do,isUndefined:uc,isDate:W_,isFile:V_,isBlob:J_,isFunction:jl,isStream:X_,isURLSearchParams:Q_,isStandardBrowserEnv:t5,forEach:Gl,merge:Du,extend:r5,trim:e5,stripBOM:n5,inherits:i5,toFlatObject:s5,kindOf:Kl,kindOfTest:Ji,endsWith:a5,toArray:o5,isTypedArray:c5,isFileList:Y_},os=mr;function E0(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var Ey=function(e,r,n){if(!r)return e;var i;if(n)i=n(r);else if(os.isURLSearchParams(r))i=r.toString();else{var s=[];os.forEach(r,function(c,u){c===null||typeof c>"u"||(os.isArray(c)?u=u+"[]":c=[c],os.forEach(c,function(p){os.isDate(p)?p=p.toISOString():os.isObject(p)&&(p=JSON.stringify(p)),s.push(E0(u)+"="+E0(p))}))}),i=s.join("&")}if(i){var a=e.indexOf("#");a!==-1&&(e=e.slice(0,a)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e},f5=mr;function Wc(){this.handlers=[]}Wc.prototype.use=function(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};Wc.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};Wc.prototype.forEach=function(e){f5.forEach(this.handlers,function(n){n!==null&&e(n)})};var u5=Wc,l5=mr,d5=function(e,r){l5.forEach(e,function(i,s){s!==r&&s.toUpperCase()===r.toUpperCase()&&(e[r]=i,delete e[s])})},Sy=mr;function Os(t,e,r,n,i){Error.call(this),this.message=t,this.name="AxiosError",e&&(this.code=e),r&&(this.config=r),n&&(this.request=n),i&&(this.response=i)}Sy.inherits(Os,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var Ay=Os.prototype,Ty={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach(function(t){Ty[t]={value:t}});Object.defineProperties(Os,Ty);Object.defineProperty(Ay,"isAxiosError",{value:!0});Os.from=function(t,e,r,n,i,s){var a=Object.create(Ay);return Sy.toFlatObject(t,a,function(c){return c!==Error.prototype}),Os.call(a,t.message,e,r,n,i),a.name=t.name,s&&Object.assign(a,s),a};var Ws=Os,Ry={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},_n=mr;function h5(t,e){e=e||new FormData;var r=[];function n(s){return s===null?"":_n.isDate(s)?s.toISOString():_n.isArrayBuffer(s)||_n.isTypedArray(s)?typeof Blob=="function"?new Blob([s]):ue.from(s):s}function i(s,a){if(_n.isPlainObject(s)||_n.isArray(s)){if(r.indexOf(s)!==-1)throw Error("Circular reference detected in "+a);r.push(s),_n.forEach(s,function(c,u){if(!_n.isUndefined(c)){var h=a?a+"."+u:u,p;if(c&&!a&&typeof c=="object"){if(_n.endsWith(u,"{}"))c=JSON.stringify(c);else if(_n.endsWith(u,"[]")&&(p=_n.toArray(c))){p.forEach(function(m){!_n.isUndefined(m)&&e.append(h,n(m))});return}}i(c,h)}}),r.pop()}else e.append(a,n(s))}return i(t),e}var Py=h5,Zf,S0;function p5(){if(S0)return Zf;S0=1;var t=Ws;return Zf=function(r,n,i){var s=i.config.validateStatus;!i.status||!s||s(i.status)?r(i):n(new t("Request failed with status code "+i.status,[t.ERR_BAD_REQUEST,t.ERR_BAD_RESPONSE][Math.floor(i.status/100)-4],i.config,i.request,i))},Zf}var Qf,A0;function x5(){if(A0)return Qf;A0=1;var t=mr;return Qf=t.isStandardBrowserEnv()?function(){return{write:function(n,i,s,a,o,c){var u=[];u.push(n+"="+encodeURIComponent(i)),t.isNumber(s)&&u.push("expires="+new Date(s).toGMTString()),t.isString(a)&&u.push("path="+a),t.isString(o)&&u.push("domain="+o),c===!0&&u.push("secure"),document.cookie=u.join("; ")},read:function(n){var i=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return i?decodeURIComponent(i[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),Qf}var y5=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)},g5=function(e,r){return r?e.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):e},b5=y5,m5=g5,ky=function(e,r){return e&&!b5(r)?m5(e,r):r},eu,T0;function w5(){if(T0)return eu;T0=1;var t=mr,e=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return eu=function(n){var i={},s,a,o;return n&&t.forEach(n.split(`
`),function(u){if(o=u.indexOf(":"),s=t.trim(u.substr(0,o)).toLowerCase(),a=t.trim(u.substr(o+1)),s){if(i[s]&&e.indexOf(s)>=0)return;s==="set-cookie"?i[s]=(i[s]?i[s]:[]).concat([a]):i[s]=i[s]?i[s]+", "+a:a}}),i},eu}var tu,R0;function v5(){if(R0)return tu;R0=1;var t=mr;return tu=t.isStandardBrowserEnv()?function(){var r=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a"),i;function s(a){var o=a;return r&&(n.setAttribute("href",o),o=n.href),n.setAttribute("href",o),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return i=s(window.location.href),function(o){var c=t.isString(o)?s(o):o;return c.protocol===i.protocol&&c.host===i.host}}():function(){return function(){return!0}}(),tu}var ru,P0;function Vc(){if(P0)return ru;P0=1;var t=Ws,e=mr;function r(n){t.call(this,n??"canceled",t.ERR_CANCELED),this.name="CanceledError"}return e.inherits(r,t,{__CANCEL__:!0}),ru=r,ru}var nu,k0;function _5(){return k0||(k0=1,nu=function(e){var r=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return r&&r[1]||""}),nu}var iu,M0;function C0(){if(M0)return iu;M0=1;var t=mr,e=p5(),r=x5(),n=Ey,i=ky,s=w5(),a=v5(),o=Ry,c=Ws,u=Vc(),h=_5();return iu=function(m){return new Promise(function(M,R){var E=m.data,L=m.headers,W=m.responseType,z;function D(){m.cancelToken&&m.cancelToken.unsubscribe(z),m.signal&&m.signal.removeEventListener("abort",z)}t.isFormData(E)&&t.isStandardBrowserEnv()&&delete L["Content-Type"];var U=new XMLHttpRequest;if(m.auth){var Y=m.auth.username||"",oe=m.auth.password?unescape(encodeURIComponent(m.auth.password)):"";L.Authorization="Basic "+btoa(Y+":"+oe)}var X=i(m.baseURL,m.url);U.open(m.method.toUpperCase(),n(X,m.params,m.paramsSerializer),!0),U.timeout=m.timeout;function ee(){if(U){var f="getAllResponseHeaders"in U?s(U.getAllResponseHeaders()):null,d=!W||W==="text"||W==="json"?U.responseText:U.response,y={data:d,status:U.status,statusText:U.statusText,headers:f,config:m,request:U};e(function(S){M(S),D()},function(S){R(S),D()},y),U=null}}if("onloadend"in U?U.onloadend=ee:U.onreadystatechange=function(){!U||U.readyState!==4||U.status===0&&!(U.responseURL&&U.responseURL.indexOf("file:")===0)||setTimeout(ee)},U.onabort=function(){U&&(R(new c("Request aborted",c.ECONNABORTED,m,U)),U=null)},U.onerror=function(){R(new c("Network Error",c.ERR_NETWORK,m,U,U)),U=null},U.ontimeout=function(){var d=m.timeout?"timeout of "+m.timeout+"ms exceeded":"timeout exceeded",y=m.transitional||o;m.timeoutErrorMessage&&(d=m.timeoutErrorMessage),R(new c(d,y.clarifyTimeoutError?c.ETIMEDOUT:c.ECONNABORTED,m,U)),U=null},t.isStandardBrowserEnv()){var se=(m.withCredentials||a(X))&&m.xsrfCookieName?r.read(m.xsrfCookieName):void 0;se&&(L[m.xsrfHeaderName]=se)}"setRequestHeader"in U&&t.forEach(L,function(d,y){typeof E>"u"&&y.toLowerCase()==="content-type"?delete L[y]:U.setRequestHeader(y,d)}),t.isUndefined(m.withCredentials)||(U.withCredentials=!!m.withCredentials),W&&W!=="json"&&(U.responseType=m.responseType),typeof m.onDownloadProgress=="function"&&U.addEventListener("progress",m.onDownloadProgress),typeof m.onUploadProgress=="function"&&U.upload&&U.upload.addEventListener("progress",m.onUploadProgress),(m.cancelToken||m.signal)&&(z=function(f){U&&(R(!f||f&&f.type?new u:f),U.abort(),U=null)},m.cancelToken&&m.cancelToken.subscribe(z),m.signal&&(m.signal.aborted?z():m.signal.addEventListener("abort",z))),E||(E=null);var T=h(X);if(T&&["http","https","file"].indexOf(T)===-1){R(new c("Unsupported protocol "+T+":",c.ERR_BAD_REQUEST,m));return}U.send(E)})},iu}var su,I0;function E5(){return I0||(I0=1,su=null),su}var ur=mr,B0=d5,U0=Ws,S5=Ry,A5=Py,T5={"Content-Type":"application/x-www-form-urlencoded"};function O0(t,e){!ur.isUndefined(t)&&ur.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}function R5(){var t;return(typeof XMLHttpRequest<"u"||typeof Rt<"u"&&Object.prototype.toString.call(Rt)==="[object process]")&&(t=C0()),t}function P5(t,e,r){if(ur.isString(t))try{return(e||JSON.parse)(t),ur.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}var Jc={transitional:S5,adapter:R5(),transformRequest:[function(e,r){if(B0(r,"Accept"),B0(r,"Content-Type"),ur.isFormData(e)||ur.isArrayBuffer(e)||ur.isBuffer(e)||ur.isStream(e)||ur.isFile(e)||ur.isBlob(e))return e;if(ur.isArrayBufferView(e))return e.buffer;if(ur.isURLSearchParams(e))return O0(r,"application/x-www-form-urlencoded;charset=utf-8"),e.toString();var n=ur.isObject(e),i=r&&r["Content-Type"],s;if((s=ur.isFileList(e))||n&&i==="multipart/form-data"){var a=this.env&&this.env.FormData;return A5(s?{"files[]":e}:e,a&&new a)}else if(n||i==="application/json")return O0(r,"application/json"),P5(e);return e}],transformResponse:[function(e){var r=this.transitional||Jc.transitional,n=r&&r.silentJSONParsing,i=r&&r.forcedJSONParsing,s=!n&&this.responseType==="json";if(s||i&&ur.isString(e)&&e.length)try{return JSON.parse(e)}catch(a){if(s)throw a.name==="SyntaxError"?U0.from(a,U0.ERR_BAD_RESPONSE,this,null,this.response):a}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:E5()},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};ur.forEach(["delete","get","head"],function(e){Jc.headers[e]={}});ur.forEach(["post","put","patch"],function(e){Jc.headers[e]=ur.merge(T5)});var Wl=Jc,k5=mr,M5=Wl,C5=function(e,r,n){var i=this||M5;return k5.forEach(n,function(a){e=a.call(i,e,r)}),e},au,N0;function My(){return N0||(N0=1,au=function(e){return!!(e&&e.__CANCEL__)}),au}var D0=mr,ou=C5,I5=My(),B5=Wl,U5=Vc();function cu(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new U5}var O5=function(e){cu(e),e.headers=e.headers||{},e.data=ou.call(e,e.data,e.headers,e.transformRequest),e.headers=D0.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),D0.forEach(["delete","get","head","post","put","patch","common"],function(i){delete e.headers[i]});var r=e.adapter||B5.adapter;return r(e).then(function(i){return cu(e),i.data=ou.call(e,i.data,i.headers,e.transformResponse),i},function(i){return I5(i)||(cu(e),i&&i.response&&(i.response.data=ou.call(e,i.response.data,i.response.headers,e.transformResponse))),Promise.reject(i)})},$r=mr,Cy=function(e,r){r=r||{};var n={};function i(h,p){return $r.isPlainObject(h)&&$r.isPlainObject(p)?$r.merge(h,p):$r.isPlainObject(p)?$r.merge({},p):$r.isArray(p)?p.slice():p}function s(h){if($r.isUndefined(r[h])){if(!$r.isUndefined(e[h]))return i(void 0,e[h])}else return i(e[h],r[h])}function a(h){if(!$r.isUndefined(r[h]))return i(void 0,r[h])}function o(h){if($r.isUndefined(r[h])){if(!$r.isUndefined(e[h]))return i(void 0,e[h])}else return i(void 0,r[h])}function c(h){if(h in r)return i(e[h],r[h]);if(h in e)return i(void 0,e[h])}var u={url:a,method:a,data:a,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:c};return $r.forEach(Object.keys(e).concat(Object.keys(r)),function(p){var m=u[p]||s,P=m(p);$r.isUndefined(P)&&m!==c||(n[p]=P)}),n},fu,L0;function Iy(){return L0||(L0=1,fu={version:"0.27.2"}),fu}var N5=Iy().version,yi=Ws,Vl={};["object","boolean","number","function","string","symbol"].forEach(function(t,e){Vl[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});var $0={};Vl.transitional=function(e,r,n){function i(s,a){return"[Axios v"+N5+"] Transitional option '"+s+"'"+a+(n?". "+n:"")}return function(s,a,o){if(e===!1)throw new yi(i(a," has been removed"+(r?" in "+r:"")),yi.ERR_DEPRECATED);return r&&!$0[a]&&($0[a]=!0,console.warn(i(a," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(s,a,o):!0}};function D5(t,e,r){if(typeof t!="object")throw new yi("options must be an object",yi.ERR_BAD_OPTION_VALUE);for(var n=Object.keys(t),i=n.length;i-- >0;){var s=n[i],a=e[s];if(a){var o=t[s],c=o===void 0||a(o,s,t);if(c!==!0)throw new yi("option "+s+" must be "+c,yi.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new yi("Unknown option "+s,yi.ERR_BAD_OPTION)}}var L5={assertOptions:D5,validators:Vl},By=mr,$5=Ey,q0=u5,F0=O5,Yc=Cy,q5=ky,Uy=L5,cs=Uy.validators;function Ns(t){this.defaults=t,this.interceptors={request:new q0,response:new q0}}Ns.prototype.request=function(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=Yc(this.defaults,r),r.method?r.method=r.method.toLowerCase():this.defaults.method?r.method=this.defaults.method.toLowerCase():r.method="get";var n=r.transitional;n!==void 0&&Uy.assertOptions(n,{silentJSONParsing:cs.transitional(cs.boolean),forcedJSONParsing:cs.transitional(cs.boolean),clarifyTimeoutError:cs.transitional(cs.boolean)},!1);var i=[],s=!0;this.interceptors.request.forEach(function(P){typeof P.runWhen=="function"&&P.runWhen(r)===!1||(s=s&&P.synchronous,i.unshift(P.fulfilled,P.rejected))});var a=[];this.interceptors.response.forEach(function(P){a.push(P.fulfilled,P.rejected)});var o;if(!s){var c=[F0,void 0];for(Array.prototype.unshift.apply(c,i),c=c.concat(a),o=Promise.resolve(r);c.length;)o=o.then(c.shift(),c.shift());return o}for(var u=r;i.length;){var h=i.shift(),p=i.shift();try{u=h(u)}catch(m){p(m);break}}try{o=F0(u)}catch(m){return Promise.reject(m)}for(;a.length;)o=o.then(a.shift(),a.shift());return o};Ns.prototype.getUri=function(e){e=Yc(this.defaults,e);var r=q5(e.baseURL,e.url);return $5(r,e.params,e.paramsSerializer)};By.forEach(["delete","get","head","options"],function(e){Ns.prototype[e]=function(r,n){return this.request(Yc(n||{},{method:e,url:r,data:(n||{}).data}))}});By.forEach(["post","put","patch"],function(e){function r(n){return function(s,a,o){return this.request(Yc(o||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:s,data:a}))}}Ns.prototype[e]=r(),Ns.prototype[e+"Form"]=r(!0)});var F5=Ns,uu,H0;function H5(){if(H0)return uu;H0=1;var t=Vc();function e(r){if(typeof r!="function")throw new TypeError("executor must be a function.");var n;this.promise=new Promise(function(a){n=a});var i=this;this.promise.then(function(s){if(i._listeners){var a,o=i._listeners.length;for(a=0;a<o;a++)i._listeners[a](s);i._listeners=null}}),this.promise.then=function(s){var a,o=new Promise(function(c){i.subscribe(c),a=c}).then(s);return o.cancel=function(){i.unsubscribe(a)},o},r(function(a){i.reason||(i.reason=new t(a),n(i.reason))})}return e.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},e.prototype.subscribe=function(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]},e.prototype.unsubscribe=function(n){if(this._listeners){var i=this._listeners.indexOf(n);i!==-1&&this._listeners.splice(i,1)}},e.source=function(){var n,i=new e(function(a){n=a});return{token:i,cancel:n}},uu=e,uu}var lu,K0;function K5(){return K0||(K0=1,lu=function(e){return function(n){return e.apply(null,n)}}),lu}var du,z0;function z5(){if(z0)return du;z0=1;var t=mr;return du=function(r){return t.isObject(r)&&r.isAxiosError===!0},du}var j0=mr,j5=wy,Lo=F5,G5=Cy,W5=Wl;function Oy(t){var e=new Lo(t),r=j5(Lo.prototype.request,e);return j0.extend(r,Lo.prototype,e),j0.extend(r,e),r.create=function(i){return Oy(G5(t,i))},r}var Or=Oy(W5);Or.Axios=Lo;Or.CanceledError=Vc();Or.CancelToken=H5();Or.isCancel=My();Or.VERSION=Iy().version;Or.toFormData=Py;Or.AxiosError=Ws;Or.Cancel=Or.CanceledError;Or.all=function(e){return Promise.all(e)};Or.spread=K5();Or.isAxiosError=z5();Fl.exports=Or;Fl.exports.default=Or;var V5=Fl.exports,J5=V5;const Ia=pn(J5);var Y5=typeof self=="object"?self.FormData:window.FormData;const Ny=pn(Y5);var Dy=Object.defineProperty,X5=Object.getOwnPropertyDescriptor,Xc=(t,e)=>{for(var r in e)Dy(t,r,{get:e[r],enumerable:!0})},Pt=(t,e,r,n)=>{for(var i=n>1?void 0:n?X5(e,r):e,s=t.length-1,a;s>=0;s--)(a=t[s])&&(i=(n?a(e,r,i):a(i))||i);return n&&i&&Dy(e,r,i),i},Z5=/^m(\/[0-9]+')+$/,Ly=t=>t.replace("'",""),Q5="ed25519 seed",e8=2147483648,t8=t=>{const r=$l.create(my,Q5).update(ly(t)).digest(),n=r.slice(0,32),i=r.slice(32);return{key:n,chainCode:i}},r8=({key:t,chainCode:e},r)=>{const n=new ArrayBuffer(4);new DataView(n).setUint32(0,r);const i=new Uint8Array(n),s=new Uint8Array([0]),a=new Uint8Array([...s,...t,...i]),o=$l.create(my,e).update(a).digest(),c=o.slice(0,32),u=o.slice(32);return{key:c,chainCode:u}},n8=t=>Z5.test(t)?!t.split("/").slice(1).map(Ly).some(Number.isNaN):!1,i8=(t,e,r=e8)=>{if(!n8(t))throw new Error("Invalid derivation path");const{key:n,chainCode:i}=t8(e);return t.split("/").slice(1).map(Ly).map(a=>parseInt(a,10)).reduce((a,o)=>r8(a,o+r),{key:n,chainCode:i})};async function s8(t){return new Promise(e=>{setTimeout(e,t)})}var G0="/v1";function a8(t){let e=`${t}`;return e.endsWith("/")&&(e=e.substring(0,e.length-1)),e.endsWith(G0)||(e=`${e}${G0}`),e}var $y=2e5,qy=20,o8=20,c8="0x1::aptos_coin::AptosCoin";function Zc(t){let e,r,n;return typeof t=="object"?(e=t.hashFunction,r=t.ttlMs,n=t.tags):e=t,(i,s,a)=>{if(a.value!=null)a.value=W0(a.value,e,r,n);else if(a.get!=null)a.get=W0(a.get,e,r,n);else throw new Error("Only put a Memoize() decorator on a method or get accessor.")}}function f8(t,e){return Zc({ttlMs:t,hashFunction:e})}var $o=new Map;function u8(t){const e=new Set;for(const r of t){const n=$o.get(r);if(n)for(const i of n)e.has(i)||(i.clear(),e.add(i))}return e.size}function W0(t,e,r=0,n){const i=Symbol("__memoized_map__");return function(...s){let a;const o=this;o.hasOwnProperty(i)||Object.defineProperty(o,i,{configurable:!1,enumerable:!1,writable:!1,value:new Map});const c=o[i];if(Array.isArray(n))for(const u of n)$o.has(u)?$o.get(u).push(c):$o.set(u,[c]);if(e||s.length>0||r>0){let u;e===!0?u=s.map(m=>m.toString()).join("!"):e?u=e.apply(o,s):u=s[0];const h=`${u}__timestamp`;let p=!1;if(r>0)if(!c.has(h))p=!0;else{const m=c.get(h);p=Date.now()-m>r}c.has(u)&&!p?a=c.get(u):(a=t.apply(o,s),c.set(u,a),r>0&&c.set(h,Date.now()))}else{const u=o;c.has(u)?a=c.get(u):(a=t.apply(o,s),c.set(u,a))}return a}}var He=class{static fromBuffer(t){return He.fromUint8Array(t)}static fromUint8Array(t){return new He(uy(t))}static ensure(t){return typeof t=="string"?new He(t):t}constructor(t){t.startsWith("0x")?this.hexString=t:this.hexString=`0x${t}`}hex(){return this.hexString}noPrefix(){return this.hexString.slice(2)}toString(){return this.hex()}toShortString(){return`0x${this.hexString.replace(/^0x0*/,"")}`}toUint8Array(){return Uint8Array.from(ly(this.noPrefix()))}};async function V0(t,e,r,n){var i;const s=[];let a;for(;;){const o=await t(He.ensure(e).hex(),(i=n==null?void 0:n.ledgerVersion)==null?void 0:i.toString(),a,r);if(a=o.__headers["x-aptos-cursor"],delete o.__headers,s.push(...o),a==null)break}return s}var l8={mainnet:"https://indexer.mainnet.aptoslabs.com/v1/graphql",testnet:"https://indexer-testnet.staging.gcp.aptosdev.com/v1/graphql",devnet:"https://indexer-devnet.staging.gcp.aptosdev.com/v1/graphql"},d8={mainnet:"https://fullnode.mainnet.aptoslabs.com/v1",testnet:"https://fullnode.testnet.aptoslabs.com/v1",devnet:"https://fullnode.devnet.aptoslabs.com/v1"},or={};Xc(or,{AccountAddress:()=>Jt,AccountAuthenticator:()=>Ua,AccountAuthenticatorEd25519:()=>Xl,AccountAuthenticatorMultiEd25519:()=>Zl,ArgumentABI:()=>fo,AuthenticationKey:()=>Ki,ChainId:()=>of,ChangeSet:()=>P8,Ed25519PublicKey:()=>on,Ed25519Signature:()=>Nn,EntryFunction:()=>Ui,EntryFunctionABI:()=>Ds,Identifier:()=>kr,Module:()=>jy,ModuleId:()=>Hi,MultiAgentRawTransaction:()=>nf,MultiEd25519PublicKey:()=>io,MultiEd25519Signature:()=>Qc,MultiSig:()=>td,MultiSigTransactionPayload:()=>ed,RawTransaction:()=>Qs,RawTransactionWithData:()=>Gy,RotationProofChallenge:()=>M8,Script:()=>rf,ScriptABI:()=>gf,SignedTransaction:()=>ao,StructTag:()=>Fi,Transaction:()=>Wy,TransactionArgument:()=>kn,TransactionArgumentAddress:()=>pf,TransactionArgumentBool:()=>yf,TransactionArgumentU128:()=>df,TransactionArgumentU16:()=>ff,TransactionArgumentU256:()=>hf,TransactionArgumentU32:()=>uf,TransactionArgumentU64:()=>lf,TransactionArgumentU8:()=>cf,TransactionArgumentU8Vector:()=>xf,TransactionAuthenticator:()=>so,TransactionAuthenticatorEd25519:()=>ef,TransactionAuthenticatorMultiAgent:()=>Yl,TransactionAuthenticatorMultiEd25519:()=>tf,TransactionPayload:()=>oo,TransactionPayloadEntryFunction:()=>af,TransactionPayloadMultisig:()=>rd,TransactionPayloadScript:()=>sf,TransactionScriptABI:()=>bf,TypeArgumentABI:()=>co,TypeTag:()=>gr,TypeTagAddress:()=>Si,TypeTagBool:()=>Xi,TypeTagParser:()=>Zs,TypeTagParserError:()=>zy,TypeTagSigner:()=>Ql,TypeTagStruct:()=>es,TypeTagU128:()=>Qi,TypeTagU16:()=>Vs,TypeTagU256:()=>Ys,TypeTagU32:()=>Js,TypeTagU64:()=>Zi,TypeTagU8:()=>ni,TypeTagVector:()=>Xs,UserTransaction:()=>nd,WriteSet:()=>k8,stringStructTag:()=>Ky});var h8={};Xc(h8,{Deserializer:()=>Jl,Serializer:()=>nr,bcsSerializeBool:()=>_8,bcsSerializeBytes:()=>hs,bcsSerializeFixedBytes:()=>S8,bcsSerializeStr:()=>E8,bcsSerializeU128:()=>v8,bcsSerializeU16:()=>m8,bcsSerializeU32:()=>w8,bcsSerializeU8:()=>Lu,bcsSerializeUint64:()=>b8,bcsToBytes:()=>Pi,deserializeVector:()=>hn,serializeVector:()=>Gr,serializeVectorWithFunc:()=>g8});var p8=2**8-1,x8=2**16-1,Ba=2**32-1,Fy=BigInt(2**64)-BigInt(1),Hy=BigInt(2**128)-BigInt(1),y8=BigInt(2**256)-BigInt(1),nr=class{constructor(){this.buffer=new ArrayBuffer(64),this.offset=0}ensureBufferWillHandleSize(t){for(;this.buffer.byteLength<this.offset+t;){const e=new ArrayBuffer(this.buffer.byteLength*2);new Uint8Array(e).set(new Uint8Array(this.buffer)),this.buffer=e}}serialize(t){this.ensureBufferWillHandleSize(t.length),new Uint8Array(this.buffer,this.offset).set(t),this.offset+=t.length}serializeWithFunction(t,e,r){this.ensureBufferWillHandleSize(e);const n=new DataView(this.buffer,this.offset);t.apply(n,[0,r,!0]),this.offset+=e}serializeStr(t){const e=new TextEncoder;this.serializeBytes(e.encode(t))}serializeBytes(t){this.serializeU32AsUleb128(t.length),this.serialize(t)}serializeFixedBytes(t){this.serialize(t)}serializeBool(t){if(typeof t!="boolean")throw new Error("Value needs to be a boolean");const e=t?1:0;this.serialize(new Uint8Array([e]))}serializeU8(t){this.serialize(new Uint8Array([t]))}serializeU16(t){this.serializeWithFunction(DataView.prototype.setUint16,2,t)}serializeU32(t){this.serializeWithFunction(DataView.prototype.setUint32,4,t)}serializeU64(t){const e=BigInt(t.toString())&BigInt(Ba),r=BigInt(t.toString())>>BigInt(32);this.serializeU32(Number(e)),this.serializeU32(Number(r))}serializeU128(t){const e=BigInt(t.toString())&Fy,r=BigInt(t.toString())>>BigInt(64);this.serializeU64(e),this.serializeU64(r)}serializeU256(t){const e=BigInt(t.toString())&Hy,r=BigInt(t.toString())>>BigInt(128);this.serializeU128(e),this.serializeU128(r)}serializeU32AsUleb128(t){let e=t;const r=[];for(;e>>>7;)r.push(e&127|128),e>>>=7;r.push(e),this.serialize(new Uint8Array(r))}getBytes(){return new Uint8Array(this.buffer).slice(0,this.offset)}};Pt([Yi(0,p8)],nr.prototype,"serializeU8",1);Pt([Yi(0,x8)],nr.prototype,"serializeU16",1);Pt([Yi(0,Ba)],nr.prototype,"serializeU32",1);Pt([Yi(BigInt(0),Fy)],nr.prototype,"serializeU64",1);Pt([Yi(BigInt(0),Hy)],nr.prototype,"serializeU128",1);Pt([Yi(BigInt(0),y8)],nr.prototype,"serializeU256",1);Pt([Yi(0,Ba)],nr.prototype,"serializeU32AsUleb128",1);function Yi(t,e,r){return(n,i,s)=>{const a=s.value;return s.value=function(c){const u=BigInt(c.toString());if(u>BigInt(e.toString())||u<BigInt(t.toString()))throw new Error(r||"Value is out of range");a.apply(this,[c])},s}}var Jl=class{constructor(t){this.buffer=new ArrayBuffer(t.length),new Uint8Array(this.buffer).set(t,0),this.offset=0}read(t){if(this.offset+t>this.buffer.byteLength)throw new Error("Reached to the end of buffer");const e=this.buffer.slice(this.offset,this.offset+t);return this.offset+=t,e}deserializeStr(){const t=this.deserializeBytes();return new TextDecoder().decode(t)}deserializeBytes(){const t=this.deserializeUleb128AsU32();return new Uint8Array(this.read(t))}deserializeFixedBytes(t){return new Uint8Array(this.read(t))}deserializeBool(){const t=new Uint8Array(this.read(1))[0];if(t!==1&&t!==0)throw new Error("Invalid boolean value");return t===1}deserializeU8(){return new DataView(this.read(1)).getUint8(0)}deserializeU16(){return new DataView(this.read(2)).getUint16(0,!0)}deserializeU32(){return new DataView(this.read(4)).getUint32(0,!0)}deserializeU64(){const t=this.deserializeU32(),e=this.deserializeU32();return BigInt(BigInt(e)<<BigInt(32)|BigInt(t))}deserializeU128(){const t=this.deserializeU64(),e=this.deserializeU64();return BigInt(e<<BigInt(64)|t)}deserializeU256(){const t=this.deserializeU128(),e=this.deserializeU128();return BigInt(e<<BigInt(128)|t)}deserializeUleb128AsU32(){let t=BigInt(0),e=0;for(;t<Ba;){const r=this.deserializeU8();if(t|=BigInt(r&127)<<BigInt(e),!(r&128))break;e+=7}if(t>Ba)throw new Error("Overflow while parsing uleb128-encoded uint32 value");return Number(t)}};function Gr(t,e){e.serializeU32AsUleb128(t.length),t.forEach(r=>{r.serialize(e)})}function g8(t,e){const r=new nr;r.serializeU32AsUleb128(t.length);const n=r[e];return t.forEach(i=>{n.call(r,i)}),r.getBytes()}function hn(t,e){const r=t.deserializeUleb128AsU32(),n=[];for(let i=0;i<r;i+=1)n.push(e.deserialize(t));return n}function Pi(t){const e=new nr;return t.serialize(e),e.getBytes()}function b8(t){const e=new nr;return e.serializeU64(t),e.getBytes()}function Lu(t){const e=new nr;return e.serializeU8(t),e.getBytes()}function m8(t){const e=new nr;return e.serializeU16(t),e.getBytes()}function w8(t){const e=new nr;return e.serializeU32(t),e.getBytes()}function v8(t){const e=new nr;return e.serializeU128(t),e.getBytes()}function _8(t){const e=new nr;return e.serializeBool(t),e.getBytes()}function E8(t){const e=new nr;return e.serializeStr(t),e.getBytes()}function hs(t){const e=new nr;return e.serializeBytes(t),e.getBytes()}function S8(t){const e=new nr;return e.serializeFixedBytes(t),e.getBytes()}var en=class{constructor(t){if(t.length!==en.LENGTH)throw new Error("Expected address of length 32");this.address=t}static fromHex(t){let e=He.ensure(t);e.noPrefix().length%2!==0&&(e=new He(`0${e.noPrefix()}`));const r=e.toUint8Array();if(r.length>en.LENGTH)throw new Error("Hex string is too long. Address's length is 32 bytes.");if(r.length===en.LENGTH)return new en(r);const n=new Uint8Array(en.LENGTH);return n.set(r,en.LENGTH-r.length),new en(n)}static isValid(t){if(t==="")return!1;let e=He.ensure(t);return e.noPrefix().length%2!==0&&(e=new He(`0${e.noPrefix()}`)),e.toUint8Array().length<=en.LENGTH}toHexString(){return He.fromUint8Array(this.address).hex()}serialize(t){t.serializeFixedBytes(this.address)}static deserialize(t){return new en(t.deserializeFixedBytes(en.LENGTH))}},Jt=en;Jt.LENGTH=32;Jt.CORE_CODE_ADDRESS=en.fromHex("0x1");var qo=class{constructor(t){if(t.length!==qo.LENGTH)throw new Error(`Ed25519PublicKey length should be ${qo.LENGTH}`);this.value=t}toBytes(){return this.value}serialize(t){t.serializeBytes(this.value)}static deserialize(t){const e=t.deserializeBytes();return new qo(e)}},on=qo;on.LENGTH=32;var Fo=class{constructor(t){if(this.value=t,t.length!==Fo.LENGTH)throw new Error(`Ed25519Signature length should be ${Fo.LENGTH}`)}serialize(t){t.serializeBytes(this.value)}static deserialize(t){const e=t.deserializeBytes();return new Fo(e)}},Nn=Fo;Nn.LENGTH=64;var $u=32,io=class{constructor(t,e){if(this.public_keys=t,this.threshold=e,e>$u)throw new Error(`"threshold" cannot be larger than ${$u}`)}toBytes(){const t=new Uint8Array(this.public_keys.length*on.LENGTH+1);return this.public_keys.forEach((e,r)=>{t.set(e.value,r*on.LENGTH)}),t[this.public_keys.length*on.LENGTH]=this.threshold,t}serialize(t){t.serializeBytes(this.toBytes())}static deserialize(t){const e=t.deserializeBytes(),r=e[e.length-1],n=[];for(let i=0;i<e.length-1;i+=on.LENGTH){const s=i;n.push(new on(e.subarray(s,s+on.LENGTH)))}return new io(n,r)}},da=class{constructor(t,e){if(this.signatures=t,this.bitmap=e,e.length!==da.BITMAP_LEN)throw new Error(`"bitmap" length should be ${da.BITMAP_LEN}`)}toBytes(){const t=new Uint8Array(this.signatures.length*Nn.LENGTH+da.BITMAP_LEN);return this.signatures.forEach((e,r)=>{t.set(e.value,r*Nn.LENGTH)}),t.set(this.bitmap,this.signatures.length*Nn.LENGTH),t}static createBitmap(t){const r=new Uint8Array([0,0,0,0]),n=new Set;return t.forEach(i=>{if(i>=$u)throw new Error(`Invalid bit value ${i}.`);if(n.has(i))throw new Error("Duplicated bits detected.");n.add(i);const s=Math.floor(i/8);let a=r[s];a|=128>>i%8,r[s]=a}),r}serialize(t){t.serializeBytes(this.toBytes())}static deserialize(t){const e=t.deserializeBytes(),r=e.subarray(e.length-4),n=[];for(let i=0;i<e.length-r.length;i+=Nn.LENGTH){const s=i;n.push(new Nn(e.subarray(s,s+Nn.LENGTH)))}return new da(n,r)}},Qc=da;Qc.BITMAP_LEN=4;var so=class{static deserialize(t){const e=t.deserializeUleb128AsU32();switch(e){case 0:return ef.load(t);case 1:return tf.load(t);case 2:return Yl.load(t);default:throw new Error(`Unknown variant index for TransactionAuthenticator: ${e}`)}}},ef=class extends so{constructor(t,e){super(),this.public_key=t,this.signature=e}serialize(t){t.serializeU32AsUleb128(0),this.public_key.serialize(t),this.signature.serialize(t)}static load(t){const e=on.deserialize(t),r=Nn.deserialize(t);return new ef(e,r)}},tf=class extends so{constructor(t,e){super(),this.public_key=t,this.signature=e}serialize(t){t.serializeU32AsUleb128(1),this.public_key.serialize(t),this.signature.serialize(t)}static load(t){const e=io.deserialize(t),r=Qc.deserialize(t);return new tf(e,r)}},Yl=class extends so{constructor(t,e,r){super(),this.sender=t,this.secondary_signer_addresses=e,this.secondary_signers=r}serialize(t){t.serializeU32AsUleb128(2),this.sender.serialize(t),Gr(this.secondary_signer_addresses,t),Gr(this.secondary_signers,t)}static load(t){const e=Ua.deserialize(t),r=hn(t,Jt),n=hn(t,Ua);return new Yl(e,r,n)}},Ua=class{static deserialize(t){const e=t.deserializeUleb128AsU32();switch(e){case 0:return Xl.load(t);case 1:return Zl.load(t);default:throw new Error(`Unknown variant index for AccountAuthenticator: ${e}`)}}},Xl=class extends Ua{constructor(t,e){super(),this.public_key=t,this.signature=e}serialize(t){t.serializeU32AsUleb128(0),this.public_key.serialize(t),this.signature.serialize(t)}static load(t){const e=on.deserialize(t),r=Nn.deserialize(t);return new Xl(e,r)}},Zl=class extends Ua{constructor(t,e){super(),this.public_key=t,this.signature=e}serialize(t){t.serializeU32AsUleb128(1),this.public_key.serialize(t),this.signature.serialize(t)}static load(t){const e=io.deserialize(t),r=Qc.deserialize(t);return new Zl(e,r)}},kr=class{constructor(t){this.value=t}serialize(t){t.serializeStr(this.value)}static deserialize(t){const e=t.deserializeStr();return new kr(e)}},gr=class{static deserialize(t){const e=t.deserializeUleb128AsU32();switch(e){case 0:return Xi.load(t);case 1:return ni.load(t);case 2:return Zi.load(t);case 3:return Qi.load(t);case 4:return Si.load(t);case 5:return Ql.load(t);case 6:return Xs.load(t);case 7:return es.load(t);case 8:return Vs.load(t);case 9:return Js.load(t);case 10:return Ys.load(t);default:throw new Error(`Unknown variant index for TypeTag: ${e}`)}}},Xi=class extends gr{serialize(t){t.serializeU32AsUleb128(0)}static load(t){return new Xi}},ni=class extends gr{serialize(t){t.serializeU32AsUleb128(1)}static load(t){return new ni}},Vs=class extends gr{serialize(t){t.serializeU32AsUleb128(1)}static load(t){return new Vs}},Js=class extends gr{serialize(t){t.serializeU32AsUleb128(1)}static load(t){return new Js}},Zi=class extends gr{serialize(t){t.serializeU32AsUleb128(2)}static load(t){return new Zi}},Qi=class extends gr{serialize(t){t.serializeU32AsUleb128(3)}static load(t){return new Qi}},Ys=class extends gr{serialize(t){t.serializeU32AsUleb128(1)}static load(t){return new Ys}},Si=class extends gr{serialize(t){t.serializeU32AsUleb128(4)}static load(t){return new Si}},Ql=class extends gr{serialize(t){t.serializeU32AsUleb128(5)}static load(t){return new Ql}},Xs=class extends gr{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(6),this.value.serialize(t)}static load(t){const e=gr.deserialize(t);return new Xs(e)}},es=class extends gr{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(7),this.value.serialize(t)}static load(t){const e=Fi.deserialize(t);return new es(e)}isStringTypeTag(){return this.value.module_name.value==="string"&&this.value.name.value==="String"&&this.value.address.toHexString()===Jt.fromHex("0x1").toHexString()}},Fi=class{constructor(t,e,r,n){this.address=t,this.module_name=e,this.name=r,this.type_args=n}static fromString(t){const e=new Zs(t).parseTypeTag();return new Fi(e.value.address,e.value.module_name,e.value.name,e.value.type_args)}serialize(t){this.address.serialize(t),this.module_name.serialize(t),this.name.serialize(t),Gr(this.type_args,t)}static deserialize(t){const e=Jt.deserialize(t),r=kr.deserialize(t),n=kr.deserialize(t),i=hn(t,gr);return new Fi(e,r,n,i)}},Ky=new Fi(Jt.fromHex("0x1"),new kr("string"),new kr("String"),[]);function xi(t){throw new zy(t)}function J0(t){return!!t.match(/\s/)}function Y0(t){return!!t.match(/[_A-Za-z0-9]/g)}function A8(t){return!!t.match(/T\d+/g)}function T8(t,e){const r=t[e];if(r===":"){if(t.slice(e,e+2)==="::")return[["COLON","::"],2];xi("Unrecognized token.")}else{if(r==="<")return[["LT","<"],1];if(r===">")return[["GT",">"],1];if(r===",")return[["COMMA",","],1];if(J0(r)){let n="";for(let i=e;i<t.length;i+=1){const s=t[i];if(J0(s))n=`${n}${s}`;else break}return[["SPACE",n],n.length]}else if(Y0(r)){let n="";for(let i=e;i<t.length;i+=1){const s=t[i];if(Y0(s))n=`${n}${s}`;else break}return A8(n)?[["GENERIC",n],n.length]:[["IDENT",n],n.length]}}throw new Error("Unrecognized token.")}function R8(t){let e=0;const r=[];for(;e<t.length;){const[n,i]=T8(t,e);n[0]!=="SPACE"&&r.push(n),e+=i}return r}var Zs=class{constructor(t,e){this.typeTags=[],this.tokens=R8(t),this.typeTags=e||[]}consume(t){const e=this.tokens.shift();(!e||e[1]!==t)&&xi("Invalid type tag.")}parseCommaList(t,e){const r=[];for(this.tokens.length<=0&&xi("Invalid type tag.");this.tokens[0][1]!==t&&(r.push(this.parseTypeTag()),!(this.tokens.length>0&&this.tokens[0][1]===t||(this.consume(","),this.tokens.length>0&&this.tokens[0][1]===t&&e)));)this.tokens.length<=0&&xi("Invalid type tag.");return r}parseTypeTag(){this.tokens.length===0&&xi("Invalid type tag.");const[t,e]=this.tokens.shift();if(e==="u8")return new ni;if(e==="u16")return new Vs;if(e==="u32")return new Js;if(e==="u64")return new Zi;if(e==="u128")return new Qi;if(e==="u256")return new Ys;if(e==="bool")return new Xi;if(e==="address")return new Si;if(e==="vector"){this.consume("<");const r=this.parseTypeTag();return this.consume(">"),new Xs(r)}if(e==="string")return new Fi(Jt.fromHex("0x1"),new kr("string"),new kr("String"),[]);if(t==="IDENT"&&(e.startsWith("0x")||e.startsWith("0X"))){const r=e;this.consume("::");const[n,i]=this.tokens.shift();n!=="IDENT"&&xi("Invalid type tag."),this.consume("::");const[s,a]=this.tokens.shift();if(s!=="IDENT"&&xi("Invalid type tag."),i==="object"&&a==="Object")return this.tokens.splice(0,3),new Si;let o=[];this.tokens.length>0&&this.tokens[0][1]==="<"&&(this.consume("<"),o=this.parseCommaList(">",!0),this.consume(">"));const c=new Fi(Jt.fromHex(r),new kr(i),new kr(a),o);return new es(c)}if(t==="GENERIC"){this.typeTags.length===0&&xi("Can't convert generic type since no typeTags were specified.");const r=parseInt(e.substring(1),10);return new Zs(this.typeTags[r]).parseTypeTag()}throw new Error("Invalid type tag.")}},zy=class extends Error{constructor(t){super(t),this.name="TypeTagParserError"}},Qs=class{constructor(t,e,r,n,i,s,a){this.sender=t,this.sequence_number=e,this.payload=r,this.max_gas_amount=n,this.gas_unit_price=i,this.expiration_timestamp_secs=s,this.chain_id=a}serialize(t){this.sender.serialize(t),t.serializeU64(this.sequence_number),this.payload.serialize(t),t.serializeU64(this.max_gas_amount),t.serializeU64(this.gas_unit_price),t.serializeU64(this.expiration_timestamp_secs),this.chain_id.serialize(t)}static deserialize(t){const e=Jt.deserialize(t),r=t.deserializeU64(),n=oo.deserialize(t),i=t.deserializeU64(),s=t.deserializeU64(),a=t.deserializeU64(),o=of.deserialize(t);return new Qs(e,r,n,i,s,a,o)}},rf=class{constructor(t,e,r){this.code=t,this.ty_args=e,this.args=r}serialize(t){t.serializeBytes(this.code),Gr(this.ty_args,t),Gr(this.args,t)}static deserialize(t){const e=t.deserializeBytes(),r=hn(t,gr),n=hn(t,kn);return new rf(e,r,n)}},Ui=class{constructor(t,e,r,n){this.module_name=t,this.function_name=e,this.ty_args=r,this.args=n}static natural(t,e,r,n){return new Ui(Hi.fromStr(t),new kr(e),r,n)}static natual(t,e,r,n){return Ui.natural(t,e,r,n)}serialize(t){this.module_name.serialize(t),this.function_name.serialize(t),Gr(this.ty_args,t),t.serializeU32AsUleb128(this.args.length),this.args.forEach(e=>{t.serializeBytes(e)})}static deserialize(t){const e=Hi.deserialize(t),r=kr.deserialize(t),n=hn(t,gr),i=t.deserializeUleb128AsU32(),s=[];for(let o=0;o<i;o+=1)s.push(t.deserializeBytes());const a=s;return new Ui(e,r,n,a)}},ed=class{constructor(t){this.transaction_payload=t}serialize(t){t.serializeU32AsUleb128(0),this.transaction_payload.serialize(t)}static deserialize(t){return t.deserializeUleb128AsU32(),new ed(Ui.deserialize(t))}},td=class{constructor(t,e){this.multisig_address=t,this.transaction_payload=e}serialize(t){this.multisig_address.serialize(t),this.transaction_payload===void 0?t.serializeBool(!1):(t.serializeBool(!0),this.transaction_payload.serialize(t))}static deserialize(t){const e=Jt.deserialize(t),r=t.deserializeBool();let n;return r&&(n=ed.deserialize(t)),new td(e,n)}},jy=class{constructor(t){this.code=t}serialize(t){t.serializeBytes(this.code)}static deserialize(t){const e=t.deserializeBytes();return new jy(e)}},Hi=class{constructor(t,e){this.address=t,this.name=e}static fromStr(t){const e=t.split("::");if(e.length!==2)throw new Error("Invalid module id.");return new Hi(Jt.fromHex(new He(e[0])),new kr(e[1]))}serialize(t){this.address.serialize(t),this.name.serialize(t)}static deserialize(t){const e=Jt.deserialize(t),r=kr.deserialize(t);return new Hi(e,r)}},P8=class{serialize(t){throw new Error("Not implemented.")}static deserialize(t){throw new Error("Not implemented.")}},k8=class{serialize(t){throw new Error("Not implmented.")}static deserialize(t){throw new Error("Not implmented.")}},ao=class{constructor(t,e){this.raw_txn=t,this.authenticator=e}serialize(t){this.raw_txn.serialize(t),this.authenticator.serialize(t)}static deserialize(t){const e=Qs.deserialize(t),r=so.deserialize(t);return new ao(e,r)}},Gy=class{static deserialize(t){const e=t.deserializeUleb128AsU32();switch(e){case 0:return nf.load(t);default:throw new Error(`Unknown variant index for RawTransactionWithData: ${e}`)}}},nf=class extends Gy{constructor(t,e){super(),this.raw_txn=t,this.secondary_signer_addresses=e}serialize(t){t.serializeU32AsUleb128(0),this.raw_txn.serialize(t),Gr(this.secondary_signer_addresses,t)}static load(t){const e=Qs.deserialize(t),r=hn(t,Jt);return new nf(e,r)}},oo=class{static deserialize(t){const e=t.deserializeUleb128AsU32();switch(e){case 0:return sf.load(t);case 2:return af.load(t);case 3:return rd.load(t);default:throw new Error(`Unknown variant index for TransactionPayload: ${e}`)}}},sf=class extends oo{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(0),this.value.serialize(t)}static load(t){const e=rf.deserialize(t);return new sf(e)}},af=class extends oo{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(2),this.value.serialize(t)}static load(t){const e=Ui.deserialize(t);return new af(e)}},rd=class extends oo{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(3),this.value.serialize(t)}static load(t){const e=td.deserialize(t);return new rd(e)}},of=class{constructor(t){this.value=t}serialize(t){t.serializeU8(this.value)}static deserialize(t){const e=t.deserializeU8();return new of(e)}},kn=class{static deserialize(t){const e=t.deserializeUleb128AsU32();switch(e){case 0:return cf.load(t);case 1:return lf.load(t);case 2:return df.load(t);case 3:return pf.load(t);case 4:return xf.load(t);case 5:return yf.load(t);case 6:return ff.load(t);case 7:return uf.load(t);case 8:return hf.load(t);default:throw new Error(`Unknown variant index for TransactionArgument: ${e}`)}}},cf=class extends kn{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(0),t.serializeU8(this.value)}static load(t){const e=t.deserializeU8();return new cf(e)}},ff=class extends kn{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(6),t.serializeU16(this.value)}static load(t){const e=t.deserializeU16();return new ff(e)}},uf=class extends kn{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(7),t.serializeU32(this.value)}static load(t){const e=t.deserializeU32();return new uf(e)}},lf=class extends kn{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(1),t.serializeU64(this.value)}static load(t){const e=t.deserializeU64();return new lf(e)}},df=class extends kn{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(2),t.serializeU128(this.value)}static load(t){const e=t.deserializeU128();return new df(e)}},hf=class extends kn{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(8),t.serializeU256(this.value)}static load(t){const e=t.deserializeU256();return new hf(e)}},pf=class extends kn{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(3),this.value.serialize(t)}static load(t){const e=Jt.deserialize(t);return new pf(e)}},xf=class extends kn{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(4),t.serializeBytes(this.value)}static load(t){const e=t.deserializeBytes();return new xf(e)}},yf=class extends kn{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(5),t.serializeBool(this.value)}static load(t){const e=t.deserializeBool();return new yf(e)}},Wy=class{getHashSalt(){const e=Us.create();return e.update("APTOS::Transaction"),e.digest()}static deserialize(e){const r=e.deserializeUleb128AsU32();switch(r){case 0:return nd.load(e);default:throw new Error(`Unknown variant index for Transaction: ${r}`)}}},nd=class extends Wy{constructor(t){super(),this.value=t}hash(){const t=Us.create();return t.update(this.getHashSalt()),t.update(Pi(this)),t.digest()}serialize(t){t.serializeU32AsUleb128(0),this.value.serialize(t)}static load(t){return new nd(ao.deserialize(t))}},co=class{constructor(t){this.name=t}serialize(t){t.serializeStr(this.name)}static deserialize(t){const e=t.deserializeStr();return new co(e)}},fo=class{constructor(t,e){this.name=t,this.type_tag=e}serialize(t){t.serializeStr(this.name),this.type_tag.serialize(t)}static deserialize(t){const e=t.deserializeStr(),r=gr.deserialize(t);return new fo(e,r)}},gf=class{static deserialize(t){const e=t.deserializeUleb128AsU32();switch(e){case 0:return bf.load(t);case 1:return Ds.load(t);default:throw new Error(`Unknown variant index for TransactionPayload: ${e}`)}}},bf=class extends gf{constructor(t,e,r,n,i){super(),this.name=t,this.doc=e,this.code=r,this.ty_args=n,this.args=i}serialize(t){t.serializeU32AsUleb128(0),t.serializeStr(this.name),t.serializeStr(this.doc),t.serializeBytes(this.code),Gr(this.ty_args,t),Gr(this.args,t)}static load(t){const e=t.deserializeStr(),r=t.deserializeStr(),n=t.deserializeBytes(),i=hn(t,co),s=hn(t,fo);return new bf(e,r,n,i,s)}},Ds=class extends gf{constructor(t,e,r,n,i){super(),this.name=t,this.module_name=e,this.doc=r,this.ty_args=n,this.args=i}serialize(t){t.serializeU32AsUleb128(1),t.serializeStr(this.name),this.module_name.serialize(t),t.serializeStr(this.doc),Gr(this.ty_args,t),Gr(this.args,t)}static load(t){const e=t.deserializeStr(),r=Hi.deserialize(t),n=t.deserializeStr(),i=hn(t,co),s=hn(t,fo);return new Ds(e,r,n,i,s)}},ps=class{constructor(t){if(t.length!==ps.LENGTH)throw new Error("Expected a byte array of length 32");this.bytes=t}static fromMultiEd25519PublicKey(t){const e=t.toBytes(),r=new Uint8Array(e.length+1);r.set(e),r.set([ps.MULTI_ED25519_SCHEME],e.length);const n=Us.create();return n.update(r),new ps(n.digest())}static fromEd25519PublicKey(t){const e=t.value,r=new Uint8Array(e.length+1);r.set(e),r.set([ps.ED25519_SCHEME],e.length);const n=Us.create();return n.update(r),new ps(n.digest())}derivedAddress(){return He.fromUint8Array(this.bytes)}},Ki=ps;Ki.LENGTH=32;Ki.MULTI_ED25519_SCHEME=1;Ki.ED25519_SCHEME=0;Ki.DERIVE_RESOURCE_ACCOUNT_SCHEME=255;var M8=class{constructor(t,e,r,n,i,s,a){this.accountAddress=t,this.moduleName=e,this.structName=r,this.sequenceNumber=n,this.originator=i,this.currentAuthKey=s,this.newPublicKey=a}serialize(t){this.accountAddress.serialize(t),t.serializeStr(this.moduleName),t.serializeStr(this.structName),t.serializeU64(this.sequenceNumber),this.originator.serialize(t),this.currentAuthKey.serialize(t),t.serializeBytes(this.newPublicKey)}},Ho=class{static fromAptosAccountObject(t){return new Ho(He.ensure(t.privateKeyHex).toUint8Array(),t.address)}static isValidPath(t){return/^m\/44'\/637'\/[0-9]+'\/[0-9]+'\/[0-9]+'+$/.test(t)}static fromDerivePath(t,e){if(!Ho.isValidPath(t))throw new Error("Invalid derivation path");const r=e.trim().split(/\s+/).map(i=>i.toLowerCase()).join(" "),{key:n}=i8(t,uy(ey(r)));return new Ho(n)}constructor(t,e){t?this.signingKey=yo.sign.keyPair.fromSeed(t.slice(0,32)):this.signingKey=yo.sign.keyPair(),this.accountAddress=He.ensure(e||this.authKey().hex())}address(){return this.accountAddress}authKey(){const t=new on(this.signingKey.publicKey);return Ki.fromEd25519PublicKey(t).derivedAddress()}static getResourceAccountAddress(t,e){const r=Pi(Jt.fromHex(t)),n=new Uint8Array([...r,...e,Ki.DERIVE_RESOURCE_ACCOUNT_SCHEME]),i=Us.create();return i.update(n),He.fromUint8Array(i.digest())}pubKey(){return He.fromUint8Array(this.signingKey.publicKey)}signBuffer(t){const e=yo.sign.detached(t,this.signingKey.secretKey);return He.fromUint8Array(e)}signHexString(t){const e=He.ensure(t).toUint8Array();return this.signBuffer(e)}verifySignature(t,e){const r=He.ensure(t).toUint8Array(),n=He.ensure(e).toUint8Array();return yo.sign.detached.verify(r,n,this.signingKey.publicKey)}toPrivateKeyObject(){return{address:this.address().hex(),publicKeyHex:this.pubKey().hex(),privateKeyHex:He.fromUint8Array(this.signingKey.secretKey.slice(0,32)).hex()}}},qu=Ho;Pt([Zc()],qu.prototype,"authKey",1);var C8=`
    fragment TokenDataFields on current_token_datas {
  creator_address
  collection_name
  description
  metadata_uri
  name
  token_data_id_hash
  collection_data_id_hash
}
    `,I8=`
    fragment CollectionDataFields on current_collection_datas {
  metadata_uri
  supply
  description
  collection_name
  collection_data_id_hash
  table_handle
  creator_address
}
    `,B8=`
    query getAccountCoinsData($owner_address: String, $offset: Int, $limit: Int) {
  current_coin_balances(
    where: {owner_address: {_eq: $owner_address}}
    offset: $offset
    limit: $limit
  ) {
    amount
    coin_type
    coin_info {
      name
      decimals
      symbol
    }
  }
}
    `,U8=`
    query getAccountCurrentTokens($address: String!, $offset: Int, $limit: Int) {
  current_token_ownerships(
    where: {owner_address: {_eq: $address}, amount: {_gt: 0}}
    order_by: [{last_transaction_version: desc}, {creator_address: asc}, {collection_name: asc}, {name: asc}]
    offset: $offset
    limit: $limit
  ) {
    amount
    current_token_data {
      ...TokenDataFields
    }
    current_collection_data {
      ...CollectionDataFields
    }
    last_transaction_version
    property_version
  }
}
    ${C8}
${I8}`,O8=`
    query getAccountTokensCount($owner_address: String) {
  current_token_ownerships_aggregate(
    where: {owner_address: {_eq: $owner_address}, amount: {_gt: "0"}}
  ) {
    aggregate {
      count
    }
  }
}
    `,N8=`
    query getAccountTransactionsCount($address: String) {
  move_resources_aggregate(
    where: {address: {_eq: $address}}
    distinct_on: transaction_version
  ) {
    aggregate {
      count
    }
  }
}
    `,D8=`
    query getAccountTransactionsData($address: String, $limit: Int, $offset: Int) {
  move_resources(
    where: {address: {_eq: $address}}
    order_by: {transaction_version: desc}
    distinct_on: transaction_version
    limit: $limit
    offset: $offset
  ) {
    transaction_version
  }
}
    `,L8=`
    query getCurrentDelegatorBalancesCount($poolAddress: String) {
  current_delegator_balances_aggregate(
    where: {pool_type: {_eq: "active_shares"}, pool_address: {_eq: $poolAddress}, amount: {_gt: "0"}}
    distinct_on: delegator_address
  ) {
    aggregate {
      count
    }
  }
}
    `,$8=`
    query getDelegatedStakingActivities($delegatorAddress: String, $poolAddress: String) {
  delegated_staking_activities(
    where: {delegator_address: {_eq: $delegatorAddress}, pool_address: {_eq: $poolAddress}}
  ) {
    amount
    delegator_address
    event_index
    event_type
    pool_address
    transaction_version
  }
}
    `,q8=`
    query getIndexerLedgerInfo {
  ledger_infos {
    chain_id
  }
}
    `,F8=`
    query getTokenActivities($idHash: String!, $offset: Int, $limit: Int) {
  token_activities(
    where: {token_data_id_hash: {_eq: $idHash}}
    order_by: {transaction_version: desc}
    offset: $offset
    limit: $limit
  ) {
    creator_address
    collection_name
    name
    token_data_id_hash
    collection_data_id_hash
    from_address
    to_address
    transaction_version
    transaction_timestamp
    property_version
    transfer_type
    event_sequence_number
    token_amount
  }
}
    `,H8=`
    query getTokenActivitiesCount($token_id: String) {
  token_activities_aggregate(where: {token_data_id_hash: {_eq: $token_id}}) {
    aggregate {
      count
    }
  }
}
    `,K8=`
    query getTokenData($token_id: String) {
  current_token_datas(where: {token_data_id_hash: {_eq: $token_id}}) {
    token_data_id_hash
    name
    collection_name
    creator_address
    default_properties
    largest_property_version
    maximum
    metadata_uri
    payee_address
    royalty_points_denominator
    royalty_points_numerator
    supply
  }
}
    `,z8=`
    query getTokenOwnersData($token_id: String, $property_version: numeric) {
  current_token_ownerships(
    where: {token_data_id_hash: {_eq: $token_id}, property_version: {_eq: $property_version}}
  ) {
    owner_address
  }
}
    `,j8=`
    query getTopUserTransactions($limit: Int) {
  user_transactions(limit: $limit, order_by: {version: desc}) {
    version
  }
}
    `,G8=`
    query getUserTransactions($limit: Int, $start_version: bigint, $offset: Int) {
  user_transactions(
    limit: $limit
    order_by: {version: desc}
    where: {version: {_lte: $start_version}}
    offset: $offset
  ) {
    version
  }
}
    `,Bn=class{constructor(t){this.endpoint=t}static validateAddress(t){if(t.length<66)throw new Error("Address needs to be 66 chars long.")}async queryIndexer(t){const{data:e}=await Ia.post(this.endpoint,t);if(e.errors)throw new Error(`Indexer data error ${JSON.stringify(e.errors,null," ")}`);return e.data}async getIndexerLedgerInfo(){const t={query:q8};return this.queryIndexer(t)}async getAccountNFTs(t,e){const r=He.ensure(t).hex();Bn.validateAddress(r);const n={query:U8,variables:{address:r,offset:e==null?void 0:e.offset,limit:e==null?void 0:e.limit}};return this.queryIndexer(n)}async getTokenActivities(t,e){const r={query:F8,variables:{idHash:t,offset:e==null?void 0:e.offset,limit:e==null?void 0:e.limit}};return this.queryIndexer(r)}async getAccountCoinsData(t,e){const r=He.ensure(t).hex();Bn.validateAddress(r);const n={query:B8,variables:{owner_address:r,offset:e==null?void 0:e.offset,limit:e==null?void 0:e.limit}};return this.queryIndexer(n)}async getAccountTokensCount(t){const e=He.ensure(t).hex();Bn.validateAddress(e);const r={query:O8,variables:{owner_address:e}};return this.queryIndexer(r)}async getAccountTransactionsCount(t){const e=He.ensure(t).hex();Bn.validateAddress(e);const r={query:N8,variables:{address:e}};return this.queryIndexer(r)}async getAccountTransactionsData(t,e){const r=He.ensure(t).hex();Bn.validateAddress(r);const n={query:D8,variables:{address:r,offset:e==null?void 0:e.offset,limit:e==null?void 0:e.limit}};return this.queryIndexer(n)}async getDelegatedStakingActivities(t,e){const r=He.ensure(t).hex(),n=He.ensure(e).hex();Bn.validateAddress(r),Bn.validateAddress(n);const i={query:$8,variables:{delegatorAddress:r,poolAddress:n}};return this.queryIndexer(i)}async getTokenActivitiesCount(t){const e={query:H8,variables:{token_id:t}};return this.queryIndexer(e)}async getTokenData(t){const e={query:K8,variables:{token_id:t}};return this.queryIndexer(e)}async getTokenOwnersData(t,e){const r={query:z8,variables:{token_id:t,property_version:e}};return this.queryIndexer(r)}async getTopUserTransactions(t){const e={query:j8,variables:{limit:t}};return this.queryIndexer(e)}async getUserTransactions(t,e){const r={query:G8,variables:{start_version:t,offset:e==null?void 0:e.offset,limit:e==null?void 0:e.limit}};return this.queryIndexer(r)}async getCurrentDelegatorBalancesCount(t){const e=He.ensure(t).hex();Bn.validateAddress(e);const r={query:L8,variables:{poolAddress:e}};return this.queryIndexer(r)}},W8={};Xc(W8,{$AccountData:()=>f4,$AccountSignature:()=>u4,$AccountSignature_Ed25519Signature:()=>l4,$AccountSignature_MultiEd25519Signature:()=>d4,$Address:()=>h4,$AptosError:()=>p4,$AptosErrorCode:()=>x4,$Block:()=>y4,$BlockMetadataTransaction:()=>g4,$DecodedTableData:()=>b4,$DeleteModule:()=>w4,$DeleteResource:()=>v4,$DeleteTableItem:()=>_4,$DeletedTableData:()=>m4,$DirectWriteSet:()=>E4,$Ed25519Signature:()=>S4,$EncodeSubmissionRequest:()=>A4,$EntryFunctionId:()=>T4,$EntryFunctionPayload:()=>R4,$Event:()=>P4,$EventGuid:()=>k4,$GasEstimation:()=>M4,$GenesisPayload:()=>C4,$GenesisPayload_WriteSetPayload:()=>I4,$GenesisTransaction:()=>B4,$HashValue:()=>U4,$HealthCheckSuccess:()=>O4,$HexEncodedBytes:()=>N4,$IdentifierWrapper:()=>D4,$IndexResponse:()=>L4,$ModuleBundlePayload:()=>$4,$MoveAbility:()=>q4,$MoveFunction:()=>F4,$MoveFunctionGenericTypeParam:()=>H4,$MoveFunctionVisibility:()=>K4,$MoveModule:()=>z4,$MoveModuleBytecode:()=>j4,$MoveModuleId:()=>G4,$MoveResource:()=>W4,$MoveScriptBytecode:()=>V4,$MoveStruct:()=>J4,$MoveStructField:()=>Y4,$MoveStructGenericTypeParam:()=>X4,$MoveStructTag:()=>Z4,$MoveStructValue:()=>Q4,$MoveType:()=>eE,$MoveValue:()=>tE,$MultiAgentSignature:()=>rE,$MultiEd25519Signature:()=>nE,$MultisigPayload:()=>iE,$MultisigTransactionPayload:()=>sE,$PendingTransaction:()=>aE,$RawTableItemRequest:()=>oE,$RoleType:()=>cE,$ScriptPayload:()=>fE,$ScriptWriteSet:()=>uE,$StateCheckpointTransaction:()=>lE,$StateKeyWrapper:()=>dE,$SubmitTransactionRequest:()=>hE,$TableItemRequest:()=>pE,$Transaction:()=>xE,$TransactionPayload:()=>vE,$TransactionPayload_EntryFunctionPayload:()=>_E,$TransactionPayload_ModuleBundlePayload:()=>EE,$TransactionPayload_MultisigPayload:()=>SE,$TransactionPayload_ScriptPayload:()=>AE,$TransactionSignature:()=>PE,$TransactionSignature_Ed25519Signature:()=>kE,$TransactionSignature_MultiAgentSignature:()=>ME,$TransactionSignature_MultiEd25519Signature:()=>CE,$Transaction_BlockMetadataTransaction:()=>yE,$Transaction_GenesisTransaction:()=>gE,$Transaction_PendingTransaction:()=>bE,$Transaction_StateCheckpointTransaction:()=>mE,$Transaction_UserTransaction:()=>wE,$TransactionsBatchSingleSubmissionFailure:()=>TE,$TransactionsBatchSubmissionResult:()=>RE,$U128:()=>IE,$U256:()=>BE,$U64:()=>UE,$UserTransaction:()=>OE,$VersionedEvent:()=>NE,$ViewRequest:()=>DE,$WriteModule:()=>LE,$WriteResource:()=>$E,$WriteSet:()=>qE,$WriteSetChange:()=>KE,$WriteSetChange_DeleteModule:()=>zE,$WriteSetChange_DeleteResource:()=>jE,$WriteSetChange_DeleteTableItem:()=>GE,$WriteSetChange_WriteModule:()=>WE,$WriteSetChange_WriteResource:()=>VE,$WriteSetChange_WriteTableItem:()=>JE,$WriteSetPayload:()=>YE,$WriteSet_DirectWriteSet:()=>FE,$WriteSet_ScriptWriteSet:()=>HE,$WriteTableItem:()=>XE,AccountsService:()=>eg,ApiError:()=>Oa,AptosErrorCode:()=>cg,AptosGeneratedClient:()=>og,BaseHttpRequest:()=>Vy,BlocksService:()=>tg,CancelError:()=>Jy,CancelablePromise:()=>Yy,EventsService:()=>rg,GeneralService:()=>ng,MoveFunctionVisibility:()=>fg,OpenAPI:()=>c4,RoleType:()=>ug,TablesService:()=>ig,TransactionsService:()=>sg,ViewService:()=>ag});var Vy=class{constructor(t){this.config=t}},Oa=class extends Error{constructor(t,e,r){super(r),this.name="ApiError",this.url=e.url,this.status=e.status,this.statusText=e.statusText,this.body=e.body,this.request=t}},Jy=class extends Error{constructor(t){super(t),this.name="CancelError"}get isCancelled(){return!0}},Yy=class{constructor(t){this._isResolved=!1,this._isRejected=!1,this._isCancelled=!1,this._cancelHandlers=[],this._promise=new Promise((e,r)=>{this._resolve=e,this._reject=r;const n=a=>{var o;this._isResolved||this._isRejected||this._isCancelled||(this._isResolved=!0,(o=this._resolve)==null||o.call(this,a))},i=a=>{var o;this._isResolved||this._isRejected||this._isCancelled||(this._isRejected=!0,(o=this._reject)==null||o.call(this,a))},s=a=>{this._isResolved||this._isRejected||this._isCancelled||this._cancelHandlers.push(a)};return Object.defineProperty(s,"isResolved",{get:()=>this._isResolved}),Object.defineProperty(s,"isRejected",{get:()=>this._isRejected}),Object.defineProperty(s,"isCancelled",{get:()=>this._isCancelled}),t(n,i,s)})}then(t,e){return this._promise.then(t,e)}catch(t){return this._promise.catch(t)}finally(t){return this._promise.finally(t)}cancel(){var t;if(!(this._isResolved||this._isRejected||this._isCancelled)){if(this._isCancelled=!0,this._cancelHandlers.length)try{for(const e of this._cancelHandlers)e()}catch(e){console.warn("Cancellation threw an error",e);return}this._cancelHandlers.length=0,(t=this._reject)==null||t.call(this,new Jy("Request aborted"))}}get isCancelled(){return this._isCancelled}},Xy=class{constructor(t=new Map){this.jar=t}setCookie(t,e){var r;const n=t.origin.toLowerCase();this.jar.has(n)||this.jar.set(n,[]);const i=Xy.parse(e);this.jar.set(n,[...((r=this.jar.get(n))==null?void 0:r.filter(s=>s.name!==i.name))||[],i])}getCookies(t){var e;const r=t.origin.toLowerCase();return this.jar.get(r)?((e=this.jar.get(r))==null?void 0:e.filter(n=>!n.expires||n.expires>new Date))||[]:[]}static parse(t){if(typeof t!="string")throw new Error("argument str must be a string");const e=t.split(";").map(n=>n.trim());let r;if(e.length>0){const[n,i]=e[0].split("=");if(!n||!i)throw new Error("Invalid cookie");r={name:n,value:i}}else throw new Error("Invalid cookie");return e.slice(1).forEach(n=>{const[i,s]=n.split("=");if(!i.trim())throw new Error("Invalid cookie");const a=i.toLowerCase(),o=(s==null?void 0:s.charAt(0))==="'"||(s==null?void 0:s.charAt(0))==='"'?s==null?void 0:s.slice(1,-1):s;if(a==="expires"&&(r.expires=new Date(o)),a==="path"&&(r.path=o),a==="samesite"){if(o!=="Lax"&&o!=="None"&&o!=="Strict")throw new Error("Invalid cookie SameSite value");r.sameSite=o}a==="secure"&&(r.secure=!0)}),r}},Zy=new Xy;Ia.interceptors.response.use(t=>(Array.isArray(t.headers["set-cookie"])&&t.headers["set-cookie"].forEach(e=>{Zy.setCookie(new URL(t.config.url),e)}),t));Ia.interceptors.request.use(function(t){const e=Zy.getCookies(new URL(t.url));return(e==null?void 0:e.length)>0&&t.headers&&(t.headers.cookie=e.map(r=>`${r.name}=${r.value}`).join("; ")),t});var id=t=>t!=null,mf=t=>typeof t=="string",hu=t=>mf(t)&&t!=="",Qy=t=>typeof t=="object"&&typeof t.type=="string"&&typeof t.stream=="function"&&typeof t.arrayBuffer=="function"&&typeof t.constructor=="function"&&typeof t.constructor.name=="string"&&/^(Blob|File)$/.test(t.constructor.name)&&/^(Blob|File)$/.test(t[Symbol.toStringTag]),V8=t=>t instanceof Ny,J8=t=>t>=200&&t<300,Y8=t=>btoa(t),X8=t=>{const e=[],r=(i,s)=>{e.push(`${encodeURIComponent(i)}=${encodeURIComponent(String(s))}`)},n=(i,s)=>{id(s)&&(Array.isArray(s)?s.forEach(a=>{n(i,a)}):typeof s=="object"?Object.entries(s).forEach(([a,o])=>{n(`${i}[${a}]`,o)}):r(i,s))};return Object.entries(t).forEach(([i,s])=>{n(i,s)}),e.length>0?`?${e.join("&")}`:""},Z8=(t,e)=>{const r=t.ENCODE_PATH||encodeURI,n=e.url.replace("{api-version}",t.VERSION).replace(/{(.*?)}/g,(s,a)=>{var o;return(o=e.path)!=null&&o.hasOwnProperty(a)?r(String(e.path[a])):s}),i=`${t.BASE}${n}`;return e.query?`${i}${X8(e.query)}`:i},Q8=t=>{if(t.formData){const e=new Ny,r=(n,i)=>{mf(i)||Qy(i)?e.append(n,i):e.append(n,JSON.stringify(i))};return Object.entries(t.formData).filter(([n,i])=>id(i)).forEach(([n,i])=>{Array.isArray(i)?i.forEach(s=>r(n,s)):r(n,i)}),e}},Eo=async(t,e)=>typeof e=="function"?e(t):e,e4=async(t,e,r)=>{const n=await Eo(e,t.TOKEN),i=await Eo(e,t.USERNAME),s=await Eo(e,t.PASSWORD),a=await Eo(e,t.HEADERS),o=typeof(r==null?void 0:r.getHeaders)=="function"&&(r==null?void 0:r.getHeaders())||{},c=Object.entries({Accept:"application/json",...a,...e.headers,...o}).filter(([u,h])=>id(h)).reduce((u,[h,p])=>({...u,[h]:String(p)}),{});if(hu(n)&&(c.Authorization=`Bearer ${n}`),hu(i)&&hu(s)){const u=Y8(`${i}:${s}`);c.Authorization=`Basic ${u}`}return e.body&&(e.mediaType?c["Content-Type"]=e.mediaType:Qy(e.body)?c["Content-Type"]=e.body.type||"application/octet-stream":mf(e.body)?c["Content-Type"]="text/plain":V8(e.body)||(c["Content-Type"]="application/json")),c},t4=t=>{if(t.body)return t.body},r4=async(t,e,r,n,i,s,a)=>{const o=Ia.CancelToken.source(),c={url:r,headers:s,data:n??i,method:e.method,withCredentials:t.WITH_CREDENTIALS,cancelToken:o.token};Object.keys(t.HEADERS||{}).filter(h=>h.toLowerCase()==="accept").map(h=>t.HEADERS[h]).includes("application/x-bcs")&&(c.responseType="arraybuffer"),a(()=>o.cancel("The user aborted a request."));try{return await Ia.request(c)}catch(h){const p=h;if(p.response)return p.response;throw h}},n4=(t,e)=>{if(e){const r=t.headers[e];if(mf(r))return r}},i4=t=>{if(t.status!==204)return t.data},s4=(t,e)=>{const n={400:"Bad Request",401:"Unauthorized",403:"Forbidden",404:"Not Found",429:"Too Many Requests",500:"Internal Server Error",502:"Bad Gateway",503:"Service Unavailable",...t.errors}[e.status];if(n)throw new Oa(t,e,n);if(!e.ok)throw new Oa(t,e,"Generic Error")},a4=(t,e)=>new Yy(async(r,n,i)=>{try{const s=Z8(t,e),a=Q8(e),o=t4(e),c=await e4(t,e,a);if(!i.isCancelled){const u=await r4(t,e,s,o,a,c,i),h=i4(u),p=n4(u,e.responseHeader),m={url:s,ok:J8(u.status),status:u.status,statusText:u.statusText,body:p??h};s4(e,m);const P=m.body;try{P.__headers=u.headers}catch{}r(P)}}catch(s){n(s)}}),o4=class extends Vy{constructor(t){super(t)}request(t){return a4(this.config,t)}},eg=class{constructor(t){this.httpRequest=t}getAccount(t,e){return this.httpRequest.request({method:"GET",url:"/accounts/{address}",path:{address:t},query:{ledger_version:e}})}getAccountResources(t,e,r,n){return this.httpRequest.request({method:"GET",url:"/accounts/{address}/resources",path:{address:t},query:{ledger_version:e,start:r,limit:n}})}getAccountModules(t,e,r,n){return this.httpRequest.request({method:"GET",url:"/accounts/{address}/modules",path:{address:t},query:{ledger_version:e,start:r,limit:n}})}getAccountResource(t,e,r){return this.httpRequest.request({method:"GET",url:"/accounts/{address}/resource/{resource_type}",path:{address:t,resource_type:e},query:{ledger_version:r}})}getAccountModule(t,e,r){return this.httpRequest.request({method:"GET",url:"/accounts/{address}/module/{module_name}",path:{address:t,module_name:e},query:{ledger_version:r}})}},tg=class{constructor(t){this.httpRequest=t}getBlockByHeight(t,e){return this.httpRequest.request({method:"GET",url:"/blocks/by_height/{block_height}",path:{block_height:t},query:{with_transactions:e}})}getBlockByVersion(t,e){return this.httpRequest.request({method:"GET",url:"/blocks/by_version/{version}",path:{version:t},query:{with_transactions:e}})}},rg=class{constructor(t){this.httpRequest=t}getEventsByCreationNumber(t,e,r,n){return this.httpRequest.request({method:"GET",url:"/accounts/{address}/events/{creation_number}",path:{address:t,creation_number:e},query:{start:r,limit:n}})}getEventsByEventHandle(t,e,r,n,i){return this.httpRequest.request({method:"GET",url:"/accounts/{address}/events/{event_handle}/{field_name}",path:{address:t,event_handle:e,field_name:r},query:{start:n,limit:i}})}},ng=class{constructor(t){this.httpRequest=t}spec(){return this.httpRequest.request({method:"GET",url:"/spec"})}healthy(t){return this.httpRequest.request({method:"GET",url:"/-/healthy",query:{duration_secs:t}})}getLedgerInfo(){return this.httpRequest.request({method:"GET",url:"/"})}},ig=class{constructor(t){this.httpRequest=t}getTableItem(t,e,r){return this.httpRequest.request({method:"POST",url:"/tables/{table_handle}/item",path:{table_handle:t},query:{ledger_version:r},body:e,mediaType:"application/json"})}getRawTableItem(t,e,r){return this.httpRequest.request({method:"POST",url:"/tables/{table_handle}/raw_item",path:{table_handle:t},query:{ledger_version:r},body:e,mediaType:"application/json"})}},sg=class{constructor(t){this.httpRequest=t}getTransactions(t,e){return this.httpRequest.request({method:"GET",url:"/transactions",query:{start:t,limit:e}})}submitTransaction(t){return this.httpRequest.request({method:"POST",url:"/transactions",body:t,mediaType:"application/json"})}getTransactionByHash(t){return this.httpRequest.request({method:"GET",url:"/transactions/by_hash/{txn_hash}",path:{txn_hash:t}})}getTransactionByVersion(t){return this.httpRequest.request({method:"GET",url:"/transactions/by_version/{txn_version}",path:{txn_version:t}})}getAccountTransactions(t,e,r){return this.httpRequest.request({method:"GET",url:"/accounts/{address}/transactions",path:{address:t},query:{start:e,limit:r}})}submitBatchTransactions(t){return this.httpRequest.request({method:"POST",url:"/transactions/batch",body:t,mediaType:"application/json"})}simulateTransaction(t,e,r,n){return this.httpRequest.request({method:"POST",url:"/transactions/simulate",query:{estimate_max_gas_amount:e,estimate_gas_unit_price:r,estimate_prioritized_gas_unit_price:n},body:t,mediaType:"application/json"})}encodeSubmission(t){return this.httpRequest.request({method:"POST",url:"/transactions/encode_submission",body:t,mediaType:"application/json"})}estimateGasPrice(){return this.httpRequest.request({method:"GET",url:"/estimate_gas_price"})}},ag=class{constructor(t){this.httpRequest=t}view(t,e){return this.httpRequest.request({method:"POST",url:"/view",query:{ledger_version:e},body:t,mediaType:"application/json"})}},og=class{constructor(t,e=o4){var r,n,i,s;this.request=new e({BASE:(r=t==null?void 0:t.BASE)!=null?r:"/v1",VERSION:(n=t==null?void 0:t.VERSION)!=null?n:"1.2.0",WITH_CREDENTIALS:(i=t==null?void 0:t.WITH_CREDENTIALS)!=null?i:!1,CREDENTIALS:(s=t==null?void 0:t.CREDENTIALS)!=null?s:"include",TOKEN:t==null?void 0:t.TOKEN,USERNAME:t==null?void 0:t.USERNAME,PASSWORD:t==null?void 0:t.PASSWORD,HEADERS:t==null?void 0:t.HEADERS,ENCODE_PATH:t==null?void 0:t.ENCODE_PATH}),this.accounts=new eg(this.request),this.blocks=new tg(this.request),this.events=new rg(this.request),this.general=new ng(this.request),this.tables=new ig(this.request),this.transactions=new sg(this.request),this.view=new ag(this.request)}},c4={BASE:"/v1",VERSION:"1.2.0",WITH_CREDENTIALS:!1,CREDENTIALS:"include",TOKEN:void 0,USERNAME:void 0,PASSWORD:void 0,HEADERS:void 0,ENCODE_PATH:void 0},cg=(t=>(t.ACCOUNT_NOT_FOUND="account_not_found",t.RESOURCE_NOT_FOUND="resource_not_found",t.MODULE_NOT_FOUND="module_not_found",t.STRUCT_FIELD_NOT_FOUND="struct_field_not_found",t.VERSION_NOT_FOUND="version_not_found",t.TRANSACTION_NOT_FOUND="transaction_not_found",t.TABLE_ITEM_NOT_FOUND="table_item_not_found",t.BLOCK_NOT_FOUND="block_not_found",t.VERSION_PRUNED="version_pruned",t.BLOCK_PRUNED="block_pruned",t.INVALID_INPUT="invalid_input",t.INVALID_TRANSACTION_UPDATE="invalid_transaction_update",t.SEQUENCE_NUMBER_TOO_OLD="sequence_number_too_old",t.VM_ERROR="vm_error",t.HEALTH_CHECK_FAILED="health_check_failed",t.MEMPOOL_IS_FULL="mempool_is_full",t.INTERNAL_ERROR="internal_error",t.WEB_FRAMEWORK_ERROR="web_framework_error",t.BCS_NOT_SUPPORTED="bcs_not_supported",t.API_DISABLED="api_disabled",t))(cg||{}),fg=(t=>(t.PRIVATE="private",t.PUBLIC="public",t.FRIEND="friend",t))(fg||{}),ug=(t=>(t.VALIDATOR="validator",t.FULL_NODE="full_node",t))(ug||{}),f4={description:`Account data

    A simplified version of the onchain Account resource`,properties:{sequence_number:{type:"U64",isRequired:!0},authentication_key:{type:"HexEncodedBytes",isRequired:!0}}},u4={type:"one-of",description:`Account signature scheme

    The account signature scheme allows you to have two types of accounts:

    1. A single Ed25519 key account, one private key
    2. A k-of-n multi-Ed25519 key account, multiple private keys, such that k-of-n must sign a transaction.`,contains:[{type:"AccountSignature_Ed25519Signature"},{type:"AccountSignature_MultiEd25519Signature"}]},l4={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"Ed25519Signature"}]},d4={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"MultiEd25519Signature"}]},h4={type:"string",description:`A hex encoded 32 byte Aptos account address.

    This is represented in a string as a 64 character hex string, sometimes
    shortened by stripping leading 0s, and adding a 0x.

    For example, address 0x0000000000000000000000000000000000000000000000000000000000000001 is represented as 0x1.
    `,format:"hex"},p4={description:`This is the generic struct we use for all API errors, it contains a string
    message and an Aptos API specific error code.`,properties:{message:{type:"string",description:"A message describing the error",isRequired:!0},error_code:{type:"AptosErrorCode",isRequired:!0},vm_error_code:{type:"number",description:"A code providing VM error details when submitting transactions to the VM",format:"uint64"}}},x4={type:"Enum"},y4={description:`A Block with or without transactions

    This contains the information about a transactions along with
    associated transactions if requested`,properties:{block_height:{type:"U64",isRequired:!0},block_hash:{type:"HashValue",isRequired:!0},block_timestamp:{type:"U64",isRequired:!0},first_version:{type:"U64",isRequired:!0},last_version:{type:"U64",isRequired:!0},transactions:{type:"array",contains:{type:"Transaction"}}}},g4={description:`A block metadata transaction

    This signifies the beginning of a block, and contains information
    about the specific block`,properties:{version:{type:"U64",isRequired:!0},hash:{type:"HashValue",isRequired:!0},state_change_hash:{type:"HashValue",isRequired:!0},event_root_hash:{type:"HashValue",isRequired:!0},state_checkpoint_hash:{type:"HashValue"},gas_used:{type:"U64",isRequired:!0},success:{type:"boolean",description:"Whether the transaction was successful",isRequired:!0},vm_status:{type:"string",description:"The VM status of the transaction, can tell useful information in a failure",isRequired:!0},accumulator_root_hash:{type:"HashValue",isRequired:!0},changes:{type:"array",contains:{type:"WriteSetChange"},isRequired:!0},id:{type:"HashValue",isRequired:!0},epoch:{type:"U64",isRequired:!0},round:{type:"U64",isRequired:!0},events:{type:"array",contains:{type:"Event"},isRequired:!0},previous_block_votes_bitvec:{type:"array",contains:{type:"number",format:"uint8"},isRequired:!0},proposer:{type:"Address",isRequired:!0},failed_proposer_indices:{type:"array",contains:{type:"number",format:"uint32"},isRequired:!0},timestamp:{type:"U64",isRequired:!0}}},b4={description:"Decoded table data",properties:{key:{description:"Key of table in JSON",properties:{},isRequired:!0},key_type:{type:"string",description:"Type of key",isRequired:!0},value:{description:"Value of table in JSON",properties:{},isRequired:!0},value_type:{type:"string",description:"Type of value",isRequired:!0}}},m4={description:"Deleted table data",properties:{key:{description:"Deleted key",properties:{},isRequired:!0},key_type:{type:"string",description:"Deleted key type",isRequired:!0}}},w4={description:"Delete a module",properties:{address:{type:"Address",isRequired:!0},state_key_hash:{type:"string",description:"State key hash",isRequired:!0},module:{type:"MoveModuleId",isRequired:!0}}},v4={description:"Delete a resource",properties:{address:{type:"Address",isRequired:!0},state_key_hash:{type:"string",description:"State key hash",isRequired:!0},resource:{type:"MoveStructTag",isRequired:!0}}},_4={description:"Delete a table item",properties:{state_key_hash:{type:"string",isRequired:!0},handle:{type:"HexEncodedBytes",isRequired:!0},key:{type:"HexEncodedBytes",isRequired:!0},data:{type:"DeletedTableData"}}},E4={properties:{changes:{type:"array",contains:{type:"WriteSetChange"},isRequired:!0},events:{type:"array",contains:{type:"Event"},isRequired:!0}}},S4={description:"A single Ed25519 signature",properties:{public_key:{type:"HexEncodedBytes",isRequired:!0},signature:{type:"HexEncodedBytes",isRequired:!0}}},A4={description:"Request to encode a submission",properties:{sender:{type:"Address",isRequired:!0},sequence_number:{type:"U64",isRequired:!0},max_gas_amount:{type:"U64",isRequired:!0},gas_unit_price:{type:"U64",isRequired:!0},expiration_timestamp_secs:{type:"U64",isRequired:!0},payload:{type:"TransactionPayload",isRequired:!0},secondary_signers:{type:"array",contains:{type:"Address"}}}},T4={type:"string",description:"Entry function id is string representation of a entry function defined on-chain.\n\n    Format: `{address}::{module name}::{function name}`\n\n    Both `module name` and `function name` are case-sensitive.\n    "},R4={description:"Payload which runs a single entry function",properties:{function:{type:"EntryFunctionId",isRequired:!0},type_arguments:{type:"array",contains:{type:"MoveType"},isRequired:!0},arguments:{type:"array",contains:{properties:{}},isRequired:!0}}},P4={description:"An event from a transaction",properties:{guid:{type:"EventGuid",isRequired:!0},sequence_number:{type:"U64",isRequired:!0},type:{type:"MoveType",isRequired:!0},data:{description:"The JSON representation of the event",properties:{},isRequired:!0}}},k4={properties:{creation_number:{type:"U64",isRequired:!0},account_address:{type:"Address",isRequired:!0}}},M4={description:"Struct holding the outputs of the estimate gas API",properties:{deprioritized_gas_estimate:{type:"number",description:"The deprioritized estimate for the gas unit price",format:"uint64"},gas_estimate:{type:"number",description:"The current estimate for the gas unit price",isRequired:!0,format:"uint64"},prioritized_gas_estimate:{type:"number",description:"The prioritized estimate for the gas unit price",format:"uint64"}}},C4={type:"one-of",description:"The writeset payload of the Genesis transaction",contains:[{type:"GenesisPayload_WriteSetPayload"}]},I4={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"WriteSetPayload"}]},B4={description:`The genesis transaction

    This only occurs at the genesis transaction (version 0)`,properties:{version:{type:"U64",isRequired:!0},hash:{type:"HashValue",isRequired:!0},state_change_hash:{type:"HashValue",isRequired:!0},event_root_hash:{type:"HashValue",isRequired:!0},state_checkpoint_hash:{type:"HashValue"},gas_used:{type:"U64",isRequired:!0},success:{type:"boolean",description:"Whether the transaction was successful",isRequired:!0},vm_status:{type:"string",description:"The VM status of the transaction, can tell useful information in a failure",isRequired:!0},accumulator_root_hash:{type:"HashValue",isRequired:!0},changes:{type:"array",contains:{type:"WriteSetChange"},isRequired:!0},payload:{type:"GenesisPayload",isRequired:!0},events:{type:"array",contains:{type:"Event"},isRequired:!0}}},U4={type:"string"},O4={description:"Representation of a successful healthcheck",properties:{message:{type:"string",isRequired:!0}}},N4={type:"string",description:"All bytes (Vec<u8>) data is represented as hex-encoded string prefixed with `0x` and fulfilled with\n    two hex digits per byte.\n\n    Unlike the `Address` type, HexEncodedBytes will not trim any zeros.\n    ",format:"hex"},D4={type:"string"},L4={description:`The struct holding all data returned to the client by the
    index endpoint (i.e., GET "/").  Only for responding in JSON`,properties:{chain_id:{type:"number",description:"Chain ID of the current chain",isRequired:!0,format:"uint8"},epoch:{type:"U64",isRequired:!0},ledger_version:{type:"U64",isRequired:!0},oldest_ledger_version:{type:"U64",isRequired:!0},ledger_timestamp:{type:"U64",isRequired:!0},node_role:{type:"RoleType",isRequired:!0},oldest_block_height:{type:"U64",isRequired:!0},block_height:{type:"U64",isRequired:!0},git_hash:{type:"string",description:`Git hash of the build of the API endpoint.  Can be used to determine the exact
            software version used by the API endpoint.`}}},$4={properties:{modules:{type:"array",contains:{type:"MoveModuleBytecode"},isRequired:!0}}},q4={type:"string"},F4={description:"Move function",properties:{name:{type:"IdentifierWrapper",isRequired:!0},visibility:{type:"MoveFunctionVisibility",isRequired:!0},is_entry:{type:"boolean",description:"Whether the function can be called as an entry function directly in a transaction",isRequired:!0},is_view:{type:"boolean",description:"Whether the function is a view function or not",isRequired:!0},generic_type_params:{type:"array",contains:{type:"MoveFunctionGenericTypeParam"},isRequired:!0},params:{type:"array",contains:{type:"MoveType"},isRequired:!0},return:{type:"array",contains:{type:"MoveType"},isRequired:!0}}},H4={description:"Move function generic type param",properties:{constraints:{type:"array",contains:{type:"MoveAbility"},isRequired:!0}}},K4={type:"Enum"},z4={description:"A Move module",properties:{address:{type:"Address",isRequired:!0},name:{type:"IdentifierWrapper",isRequired:!0},friends:{type:"array",contains:{type:"MoveModuleId"},isRequired:!0},exposed_functions:{type:"array",contains:{type:"MoveFunction"},isRequired:!0},structs:{type:"array",contains:{type:"MoveStruct"},isRequired:!0}}},j4={description:"Move module bytecode along with it's ABI",properties:{bytecode:{type:"HexEncodedBytes",isRequired:!0},abi:{type:"MoveModule"}}},G4={type:"string",description:`Move module id is a string representation of Move module.

    Format: \`{address}::{module name}\`

    \`address\` should be hex-encoded 32 byte account address that is prefixed with \`0x\`.

    Module name is case-sensitive.
    `},W4={description:"A parsed Move resource",properties:{type:{type:"MoveStructTag",isRequired:!0},data:{type:"MoveStructValue",isRequired:!0}}},V4={description:"Move script bytecode",properties:{bytecode:{type:"HexEncodedBytes",isRequired:!0},abi:{type:"MoveFunction"}}},J4={description:"A move struct",properties:{name:{type:"IdentifierWrapper",isRequired:!0},is_native:{type:"boolean",description:"Whether the struct is a native struct of Move",isRequired:!0},abilities:{type:"array",contains:{type:"MoveAbility"},isRequired:!0},generic_type_params:{type:"array",contains:{type:"MoveStructGenericTypeParam"},isRequired:!0},fields:{type:"array",contains:{type:"MoveStructField"},isRequired:!0}}},Y4={description:"Move struct field",properties:{name:{type:"IdentifierWrapper",isRequired:!0},type:{type:"MoveType",isRequired:!0}}},X4={description:"Move generic type param",properties:{constraints:{type:"array",contains:{type:"MoveAbility"},isRequired:!0}}},Z4={type:"string",description:"String representation of a MoveStructTag (on-chain Move struct type). This exists so you\n    can specify MoveStructTags as path / query parameters, e.g. for get_events_by_event_handle.\n\n    It is a combination of:\n    1. `move_module_address`, `module_name` and `struct_name`, all joined by `::`\n    2. `struct generic type parameters` joined by `, `\n\n    Examples:\n     * `0x1::coin::CoinStore<0x1::aptos_coin::AptosCoin>`\n     * `0x1::account::Account`\n\n    Note:\n    1. Empty chars should be ignored when comparing 2 struct tag ids.\n    2. When used in an URL path, should be encoded by url-encoding (AKA percent-encoding).\n\n    See [doc](https://aptos.dev/concepts/accounts) for more details.\n    ",pattern:"^0x[0-9a-zA-Z:_<>]+$"},Q4={description:'This is a JSON representation of some data within an account resource. More specifically,\n    it is a map of strings to arbitrary JSON values / objects, where the keys are top level\n    fields within the given resource.\n\n    To clarify, you might query for 0x1::account::Account and see the example data.\n\n    Move `bool` type value is serialized into `boolean`.\n\n    Move `u8`, `u16` and `u32` type value is serialized into `integer`.\n\n    Move `u64`, `u128` and `u256` type value is serialized into `string`.\n\n    Move `address` type value (32 byte Aptos account address) is serialized into a HexEncodedBytes string.\n    For example:\n    - `0x1`\n    - `0x1668f6be25668c1a17cd8caf6b8d2f25`\n\n    Move `vector` type value is serialized into `array`, except `vector<u8>` which is serialized into a\n    HexEncodedBytes string with `0x` prefix.\n    For example:\n    - `vector<u64>{255, 255}` => `["255", "255"]`\n    - `vector<u8>{255, 255}` => `0xffff`\n\n    Move `struct` type value is serialized into `object` that looks like this (except some Move stdlib types, see the following section):\n    ```json\n    {\n        field1_name: field1_value,\n        field2_name: field2_value,\n        ......\n    }\n    ```\n\n    For example:\n    `{ "created": "0xa550c18", "role_id": "0" }`\n\n     **Special serialization for Move stdlib types**:\n    - [0x1::string::String](https://github.com/aptos-labs/aptos-core/blob/main/language/move-stdlib/docs/ascii.md)\n    is serialized into `string`. For example, struct value `0x1::string::String{bytes: b"Hello World!"}`\n    is serialized as `"Hello World!"` in JSON.\n    ',properties:{}},eE={type:"string",description:`String representation of an on-chain Move type tag that is exposed in transaction payload.
    Values:
    - bool
    - u8
    - u16
    - u32
    - u64
    - u128
    - u256
    - address
    - signer
    - vector: \`vector<{non-reference MoveTypeId}>\`
    - struct: \`{address}::{module_name}::{struct_name}::<{generic types}>\`

    Vector type value examples:
    - \`vector<u8>\`
    - \`vector<vector<u64>>\`
    - \`vector<0x1::coin::CoinStore<0x1::aptos_coin::AptosCoin>>\`

    Struct type value examples:
    - \`0x1::coin::CoinStore<0x1::aptos_coin::AptosCoin>
    - \`0x1::account::Account\`

    Note:
    1. Empty chars should be ignored when comparing 2 struct tag ids.
    2. When used in an URL path, should be encoded by url-encoding (AKA percent-encoding).
    `,pattern:"^(bool|u8|u64|u128|address|signer|vector<.+>|0x[0-9a-zA-Z:_<, >]+)$"},tE={type:"any-of",description:"An enum of the possible Move value types",contains:[{type:"number",format:"uint8"},{type:"number",format:"uint16"},{type:"number",format:"uint32"},{type:"U64"},{type:"U128"},{type:"U256"},{type:"boolean"},{type:"Address"},{type:"array",contains:{type:"MoveValue"}},{type:"HexEncodedBytes"},{type:"MoveStructValue"},{type:"string"}]},rE={description:`Multi agent signature for multi agent transactions

    This allows you to have transactions across multiple accounts`,properties:{sender:{type:"AccountSignature",isRequired:!0},secondary_signer_addresses:{type:"array",contains:{type:"Address"},isRequired:!0},secondary_signers:{type:"array",contains:{type:"AccountSignature"},isRequired:!0}}},nE={description:`A Ed25519 multi-sig signature

    This allows k-of-n signing for a transaction`,properties:{public_keys:{type:"array",contains:{type:"HexEncodedBytes"},isRequired:!0},signatures:{type:"array",contains:{type:"HexEncodedBytes"},isRequired:!0},threshold:{type:"number",description:"The number of signatures required for a successful transaction",isRequired:!0,format:"uint8"},bitmap:{type:"HexEncodedBytes",isRequired:!0}}},iE={description:`A multisig transaction that allows an owner of a multisig account to execute a pre-approved
    transaction as the multisig account.`,properties:{multisig_address:{type:"Address",isRequired:!0},transaction_payload:{type:"MultisigTransactionPayload"}}},sE={type:"any-of",contains:[{type:"EntryFunctionPayload"}]},aE={description:"A transaction waiting in mempool",properties:{hash:{type:"HashValue",isRequired:!0},sender:{type:"Address",isRequired:!0},sequence_number:{type:"U64",isRequired:!0},max_gas_amount:{type:"U64",isRequired:!0},gas_unit_price:{type:"U64",isRequired:!0},expiration_timestamp_secs:{type:"U64",isRequired:!0},payload:{type:"TransactionPayload",isRequired:!0},signature:{type:"TransactionSignature"}}},oE={description:"Table Item request for the GetTableItemRaw API",properties:{key:{type:"HexEncodedBytes",isRequired:!0}}},cE={type:"Enum"},fE={description:"Payload which runs a script that can run multiple functions",properties:{code:{type:"MoveScriptBytecode",isRequired:!0},type_arguments:{type:"array",contains:{type:"MoveType"},isRequired:!0},arguments:{type:"array",contains:{properties:{}},isRequired:!0}}},uE={properties:{execute_as:{type:"Address",isRequired:!0},script:{type:"ScriptPayload",isRequired:!0}}},lE={description:"A state checkpoint transaction",properties:{version:{type:"U64",isRequired:!0},hash:{type:"HashValue",isRequired:!0},state_change_hash:{type:"HashValue",isRequired:!0},event_root_hash:{type:"HashValue",isRequired:!0},state_checkpoint_hash:{type:"HashValue"},gas_used:{type:"U64",isRequired:!0},success:{type:"boolean",description:"Whether the transaction was successful",isRequired:!0},vm_status:{type:"string",description:"The VM status of the transaction, can tell useful information in a failure",isRequired:!0},accumulator_root_hash:{type:"HashValue",isRequired:!0},changes:{type:"array",contains:{type:"WriteSetChange"},isRequired:!0},timestamp:{type:"U64",isRequired:!0}}},dE={type:"string",description:`Representation of a StateKey as a hex string. This is used for cursor based pagination.
    `},hE={description:`A request to submit a transaction

    This requires a transaction and a signature of it`,properties:{sender:{type:"Address",isRequired:!0},sequence_number:{type:"U64",isRequired:!0},max_gas_amount:{type:"U64",isRequired:!0},gas_unit_price:{type:"U64",isRequired:!0},expiration_timestamp_secs:{type:"U64",isRequired:!0},payload:{type:"TransactionPayload",isRequired:!0},signature:{type:"TransactionSignature",isRequired:!0}}},pE={description:"Table Item request for the GetTableItem API",properties:{key_type:{type:"MoveType",isRequired:!0},value_type:{type:"MoveType",isRequired:!0},key:{description:"The value of the table item's key",properties:{},isRequired:!0}}},xE={type:"one-of",description:"Enum of the different types of transactions in Aptos",contains:[{type:"Transaction_PendingTransaction"},{type:"Transaction_UserTransaction"},{type:"Transaction_GenesisTransaction"},{type:"Transaction_BlockMetadataTransaction"},{type:"Transaction_StateCheckpointTransaction"}]},yE={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"BlockMetadataTransaction"}]},gE={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"GenesisTransaction"}]},bE={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"PendingTransaction"}]},mE={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"StateCheckpointTransaction"}]},wE={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"UserTransaction"}]},vE={type:"one-of",description:"An enum of the possible transaction payloads",contains:[{type:"TransactionPayload_EntryFunctionPayload"},{type:"TransactionPayload_ScriptPayload"},{type:"TransactionPayload_ModuleBundlePayload"},{type:"TransactionPayload_MultisigPayload"}]},_E={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"EntryFunctionPayload"}]},EE={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"ModuleBundlePayload"}]},SE={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"MultisigPayload"}]},AE={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"ScriptPayload"}]},TE={description:"Information telling which batch submission transactions failed",properties:{error:{type:"AptosError",isRequired:!0},transaction_index:{type:"number",description:"The index of which transaction failed, same as submission order",isRequired:!0,format:"uint64"}}},RE={description:`Batch transaction submission result

    Tells which transactions failed`,properties:{transaction_failures:{type:"array",contains:{type:"TransactionsBatchSingleSubmissionFailure"},isRequired:!0}}},PE={type:"one-of",description:"An enum representing the different transaction signatures available",contains:[{type:"TransactionSignature_Ed25519Signature"},{type:"TransactionSignature_MultiEd25519Signature"},{type:"TransactionSignature_MultiAgentSignature"}]},kE={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"Ed25519Signature"}]},ME={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"MultiAgentSignature"}]},CE={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"MultiEd25519Signature"}]},IE={type:"string",description:`A string containing a 128-bit unsigned integer.

    We represent u128 values as a string to ensure compatibility with languages such
    as JavaScript that do not parse u128s in JSON natively.
    `,format:"uint128"},BE={type:"string",description:`A string containing a 256-bit unsigned integer.

    We represent u256 values as a string to ensure compatibility with languages such
    as JavaScript that do not parse u256s in JSON natively.
    `,format:"uint256"},UE={type:"string",description:`A string containing a 64-bit unsigned integer.

    We represent u64 values as a string to ensure compatibility with languages such
    as JavaScript that do not parse u64s in JSON natively.
    `,format:"uint64"},OE={description:"A transaction submitted by a user to change the state of the blockchain",properties:{version:{type:"U64",isRequired:!0},hash:{type:"HashValue",isRequired:!0},state_change_hash:{type:"HashValue",isRequired:!0},event_root_hash:{type:"HashValue",isRequired:!0},state_checkpoint_hash:{type:"HashValue"},gas_used:{type:"U64",isRequired:!0},success:{type:"boolean",description:"Whether the transaction was successful",isRequired:!0},vm_status:{type:"string",description:"The VM status of the transaction, can tell useful information in a failure",isRequired:!0},accumulator_root_hash:{type:"HashValue",isRequired:!0},changes:{type:"array",contains:{type:"WriteSetChange"},isRequired:!0},sender:{type:"Address",isRequired:!0},sequence_number:{type:"U64",isRequired:!0},max_gas_amount:{type:"U64",isRequired:!0},gas_unit_price:{type:"U64",isRequired:!0},expiration_timestamp_secs:{type:"U64",isRequired:!0},payload:{type:"TransactionPayload",isRequired:!0},signature:{type:"TransactionSignature"},events:{type:"array",contains:{type:"Event"},isRequired:!0},timestamp:{type:"U64",isRequired:!0}}},NE={description:"An event from a transaction with a version",properties:{version:{type:"U64",isRequired:!0},guid:{type:"EventGuid",isRequired:!0},sequence_number:{type:"U64",isRequired:!0},type:{type:"MoveType",isRequired:!0},data:{description:"The JSON representation of the event",properties:{},isRequired:!0}}},DE={description:"View request for the Move View Function API",properties:{function:{type:"EntryFunctionId",isRequired:!0},type_arguments:{type:"array",contains:{type:"MoveType"},isRequired:!0},arguments:{type:"array",contains:{properties:{}},isRequired:!0}}},LE={description:"Write a new module or update an existing one",properties:{address:{type:"Address",isRequired:!0},state_key_hash:{type:"string",description:"State key hash",isRequired:!0},data:{type:"MoveModuleBytecode",isRequired:!0}}},$E={description:"Write a resource or update an existing one",properties:{address:{type:"Address",isRequired:!0},state_key_hash:{type:"string",description:"State key hash",isRequired:!0},data:{type:"MoveResource",isRequired:!0}}},qE={type:"one-of",description:"The associated writeset with a payload",contains:[{type:"WriteSet_ScriptWriteSet"},{type:"WriteSet_DirectWriteSet"}]},FE={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"DirectWriteSet"}]},HE={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"ScriptWriteSet"}]},KE={type:"one-of",description:"A final state change of a transaction on a resource or module",contains:[{type:"WriteSetChange_DeleteModule"},{type:"WriteSetChange_DeleteResource"},{type:"WriteSetChange_DeleteTableItem"},{type:"WriteSetChange_WriteModule"},{type:"WriteSetChange_WriteResource"},{type:"WriteSetChange_WriteTableItem"}]},zE={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"DeleteModule"}]},jE={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"DeleteResource"}]},GE={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"DeleteTableItem"}]},WE={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"WriteModule"}]},VE={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"WriteResource"}]},JE={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"WriteTableItem"}]},YE={description:"A writeset payload, used only for genesis",properties:{write_set:{type:"WriteSet",isRequired:!0}}},XE={description:"Change set to write a table item",properties:{state_key_hash:{type:"string",isRequired:!0},handle:{type:"HexEncodedBytes",isRequired:!0},key:{type:"HexEncodedBytes",isRequired:!0},value:{type:"HexEncodedBytes",isRequired:!0},data:{type:"DecodedTableData"}}};function wf(t,e,r){if(!(e!=null&&e.includes(typeof t)))throw new Error(r||`Invalid arg: ${t} type should be ${e instanceof Array?e.join(" or "):e}`)}function lg(t){if(wf(t,["boolean","string"]),typeof t=="boolean")return t;if(t==="true")return!0;if(t==="false")return!1;throw new Error("Invalid boolean string.")}function _s(t){if(wf(t,["number","string"]),typeof t=="number")return t;const e=Number.parseInt(t,10);if(Number.isNaN(e))throw new Error("Invalid number string.");return e}function Es(t){return wf(t,["number","bigint","string"]),BigInt(t)}function dg(t,e,r){if(e instanceof Xi){r.serializeBool(lg(t));return}if(e instanceof ni){r.serializeU8(_s(t));return}if(e instanceof Vs){r.serializeU16(_s(t));return}if(e instanceof Js){r.serializeU32(_s(t));return}if(e instanceof Zi){r.serializeU64(Es(t));return}if(e instanceof Qi){r.serializeU128(Es(t));return}if(e instanceof Ys){r.serializeU256(Es(t));return}if(e instanceof Si){let n;if(typeof t=="string"||t instanceof He)n=Jt.fromHex(t);else if(t instanceof Jt)n=t;else throw new Error("Invalid account address.");n.serialize(r);return}if(e instanceof Xs){if(e.value instanceof ni){if(t instanceof Uint8Array){r.serializeBytes(t);return}if(typeof t=="string"){r.serializeStr(t);return}}if(!Array.isArray(t))throw new Error("Invalid vector args.");r.serializeU32AsUleb128(t.length),t.forEach(n=>dg(n,e.value,r));return}if(e instanceof es){const{address:n,module_name:i,name:s}=e.value;if(`${He.fromUint8Array(n.address).toShortString()}::${i.value}::${s.value}`!="0x1::string::String")throw new Error("The only supported struct arg is of type 0x1::string::String");wf(t,["string"]),r.serializeStr(t);return}throw new Error("Unsupported arg type.")}function ZE(t,e){if(e instanceof Xi)return new yf(lg(t));if(e instanceof ni)return new cf(_s(t));if(e instanceof Vs)return new ff(_s(t));if(e instanceof Js)return new uf(_s(t));if(e instanceof Zi)return new lf(Es(t));if(e instanceof Qi)return new df(Es(t));if(e instanceof Ys)return new hf(Es(t));if(e instanceof Si){let r;if(typeof t=="string"||t instanceof He)r=Jt.fromHex(t);else if(t instanceof Jt)r=t;else throw new Error("Invalid account address.");return new pf(r)}if(e instanceof Xs&&e.value instanceof ni){if(!(t instanceof Uint8Array))throw new Error(`${t} should be an instance of Uint8Array`);return new xf(t)}throw new Error("Unknown type for TransactionArgument.")}var QE="APTOS::RawTransaction",eS="APTOS::RawTransactionWithData",lc=class{constructor(t,e){this.rawTxnBuilder=e,this.signingFunction=t}build(t,e,r){if(!this.rawTxnBuilder)throw new Error("this.rawTxnBuilder doesn't exist.");return this.rawTxnBuilder.build(t,e,r)}static getSigningMessage(t){const e=Us.create();if(t instanceof Qs)e.update(QE);else if(t instanceof nf)e.update(eS);else throw new Error("Unknown transaction type.");const r=e.digest(),n=Pi(t),i=new Uint8Array(r.length+n.length);return i.set(r),i.set(n,r.length),i}},Ko=class extends lc{constructor(t,e,r){super(t,r),this.publicKey=e}rawToSigned(t){const e=lc.getSigningMessage(t),r=this.signingFunction(e),n=new ef(new on(this.publicKey),r);return new ao(t,n)}sign(t){return Pi(this.rawToSigned(t))}},tS=class extends lc{constructor(t,e){super(t),this.publicKey=e}rawToSigned(t){const e=lc.getSigningMessage(t),r=this.signingFunction(e),n=new tf(this.publicKey,r);return new ao(t,n)}sign(t){return Pi(this.rawToSigned(t))}},Fu=class{constructor(t,e){this.abiMap=new Map,t.forEach(r=>{const n=new Jl(r),i=gf.deserialize(n);let s;if(i instanceof Ds){const a=i,{address:o,name:c}=a.module_name;s=`${He.fromUint8Array(o.address).toShortString()}::${c.value}::${a.name}`}else s=i.name;if(this.abiMap.has(s))throw new Error("Found conflicting ABI interfaces");this.abiMap.set(s,i)}),this.builderConfig={maxGasAmount:BigInt($y),expSecFromNow:qy,...e}}static toBCSArgs(t,e){if(t.length!==e.length)throw new Error("Wrong number of args provided.");return e.map((r,n)=>{const i=new nr;return dg(r,t[n].type_tag,i),i.getBytes()})}static toTransactionArguments(t,e){if(t.length!==e.length)throw new Error("Wrong number of args provided.");return e.map((r,n)=>ZE(r,t[n].type_tag))}setSequenceNumber(t){this.builderConfig.sequenceNumber=BigInt(t)}buildTransactionPayload(t,e,r){const n=e.map(a=>new Zs(a).parseTypeTag());let i;if(!this.abiMap.has(t))throw new Error(`Cannot find function: ${t}`);const s=this.abiMap.get(t);if(s instanceof Ds){const a=s,o=Fu.toBCSArgs(a.args,r);i=new af(new Ui(a.module_name,new kr(a.name),n,o))}else if(s instanceof bf){const a=s,o=Fu.toTransactionArguments(a.args,r);i=new sf(new rf(a.code,n,o))}else throw new Error("Unknown ABI format.");return i}build(t,e,r){const{sender:n,sequenceNumber:i,gasUnitPrice:s,maxGasAmount:a,expSecFromNow:o,chainId:c}=this.builderConfig;if(!s)throw new Error("No gasUnitPrice provided.");const u=n instanceof Jt?n:Jt.fromHex(n),h=BigInt(Math.floor(Date.now()/1e3)+Number(o)),p=this.buildTransactionPayload(t,e,r);if(p)return new Qs(u,BigInt(i),p,BigInt(a),BigInt(s),h,new of(Number(c)));throw new Error("Invalid ABI.")}},sd=class{constructor(t,e){this.aptosClient=t,this.builderConfig=e}async fetchABI(t){const r=(await this.aptosClient.getAccountModules(t)).map(i=>i.abi).flatMap(i=>i.exposed_functions.filter(s=>s.is_entry).map(s=>({fullName:`${i.address}::${i.name}::${s.name}`,...s}))),n=new Map;return r.forEach(i=>{n.set(i.fullName,i)}),n}async build(t,e,r){if(t=(z=>z.replace(/^0[xX]0*/g,"0x"))(t),t.split("::").length!==3)throw new Error("'func' needs to be a fully qualified function name in format <address>::<module>::<function>, e.g. 0x1::coins::transfer");const[s,a]=t.split("::"),o=await this.fetchABI(s);if(!o.has(t))throw new Error(`${t} doesn't exist.`);const c=o.get(t),h=c.params.filter(z=>z!=="signer"&&z!=="&signer").map((z,D)=>new fo(`var${D}`,new Zs(z,e).parseTypeTag())),p=new Ds(c.name,Hi.fromStr(`${s}::${a}`),"",c.generic_type_params.map((z,D)=>new co(`${D}`)),h),{sender:m,...P}=this.builderConfig,M=m instanceof Jt?He.fromUint8Array(m.address):m,[{sequence_number:R},E,{gas_estimate:L}]=await Promise.all([P!=null&&P.sequenceNumber?Promise.resolve({sequence_number:P==null?void 0:P.sequenceNumber}):this.aptosClient.getAccount(M),P!=null&&P.chainId?Promise.resolve(P==null?void 0:P.chainId):this.aptosClient.getChainId(),P!=null&&P.gasUnitPrice?Promise.resolve({gas_estimate:P==null?void 0:P.gasUnitPrice}):this.aptosClient.estimateGasPrice()]);return new Fu([Pi(p)],{sender:m,sequenceNumber:R,chainId:E,gasUnitPrice:BigInt(L),...P}).build(t,e,r)}};Pt([f8(10*60*1e3)],sd.prototype,"fetchABI",1);var ha=class{constructor(t,e,r=!1){if(!t)throw new Error("Node URL cannot be empty.");const n=e==null?{}:{...e};r?this.nodeUrl=t:this.nodeUrl=a8(t),n.BASE=this.nodeUrl,(e==null?void 0:e.WITH_CREDENTIALS)===!1?n.WITH_CREDENTIALS=!1:n.WITH_CREDENTIALS=!0,this.client=new og(n)}async getAccount(t){return this.client.accounts.getAccount(He.ensure(t).hex())}async getAccountTransactions(t,e){var r;return this.client.transactions.getAccountTransactions(He.ensure(t).hex(),(r=e==null?void 0:e.start)==null?void 0:r.toString(),e==null?void 0:e.limit)}async getAccountModules(t,e){const r=this.client.accounts.getAccountModules.bind({httpRequest:this.client.request});return await V0(r,t,1e3,e)}async getAccountModule(t,e,r){var n;return this.client.accounts.getAccountModule(He.ensure(t).hex(),e,(n=r==null?void 0:r.ledgerVersion)==null?void 0:n.toString())}async getAccountResources(t,e){const r=this.client.accounts.getAccountResources.bind({httpRequest:this.client.request});return await V0(r,t,9999,e)}async getAccountResource(t,e,r){var n;return this.client.accounts.getAccountResource(He.ensure(t).hex(),e,(n=r==null?void 0:r.ledgerVersion)==null?void 0:n.toString())}static generateBCSTransaction(t,e){return new Ko(n=>{const i=t.signBuffer(n);return new or.Ed25519Signature(i.toUint8Array())},t.pubKey().toUint8Array()).sign(e)}static generateBCSSimulation(t,e){return new Ko(n=>{const i=new Uint8Array(64);return new or.Ed25519Signature(i)},t.pubKey().toUint8Array()).sign(e)}async generateTransaction(t,e,r){const n={sender:t};if(r!=null&&r.sequence_number&&(n.sequenceNumber=r.sequence_number),r!=null&&r.gas_unit_price&&(n.gasUnitPrice=r.gas_unit_price),r!=null&&r.max_gas_amount&&(n.maxGasAmount=r.max_gas_amount),r!=null&&r.expiration_timestamp_secs){const s=Number.parseInt(r.expiration_timestamp_secs,10);n.expSecFromNow=s-Math.floor(Date.now()/1e3)}return new sd(this,n).build(e.function,e.type_arguments,e.arguments)}async signTransaction(t,e){return Promise.resolve(ha.generateBCSTransaction(t,e))}async getEventsByCreationNumber(t,e,r){var n;return this.client.events.getEventsByCreationNumber(He.ensure(t).hex(),e.toString(),(n=r==null?void 0:r.start)==null?void 0:n.toString(),r==null?void 0:r.limit)}async getEventsByEventHandle(t,e,r,n){var i;return this.client.events.getEventsByEventHandle(He.ensure(t).hex(),e,r,(i=n==null?void 0:n.start)==null?void 0:i.toString(),n==null?void 0:n.limit)}async submitTransaction(t){return this.submitSignedBCSTransaction(t)}async simulateTransaction(t,e,r){let n;return t instanceof qu?n=ha.generateBCSSimulation(t,e):t instanceof io?n=new tS(()=>{const{threshold:s}=t,a=[],o=[];for(let u=0;u<s;u+=1)a.push(u),o.push(new or.Ed25519Signature(new Uint8Array(64)));const c=or.MultiEd25519Signature.createBitmap(a);return new or.MultiEd25519Signature(o,c)},t).sign(e):n=new Ko(()=>{const s=new Uint8Array(64);return new or.Ed25519Signature(s)},t.toBytes()).sign(e),this.submitBCSSimulation(n,r)}async submitSignedBCSTransaction(t){return this.client.request.request({url:"/transactions",method:"POST",body:t,mediaType:"application/x.aptos.signed_transaction+bcs"})}async submitBCSSimulation(t,e){var r,n,i;const s={estimate_gas_unit_price:(r=e==null?void 0:e.estimateGasUnitPrice)!=null?r:!1,estimate_max_gas_amount:(n=e==null?void 0:e.estimateMaxGasAmount)!=null?n:!1,estimate_prioritized_gas_unit_price:(i=e==null?void 0:e.estimatePrioritizedGasUnitPrice)!=null?i:!1};return this.client.request.request({url:"/transactions/simulate",query:s,method:"POST",body:t,mediaType:"application/x.aptos.signed_transaction+bcs"})}async getTransactions(t){var e;return this.client.transactions.getTransactions((e=t==null?void 0:t.start)==null?void 0:e.toString(),t==null?void 0:t.limit)}async getTransactionByHash(t){return this.client.transactions.getTransactionByHash(t)}async getTransactionByVersion(t){return this.client.transactions.getTransactionByVersion(t.toString())}async transactionPending(t){try{return(await this.client.transactions.getTransactionByHash(t)).type==="pending_transaction"}catch(e){if((e==null?void 0:e.status)===404)return!0;throw e}}async waitForTransactionWithResult(t,e){var r,n;const i=(r=e==null?void 0:e.timeoutSecs)!=null?r:o8,s=(n=e==null?void 0:e.checkSuccess)!=null?n:!1;let a=!0,o=0,c;for(;a&&!(o>=i);){try{if(c=await this.client.transactions.getTransactionByHash(t),a=c.type==="pending_transaction",!a)break}catch(u){const h=u instanceof Oa,p=h&&u.status!==404&&u.status>=400&&u.status<500;if(!h||p)throw u}await s8(1e3),o+=1}if(c===void 0)throw new Error(`Waiting for transaction ${t} failed`);if(a)throw new nS(`Waiting for transaction ${t} timed out after ${i} seconds`,c);if(!s)return c;if(!(c!=null&&c.success))throw new iS(`Transaction ${t} committed to the blockchain but execution failed`,c);return c}async waitForTransaction(t,e){await this.waitForTransactionWithResult(t,e)}async getLedgerInfo(){return this.client.general.getLedgerInfo()}async getChainId(){return(await this.getLedgerInfo()).chain_id}async getTableItem(t,e,r){var n;return await this.client.tables.getTableItem(t,e,(n=r==null?void 0:r.ledgerVersion)==null?void 0:n.toString())}async generateRawTransaction(t,e,r){const[{sequence_number:n},i,{gas_estimate:s}]=await Promise.all([this.getAccount(t),this.getChainId(),r!=null&&r.gasUnitPrice?Promise.resolve({gas_estimate:r.gasUnitPrice}):this.estimateGasPrice()]),{maxGasAmount:a,gasUnitPrice:o,expireTimestamp:c}={maxGasAmount:BigInt($y),gasUnitPrice:BigInt(s),expireTimestamp:BigInt(Math.floor(Date.now()/1e3)+qy),...r};return new or.RawTransaction(or.AccountAddress.fromHex(t),BigInt(n),e,a,o,c,new or.ChainId(i))}async generateSignSubmitTransaction(t,e,r){const n=await this.generateRawTransaction(t.address(),e,r),i=ha.generateBCSTransaction(t,n);return(await this.submitSignedBCSTransaction(i)).hash}async publishPackage(t,e,r,n){const i=new nr;Gr(r,i);const s=new or.TransactionPayloadEntryFunction(or.EntryFunction.natural("0x1::code","publish_package_txn",[],[hs(e),i.getBytes()]));return this.generateSignSubmitTransaction(t,s,n)}async generateSignSubmitWaitForTransaction(t,e,r){const n=await this.generateSignSubmitTransaction(t,e,r);return this.waitForTransactionWithResult(n,r)}async estimateGasPrice(){return this.client.transactions.estimateGasPrice()}async estimateMaxGasAmount(t){const e=`0x1::coin::CoinStore<${c8}>`,[{gas_estimate:r},n]=await Promise.all([this.estimateGasPrice(),this.getAccountResources(t)]),i=n.find(a=>a.type===e);return BigInt(i.data.coin.value)/BigInt(r)}async rotateAuthKeyEd25519(t,e,r){const{sequence_number:n,authentication_key:i}=await this.getAccount(t.address()),s=new qu(e),a=new or.RotationProofChallenge(or.AccountAddress.CORE_CODE_ADDRESS,"account","RotationProofChallenge",BigInt(n),or.AccountAddress.fromHex(t.address()),new or.AccountAddress(new He(i).toUint8Array()),s.pubKey().toUint8Array()),o=He.fromUint8Array(Pi(a)),c=t.signHexString(o),u=s.signHexString(o),h=new or.TransactionPayloadEntryFunction(or.EntryFunction.natural("0x1::account","rotate_authentication_key",[],[Lu(0),hs(t.pubKey().toUint8Array()),Lu(0),hs(s.pubKey().toUint8Array()),hs(c.toUint8Array()),hs(u.toUint8Array())])),p=await this.generateRawTransaction(t.address(),h,r),m=ha.generateBCSTransaction(t,p);return this.submitSignedBCSTransaction(m)}async lookupOriginalAddress(t){const e=await this.getAccountResource("0x1","0x1::account::OriginatingAddress"),{address_map:{handle:r}}=e.data,n=await this.getTableItem(r,{key_type:"address",value_type:"address",key:He.ensure(t).hex()});return new He(n)}async getBlockByHeight(t,e){return this.client.blocks.getBlockByHeight(t,e)}async getBlockByVersion(t,e){return this.client.blocks.getBlockByVersion(t,e)}async view(t,e){return this.client.view.view(t,e)}clearCache(t){u8(t)}},Gt=ha;Pt([sr],Gt.prototype,"getAccount",1);Pt([sr],Gt.prototype,"getAccountTransactions",1);Pt([sr],Gt.prototype,"getAccountModules",1);Pt([sr],Gt.prototype,"getAccountModule",1);Pt([sr],Gt.prototype,"getAccountResources",1);Pt([sr],Gt.prototype,"getAccountResource",1);Pt([sr],Gt.prototype,"getEventsByCreationNumber",1);Pt([sr],Gt.prototype,"getEventsByEventHandle",1);Pt([sr],Gt.prototype,"submitSignedBCSTransaction",1);Pt([sr],Gt.prototype,"submitBCSSimulation",1);Pt([sr],Gt.prototype,"getTransactions",1);Pt([sr],Gt.prototype,"getTransactionByHash",1);Pt([sr],Gt.prototype,"getTransactionByVersion",1);Pt([sr],Gt.prototype,"getLedgerInfo",1);Pt([Zc()],Gt.prototype,"getChainId",1);Pt([sr],Gt.prototype,"getTableItem",1);Pt([sr,Zc({ttlMs:5*60*1e3,tags:["gas_estimates"]})],Gt.prototype,"estimateGasPrice",1);Pt([sr],Gt.prototype,"estimateMaxGasAmount",1);Pt([sr],Gt.prototype,"getBlockByHeight",1);Pt([sr],Gt.prototype,"getBlockByVersion",1);Pt([sr],Gt.prototype,"view",1);var rS=class extends Error{constructor(t,e,r,n){super(e),this.status=t,this.message=e,this.errorCode=r,this.vmErrorCode=n}},nS=class extends Error{constructor(t,e){super(t),this.lastSubmittedTransaction=e}},iS=class extends Error{constructor(t,e){super(t),this.transaction=e}};function sr(t,e,r){const n=r.value;return r.value=async function(...s){var a,o;try{return await n.apply(this,[...s])}catch(c){throw c instanceof Oa?new rS(c.status,JSON.stringify({message:c.message,...c.body}),(a=c.body)==null?void 0:a.error_code,(o=c.body)==null?void 0:o.vm_error_code):c}},r}var hg=class{constructor(t,e,r=!1){let n=null,i=null;if(typeof t=="object"&&sS(t)?(n=t.fullnodeUrl,i=t.indexerUrl,this.network="CUSTOM"):(n=d8[t],i=l8[t],this.network=t),!n||!i)throw new Error("network is not provided");this.aptosClient=new Gt(n,e,r),this.indexerClient=new Bn(i)}};function pg(t,e,r){Object.getOwnPropertyNames(e.prototype).forEach(n=>{const i=Object.getOwnPropertyDescriptor(e.prototype,n);i&&(i.value=function(...s){return this[r][n](...s)},Object.defineProperty(t.prototype,n,i))})}pg(hg,Gt,"aptosClient");pg(hg,Bn,"indexerClient");function sS(t){return t.fullnodeUrl!==void 0&&typeof t.fullnodeUrl=="string"&&t.indexerUrl!==void 0&&typeof t.indexerUrl=="string"}var xg=class{constructor(t,e){this.type=t,this.value=e}},yg=class{constructor(){this.data={}}setProperty(t,e){this.data[t]=e}};function aS(t){let e;return t==="string"||t==="String"?e=new es(Ky):e=new Zs(t).parseTypeTag(),e}function gg(t){const e=t.map.data,r=new yg;return e.forEach(n=>{const{key:i}=n,s=n.value.value,a=n.value.type,o=aS(a),c=oS(o,s),u=new xg(a,c);r.setProperty(i,u)}),r}function oS(t,e){const r=new Jl(new He(e).toUint8Array());let n="";return t instanceof ni?n=r.deserializeU8().toString():t instanceof Zi?n=r.deserializeU64().toString():t instanceof Qi?n=r.deserializeU128().toString():t instanceof Xi?n=r.deserializeBool()?"true":"false":t instanceof Si?n=He.fromUint8Array(r.deserializeFixedBytes(32)).hex():t instanceof es&&t.isStringTypeTag()?n=r.deserializeStr():n=e,n}var cS={};Xc(cS,{PropertyMap:()=>yg,PropertyValue:()=>xg,Token:()=>uS,TokenData:()=>fS});var fS=class{constructor(t,e,r,n,i,s,a,o){this.collection=t,this.description=e,this.name=r,this.maximum=n,this.supply=i,this.uri=s,this.default_properties=gg(a),this.mutability_config=o}},uS=class{constructor(t,e,r){this.id=t,this.amount=e,this.token_properties=gg(r)}};class lS extends Rc{constructor(r){super(r);N(this,"signerInstance");N(this,"_publicKey");this.base=["aptom",1e8]}async getProvider(){return this.providerInstance??(this.providerInstance=new Gt(this.providerUrl))}async getTx(r){const i=await(await this.getProvider()).waitForTransactionWithResult(r,{timeoutSecs:1,checkSuccess:!0}),s=i==null?void 0:i.payload;if(!i.success)throw new Error((i==null?void 0:i.vm_status)??"Unknown Aptos error");if(!((s==null?void 0:s.function)==="0x1::coin::transfer"&&(s==null?void 0:s.type_arguments[0])==="0x1::aptos_coin::AptosCoin"&&(i==null?void 0:i.vm_status)==="Executed successfully"))throw new Error(`Aptos tx ${r} failed validation`);const a=i.type==="pending_transaction";return{to:s.arguments[0],from:i.sender,amount:new qe(s.arguments[1]),pending:a,confirmed:!a}}ownerToAddress(r){const n=fh.sha3_256.create();return n.update(ue.from(r)),n.update("\0"),`0x${n.hex()}`}async sign(r){return await this.getSigner().sign(r)}getSigner(){return this.signerInstance??(this.signerInstance=new ec(this.wallet,this._publicKey))}async verify(r,n,i){return await ec.verify(r,n,i)}async getCurrentHeight(){return new qe((await(await this.getProvider()).client.blocks.httpRequest.request({method:"GET",url:"/"})).block_height)}async getFee(r,n){const i=await this.getProvider();if(!this.address)throw new Error("Address is undefined - you might be missing a wallet, or have not run Irys.ready()");const a=await new sd(i,{sender:this.address}).build("0x1::coin::transfer",["0x1::aptos_coin::AptosCoin"],[n??"0x149f7dc9c8e43c14ab46d3a6b62cfe84d67668f764277411f98732bf6718acf9",new qe(r).toNumber()]),c=new Ko(p=>{const m=new Uint8Array(64);return new or.Ed25519Signature(m)},await this.getPublicKey()).sign(a),u={estimate_gas_unit_price:!0,estimate_max_gas_amount:!0},h=await i.client.request.request({url:"/transactions/simulate",query:u,method:"POST",body:c,mediaType:"application/x.aptos.signed_transaction+bcs"});return{gasUnitPrice:+h[0].gas_unit_price,maxGasAmount:+h[0].max_gas_amount}}async sendTx(r){return(await this.wallet.signAndSubmitTransaction(r)).hash}async createTx(r,n,i){return{txId:void 0,tx:{arguments:[n,new qe(r).toNumber()],function:"0x1::coin::transfer",type:"entry_function_payload",type_arguments:["0x1::aptos_coin::AptosCoin"]}}}async getPublicKey(){return this._publicKey??(this._publicKey=ue.from((await this.wallet.account()).publicKey.toString().slice(2),"hex"))}async ready(){var n;this._publicKey=await this.getPublicKey(),this._address=this.ownerToAddress(this._publicKey);const r=await this.getProvider();this._address=await r.lookupOriginalAddress(this.address??"").then(i=>i.toString()).catch(i=>this._address),((n=this._address)==null?void 0:n.length)==66&&this._address.charAt(2)==="0"&&(this._address=this._address.slice(0,2)+this._address.slice(3))}}class dS extends Pc{}class hS extends Pc{async createTx(e,r,n){const i=this.w3signer,s={to:r,from:this.address,value:e.toString(),gasLimit:BigInt(0)},a=await this.provider.estimateGas(s);return s.gasLimit=a,{tx:await i.populateTransaction(s),txId:void 0}}async getTx(e){const n=await this.provider.getTransaction(e);if(!n)throw new Error("Tx doesn't exist");if(!n.to)throw new Error(`Unable to resolve transactions ${e} receiver`);return{from:n.from,to:n.to,blockHeight:n.blockNumber?new qe(n.blockNumber):void 0,amount:new qe(n.value.toString()),pending:!n.blockNumber,confirmed:await n.confirmations()>=this.minConfirm}}async ready(){const e=this.wallet;this.provider=e;const r=await e.getSigner();r._signTypedData=async(n,i,s)=>r.signTypedData(n,i,s),e.getSigner=()=>r,this.wallet=e,await super.ready()}}function pS(t){switch(t.token){case"ethereum":return fs("ethereum",t.providerName,{irys:t.irys,name:"ethereum",ticker:"ETH",providerUrl:t.providerUrl??"https://cloudflare-eth.com/",wallet:t.wallet});case"matic":return fs("ethereum",t.providerName,{irys:t.irys,name:"matic",ticker:"MATIC",providerUrl:t.providerUrl??"https://polygon-rpc.com",wallet:t.wallet,minConfirm:1});case"arbitrum":return fs("ethereum",t.providerName,{irys:t.irys,name:"arbitrum",ticker:"ETH",providerUrl:t.providerUrl??"https://arb1.arbitrum.io/rpc",wallet:t.wallet});case"bnb":return fs("ethereum",t.providerName,{irys:t.irys,name:"bnb",ticker:"BNB",providerUrl:t.providerUrl??"https://bsc-dataseed.binance.org",wallet:t.wallet});case"avalanche":return fs("ethereum",t.providerName,{irys:t.irys,name:"avalanche",ticker:"AVAX",providerUrl:t.providerUrl??"https://api.avax.network/ext/bc/C/rpc",wallet:t.wallet});case"boba-eth":return fs("ethereum",t.providerName,{irys:t.irys,name:"boba-eth",ticker:"ETH",providerUrl:t.providerUrl??"https://mainnet.boba.network/",minConfirm:1,wallet:t.wallet});case"boba":{const e=new A3({irys:t.irys,name:"boba",ticker:"BOBA",providerUrl:t.providerUrl??"https://mainnet.boba.network/",contractAddress:t.contractAddress??"0xa18bF3994C0Cc6E3b63ac420308E5383f53120D7",minConfirm:1,wallet:t.wallet});return e.price=async()=>{var n;const r=await jt.post("https://api.livecoinwatch.com/coins/single",JSON.stringify({currency:"USD",code:`${e.ticker}`}),{headers:{"x-api-key":"75a7a824-6577-45e6-ad86-511d590c7cc8","content-type":"application/json"}});if(await yr.checkAndThrow(r,"Getting price data"),!((n=r==null?void 0:r.data)!=null&&n.rate))throw new Error(`unable to get price for ${e.name}`);return+r.data.rate},e}case"solana":return new W6({irys:t.irys,name:"solana",ticker:"SOL",providerUrl:t.providerUrl??"https://api.mainnet-beta.solana.com/",wallet:t.wallet});case"near":return new G6({irys:t.irys,name:"near",ticker:"NEAR",providerUrl:t.providerUrl??"https://rpc.mainnet.near.org",wallet:t.wallet});case"aptos":return new lS({irys:t.irys,name:"aptos",ticker:"APTOS",providerUrl:t.providerUrl??"https://fullnode.mainnet.aptoslabs.com/v1",wallet:t.wallet});default:throw new Error(`Unknown/Unsupported token ${t.token}`)}}function fs(t,e,r){switch(t){case"ethereum":switch(e){case"ethersv5":return new dS(r);case"ethersv6":return new hS(r);default:return new Pc(r)}}}class xS{constructor(e){N(this,"irys");this.irys=e}async upload(e,r){return this.irys.uploadWithReceipt(e,r)}async uploadProof(e){return await this.irys.uploadWithReceipt("",{tags:Object.entries({dataProtocol:"Provenance-Confirmation",...e}).map(([r,n])=>({name:X0[r],value:n}))})}async getAllProofs(e,r){var o,c;const n=Object.entries(e).map(([u,h])=>({name:X0[u],values:[h]}));if(n.length===0)throw new Error("Getting a provenance proof requires at least one query element");const i=`
    query ($tags: [TagFilter!]) {
      transactions(tags: $tags) {
        edges {
          node {
            id
            receipt {
              deadlineHeight
              signature
              timestamp
              version
            }
            tags {
              name
              value
            }
          }
        }
      }
    }
    `,s=[];let a=null;do{const u=await this.irys.api.post("/graphql",{query:i,variables:{tags:n,limit:(r==null?void 0:r.limit)??null,after:a}},void 0);a=(c=(o=u.data.data.transactions)==null?void 0:o.pageInfo)!=null&&c.hasNextPage?u.data.data.transactions.pageInfo.endCursor:null,s.push(...u.data.data.transactions.edges.map(h=>h.node))}while(a);return s}async getProof(e){const r=(await this.getAllProofs(e,{limit:1})).at(0);if(!r)throw new Error(`Unable to locate proof with fields ${JSON.stringify(e)}`);return r}}const X0={dataProtocol:"Data-Protocol",hashingAlgo:"Hashing-Algo",dataHash:"Data-Hash",uploadedFor:"Uploaded-For",prompt:"Prompt",promptHash:"Prompt-Hash",model:"Model"};class yS{constructor(e){N(this,"irys");this.irys=e}async getById(e){const r=(await this.query({ids:[e],limit:1})).at(0);if(!r)throw new Error(`Unable to locate tx with id ${e}`);return r}async getByOwner(e){const r=(await this.query({owners:[e],limit:1})).at(0);if(!r)throw new Error(`Unable to locate tx with owner ${e}`);return r}async getByTag(e,r){const n=(await this.query({tags:[{name:e,values:[r]}],limit:1})).at(0);if(!n)throw new Error(`Unable to locate tx with tag ${e}:${r}`);return n}async query(e){var s,a;const r=`
    query ($ids: [String!], $after: String, $currency: String, $owners: [String!], $limit: Int, $order: SortOrder, $hasTags: Boolean, $tags: [TagFilter!]) {
      transactions(ids: $ids, after: $after, currency: $currency, owners: $owners, limit: $limit, order: $order, hasTags: $hasTags, tags: $tags) {
        edges {
          cursor
          node {
            address
            currency
            id
            receipt {
              deadlineHeight
              signature
              timestamp
              version
            }
            signature
            tags {
              name
              value
            }
            timestamp
          }
        }
        pageInfo {
          endCursor
          hasNextPage
        }
      }
    }
    `,n=[];let i=null;do{const o=await this.irys.api.post("/graphql",{query:r,variables:{...e,after:i??e.after}},void 0);i=(a=(s=o.data.data.transactions)==null?void 0:s.pageInfo)!=null&&a.hasNextPage?o.data.data.transactions.pageInfo.endCursor:null,n.push(...o.data.data.transactions.edges.map(c=>c.node))}while(i);return n}}var bg={},aa={},oa={},uo={};Object.defineProperty(uo,"__esModule",{value:!0});uo.ValidationError=void 0;class gS extends Error{constructor(e){super(e),Error.captureStackTrace&&typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,this.constructor)}static createFrom(e){return new this(e)}}uo.ValidationError=gS;var lo={};Object.defineProperty(lo,"__esModule",{value:!0});lo.PromisePoolError=void 0;class bS extends Error{constructor(e,r){super(),this.raw=e,this.item=r,this.name=this.constructor.name,this.message=this.messageFrom(e),Error.captureStackTrace&&typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,this.constructor)}static createFrom(e,r){return new this(e,r)}messageFrom(e){return e instanceof Error||typeof e=="object"?e.message:typeof e=="string"||typeof e=="number"?e.toString():""}}lo.PromisePoolError=bS;var ho={};Object.defineProperty(ho,"__esModule",{value:!0});ho.StopThePromisePoolError=void 0;class mS extends Error{}ho.StopThePromisePoolError=mS;var Z0;function wS(){if(Z0)return oa;Z0=1,Object.defineProperty(oa,"__esModule",{value:!0}),oa.PromisePoolExecutor=void 0;const t=Hu(),e=uo,r=lo,n=ho;class i{constructor(){this.meta={tasks:[],items:[],errors:[],results:[],stopped:!1,concurrency:10,shouldResultsCorrespond:!1,processedItems:[],taskTimeout:0},this.handler=a=>a,this.errorHandler=void 0,this.onTaskStartedHandlers=[],this.onTaskFinishedHandlers=[]}useConcurrency(a){if(!this.isValidConcurrency(a))throw e.ValidationError.createFrom(`"concurrency" must be a number, 1 or up. Received "${a}" (${typeof a})`);return this.meta.concurrency=a,this}isValidConcurrency(a){return typeof a=="number"&&a>=1}withTaskTimeout(a){return this.meta.taskTimeout=a,this}concurrency(){return this.meta.concurrency}useCorrespondingResults(a){return this.meta.shouldResultsCorrespond=a,this}shouldUseCorrespondingResults(){return this.meta.shouldResultsCorrespond}taskTimeout(){return this.meta.taskTimeout}for(a){return this.meta.items=a,this}items(){return this.meta.items}itemsCount(){const a=this.items();return Array.isArray(a)?a.length:NaN}tasks(){return this.meta.tasks}activeTaskCount(){return this.activeTasksCount()}activeTasksCount(){return this.tasks().length}processedItems(){return this.meta.processedItems}processedCount(){return this.processedItems().length}processedPercentage(){return this.processedCount()/this.itemsCount()*100}results(){return this.meta.results}errors(){return this.meta.errors}withHandler(a){return this.handler=a,this}hasErrorHandler(){return!!this.errorHandler}handleError(a){return this.errorHandler=a,this}onTaskStarted(a){return this.onTaskStartedHandlers=a,this}onTaskFinished(a){return this.onTaskFinishedHandlers=a,this}hasReachedConcurrencyLimit(){return this.activeTasksCount()>=this.concurrency()}stop(){throw this.markAsStopped(),new n.StopThePromisePoolError}markAsStopped(){return this.meta.stopped=!0,this}isStopped(){return this.meta.stopped}async start(){return await this.validateInputs().prepareResultsArray().process()}validateInputs(){if(typeof this.handler!="function")throw e.ValidationError.createFrom("The first parameter for the .process(fn) method must be a function");const a=this.taskTimeout();if(!(a==null||typeof a=="number"&&a>=0))throw e.ValidationError.createFrom(`"timeout" must be undefined or a number. A number must be 0 or up. Received "${String(a)}" (${typeof a})`);if(!this.areItemsValid())throw e.ValidationError.createFrom(`"items" must be an array, an iterable or an async iterable. Received "${typeof this.items()}"`);if(this.errorHandler&&typeof this.errorHandler!="function")throw e.ValidationError.createFrom(`The error handler must be a function. Received "${typeof this.errorHandler}"`);return this.onTaskStartedHandlers.forEach(o=>{if(o&&typeof o!="function")throw e.ValidationError.createFrom(`The onTaskStarted handler must be a function. Received "${typeof o}"`)}),this.onTaskFinishedHandlers.forEach(o=>{if(o&&typeof o!="function")throw e.ValidationError.createFrom(`The error handler must be a function. Received "${typeof o}"`)}),this}areItemsValid(){const a=this.items();return!!(Array.isArray(a)||typeof a[Symbol.iterator]=="function"||typeof a[Symbol.asyncIterator]=="function")}prepareResultsArray(){const a=this.items();return Array.isArray(a)?this.shouldUseCorrespondingResults()?(this.meta.results=Array(a.length).fill(t.PromisePool.notRun),this):this:this}async process(){let a=0;for await(const o of this.items()){if(this.isStopped())break;this.shouldUseCorrespondingResults()&&(this.results()[a]=t.PromisePool.notRun),this.startProcessing(o,a),a+=1,await this.waitForProcessingSlot()}return await this.drained()}async waitForProcessingSlot(){for(;this.hasReachedConcurrencyLimit();)await this.waitForActiveTaskToFinish()}async waitForActiveTaskToFinish(){await Promise.race(this.tasks())}startProcessing(a,o){const c=this.createTaskFor(a,o).then(u=>{this.save(u,o).removeActive(c)}).catch(async u=>{await this.handleErrorFor(u,a,o),this.removeActive(c)}).finally(()=>{this.processedItems().push(a),this.runOnTaskFinishedHandlers(a)});this.tasks().push(c),this.runOnTaskStartedHandlers(a)}async createTaskFor(a,o){if(this.taskTimeout()===void 0)return this.handler(a,o,this);const[c,u]=this.createTaskTimeout(a);return Promise.race([this.handler(a,o,this),c()]).finally(u)}createTaskTimeout(a){let o;return[async()=>new Promise((h,p)=>{o=setTimeout(()=>{p(new r.PromisePoolError(`Task in promise pool timed out after ${this.taskTimeout()}ms`,a))},this.taskTimeout())}),()=>clearTimeout(o)]}save(a,o){return this.shouldUseCorrespondingResults()?this.results()[o]=a:this.results().push(a),this}removeActive(a){return this.tasks().splice(this.tasks().indexOf(a),1),this}async handleErrorFor(a,o,c){if(this.shouldUseCorrespondingResults()&&(this.results()[c]=t.PromisePool.failed),!this.isStoppingThePoolError(a)){if(this.isValidationError(a))throw this.markAsStopped(),a;this.hasErrorHandler()?await this.runErrorHandlerFor(a,o):this.saveErrorFor(a,o)}}isStoppingThePoolError(a){return a instanceof n.StopThePromisePoolError}isValidationError(a){return a instanceof e.ValidationError}async runErrorHandlerFor(a,o){var c;try{await((c=this.errorHandler)==null?void 0:c.call(this,a,o,this))}catch(u){this.rethrowIfNotStoppingThePool(u)}}runOnTaskStartedHandlers(a){this.onTaskStartedHandlers.forEach(o=>{o(a,this)})}runOnTaskFinishedHandlers(a){this.onTaskFinishedHandlers.forEach(o=>{o(a,this)})}rethrowIfNotStoppingThePool(a){if(!this.isStoppingThePoolError(a))throw a}saveErrorFor(a,o){this.errors().push(r.PromisePoolError.createFrom(a,o))}async drained(){return await this.drainActiveTasks(),{errors:this.errors(),results:this.results()}}async drainActiveTasks(){await Promise.all(this.tasks())}}return oa.PromisePoolExecutor=i,oa}var Q0;function Hu(){if(Q0)return aa;Q0=1,Object.defineProperty(aa,"__esModule",{value:!0}),aa.PromisePool=void 0;const t=wS();class e{constructor(n){this.timeout=void 0,this.concurrency=10,this.items=n??[],this.errorHandler=void 0,this.onTaskStartedHandlers=[],this.onTaskFinishedHandlers=[],this.shouldResultsCorrespond=!1}withConcurrency(n){return this.concurrency=n,this}static withConcurrency(n){return new this().withConcurrency(n)}withTaskTimeout(n){return this.timeout=n,this}static withTaskTimeout(n){return new this().withTaskTimeout(n)}for(n){const i=new e(n).withConcurrency(this.concurrency);return typeof this.errorHandler=="function"&&i.handleError(this.errorHandler),typeof this.timeout=="number"?i.withTaskTimeout(this.timeout):i}static for(n){return new this().for(n)}handleError(n){return this.errorHandler=n,this}onTaskStarted(n){return this.onTaskStartedHandlers.push(n),this}onTaskFinished(n){return this.onTaskFinishedHandlers.push(n),this}useCorrespondingResults(){return this.shouldResultsCorrespond=!0,this}async process(n){return new t.PromisePoolExecutor().useConcurrency(this.concurrency).useCorrespondingResults(this.shouldResultsCorrespond).withTaskTimeout(this.timeout).withHandler(n).handleError(this.errorHandler).onTaskStarted(this.onTaskStartedHandlers).onTaskFinished(this.onTaskFinishedHandlers).for(this.items).start()}}return aa.PromisePool=e,e.notRun=Symbol("notRun"),e.failed=Symbol("failed"),aa}var mg={};Object.defineProperty(mg,"__esModule",{value:!0});var wg={};Object.defineProperty(wg,"__esModule",{value:!0});(function(t){var e=Ze&&Ze.__createBinding||(Object.create?function(i,s,a,o){o===void 0&&(o=a);var c=Object.getOwnPropertyDescriptor(s,a);(!c||("get"in c?!s.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return s[a]}}),Object.defineProperty(i,o,c)}:function(i,s,a,o){o===void 0&&(o=a),i[o]=s[a]}),r=Ze&&Ze.__exportStar||function(i,s){for(var a in i)a!=="default"&&!Object.prototype.hasOwnProperty.call(s,a)&&e(s,i,a)};Object.defineProperty(t,"__esModule",{value:!0});const n=Hu();t.default=n.PromisePool,r(mg,t),r(Hu(),t),r(lo,t),r(wg,t),r(ho,t),r(uo,t)})(bg);const vS=Symbol("not readable"),_S=Symbol("readable"),ES=Symbol("ended"),SS=Symbol("errored"),Ar={notReadable:vS,readable:_S,ended:ES,errored:SS};class AS{constructor(e,{size:r}={}){N(this,"_stream");N(this,"_error");N(this,"_state",Ar.notReadable);N(this,"_size");N(this,"_rejections",new Set);this._stream=e,this._size=r;const n=["_handleStreamEnd","_handleStreamError"];for(const i of n)Object.defineProperty(this,i,{configurable:!0,writable:!0,value:this[i].bind(this)});e.once("error",this._handleStreamError),e.once("end",this._handleStreamEnd),e.on("readable",()=>{this._state=Ar.readable})}get closed(){return this._state===Ar.ended}[Symbol.asyncIterator](){return this}async next(){switch(this._state){case Ar.notReadable:{let e,r;try{e=this._untilReadable(),r=this._untilEnd(),await Promise.race([e.promise,r.promise])}finally{e!=null&&e.close(),r!=null&&r.close()}return this.next()}case Ar.ended:return this.close(),{done:!0,value:void 0};case Ar.errored:throw this.close(),this._error;case Ar.readable:{const e=this._size?this._stream.read(this._size):this._stream.read();return e!==null?{done:!1,value:e}:(this._state=Ar.notReadable,await new Promise(r=>setTimeout(n=>n(!0),0,r)),this.next())}}}_untilReadable(){let e;const r=new Promise((i,s)=>{e=()=>{this._state=Ar.readable,this._rejections.delete(s),i()},this._state,Ar.readable,this._stream.once("readable",e),this._rejections.add(s)});return{close:()=>{e!=null&&this._stream.removeListener("readable",e)},promise:r}}_untilEnd(){let e;const r=new Promise((i,s)=>{e=()=>{this._state=Ar.ended,this._rejections.delete(s),i()},this._stream.once("end",e),this._rejections.add(s)});return{close:()=>{e!=null&&this._stream.removeListener("end",e)},promise:r}}return(){return this._state=Ar.ended,this.next()}throw(e){return this._error=e,this._state=Ar.errored,this.next()}close(e){this._stream.removeListener("end",this._handleStreamEnd),this._stream.removeListener("error",this._handleStreamError),this._state=Ar.ended,this._stream.destroy(e)}_handleStreamError(e){this._error=e,this._state=Ar.errored;for(const r of this._rejections)r(e)}_handleStreamEnd(){this._state=Ar.ended}get state(){return this._state}}class TS extends Ku.EventEmitter{constructor(r,n){super({captureRejections:!0});N(this,"tokenConfig");N(this,"api");N(this,"uploadID");N(this,"token");N(this,"chunkSize");N(this,"batchSize");N(this,"paused",!1);N(this,"isResume",!1);N(this,"uploadOptions");N(this,"arbundles");this.tokenConfig=r,this.arbundles=this.tokenConfig.irys.arbundles,this.api=n,this.token=this.tokenConfig.name,this.chunkSize=25e6,this.batchSize=5,this.uploadID=""}setResumeData(r){return r&&(this.uploadID=r,this.isResume=!0),this}getResumeData(){return this.uploadID}setChunkSize(r){if(r<1)throw new Error("Invalid chunk size (must be >=1)");return this.chunkSize=r,this}setBatchSize(r){if(r<1)throw new Error("Invalid batch size (must be >=1)");return this.batchSize=r,this}pause(){this.emit("pause"),this.paused=!0}resume(){this.paused=!1,this.emit("resume")}async uploadTransaction(r,n){return this.uploadOptions=n,this.arbundles.DataItem.isDataItem(r)?this.runUpload(r.getRaw()):this.runUpload(r)}async uploadData(r,n){return this.uploadOptions=n==null?void 0:n.upload,this.runUpload(r,{...n})}async runUpload(r,n){var f;let i=this.uploadID;const s=n===void 0,a={"x-chunking-version":"2"};let o;if(!i)o=await this.api.get(`/chunks/${this.token}/-1/-1`,{headers:a}),yr.checkAndThrow(o,"Getting upload token"),this.uploadID=i=o.data.id;else{if(o=await this.api.get(`/chunks/${this.token}/${i}/-1`,{headers:a}),o.status===404)throw new Error("Upload ID not found - your upload has probably expired.");if(yr.checkAndThrow(o,"Getting upload info"),this.chunkSize!=+o.data.size)throw new Error(`Chunk size not equal to that of a previous upload (${+o.data.size}).`)}const{max:c,min:u}=o.data;if(this.chunkSize<+u||this.chunkSize>+c)throw new Error(`Chunk size out of allowed range: ${u} - ${c}`);let h=0;const p=(d,y,w)=>new Promise(S=>{Ai(async B=>{await this.api.post(`/chunks/${this.token}/${i}/${y}`,d,{headers:{"Content-Type":"application/octet-stream",...a},maxBodyLength:1/0,maxContentLength:1/0}).then($=>{if(($==null?void 0:$.status)>=300){const k={res:$,id:w,offset:y,size:d.length};throw this.emit("chunkError",k),($==null?void 0:$.status)===402&&B(new Error("Not enough funds to send data")),k}this.emit("chunkUpload",{id:w,offset:y,size:d.length,totalUploaded:h+=d.length}),S({o:y,d:$})})})}),m=o.data.chunks??[],P=new ma.PassThrough;let M=ue.alloc(0),R=!1,E=!0;P.on("end",()=>R=!0),P.on("error",d=>{throw new Error(`Error processing readable: ${d}`)});const L=async d=>{for(;!R;){if(M.length>=d)return y=ue.from(M.slice(0,d)),M=M.slice(d),y;var y=P.read(d);if(y===null){await new Promise(w=>setTimeout(S=>S(!0),0,w));continue}if(y.length===d)return y;M=ue.concat([M,y])}for(;M.length>=d;)return y=ue.from(M.slice(0,d)),M=M.slice(d),y;return E=!1,M};let W,z;if(!s){W=this.arbundles.createData("",this.tokenConfig.getSigner(),{...n,anchor:(n==null?void 0:n.anchor)??ch.randomBytes(32).toString("base64").slice(0,32)});const d=W.getRaw();z=d.length,P.write(d),h-=d.length}if(ue.isBuffer(r))P.write(r),P.end();else if("pipe"in r)r.pipe(P);else throw new Error("Input data is not a buffer or a compatible stream (no .pipe method)");let D=0;const U=new Set;let Y=0,oe,X,ee;if(!s){X=new ma.PassThrough;const d=W.getRaw().length;if(this.chunkSize<z)throw new Error(`Configured chunk size is too small for transaction header! (${this.chunkSize} < ${z})`);oe=await L(this.chunkSize),Y++,D+=oe.length,X.write(oe.slice(d));const y=[this.arbundles.stringToBuffer("dataitem"),this.arbundles.stringToBuffer("1"),this.arbundles.stringToBuffer(W.signatureType.toString()),W.rawOwner,W.rawTarget,W.rawAnchor,W.rawTags,new AS(X)];ee=this.arbundles.deepHash(y)}let se=m.pop();for(;E;){if(this.paused&&await new Promise(w=>this.on("resume",()=>w(void 0))),se&&+se[0]-D<=this.chunkSize){const S=se[1],B=await L(S);s||X.write(B),D+=S,se=m.pop(),Y++,h+=S;continue}const d=await L(this.chunkSize);for(s||X.write(d);U.size>=this.batchSize;){const[w]=await Promise.race(U);U.delete(w)}const y=(async()=>await p(d,D,++Y))().then(w=>[y,w]);U.add(y),D+=d.length}if(X&&X.end(),await Promise.all(U),!s){const d=await ee,y=ue.from(await this.tokenConfig.getSigner().sign(d));oe.set(y,2),await p(oe,0,0)}const T=await this.api.post(`/chunks/${this.token}/${i}/-1`,null,{headers:{"Content-Type":"application/octet-stream",...a},timeout:((f=this.api.config)==null?void 0:f.timeout)??4e4*10});if(T.status===402)throw new Error("Not enough funds to send data");if(yr.checkAndThrow(T,"Finalising upload",[201]),T.status===201)throw new Error(T.data);return T.data.verify=yr.verifyReceipt.bind({},this.arbundles,T.data.data),this.emit("done",T),T}get completionPromise(){return new Promise(r=>this.on("done",r))}}const eh=5e7;class RS{constructor(e,r,n,i,s){N(this,"api");N(this,"token");N(this,"tokenConfig");N(this,"utils");N(this,"contentTypeOverride");N(this,"forceUseChunking");N(this,"arbundles");N(this,"irysTransaction");this.api=e,this.token=n,this.tokenConfig=i,this.arbundles=this.tokenConfig.irys.arbundles,this.utils=r,this.irysTransaction=s}async uploadTransaction(e,r){let n;const i=this.arbundles.DataItem.isDataItem(e);if(this.forceUseChunking||i&&e.getRaw().length>=eh||!i)n=await this.chunkedUploader.uploadTransaction(i?e.getRaw():e,r);else{const{url:s,timeout:a,headers:o}=this.api.getConfig(),c={"Content-Type":"application/octet-stream",...o};if(n=await this.api.post(new URL(`/tx/${this.token}`,s).toString(),e.getRaw(),{headers:c,timeout:a,maxBodyLength:1/0}),n.status===201)throw new Error(n.data)}switch(n.status){case 402:throw new Error("Not enough funds to send data");default:if(n.status>=400)throw new Error(`whilst uploading Irys transaction: ${n.status} ${n.statusText}`)}return n.data.verify=async()=>this.utils.verifyReceipt(n.data),n}async uploadData(e,r){if(typeof e=="string"&&(e=ue.from(e)),ue.isBuffer(e)&&e.length<=eh){const n=this.arbundles.createData(e,this.tokenConfig.getSigner(),{...r,anchor:(r==null?void 0:r.anchor)??Oi.randomBytes(32).toString("base64").slice(0,32)});return await n.sign(this.tokenConfig.getSigner()),(await this.uploadTransaction(n,{...r==null?void 0:r.upload})).data}return(await this.chunkedUploader.uploadData(e,r)).data}async concurrentUploader(e,r){const n=[],i=r!=null&&r.logFunction?r==null?void 0:r.logFunction:async o=>{},s=(r==null?void 0:r.concurrency)??5,a=await bg.PromisePool.for(e).withConcurrency(s>=1?s:5).handleError(async(o,c)=>{if(n.push(o),o.message==="Not enough funds to send data")throw o}).process(async(o,c,u)=>{await Ai(async h=>{try{const p=await this.processItem(o,r==null?void 0:r.itemOptions);return c%s==0&&await i(`Processed ${c} Items`),r!=null&&r.resultProcessor?await r.resultProcessor({item:o,res:p,i:c}):{item:o,res:p,i:c}}catch(p){throw(p==null?void 0:p.message)==="Not enough funds to send data"&&h(p),p}},{retries:3,minTimeout:1e3,maxTimeout:1e4})});return{errors:n,results:a.results}}async processItem(e,r){return this.arbundles.DataItem.isDataItem(e)?this.uploadTransaction(e,{...r==null?void 0:r.upload}):this.uploadData(e,r)}async generateManifest(e){const{items:r,indexFile:n}=e,i={manifest:"arweave/paths",version:"0.1.0",paths:{}};if(n){if(!r.has(n))throw new Error(`Unable to access item: ${n}`);i.index={path:n}}for(const[s,a]of r.entries())i.paths[s]={id:a};return i}get chunkedUploader(){return new TS(this.tokenConfig,this.api)}set useChunking(e){typeof e=="boolean"&&(this.forceUseChunking=e)}set contentType(e){this.contentTypeOverride=e}async uploadBundle(e,r){const n=(r==null?void 0:r.throwawayKey)??await this.arbundles.getCryptoDriver().generateJWK(),i=new wc(n),s=e.map(h=>this.arbundles.DataItem.isDataItem(h)?h:this.arbundles.createData(h,i)),a=await this.arbundles.bundleAndSignData(s,i),o=this.arbundles.createData(a.getRaw(),this.tokenConfig.getSigner(),{tags:[{name:"Bundle-Format",value:"binary"},{name:"Bundle-Version",value:"2.0.0"}]});await o.sign(this.tokenConfig.getSigner());const c=await this.uploadTransaction(o,r),u=Xe(ue.from(await this.arbundles.getCryptoDriver().hash(Xe.toBuffer(Xe(i.publicKey)))));return{...c,txs:s,throwawayKey:n,throwawayKeyAddress:u}}}class th extends RS{constructor(r){super(r.api,r.utils,r.token,r.tokenConfig,r.IrysTransaction);N(this,"irys");this.irys=r}async uploadFile(r,n){const s=(n!=null&&n.tags?n.tags.some(({name:a})=>a.toLowerCase()==="content-type"):!1)?n==null?void 0:n.tags:[...(n==null?void 0:n.tags)??[],{name:"Content-Type",value:r.type}];return this.uploadData(ue.from(await r.arrayBuffer()),{tags:s,...n})}async uploadFolder(r,n){const i=[],s=new Map,a=(n==null?void 0:n.throwawayKey)??await this.irys.arbundles.getCryptoDriver().generateJWK(),o=new wc(a);for(const p of r){const m=p.webkitRelativePath?p.webkitRelativePath:p.name,M=(p.tags?p.tags.some(({name:E})=>E.toLowerCase()==="content-type"):!1)?p.tags:[...p.tags??[],{name:"Content-Type",value:p.type}],R=this.irys.arbundles.createData(ue.from(await p.arrayBuffer()),o,{tags:M});await R.sign(o),i.push(R),s.set(m,R.id)}const c=await this.generateManifest({items:s,indexFile:n==null?void 0:n.indexFileRelPath}),u=this.irys.arbundles.createData(JSON.stringify(c),n!=null&&n.seperateManifestTx?this.irys.tokenConfig.getSigner():o,{tags:[{name:"Type",value:"manifest"},{name:"Content-Type",value:"application/x.arweave-manifest+json"},...(n==null?void 0:n.manifestTags)??[]]});(n==null?void 0:n.seperateManifestTx)===!0?(await u.sign(this.irys.tokenConfig.getSigner()),await this.uploadTransaction(u,{...n})):(await u.sign(o),i.push(u));const h=await this.uploadBundle(i,{...n});return{...h.data,manifestId:u.id,manifest:c,throwawayKey:h.throwawayKey,throwawayKeyAddress:h.throwawayKeyAddress,txs:h.txs}}}class PS extends Qu{constructor({url:r,token:n,wallet:i,config:s}){switch(r){case void 0:case"node1":r="https://node1.irys.xyz";break;case"node2":r="https://node2.irys.xyz";break;case"devnet":r="https://devnet.irys.xyz";break}const a=new URL(r);super({url:a,arbundles:sv});N(this,"tokenConfig");N(this,"uploader");N(this,"uploadFolder");N(this,"uploadFile");if(this.api=new w1({url:a,timeout:(s==null?void 0:s.timeout)??1e5,headers:s==null?void 0:s.headers}),this.tokenConfig=pS({irys:this,token:n.toLowerCase(),wallet:i==null?void 0:i.provider,providerUrl:(s==null?void 0:s.providerUrl)??(i==null?void 0:i.rpcUrl),contractAddress:s==null?void 0:s.contractAddress,providerName:i==null?void 0:i.name}),this.token=this.tokenConfig.name,a.host==="devnet.irys.network"&&!((s==null?void 0:s.providerUrl)??((i==null?void 0:i.rpcUrl)||this.tokenConfig.inheritsRPC)))throw new Error(`Using ${a.host} requires a dev/testnet RPC to be configured! see https://docs.irys.network/sdk/using-devnet`);this.utils=new yr(this.api,this.token,this.tokenConfig),this.uploader=new th(this),this.funder=new v1(this.utils),this.uploader=new th(this),this.provenance=new xS(this),this.transactions=new yS(this),this.address="Please run `await Irys.ready()`",this.uploadFolder=this.uploader.uploadFolder.bind(this.uploader),this.uploadFile=this.uploader.uploadFile.bind(this.uploader)}}const JS=PS;export{JS as WebIrys,JS as default};
